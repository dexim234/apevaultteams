function m2(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Dx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $x={exports:{}},ju={},Mx={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),g2=Symbol.for("react.portal"),p2=Symbol.for("react.fragment"),y2=Symbol.for("react.strict_mode"),x2=Symbol.for("react.profiler"),v2=Symbol.for("react.provider"),b2=Symbol.for("react.context"),w2=Symbol.for("react.forward_ref"),_2=Symbol.for("react.suspense"),k2=Symbol.for("react.memo"),N2=Symbol.for("react.lazy"),P0=Symbol.iterator;function E2(t){return t===null||typeof t!="object"?null:(t=P0&&t[P0]||t["@@iterator"],typeof t=="function"?t:null)}var Ox={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lx=Object.assign,Vx={};function xa(t,e,r){this.props=t,this.context=e,this.refs=Vx,this.updater=r||Ox}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fx(){}Fx.prototype=xa.prototype;function zf(t,e,r){this.props=t,this.context=e,this.refs=Vx,this.updater=r||Ox}var Wf=zf.prototype=new Fx;Wf.constructor=zf;Lx(Wf,xa.prototype);Wf.isPureReactComponent=!0;var R0=Array.isArray,Ux=Object.prototype.hasOwnProperty,Hf={current:null},Bx={key:!0,ref:!0,__self:!0,__source:!0};function zx(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ux.call(e,n)&&!Bx.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:tl,type:t,key:i,ref:o,props:s,_owner:Hf.current}}function j2(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qf(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function S2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var D0=/\/+/g;function Sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S2(""+t.key):e.toString(36)}function fc(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tl:case g2:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Sd(o,0):n,R0(s)?(r="",t!=null&&(r=t.replace(D0,"$&/")+"/"),fc(s,e,r,"",function(d){return d})):s!=null&&(qf(s)&&(s=j2(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(D0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",R0(t))for(var l=0;l<t.length;l++){i=t[l];var u=n+Sd(i,l);o+=fc(i,e,r,u,s)}else if(u=E2(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=n+Sd(i,l++),o+=fc(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vl(t,e,r){if(t==null)return t;var n=[],s=0;return fc(t,n,"","",function(i){return e.call(r,i,s++)}),n}function T2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},mc={transition:null},I2={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Hf};function Wx(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Vl,forEach:function(t,e,r){Vl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Vl(t,function(){e++}),e},toArray:function(t){return Vl(t,function(e){return e})||[]},only:function(t){if(!qf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=xa;Se.Fragment=p2;Se.Profiler=x2;Se.PureComponent=zf;Se.StrictMode=y2;Se.Suspense=_2;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I2;Se.act=Wx;Se.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Lx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ux.call(e,u)&&!Bx.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:tl,type:t.type,key:s,ref:i,props:n,_owner:o}};Se.createContext=function(t){return t={$$typeof:b2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:v2,_context:t},t.Consumer=t};Se.createElement=zx;Se.createFactory=function(t){var e=zx.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:w2,render:t}};Se.isValidElement=qf;Se.lazy=function(t){return{$$typeof:N2,_payload:{_status:-1,_result:t},_init:T2}};Se.memo=function(t,e){return{$$typeof:k2,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=mc.transition;mc.transition={};try{t()}finally{mc.transition=e}};Se.unstable_act=Wx;Se.useCallback=function(t,e){return rr.current.useCallback(t,e)};Se.useContext=function(t){return rr.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};Se.useEffect=function(t,e){return rr.current.useEffect(t,e)};Se.useId=function(){return rr.current.useId()};Se.useImperativeHandle=function(t,e,r){return rr.current.useImperativeHandle(t,e,r)};Se.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return rr.current.useMemo(t,e)};Se.useReducer=function(t,e,r){return rr.current.useReducer(t,e,r)};Se.useRef=function(t){return rr.current.useRef(t)};Se.useState=function(t){return rr.current.useState(t)};Se.useSyncExternalStore=function(t,e,r){return rr.current.useSyncExternalStore(t,e,r)};Se.useTransition=function(){return rr.current.useTransition()};Se.version="18.3.1";Mx.exports=Se;var P=Mx.exports;const Gf=Dx(P),C2=m2({__proto__:null,default:Gf},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2=P,P2=Symbol.for("react.element"),R2=Symbol.for("react.fragment"),D2=Object.prototype.hasOwnProperty,$2=A2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M2={key:!0,ref:!0,__self:!0,__source:!0};function Hx(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)D2.call(e,n)&&!M2.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:P2,type:t,key:i,ref:o,props:s,_owner:$2.current}}ju.Fragment=R2;ju.jsx=Hx;ju.jsxs=Hx;$x.exports=ju;var a=$x.exports,yh={},qx={exports:{}},wr={},Gx={exports:{}},Kx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var D=F.length;F.push(V);e:for(;0<D;){var W=D-1>>>1,$=F[W];if(0<s($,V))F[W]=V,F[D]=$,D=W;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var V=F[0],D=F.pop();if(D!==V){F[0]=D;e:for(var W=0,$=F.length,te=$>>>1;W<te;){var ue=2*(W+1)-1,le=F[ue],fe=ue+1,J=F[fe];if(0>s(le,D))fe<$&&0>s(J,le)?(F[W]=J,F[fe]=D,W=fe):(F[W]=le,F[ue]=D,W=ue);else if(fe<$&&0>s(J,D))F[W]=J,F[fe]=D,W=fe;else break e}}return V}function s(F,V){var D=F.sortIndex-V.sortIndex;return D!==0?D:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,g=null,m=3,b=!1,k=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(F){for(var V=r(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=F)n(d),V.sortIndex=V.expirationTime,e(u,V);else break;V=r(d)}}function R(F){if(v=!1,N(F),!k)if(r(u)!==null)k=!0,B(L);else{var V=r(d);V!==null&&q(R,V.startTime-F)}}function L(F,V){k=!1,v&&(v=!1,E(_),_=-1),b=!0;var D=m;try{for(N(V),g=r(u);g!==null&&(!(g.expirationTime>V)||F&&!S());){var W=g.callback;if(typeof W=="function"){g.callback=null,m=g.priorityLevel;var $=W(g.expirationTime<=V);V=t.unstable_now(),typeof $=="function"?g.callback=$:g===r(u)&&n(u),N(V)}else n(u);g=r(u)}if(g!==null)var te=!0;else{var ue=r(d);ue!==null&&q(R,ue.startTime-V),te=!1}return te}finally{g=null,m=D,b=!1}}var M=!1,I=null,_=-1,w=5,j=-1;function S(){return!(t.unstable_now()-j<w)}function A(){if(I!==null){var F=t.unstable_now();j=F;var V=!0;try{V=I(!0,F)}finally{V?x():(M=!1,I=null)}}else M=!1}var x;if(typeof y=="function")x=function(){y(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,U=H.port2;H.port1.onmessage=A,x=function(){U.postMessage(null)}}else x=function(){C(A,0)};function B(F){I=F,M||(M=!0,x())}function q(F,V){_=C(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,B(L))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var D=m;m=V;try{return F()}finally{m=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var D=m;m=F;try{return V()}finally{m=D}},t.unstable_scheduleCallback=function(F,V,D){var W=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?W+D:W):D=W,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=D+$,F={id:h++,callback:V,priorityLevel:F,startTime:D,expirationTime:$,sortIndex:-1},D>W?(F.sortIndex=D,e(d,F),r(u)===null&&F===r(d)&&(v?(E(_),_=-1):v=!0,q(R,D-W))):(F.sortIndex=$,e(u,F),k||b||(k=!0,B(L))),F},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(F){var V=m;return function(){var D=m;m=V;try{return F.apply(this,arguments)}finally{m=D}}}})(Kx);Gx.exports=Kx;var O2=Gx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2=P,vr=O2;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qx=new Set,_o={};function li(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(_o[t]=e,t=0;t<e.length;t++)Qx.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=Object.prototype.hasOwnProperty,V2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$0={},M0={};function F2(t){return xh.call(M0,t)?!0:xh.call($0,t)?!1:V2.test(t)?M0[t]=!0:($0[t]=!0,!1)}function U2(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B2(t,e,r,n){if(e===null||typeof e>"u"||U2(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nr(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kf=/[\-:]([a-z])/g;function Qf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kf,Qf);Dt[e]=new nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kf,Qf);Dt[e]=new nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kf,Qf);Dt[e]=new nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new nr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yf(t,e,r,n){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(B2(e,r,s,n)&&(r=null),n||s===null?F2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ln=L2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fl=Symbol.for("react.element"),Si=Symbol.for("react.portal"),Ti=Symbol.for("react.fragment"),Xf=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),Yx=Symbol.for("react.provider"),Xx=Symbol.for("react.context"),Jf=Symbol.for("react.forward_ref"),bh=Symbol.for("react.suspense"),wh=Symbol.for("react.suspense_list"),Zf=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),Jx=Symbol.for("react.offscreen"),O0=Symbol.iterator;function Ba(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Td;function Za(t){if(Td===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Td=e&&e[1]||""}return`
`+Td+t}var Id=!1;function Cd(t,e){if(!t||Id)return"";Id=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Id=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Za(t):""}function z2(t){switch(t.tag){case 5:return Za(t.type);case 16:return Za("Lazy");case 13:return Za("Suspense");case 19:return Za("SuspenseList");case 0:case 2:case 15:return t=Cd(t.type,!1),t;case 11:return t=Cd(t.type.render,!1),t;case 1:return t=Cd(t.type,!0),t;default:return""}}function _h(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ti:return"Fragment";case Si:return"Portal";case vh:return"Profiler";case Xf:return"StrictMode";case bh:return"Suspense";case wh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xx:return(t.displayName||"Context")+".Consumer";case Yx:return(t._context.displayName||"Context")+".Provider";case Jf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zf:return e=t.displayName||null,e!==null?e:_h(t.type)||"Memo";case Hn:e=t._payload,t=t._init;try{return _h(t(e))}catch{}}return null}function W2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _h(e);case 8:return e===Xf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function H2(t){var e=Zx(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ul(t){t._valueTracker||(t._valueTracker=H2(t))}function ev(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Zx(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Dc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var r=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function L0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=xs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tv(t,e){e=e.checked,e!=null&&Yf(t,"checked",e,!1)}function Nh(t,e){tv(t,e);var r=xs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Eh(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Eh(t,e,r){(e!=="number"||Dc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var eo=Array.isArray;function Fi(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+xs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function F0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ee(92));if(eo(r)){if(1<r.length)throw Error(ee(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:xs(r)}}function rv(t,e){var r=xs(e.value),n=xs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function U0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bl,sv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bl=Bl||document.createElement("div"),Bl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ko(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q2=["Webkit","ms","Moz","O"];Object.keys(ao).forEach(function(t){q2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ao[e]=ao[t]})});function iv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ao.hasOwnProperty(t)&&ao[t]?(""+e).trim():e+"px"}function av(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=iv(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var G2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(t,e){if(e){if(G2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=null;function em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ah=null,Ui=null,Bi=null;function B0(t){if(t=sl(t)){if(typeof Ah!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Au(e),Ah(t.stateNode,t.type,e))}}function ov(t){Ui?Bi?Bi.push(t):Bi=[t]:Ui=t}function lv(){if(Ui){var t=Ui,e=Bi;if(Bi=Ui=null,B0(t),e)for(t=0;t<e.length;t++)B0(e[t])}}function cv(t,e){return t(e)}function uv(){}var Ad=!1;function dv(t,e,r){if(Ad)return t(e,r);Ad=!0;try{return cv(t,e,r)}finally{Ad=!1,(Ui!==null||Bi!==null)&&(uv(),lv())}}function No(t,e){var r=t.stateNode;if(r===null)return null;var n=Au(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ee(231,e,typeof r));return r}var Ph=!1;if(Tn)try{var za={};Object.defineProperty(za,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{Ph=!1}function K2(t,e,r,n,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var oo=!1,$c=null,Mc=!1,Rh=null,Q2={onError:function(t){oo=!0,$c=t}};function Y2(t,e,r,n,s,i,o,l,u){oo=!1,$c=null,K2.apply(Q2,arguments)}function X2(t,e,r,n,s,i,o,l,u){if(Y2.apply(this,arguments),oo){if(oo){var d=$c;oo=!1,$c=null}else throw Error(ee(198));Mc||(Mc=!0,Rh=d)}}function ci(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function hv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function z0(t){if(ci(t)!==t)throw Error(ee(188))}function J2(t){var e=t.alternate;if(!e){if(e=ci(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return z0(s),t;if(i===n)return z0(s),e;i=i.sibling}throw Error(ee(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?t:e}function fv(t){return t=J2(t),t!==null?mv(t):null}function mv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mv(t);if(e!==null)return e;t=t.sibling}return null}var gv=vr.unstable_scheduleCallback,W0=vr.unstable_cancelCallback,Z2=vr.unstable_shouldYield,ek=vr.unstable_requestPaint,st=vr.unstable_now,tk=vr.unstable_getCurrentPriorityLevel,tm=vr.unstable_ImmediatePriority,pv=vr.unstable_UserBlockingPriority,Oc=vr.unstable_NormalPriority,rk=vr.unstable_LowPriority,yv=vr.unstable_IdlePriority,Su=null,Xr=null;function nk(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Su,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:ak,sk=Math.log,ik=Math.LN2;function ak(t){return t>>>=0,t===0?32:31-(sk(t)/ik|0)|0}var zl=64,Wl=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=to(l):(i&=o,i!==0&&(n=to(i)))}else o=r&~s,o!==0?n=to(o):i!==0&&(n=to(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Vr(e),s=1<<r,n|=t[r],e&=~s;return n}function ok(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Vr(i),l=1<<o,u=s[o];u===-1?(!(l&r)||l&n)&&(s[o]=ok(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xv(){var t=zl;return zl<<=1,!(zl&4194240)&&(zl=64),t}function Pd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=r}function ck(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Vr(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function rm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Vr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ve=0;function vv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bv,nm,wv,_v,kv,$h=!1,Hl=[],is=null,as=null,os=null,Eo=new Map,jo=new Map,Gn=[],uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H0(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(e.pointerId)}}function Wa(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=sl(e),e!==null&&nm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dk(t,e,r,n,s){switch(e){case"focusin":return is=Wa(is,t,e,r,n,s),!0;case"dragenter":return as=Wa(as,t,e,r,n,s),!0;case"mouseover":return os=Wa(os,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Eo.set(i,Wa(Eo.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,jo.set(i,Wa(jo.get(i)||null,t,e,r,n,s)),!0}return!1}function Nv(t){var e=Vs(t.target);if(e!==null){var r=ci(e);if(r!==null){if(e=r.tag,e===13){if(e=hv(r),e!==null){t.blockedOn=e,kv(t.priority,function(){wv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Mh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ch=n,r.target.dispatchEvent(n),Ch=null}else return e=sl(r),e!==null&&nm(e),t.blockedOn=r,!1;e.shift()}return!0}function q0(t,e,r){gc(t)&&r.delete(e)}function hk(){$h=!1,is!==null&&gc(is)&&(is=null),as!==null&&gc(as)&&(as=null),os!==null&&gc(os)&&(os=null),Eo.forEach(q0),jo.forEach(q0)}function Ha(t,e){t.blockedOn===e&&(t.blockedOn=null,$h||($h=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,hk)))}function So(t){function e(s){return Ha(s,t)}if(0<Hl.length){Ha(Hl[0],t);for(var r=1;r<Hl.length;r++){var n=Hl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(is!==null&&Ha(is,t),as!==null&&Ha(as,t),os!==null&&Ha(os,t),Eo.forEach(e),jo.forEach(e),r=0;r<Gn.length;r++)n=Gn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Gn.length&&(r=Gn[0],r.blockedOn===null);)Nv(r),r.blockedOn===null&&Gn.shift()}var zi=Ln.ReactCurrentBatchConfig,Vc=!0;function fk(t,e,r,n){var s=Ve,i=zi.transition;zi.transition=null;try{Ve=1,sm(t,e,r,n)}finally{Ve=s,zi.transition=i}}function mk(t,e,r,n){var s=Ve,i=zi.transition;zi.transition=null;try{Ve=4,sm(t,e,r,n)}finally{Ve=s,zi.transition=i}}function sm(t,e,r,n){if(Vc){var s=Mh(t,e,r,n);if(s===null)Bd(t,e,n,Fc,r),H0(t,n);else if(dk(s,t,e,r,n))n.stopPropagation();else if(H0(t,n),e&4&&-1<uk.indexOf(t)){for(;s!==null;){var i=sl(s);if(i!==null&&bv(i),i=Mh(t,e,r,n),i===null&&Bd(t,e,n,Fc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Bd(t,e,n,null,r)}}var Fc=null;function Mh(t,e,r,n){if(Fc=null,t=em(n),t=Vs(t),t!==null)if(e=ci(t),e===null)t=null;else if(r=e.tag,r===13){if(t=hv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fc=t,null}function Ev(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tk()){case tm:return 1;case pv:return 4;case Oc:case rk:return 16;case yv:return 536870912;default:return 16}default:return 16}}var Zn=null,im=null,pc=null;function jv(){if(pc)return pc;var t,e=im,r=e.length,n,s="value"in Zn?Zn.value:Zn.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return pc=s.slice(t,1<n?1-n:void 0)}function yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function G0(){return!1}function _r(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ql:G0,this.isPropagationStopped=G0,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},am=_r(va),nl=Xe({},va,{view:0,detail:0}),gk=_r(nl),Rd,Dd,qa,Tu=Xe({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(Rd=t.screenX-qa.screenX,Dd=t.screenY-qa.screenY):Dd=Rd=0,qa=t),Rd)},movementY:function(t){return"movementY"in t?t.movementY:Dd}}),K0=_r(Tu),pk=Xe({},Tu,{dataTransfer:0}),yk=_r(pk),xk=Xe({},nl,{relatedTarget:0}),$d=_r(xk),vk=Xe({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),bk=_r(vk),wk=Xe({},va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_k=_r(wk),kk=Xe({},va,{data:0}),Q0=_r(kk),Nk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jk[t])?!!e[t]:!1}function om(){return Sk}var Tk=Xe({},nl,{key:function(t){if(t.key){var e=Nk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(t){return t.type==="keypress"?yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ik=_r(Tk),Ck=Xe({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y0=_r(Ck),Ak=Xe({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),Pk=_r(Ak),Rk=Xe({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dk=_r(Rk),$k=Xe({},Tu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=_r($k),Ok=[9,13,27,32],lm=Tn&&"CompositionEvent"in window,lo=null;Tn&&"documentMode"in document&&(lo=document.documentMode);var Lk=Tn&&"TextEvent"in window&&!lo,Sv=Tn&&(!lm||lo&&8<lo&&11>=lo),X0=" ",J0=!1;function Tv(t,e){switch(t){case"keyup":return Ok.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ii=!1;function Vk(t,e){switch(t){case"compositionend":return Iv(e);case"keypress":return e.which!==32?null:(J0=!0,X0);case"textInput":return t=e.data,t===X0&&J0?null:t;default:return null}}function Fk(t,e){if(Ii)return t==="compositionend"||!lm&&Tv(t,e)?(t=jv(),pc=im=Zn=null,Ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sv&&e.locale!=="ko"?null:e.data;default:return null}}var Uk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Uk[t.type]:e==="textarea"}function Cv(t,e,r,n){ov(n),e=Uc(e,"onChange"),0<e.length&&(r=new am("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var co=null,To=null;function Bk(t){Uv(t,0)}function Iu(t){var e=Pi(t);if(ev(e))return t}function zk(t,e){if(t==="change")return e}var Av=!1;if(Tn){var Md;if(Tn){var Od="oninput"in document;if(!Od){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),Od=typeof ep.oninput=="function"}Md=Od}else Md=!1;Av=Md&&(!document.documentMode||9<document.documentMode)}function tp(){co&&(co.detachEvent("onpropertychange",Pv),To=co=null)}function Pv(t){if(t.propertyName==="value"&&Iu(To)){var e=[];Cv(e,To,t,em(t)),dv(Bk,e)}}function Wk(t,e,r){t==="focusin"?(tp(),co=e,To=r,co.attachEvent("onpropertychange",Pv)):t==="focusout"&&tp()}function Hk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Iu(To)}function qk(t,e){if(t==="click")return Iu(e)}function Gk(t,e){if(t==="input"||t==="change")return Iu(e)}function Kk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zr=typeof Object.is=="function"?Object.is:Kk;function Io(t,e){if(zr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xh.call(e,s)||!zr(t[s],e[s]))return!1}return!0}function rp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function np(t,e){var r=rp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rp(r)}}function Rv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dv(){for(var t=window,e=Dc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Dc(t.document)}return e}function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qk(t){var e=Dv(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Rv(r.ownerDocument.documentElement,r)){if(n!==null&&cm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=np(r,i);var o=np(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yk=Tn&&"documentMode"in document&&11>=document.documentMode,Ci=null,Oh=null,uo=null,Lh=!1;function sp(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lh||Ci==null||Ci!==Dc(n)||(n=Ci,"selectionStart"in n&&cm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),uo&&Io(uo,n)||(uo=n,n=Uc(Oh,"onSelect"),0<n.length&&(e=new am("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ci)))}function Gl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ai={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},Ld={},$v={};Tn&&($v=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function Cu(t){if(Ld[t])return Ld[t];if(!Ai[t])return t;var e=Ai[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in $v)return Ld[t]=e[r];return t}var Mv=Cu("animationend"),Ov=Cu("animationiteration"),Lv=Cu("animationstart"),Vv=Cu("transitionend"),Fv=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){Fv.set(t,e),li(e,[t])}for(var Vd=0;Vd<ip.length;Vd++){var Fd=ip[Vd],Xk=Fd.toLowerCase(),Jk=Fd[0].toUpperCase()+Fd.slice(1);Ns(Xk,"on"+Jk)}Ns(Mv,"onAnimationEnd");Ns(Ov,"onAnimationIteration");Ns(Lv,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(Vv,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));li("onBeforeInput",["compositionend","keypress","textInput","paste"]);li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function ap(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,X2(n,e,void 0,t),t.currentTarget=null}function Uv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;ap(s,l,d),i=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;ap(s,l,d),i=u}}}if(Mc)throw t=Rh,Mc=!1,Rh=null,t}function He(t,e){var r=e[zh];r===void 0&&(r=e[zh]=new Set);var n=t+"__bubble";r.has(n)||(Bv(e,t,2,!1),r.add(n))}function Ud(t,e,r){var n=0;e&&(n|=4),Bv(r,t,n,e)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Kl]){t[Kl]=!0,Qx.forEach(function(r){r!=="selectionchange"&&(Zk.has(r)||Ud(r,!1,t),Ud(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kl]||(e[Kl]=!0,Ud("selectionchange",!1,e))}}function Bv(t,e,r,n){switch(Ev(e)){case 1:var s=fk;break;case 4:s=mk;break;default:s=sm}r=s.bind(null,e,r,t),s=void 0,!Ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Bd(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Vs(l),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}l=l.parentNode}}n=n.return}dv(function(){var d=i,h=em(r),g=[];e:{var m=Fv.get(t);if(m!==void 0){var b=am,k=t;switch(t){case"keypress":if(yc(r)===0)break e;case"keydown":case"keyup":b=Ik;break;case"focusin":k="focus",b=$d;break;case"focusout":k="blur",b=$d;break;case"beforeblur":case"afterblur":b=$d;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=K0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Pk;break;case Mv:case Ov:case Lv:b=bk;break;case Vv:b=Dk;break;case"scroll":b=gk;break;case"wheel":b=Mk;break;case"copy":case"cut":case"paste":b=_k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Y0}var v=(e&4)!==0,C=!v&&t==="scroll",E=v?m!==null?m+"Capture":null:m;v=[];for(var y=d,N;y!==null;){N=y;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,E!==null&&(R=No(y,E),R!=null&&v.push(Ao(y,R,N)))),C)break;y=y.return}0<v.length&&(m=new b(m,k,null,r,h),g.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",m&&r!==Ch&&(k=r.relatedTarget||r.fromElement)&&(Vs(k)||k[In]))break e;if((b||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,b?(k=r.relatedTarget||r.toElement,b=d,k=k?Vs(k):null,k!==null&&(C=ci(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=d),b!==k)){if(v=K0,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Y0,R="onPointerLeave",E="onPointerEnter",y="pointer"),C=b==null?m:Pi(b),N=k==null?m:Pi(k),m=new v(R,y+"leave",b,r,h),m.target=C,m.relatedTarget=N,R=null,Vs(h)===d&&(v=new v(E,y+"enter",k,r,h),v.target=N,v.relatedTarget=C,R=v),C=R,b&&k)t:{for(v=b,E=k,y=0,N=v;N;N=_i(N))y++;for(N=0,R=E;R;R=_i(R))N++;for(;0<y-N;)v=_i(v),y--;for(;0<N-y;)E=_i(E),N--;for(;y--;){if(v===E||E!==null&&v===E.alternate)break t;v=_i(v),E=_i(E)}v=null}else v=null;b!==null&&op(g,m,b,v,!1),k!==null&&C!==null&&op(g,C,k,v,!0)}}e:{if(m=d?Pi(d):window,b=m.nodeName&&m.nodeName.toLowerCase(),b==="select"||b==="input"&&m.type==="file")var L=zk;else if(Z0(m))if(Av)L=Gk;else{L=Hk;var M=Wk}else(b=m.nodeName)&&b.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=qk);if(L&&(L=L(t,d))){Cv(g,L,r,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Eh(m,"number",m.value)}switch(M=d?Pi(d):window,t){case"focusin":(Z0(M)||M.contentEditable==="true")&&(Ci=M,Oh=d,uo=null);break;case"focusout":uo=Oh=Ci=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,sp(g,r,h);break;case"selectionchange":if(Yk)break;case"keydown":case"keyup":sp(g,r,h)}var I;if(lm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ii?Tv(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Sv&&r.locale!=="ko"&&(Ii||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ii&&(I=jv()):(Zn=h,im="value"in Zn?Zn.value:Zn.textContent,Ii=!0)),M=Uc(d,_),0<M.length&&(_=new Q0(_,t,null,r,h),g.push({event:_,listeners:M}),I?_.data=I:(I=Iv(r),I!==null&&(_.data=I)))),(I=Lk?Vk(t,r):Fk(t,r))&&(d=Uc(d,"onBeforeInput"),0<d.length&&(h=new Q0("onBeforeInput","beforeinput",null,r,h),g.push({event:h,listeners:d}),h.data=I))}Uv(g,e)})}function Ao(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Uc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=No(t,r),i!=null&&n.unshift(Ao(t,i,s)),i=No(t,e),i!=null&&n.push(Ao(t,i,s))),t=t.return}return n}function _i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&d!==null&&(l=d,s?(u=No(r,i),u!=null&&o.unshift(Ao(r,u,l))):s||(u=No(r,i),u!=null&&o.push(Ao(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var eN=/\r\n?/g,tN=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace(eN,`
`).replace(tN,"")}function Ql(t,e,r){if(e=lp(e),lp(t)!==e&&r)throw Error(ee(425))}function Bc(){}var Vh=null,Fh=null;function Uh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,rN=typeof clearTimeout=="function"?clearTimeout:void 0,cp=typeof Promise=="function"?Promise:void 0,nN=typeof queueMicrotask=="function"?queueMicrotask:typeof cp<"u"?function(t){return cp.resolve(null).then(t).catch(sN)}:Bh;function sN(t){setTimeout(function(){throw t})}function zd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),So(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);So(e)}function ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function up(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),Kr="__reactFiber$"+ba,Po="__reactProps$"+ba,In="__reactContainer$"+ba,zh="__reactEvents$"+ba,iN="__reactListeners$"+ba,aN="__reactHandles$"+ba;function Vs(t){var e=t[Kr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[In]||r[Kr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=up(t);t!==null;){if(r=t[Kr])return r;t=up(t)}return e}t=r,r=t.parentNode}return null}function sl(t){return t=t[Kr]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Au(t){return t[Po]||null}var Wh=[],Ri=-1;function Es(t){return{current:t}}function Ge(t){0>Ri||(t.current=Wh[Ri],Wh[Ri]=null,Ri--)}function ze(t,e){Ri++,Wh[Ri]=t.current,t.current=e}var vs={},qt=Es(vs),or=Es(!1),Ks=vs;function ea(t,e){var r=t.type.contextTypes;if(!r)return vs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function lr(t){return t=t.childContextTypes,t!=null}function zc(){Ge(or),Ge(qt)}function dp(t,e,r){if(qt.current!==vs)throw Error(ee(168));ze(qt,e),ze(or,r)}function zv(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ee(108,W2(t)||"Unknown",s));return Xe({},r,n)}function Wc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,Ks=qt.current,ze(qt,t),ze(or,or.current),!0}function hp(t,e,r){var n=t.stateNode;if(!n)throw Error(ee(169));r?(t=zv(t,e,Ks),n.__reactInternalMemoizedMergedChildContext=t,Ge(or),Ge(qt),ze(qt,t)):Ge(or),ze(or,r)}var bn=null,Pu=!1,Wd=!1;function Wv(t){bn===null?bn=[t]:bn.push(t)}function oN(t){Pu=!0,Wv(t)}function js(){if(!Wd&&bn!==null){Wd=!0;var t=0,e=Ve;try{var r=bn;for(Ve=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}bn=null,Pu=!1}catch(s){throw bn!==null&&(bn=bn.slice(t+1)),gv(tm,js),s}finally{Ve=e,Wd=!1}}return null}var Di=[],$i=0,Hc=null,qc=0,jr=[],Sr=0,Qs=null,wn=1,_n="";function $s(t,e){Di[$i++]=qc,Di[$i++]=Hc,Hc=t,qc=e}function Hv(t,e,r){jr[Sr++]=wn,jr[Sr++]=_n,jr[Sr++]=Qs,Qs=t;var n=wn;t=_n;var s=32-Vr(n)-1;n&=~(1<<s),r+=1;var i=32-Vr(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,wn=1<<32-Vr(e)+s|r<<s|n,_n=i+t}else wn=1<<i|r<<s|n,_n=t}function um(t){t.return!==null&&($s(t,1),Hv(t,1,0))}function dm(t){for(;t===Hc;)Hc=Di[--$i],Di[$i]=null,qc=Di[--$i],Di[$i]=null;for(;t===Qs;)Qs=jr[--Sr],jr[Sr]=null,_n=jr[--Sr],jr[Sr]=null,wn=jr[--Sr],jr[Sr]=null}var gr=null,fr=null,Ke=!1,Or=null;function qv(t,e){var r=Tr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function fp(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gr=t,fr=ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Qs!==null?{id:wn,overflow:_n}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Tr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,gr=t,fr=null,!0):!1;default:return!1}}function Hh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qh(t){if(Ke){var e=fr;if(e){var r=e;if(!fp(t,e)){if(Hh(t))throw Error(ee(418));e=ls(r.nextSibling);var n=gr;e&&fp(t,e)?qv(n,r):(t.flags=t.flags&-4097|2,Ke=!1,gr=t)}}else{if(Hh(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Ke=!1,gr=t}}}function mp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gr=t}function Yl(t){if(t!==gr)return!1;if(!Ke)return mp(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uh(t.type,t.memoizedProps)),e&&(e=fr)){if(Hh(t))throw Gv(),Error(ee(418));for(;e;)qv(t,e),e=ls(e.nextSibling)}if(mp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){fr=ls(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=gr?ls(t.stateNode.nextSibling):null;return!0}function Gv(){for(var t=fr;t;)t=ls(t.nextSibling)}function ta(){fr=gr=null,Ke=!1}function hm(t){Or===null?Or=[t]:Or.push(t)}var lN=Ln.ReactCurrentBatchConfig;function Ga(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,t))}return t}function Xl(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gp(t){var e=t._init;return e(t._payload)}function Kv(t){function e(E,y){if(t){var N=E.deletions;N===null?(E.deletions=[y],E.flags|=16):N.push(y)}}function r(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function n(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=hs(E,y),E.index=0,E.sibling=null,E}function i(E,y,N){return E.index=N,t?(N=E.alternate,N!==null?(N=N.index,N<y?(E.flags|=2,y):N):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,y,N,R){return y===null||y.tag!==6?(y=Xd(N,E.mode,R),y.return=E,y):(y=s(y,N),y.return=E,y)}function u(E,y,N,R){var L=N.type;return L===Ti?h(E,y,N.props.children,R,N.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hn&&gp(L)===y.type)?(R=s(y,N.props),R.ref=Ga(E,y,N),R.return=E,R):(R=Nc(N.type,N.key,N.props,null,E.mode,R),R.ref=Ga(E,y,N),R.return=E,R)}function d(E,y,N,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=Jd(N,E.mode,R),y.return=E,y):(y=s(y,N.children||[]),y.return=E,y)}function h(E,y,N,R,L){return y===null||y.tag!==7?(y=Hs(N,E.mode,R,L),y.return=E,y):(y=s(y,N),y.return=E,y)}function g(E,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xd(""+y,E.mode,N),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fl:return N=Nc(y.type,y.key,y.props,null,E.mode,N),N.ref=Ga(E,null,y),N.return=E,N;case Si:return y=Jd(y,E.mode,N),y.return=E,y;case Hn:var R=y._init;return g(E,R(y._payload),N)}if(eo(y)||Ba(y))return y=Hs(y,E.mode,N,null),y.return=E,y;Xl(E,y)}return null}function m(E,y,N,R){var L=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:l(E,y,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fl:return N.key===L?u(E,y,N,R):null;case Si:return N.key===L?d(E,y,N,R):null;case Hn:return L=N._init,m(E,y,L(N._payload),R)}if(eo(N)||Ba(N))return L!==null?null:h(E,y,N,R,null);Xl(E,N)}return null}function b(E,y,N,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(N)||null,l(y,E,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Fl:return E=E.get(R.key===null?N:R.key)||null,u(y,E,R,L);case Si:return E=E.get(R.key===null?N:R.key)||null,d(y,E,R,L);case Hn:var M=R._init;return b(E,y,N,M(R._payload),L)}if(eo(R)||Ba(R))return E=E.get(N)||null,h(y,E,R,L,null);Xl(y,R)}return null}function k(E,y,N,R){for(var L=null,M=null,I=y,_=y=0,w=null;I!==null&&_<N.length;_++){I.index>_?(w=I,I=null):w=I.sibling;var j=m(E,I,N[_],R);if(j===null){I===null&&(I=w);break}t&&I&&j.alternate===null&&e(E,I),y=i(j,y,_),M===null?L=j:M.sibling=j,M=j,I=w}if(_===N.length)return r(E,I),Ke&&$s(E,_),L;if(I===null){for(;_<N.length;_++)I=g(E,N[_],R),I!==null&&(y=i(I,y,_),M===null?L=I:M.sibling=I,M=I);return Ke&&$s(E,_),L}for(I=n(E,I);_<N.length;_++)w=b(I,E,_,N[_],R),w!==null&&(t&&w.alternate!==null&&I.delete(w.key===null?_:w.key),y=i(w,y,_),M===null?L=w:M.sibling=w,M=w);return t&&I.forEach(function(S){return e(E,S)}),Ke&&$s(E,_),L}function v(E,y,N,R){var L=Ba(N);if(typeof L!="function")throw Error(ee(150));if(N=L.call(N),N==null)throw Error(ee(151));for(var M=L=null,I=y,_=y=0,w=null,j=N.next();I!==null&&!j.done;_++,j=N.next()){I.index>_?(w=I,I=null):w=I.sibling;var S=m(E,I,j.value,R);if(S===null){I===null&&(I=w);break}t&&I&&S.alternate===null&&e(E,I),y=i(S,y,_),M===null?L=S:M.sibling=S,M=S,I=w}if(j.done)return r(E,I),Ke&&$s(E,_),L;if(I===null){for(;!j.done;_++,j=N.next())j=g(E,j.value,R),j!==null&&(y=i(j,y,_),M===null?L=j:M.sibling=j,M=j);return Ke&&$s(E,_),L}for(I=n(E,I);!j.done;_++,j=N.next())j=b(I,E,_,j.value,R),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?_:j.key),y=i(j,y,_),M===null?L=j:M.sibling=j,M=j);return t&&I.forEach(function(A){return e(E,A)}),Ke&&$s(E,_),L}function C(E,y,N,R){if(typeof N=="object"&&N!==null&&N.type===Ti&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Fl:e:{for(var L=N.key,M=y;M!==null;){if(M.key===L){if(L=N.type,L===Ti){if(M.tag===7){r(E,M.sibling),y=s(M,N.props.children),y.return=E,E=y;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hn&&gp(L)===M.type){r(E,M.sibling),y=s(M,N.props),y.ref=Ga(E,M,N),y.return=E,E=y;break e}r(E,M);break}else e(E,M);M=M.sibling}N.type===Ti?(y=Hs(N.props.children,E.mode,R,N.key),y.return=E,E=y):(R=Nc(N.type,N.key,N.props,null,E.mode,R),R.ref=Ga(E,y,N),R.return=E,E=R)}return o(E);case Si:e:{for(M=N.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){r(E,y.sibling),y=s(y,N.children||[]),y.return=E,E=y;break e}else{r(E,y);break}else e(E,y);y=y.sibling}y=Jd(N,E.mode,R),y.return=E,E=y}return o(E);case Hn:return M=N._init,C(E,y,M(N._payload),R)}if(eo(N))return k(E,y,N,R);if(Ba(N))return v(E,y,N,R);Xl(E,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(r(E,y.sibling),y=s(y,N),y.return=E,E=y):(r(E,y),y=Xd(N,E.mode,R),y.return=E,E=y),o(E)):r(E,y)}return C}var ra=Kv(!0),Qv=Kv(!1),Gc=Es(null),Kc=null,Mi=null,fm=null;function mm(){fm=Mi=Kc=null}function gm(t){var e=Gc.current;Ge(Gc),t._currentValue=e}function Gh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Wi(t,e){Kc=t,fm=Mi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ar=!0),t.firstContext=null)}function Ar(t){var e=t._currentValue;if(fm!==t)if(t={context:t,memoizedValue:e,next:null},Mi===null){if(Kc===null)throw Error(ee(308));Mi=t,Kc.dependencies={lanes:0,firstContext:t}}else Mi=Mi.next=t;return e}var Fs=null;function pm(t){Fs===null?Fs=[t]:Fs.push(t)}function Yv(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,pm(e)):(r.next=s.next,s.next=r),e.interleaved=r,Cn(t,n)}function Cn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var qn=!1;function ym(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,De&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Cn(t,r)}return s=n.interleaved,s===null?(e.next=e,pm(n)):(e.next=s.next,s.next=e),n.interleaved=e,Cn(t,r)}function xc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rm(t,r)}}function pp(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Qc(t,e,r,n){var s=t.updateQueue;qn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,h=d=u=null,l=i;do{var m=l.lane,b=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,v=l;switch(m=e,b=r,v.tag){case 1:if(k=v.payload,typeof k=="function"){g=k.call(b,g,m);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=v.payload,m=typeof k=="function"?k.call(b,g,m):k,m==null)break e;g=Xe({},g,m);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else b={eventTime:b,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=b,u=g):h=h.next=b,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xs|=o,t.lanes=o,t.memoizedState=g}}function yp(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ee(191,s));s.call(n)}}}var il={},Jr=Es(il),Ro=Es(il),Do=Es(il);function Us(t){if(t===il)throw Error(ee(174));return t}function xm(t,e){switch(ze(Do,e),ze(Ro,t),ze(Jr,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sh(e,t)}Ge(Jr),ze(Jr,e)}function na(){Ge(Jr),Ge(Ro),Ge(Do)}function Jv(t){Us(Do.current);var e=Us(Jr.current),r=Sh(e,t.type);e!==r&&(ze(Ro,t),ze(Jr,r))}function vm(t){Ro.current===t&&(Ge(Jr),Ge(Ro))}var Qe=Es(0);function Yc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hd=[];function bm(){for(var t=0;t<Hd.length;t++)Hd[t]._workInProgressVersionPrimary=null;Hd.length=0}var vc=Ln.ReactCurrentDispatcher,qd=Ln.ReactCurrentBatchConfig,Ys=0,Ye=null,dt=null,wt=null,Xc=!1,ho=!1,$o=0,cN=0;function Ft(){throw Error(ee(321))}function wm(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!zr(t[r],e[r]))return!1;return!0}function _m(t,e,r,n,s,i){if(Ys=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vc.current=t===null||t.memoizedState===null?fN:mN,t=r(n,s),ho){i=0;do{if(ho=!1,$o=0,25<=i)throw Error(ee(301));i+=1,wt=dt=null,e.updateQueue=null,vc.current=gN,t=r(n,s)}while(ho)}if(vc.current=Jc,e=dt!==null&&dt.next!==null,Ys=0,wt=dt=Ye=null,Xc=!1,e)throw Error(ee(300));return t}function km(){var t=$o!==0;return $o=0,t}function Gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ye.memoizedState=wt=t:wt=wt.next=t,wt}function Pr(){if(dt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=wt===null?Ye.memoizedState:wt.next;if(e!==null)wt=e,dt=t;else{if(t===null)throw Error(ee(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},wt===null?Ye.memoizedState=wt=t:wt=wt.next=t}return wt}function Mo(t,e){return typeof e=="function"?e(t):e}function Gd(t){var e=Pr(),r=e.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=t;var n=dt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,u=null,d=i;do{var h=d.lane;if((Ys&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=g,o=n):u=u.next=g,Ye.lanes|=h,Xs|=h}d=d.next}while(d!==null&&d!==i);u===null?o=n:u.next=l,zr(n,e.memoizedState)||(ar=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,Xs|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Kd(t){var e=Pr(),r=e.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);zr(i,e.memoizedState)||(ar=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Zv(){}function eb(t,e){var r=Ye,n=Pr(),s=e(),i=!zr(n.memoizedState,s);if(i&&(n.memoizedState=s,ar=!0),n=n.queue,Nm(nb.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,Oo(9,rb.bind(null,r,n,s,e),void 0,null),_t===null)throw Error(ee(349));Ys&30||tb(r,e,s)}return s}function tb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function rb(t,e,r,n){e.value=r,e.getSnapshot=n,sb(e)&&ib(t)}function nb(t,e,r){return r(function(){sb(e)&&ib(t)})}function sb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!zr(t,r)}catch{return!0}}function ib(t){var e=Cn(t,1);e!==null&&Fr(e,t,1,-1)}function xp(t){var e=Gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},e.queue=t,t=t.dispatch=hN.bind(null,Ye,t),[e.memoizedState,t]}function Oo(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ab(){return Pr().memoizedState}function bc(t,e,r,n){var s=Gr();Ye.flags|=t,s.memoizedState=Oo(1|e,r,void 0,n===void 0?null:n)}function Ru(t,e,r,n){var s=Pr();n=n===void 0?null:n;var i=void 0;if(dt!==null){var o=dt.memoizedState;if(i=o.destroy,n!==null&&wm(n,o.deps)){s.memoizedState=Oo(e,r,i,n);return}}Ye.flags|=t,s.memoizedState=Oo(1|e,r,i,n)}function vp(t,e){return bc(8390656,8,t,e)}function Nm(t,e){return Ru(2048,8,t,e)}function ob(t,e){return Ru(4,2,t,e)}function lb(t,e){return Ru(4,4,t,e)}function cb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ub(t,e,r){return r=r!=null?r.concat([t]):null,Ru(4,4,cb.bind(null,e,t),r)}function Em(){}function db(t,e){var r=Pr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&wm(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function hb(t,e){var r=Pr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&wm(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function fb(t,e,r){return Ys&21?(zr(r,e)||(r=xv(),Ye.lanes|=r,Xs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ar=!0),t.memoizedState=r)}function uN(t,e){var r=Ve;Ve=r!==0&&4>r?r:4,t(!0);var n=qd.transition;qd.transition={};try{t(!1),e()}finally{Ve=r,qd.transition=n}}function mb(){return Pr().memoizedState}function dN(t,e,r){var n=ds(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},gb(t))pb(e,r);else if(r=Yv(t,e,r,n),r!==null){var s=tr();Fr(r,t,n,s),yb(r,e,n)}}function hN(t,e,r){var n=ds(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(gb(t))pb(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,zr(l,o)){var u=e.interleaved;u===null?(s.next=s,pm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=Yv(t,e,s,n),r!==null&&(s=tr(),Fr(r,t,n,s),yb(r,e,n))}}function gb(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function pb(t,e){ho=Xc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function yb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rm(t,r)}}var Jc={readContext:Ar,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},fN={readContext:Ar,useCallback:function(t,e){return Gr().memoizedState=[t,e===void 0?null:e],t},useContext:Ar,useEffect:vp,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,bc(4194308,4,cb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var r=Gr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Gr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=dN.bind(null,Ye,t),[n.memoizedState,t]},useRef:function(t){var e=Gr();return t={current:t},e.memoizedState=t},useState:xp,useDebugValue:Em,useDeferredValue:function(t){return Gr().memoizedState=t},useTransition:function(){var t=xp(!1),e=t[0];return t=uN.bind(null,t[1]),Gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ye,s=Gr();if(Ke){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=e(),_t===null)throw Error(ee(349));Ys&30||tb(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,vp(nb.bind(null,n,i,t),[t]),n.flags|=2048,Oo(9,rb.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Gr(),e=_t.identifierPrefix;if(Ke){var r=_n,n=wn;r=(n&~(1<<32-Vr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=$o++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=cN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mN={readContext:Ar,useCallback:db,useContext:Ar,useEffect:Nm,useImperativeHandle:ub,useInsertionEffect:ob,useLayoutEffect:lb,useMemo:hb,useReducer:Gd,useRef:ab,useState:function(){return Gd(Mo)},useDebugValue:Em,useDeferredValue:function(t){var e=Pr();return fb(e,dt.memoizedState,t)},useTransition:function(){var t=Gd(Mo)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:Zv,useSyncExternalStore:eb,useId:mb,unstable_isNewReconciler:!1},gN={readContext:Ar,useCallback:db,useContext:Ar,useEffect:Nm,useImperativeHandle:ub,useInsertionEffect:ob,useLayoutEffect:lb,useMemo:hb,useReducer:Kd,useRef:ab,useState:function(){return Kd(Mo)},useDebugValue:Em,useDeferredValue:function(t){var e=Pr();return dt===null?e.memoizedState=t:fb(e,dt.memoizedState,t)},useTransition:function(){var t=Kd(Mo)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:Zv,useSyncExternalStore:eb,useId:mb,unstable_isNewReconciler:!1};function $r(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Kh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Xe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Du={isMounted:function(t){return(t=t._reactInternals)?ci(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=tr(),s=ds(t),i=Sn(n,s);i.payload=e,r!=null&&(i.callback=r),e=cs(t,i,s),e!==null&&(Fr(e,t,s,n),xc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=tr(),s=ds(t),i=Sn(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=cs(t,i,s),e!==null&&(Fr(e,t,s,n),xc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=tr(),n=ds(t),s=Sn(r,n);s.tag=2,e!=null&&(s.callback=e),e=cs(t,s,n),e!==null&&(Fr(e,t,n,r),xc(e,t,n))}};function bp(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Io(r,n)||!Io(s,i):!0}function xb(t,e,r){var n=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=Ar(i):(s=lr(e)?Ks:qt.current,n=e.contextTypes,i=(n=n!=null)?ea(t,s):vs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Du,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wp(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Du.enqueueReplaceState(e,e.state,null)}function Qh(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ym(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ar(i):(i=lr(e)?Ks:qt.current,s.context=ea(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Kh(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Du.enqueueReplaceState(s,s.state,null),Qc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var r="",n=e;do r+=z2(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Yh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var pN=typeof WeakMap=="function"?WeakMap:Map;function vb(t,e,r){r=Sn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){eu||(eu=!0,of=n),Yh(t,e)},r}function bb(t,e,r){r=Sn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Yh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Yh(t,e),typeof n!="function"&&(us===null?us=new Set([this]):us.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function _p(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new pN;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=CN.bind(null,t,e,r),e.then(t,t))}function kp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Np(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Sn(-1,1),e.tag=2,cs(r,e,1))),r.lanes|=1),t)}var yN=Ln.ReactCurrentOwner,ar=!1;function Zt(t,e,r,n){e.child=t===null?Qv(e,null,r,n):ra(e,t.child,r,n)}function Ep(t,e,r,n,s){r=r.render;var i=e.ref;return Wi(e,s),n=_m(t,e,r,n,i,s),r=km(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(Ke&&r&&um(e),e.flags|=1,Zt(t,e,n,s),e.child)}function jp(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Rm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,wb(t,e,i,n,s)):(t=Nc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Io,r(o,n)&&t.ref===e.ref)return An(t,e,s)}return e.flags|=1,t=hs(i,n),t.ref=e.ref,t.return=e,e.child=t}function wb(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Io(i,n)&&t.ref===e.ref)if(ar=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(ar=!0);else return e.lanes=t.lanes,An(t,e,s)}return Xh(t,e,r,n,s)}function _b(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Li,hr),hr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Li,hr),hr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ze(Li,hr),hr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ze(Li,hr),hr|=n;return Zt(t,e,s,r),e.child}function kb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Xh(t,e,r,n,s){var i=lr(r)?Ks:qt.current;return i=ea(e,i),Wi(e,s),r=_m(t,e,r,n,i,s),n=km(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(Ke&&n&&um(e),e.flags|=1,Zt(t,e,r,s),e.child)}function Sp(t,e,r,n,s){if(lr(r)){var i=!0;Wc(e)}else i=!1;if(Wi(e,s),e.stateNode===null)wc(t,e),xb(e,r,n),Qh(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ar(d):(d=lr(r)?Ks:qt.current,d=ea(e,d));var h=r.getDerivedStateFromProps,g=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==d)&&wp(e,o,n,d),qn=!1;var m=e.memoizedState;o.state=m,Qc(e,n,o,s),u=e.memoizedState,l!==n||m!==u||or.current||qn?(typeof h=="function"&&(Kh(e,r,h,n),u=e.memoizedState),(l=qn||bp(e,r,l,n,m,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Xv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:$r(e.type,l),o.props=d,g=e.pendingProps,m=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Ar(u):(u=lr(r)?Ks:qt.current,u=ea(e,u));var b=r.getDerivedStateFromProps;(h=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==u)&&wp(e,o,n,u),qn=!1,m=e.memoizedState,o.state=m,Qc(e,n,o,s);var k=e.memoizedState;l!==g||m!==k||or.current||qn?(typeof b=="function"&&(Kh(e,r,b,n),k=e.memoizedState),(d=qn||bp(e,r,d,n,m,k,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=k),o.props=n,o.state=k,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Jh(t,e,r,n,i,s)}function Jh(t,e,r,n,s,i){kb(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&hp(e,r,!1),An(t,e,i);n=e.stateNode,yN.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ra(e,t.child,null,i),e.child=ra(e,null,l,i)):Zt(t,e,l,i),e.memoizedState=n.state,s&&hp(e,r,!0),e.child}function Nb(t){var e=t.stateNode;e.pendingContext?dp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dp(t,e.context,!1),xm(t,e.containerInfo)}function Tp(t,e,r,n,s){return ta(),hm(s),e.flags|=256,Zt(t,e,r,n),e.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ef(t){return{baseLanes:t,cachePool:null,transitions:null}}function Eb(t,e,r){var n=e.pendingProps,s=Qe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ze(Qe,s&1),t===null)return qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ou(o,n,0,null),t=Hs(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ef(r),e.memoizedState=Zh,t):jm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xN(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=hs(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hs(l,i):(i=Hs(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?ef(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Zh,n}return i=t.child,t=i.sibling,n=hs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function jm(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jl(t,e,r,n){return n!==null&&hm(n),ra(e,t.child,null,r),t=jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xN(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Qd(Error(ee(422))),Jl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ou({mode:"visible",children:n.children},s,0,null),i=Hs(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&ra(e,t.child,null,o),e.child.memoizedState=ef(o),e.memoizedState=Zh,i);if(!(e.mode&1))return Jl(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ee(419)),n=Qd(i,n,void 0),Jl(t,e,o,n)}if(l=(o&t.childLanes)!==0,ar||l){if(n=_t,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cn(t,s),Fr(n,t,s,-1))}return Pm(),n=Qd(Error(ee(421))),Jl(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=AN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fr=ls(s.nextSibling),gr=e,Ke=!0,Or=null,t!==null&&(jr[Sr++]=wn,jr[Sr++]=_n,jr[Sr++]=Qs,wn=t.id,_n=t.overflow,Qs=e),e=jm(e,n.children),e.flags|=4096,e)}function Ip(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Gh(t.return,e,r)}function Yd(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function jb(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Zt(t,e,n.children,r),n=Qe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ip(t,r,e);else if(t.tag===19)Ip(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ze(Qe,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Yc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Yd(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Yd(e,!0,r,null,i);break;case"together":Yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Xs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,r=hs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=hs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function vN(t,e,r){switch(e.tag){case 3:Nb(e),ta();break;case 5:Jv(e);break;case 1:lr(e.type)&&Wc(e);break;case 4:xm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ze(Gc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ze(Qe,Qe.current&1),e.flags|=128,null):r&e.child.childLanes?Eb(t,e,r):(ze(Qe,Qe.current&1),t=An(t,e,r),t!==null?t.sibling:null);ze(Qe,Qe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return jb(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(Qe,Qe.current),n)break;return null;case 22:case 23:return e.lanes=0,_b(t,e,r)}return An(t,e,r)}var Sb,tf,Tb,Ib;Sb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tf=function(){};Tb=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Us(Jr.current);var i=null;switch(r){case"input":s=kh(t,s),n=kh(t,n),i=[];break;case"select":s=Xe({},s,{value:void 0}),n=Xe({},n,{value:void 0}),i=[];break;case"textarea":s=jh(t,s),n=jh(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Bc)}Th(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var u=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_o.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&He("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ib=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ka(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function bN(t,e,r){var n=e.pendingProps;switch(dm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return lr(e.type)&&zc(),Ut(e),null;case 3:return n=e.stateNode,na(),Ge(or),Ge(qt),bm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(uf(Or),Or=null))),tf(t,e),Ut(e),null;case 5:vm(e);var s=Us(Do.current);if(r=e.type,t!==null&&e.stateNode!=null)Tb(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ee(166));return Ut(e),null}if(t=Us(Jr.current),Yl(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Kr]=e,n[Po]=i,t=(e.mode&1)!==0,r){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(s=0;s<ro.length;s++)He(ro[s],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":L0(n,i),He("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},He("invalid",n);break;case"textarea":F0(n,i),He("invalid",n)}Th(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ql(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ql(n.textContent,l,t),s=["children",""+l]):_o.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&He("scroll",n)}switch(r){case"input":Ul(n),V0(n,i,!0);break;case"textarea":Ul(n),U0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Bc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Kr]=e,t[Po]=n,Sb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ih(r,n),r){case"dialog":He("cancel",t),He("close",t),s=n;break;case"iframe":case"object":case"embed":He("load",t),s=n;break;case"video":case"audio":for(s=0;s<ro.length;s++)He(ro[s],t);s=n;break;case"source":He("error",t),s=n;break;case"img":case"image":case"link":He("error",t),He("load",t),s=n;break;case"details":He("toggle",t),s=n;break;case"input":L0(t,n),s=kh(t,n),He("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Xe({},n,{value:void 0}),He("invalid",t);break;case"textarea":F0(t,n),s=jh(t,n),He("invalid",t);break;default:s=n}Th(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?av(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sv(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&ko(t,u):typeof u=="number"&&ko(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_o.hasOwnProperty(i)?u!=null&&i==="onScroll"&&He("scroll",t):u!=null&&Yf(t,i,u,o))}switch(r){case"input":Ul(t),V0(t,n,!1);break;case"textarea":Ul(t),U0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+xs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Fi(t,!!n.multiple,i,!1):n.defaultValue!=null&&Fi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)Ib(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ee(166));if(r=Us(Do.current),Us(Jr.current),Yl(e)){if(n=e.stateNode,r=e.memoizedProps,n[Kr]=e,(i=n.nodeValue!==r)&&(t=gr,t!==null))switch(t.tag){case 3:Ql(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ql(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kr]=e,e.stateNode=n}return Ut(e),null;case 13:if(Ge(Qe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&fr!==null&&e.mode&1&&!(e.flags&128))Gv(),ta(),e.flags|=98560,i=!1;else if(i=Yl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Kr]=e}else ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),i=!1}else Or!==null&&(uf(Or),Or=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?ht===0&&(ht=3):Pm())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return na(),tf(t,e),t===null&&Co(e.stateNode.containerInfo),Ut(e),null;case 10:return gm(e.type._context),Ut(e),null;case 17:return lr(e.type)&&zc(),Ut(e),null;case 19:if(Ge(Qe),i=e.memoizedState,i===null)return Ut(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Ka(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yc(t),o!==null){for(e.flags|=128,Ka(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ze(Qe,Qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>ia&&(e.flags|=128,n=!0,Ka(i,!1),e.lanes=4194304)}else{if(!n)if(t=Yc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ka(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return Ut(e),null}else 2*st()-i.renderingStartTime>ia&&r!==1073741824&&(e.flags|=128,n=!0,Ka(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,r=Qe.current,ze(Qe,n?r&1|2:r&1),e):(Ut(e),null);case 22:case 23:return Am(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?hr&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function wN(t,e){switch(dm(e),e.tag){case 1:return lr(e.type)&&zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return na(),Ge(or),Ge(qt),bm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vm(e),null;case 13:if(Ge(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Qe),null;case 4:return na(),null;case 10:return gm(e.type._context),null;case 22:case 23:return Am(),null;case 24:return null;default:return null}}var Zl=!1,Wt=!1,_N=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Oi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rt(t,e,n)}else r.current=null}function rf(t,e,r){try{r()}catch(n){rt(t,e,n)}}var Cp=!1;function kN(t,e){if(Vh=Vc,t=Dv(),cm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,d=0,h=0,g=t,m=null;t:for(;;){for(var b;g!==r||s!==0&&g.nodeType!==3||(l=o+s),g!==i||n!==0&&g.nodeType!==3||(u=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(b=g.firstChild)!==null;)m=g,g=b;for(;;){if(g===t)break t;if(m===r&&++d===s&&(l=o),m===i&&++h===n&&(u=o),(b=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=b}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fh={focusedElem:t,selectionRange:r},Vc=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var v=k.memoizedProps,C=k.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:$r(e.type,v),C);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(R){rt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return k=Cp,Cp=!1,k}function fo(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&rf(e,r,i)}s=s.next}while(s!==n)}}function $u(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function nf(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Cb(t){var e=t.alternate;e!==null&&(t.alternate=null,Cb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kr],delete e[Po],delete e[zh],delete e[iN],delete e[aN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ab(t){return t.tag===5||t.tag===3||t.tag===4}function Ap(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ab(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Bc));else if(n!==4&&(t=t.child,t!==null))for(sf(t,e,r),t=t.sibling;t!==null;)sf(t,e,r),t=t.sibling}function af(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(af(t,e,r),t=t.sibling;t!==null;)af(t,e,r),t=t.sibling}var It=null,Mr=!1;function Bn(t,e,r){for(r=r.child;r!==null;)Pb(t,e,r),r=r.sibling}function Pb(t,e,r){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Su,r)}catch{}switch(r.tag){case 5:Wt||Oi(r,e);case 6:var n=It,s=Mr;It=null,Bn(t,e,r),It=n,Mr=s,It!==null&&(Mr?(t=It,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):It.removeChild(r.stateNode));break;case 18:It!==null&&(Mr?(t=It,r=r.stateNode,t.nodeType===8?zd(t.parentNode,r):t.nodeType===1&&zd(t,r),So(t)):zd(It,r.stateNode));break;case 4:n=It,s=Mr,It=r.stateNode.containerInfo,Mr=!0,Bn(t,e,r),It=n,Mr=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rf(r,e,o),s=s.next}while(s!==n)}Bn(t,e,r);break;case 1:if(!Wt&&(Oi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){rt(r,e,l)}Bn(t,e,r);break;case 21:Bn(t,e,r);break;case 22:r.mode&1?(Wt=(n=Wt)||r.memoizedState!==null,Bn(t,e,r),Wt=n):Bn(t,e,r);break;default:Bn(t,e,r)}}function Pp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new _N),e.forEach(function(n){var s=PN.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Dr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Mr=!1;break e;case 3:It=l.stateNode.containerInfo,Mr=!0;break e;case 4:It=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(It===null)throw Error(ee(160));Pb(i,o,s),It=null,Mr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){rt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rb(e,t),e=e.sibling}function Rb(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),qr(t),n&4){try{fo(3,t,t.return),$u(3,t)}catch(v){rt(t,t.return,v)}try{fo(5,t,t.return)}catch(v){rt(t,t.return,v)}}break;case 1:Dr(e,t),qr(t),n&512&&r!==null&&Oi(r,r.return);break;case 5:if(Dr(e,t),qr(t),n&512&&r!==null&&Oi(r,r.return),t.flags&32){var s=t.stateNode;try{ko(s,"")}catch(v){rt(t,t.return,v)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&tv(s,i),Ih(l,o);var d=Ih(l,i);for(o=0;o<u.length;o+=2){var h=u[o],g=u[o+1];h==="style"?av(s,g):h==="dangerouslySetInnerHTML"?sv(s,g):h==="children"?ko(s,g):Yf(s,h,g,d)}switch(l){case"input":Nh(s,i);break;case"textarea":rv(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Fi(s,!!i.multiple,b,!1):m!==!!i.multiple&&(i.defaultValue!=null?Fi(s,!!i.multiple,i.defaultValue,!0):Fi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Po]=i}catch(v){rt(t,t.return,v)}}break;case 6:if(Dr(e,t),qr(t),n&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){rt(t,t.return,v)}}break;case 3:if(Dr(e,t),qr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(v){rt(t,t.return,v)}break;case 4:Dr(e,t),qr(t);break;case 13:Dr(e,t),qr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Im=st())),n&4&&Pp(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Wt=(d=Wt)||h,Dr(e,t),Wt=d):Dr(e,t),qr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(g=ie=h;ie!==null;){switch(m=ie,b=m.child,m.tag){case 0:case 11:case 14:case 15:fo(4,m,m.return);break;case 1:Oi(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(v){rt(n,r,v)}}break;case 5:Oi(m,m.return);break;case 22:if(m.memoizedState!==null){Dp(g);continue}}b!==null?(b.return=m,ie=b):Dp(g)}h=h.sibling}e:for(h=null,g=t;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=iv("display",o))}catch(v){rt(t,t.return,v)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(v){rt(t,t.return,v)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Dr(e,t),qr(t),n&4&&Pp(t);break;case 21:break;default:Dr(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ab(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ko(s,""),n.flags&=-33);var i=Ap(t);af(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ap(t);sf(t,l,o);break;default:throw Error(ee(161))}}catch(u){rt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NN(t,e,r){ie=t,Db(t)}function Db(t,e,r){for(var n=(t.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Zl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Wt;l=Zl;var d=Wt;if(Zl=o,(Wt=u)&&!d)for(ie=s;ie!==null;)o=ie,u=o.child,o.tag===22&&o.memoizedState!==null?$p(s):u!==null?(u.return=o,ie=u):$p(s);for(;i!==null;)ie=i,Db(i),i=i.sibling;ie=s,Zl=l,Wt=d}Rp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Rp(t)}}function Rp(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||$u(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Wt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:$r(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yp(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}yp(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&So(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Wt||e.flags&512&&nf(e)}catch(m){rt(e,e.return,m)}}if(e===t){ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,ie=r;break}ie=e.return}}function Dp(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ie=r;break}ie=e.return}}function $p(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{$u(4,e)}catch(u){rt(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){rt(e,s,u)}}var i=e.return;try{nf(e)}catch(u){rt(e,i,u)}break;case 5:var o=e.return;try{nf(e)}catch(u){rt(e,o,u)}}}catch(u){rt(e,e.return,u)}if(e===t){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var EN=Math.ceil,Zc=Ln.ReactCurrentDispatcher,Sm=Ln.ReactCurrentOwner,Cr=Ln.ReactCurrentBatchConfig,De=0,_t=null,ct=null,Pt=0,hr=0,Li=Es(0),ht=0,Lo=null,Xs=0,Mu=0,Tm=0,mo=null,sr=null,Im=0,ia=1/0,vn=null,eu=!1,of=null,us=null,ec=!1,es=null,tu=0,go=0,lf=null,_c=-1,kc=0;function tr(){return De&6?st():_c!==-1?_c:_c=st()}function ds(t){return t.mode&1?De&2&&Pt!==0?Pt&-Pt:lN.transition!==null?(kc===0&&(kc=xv()),kc):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Ev(t.type)),t):1}function Fr(t,e,r,n){if(50<go)throw go=0,lf=null,Error(ee(185));rl(t,r,n),(!(De&2)||t!==_t)&&(t===_t&&(!(De&2)&&(Mu|=r),ht===4&&Kn(t,Pt)),cr(t,n),r===1&&De===0&&!(e.mode&1)&&(ia=st()+500,Pu&&js()))}function cr(t,e){var r=t.callbackNode;lk(t,e);var n=Lc(t,t===_t?Pt:0);if(n===0)r!==null&&W0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&W0(r),e===1)t.tag===0?oN(Mp.bind(null,t)):Wv(Mp.bind(null,t)),nN(function(){!(De&6)&&js()}),r=null;else{switch(vv(n)){case 1:r=tm;break;case 4:r=pv;break;case 16:r=Oc;break;case 536870912:r=yv;break;default:r=Oc}r=Bb(r,$b.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function $b(t,e){if(_c=-1,kc=0,De&6)throw Error(ee(327));var r=t.callbackNode;if(Hi()&&t.callbackNode!==r)return null;var n=Lc(t,t===_t?Pt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ru(t,n);else{e=n;var s=De;De|=2;var i=Ob();(_t!==t||Pt!==e)&&(vn=null,ia=st()+500,Ws(t,e));do try{TN();break}catch(l){Mb(t,l)}while(!0);mm(),Zc.current=i,De=s,ct!==null?e=0:(_t=null,Pt=0,e=ht)}if(e!==0){if(e===2&&(s=Dh(t),s!==0&&(n=s,e=cf(t,s))),e===1)throw r=Lo,Ws(t,0),Kn(t,n),cr(t,st()),r;if(e===6)Kn(t,n);else{if(s=t.current.alternate,!(n&30)&&!jN(s)&&(e=ru(t,n),e===2&&(i=Dh(t),i!==0&&(n=i,e=cf(t,i))),e===1))throw r=Lo,Ws(t,0),Kn(t,n),cr(t,st()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ee(345));case 2:Ms(t,sr,vn);break;case 3:if(Kn(t,n),(n&130023424)===n&&(e=Im+500-st(),10<e)){if(Lc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){tr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bh(Ms.bind(null,t,sr,vn),e);break}Ms(t,sr,vn);break;case 4:if(Kn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Vr(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=st()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*EN(n/1960))-n,10<n){t.timeoutHandle=Bh(Ms.bind(null,t,sr,vn),n);break}Ms(t,sr,vn);break;case 5:Ms(t,sr,vn);break;default:throw Error(ee(329))}}}return cr(t,st()),t.callbackNode===r?$b.bind(null,t):null}function cf(t,e){var r=mo;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=ru(t,e),t!==2&&(e=sr,sr=r,e!==null&&uf(e)),t}function uf(t){sr===null?sr=t:sr.push.apply(sr,t)}function jN(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!zr(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kn(t,e){for(e&=~Tm,e&=~Mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vr(e),n=1<<r;t[r]=-1,e&=~n}}function Mp(t){if(De&6)throw Error(ee(327));Hi();var e=Lc(t,0);if(!(e&1))return cr(t,st()),null;var r=ru(t,e);if(t.tag!==0&&r===2){var n=Dh(t);n!==0&&(e=n,r=cf(t,n))}if(r===1)throw r=Lo,Ws(t,0),Kn(t,e),cr(t,st()),r;if(r===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ms(t,sr,vn),cr(t,st()),null}function Cm(t,e){var r=De;De|=1;try{return t(e)}finally{De=r,De===0&&(ia=st()+500,Pu&&js())}}function Js(t){es!==null&&es.tag===0&&!(De&6)&&Hi();var e=De;De|=1;var r=Cr.transition,n=Ve;try{if(Cr.transition=null,Ve=1,t)return t()}finally{Ve=n,Cr.transition=r,De=e,!(De&6)&&js()}}function Am(){hr=Li.current,Ge(Li)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,rN(r)),ct!==null)for(r=ct.return;r!==null;){var n=r;switch(dm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&zc();break;case 3:na(),Ge(or),Ge(qt),bm();break;case 5:vm(n);break;case 4:na();break;case 13:Ge(Qe);break;case 19:Ge(Qe);break;case 10:gm(n.type._context);break;case 22:case 23:Am()}r=r.return}if(_t=t,ct=t=hs(t.current,null),Pt=hr=e,ht=0,Lo=null,Tm=Mu=Xs=0,sr=mo=null,Fs!==null){for(e=0;e<Fs.length;e++)if(r=Fs[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Fs=null}return t}function Mb(t,e){do{var r=ct;try{if(mm(),vc.current=Jc,Xc){for(var n=Ye.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Xc=!1}if(Ys=0,wt=dt=Ye=null,ho=!1,$o=0,Sm.current=null,r===null||r.return===null){ht=1,Lo=e,ct=null;break}e:{var i=t,o=r.return,l=r,u=e;if(e=Pt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=kp(o);if(b!==null){b.flags&=-257,Np(b,o,l,i,e),b.mode&1&&_p(i,d,e),e=b,u=d;var k=e.updateQueue;if(k===null){var v=new Set;v.add(u),e.updateQueue=v}else k.add(u);break e}else{if(!(e&1)){_p(i,d,e),Pm();break e}u=Error(ee(426))}}else if(Ke&&l.mode&1){var C=kp(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Np(C,o,l,i,e),hm(sa(u,l));break e}}i=u=sa(u,l),ht!==4&&(ht=2),mo===null?mo=[i]:mo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=vb(i,u,e);pp(i,E);break e;case 1:l=u;var y=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(us===null||!us.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=bb(i,l,e);pp(i,R);break e}}i=i.return}while(i!==null)}Vb(r)}catch(L){e=L,ct===r&&r!==null&&(ct=r=r.return);continue}break}while(!0)}function Ob(){var t=Zc.current;return Zc.current=Jc,t===null?Jc:t}function Pm(){(ht===0||ht===3||ht===2)&&(ht=4),_t===null||!(Xs&268435455)&&!(Mu&268435455)||Kn(_t,Pt)}function ru(t,e){var r=De;De|=2;var n=Ob();(_t!==t||Pt!==e)&&(vn=null,Ws(t,e));do try{SN();break}catch(s){Mb(t,s)}while(!0);if(mm(),De=r,Zc.current=n,ct!==null)throw Error(ee(261));return _t=null,Pt=0,ht}function SN(){for(;ct!==null;)Lb(ct)}function TN(){for(;ct!==null&&!Z2();)Lb(ct)}function Lb(t){var e=Ub(t.alternate,t,hr);t.memoizedProps=t.pendingProps,e===null?Vb(t):ct=e,Sm.current=null}function Vb(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=wN(r,e),r!==null){r.flags&=32767,ct=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,ct=null;return}}else if(r=bN(r,e,hr),r!==null){ct=r;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);ht===0&&(ht=5)}function Ms(t,e,r){var n=Ve,s=Cr.transition;try{Cr.transition=null,Ve=1,IN(t,e,r,n)}finally{Cr.transition=s,Ve=n}return null}function IN(t,e,r,n){do Hi();while(es!==null);if(De&6)throw Error(ee(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(ck(t,i),t===_t&&(ct=_t=null,Pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ec||(ec=!0,Bb(Oc,function(){return Hi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Cr.transition,Cr.transition=null;var o=Ve;Ve=1;var l=De;De|=4,Sm.current=null,kN(t,r),Rb(r,t),Qk(Fh),Vc=!!Vh,Fh=Vh=null,t.current=r,NN(r),ek(),De=l,Ve=o,Cr.transition=i}else t.current=r;if(ec&&(ec=!1,es=t,tu=s),i=t.pendingLanes,i===0&&(us=null),nk(r.stateNode),cr(t,st()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(eu)throw eu=!1,t=of,of=null,t;return tu&1&&t.tag!==0&&Hi(),i=t.pendingLanes,i&1?t===lf?go++:(go=0,lf=t):go=0,js(),null}function Hi(){if(es!==null){var t=vv(tu),e=Cr.transition,r=Ve;try{if(Cr.transition=null,Ve=16>t?16:t,es===null)var n=!1;else{if(t=es,es=null,tu=0,De&6)throw Error(ee(331));var s=De;for(De|=4,ie=t.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:fo(8,h,i)}var g=h.child;if(g!==null)g.return=h,ie=g;else for(;ie!==null;){h=ie;var m=h.sibling,b=h.return;if(Cb(h),h===d){ie=null;break}if(m!==null){m.return=b,ie=m;break}ie=b}}}var k=i.alternate;if(k!==null){var v=k.child;if(v!==null){k.child=null;do{var C=v.sibling;v.sibling=null,v=C}while(v!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ie=E;break e}ie=i.return}}var y=t.current;for(ie=y;ie!==null;){o=ie;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,ie=N;else e:for(o=y;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$u(9,l)}}catch(L){rt(l,l.return,L)}if(l===o){ie=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ie=R;break e}ie=l.return}}if(De=s,js(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Su,t)}catch{}n=!0}return n}finally{Ve=r,Cr.transition=e}}return!1}function Op(t,e,r){e=sa(r,e),e=vb(t,e,1),t=cs(t,e,1),e=tr(),t!==null&&(rl(t,1,e),cr(t,e))}function rt(t,e,r){if(t.tag===3)Op(t,t,r);else for(;e!==null;){if(e.tag===3){Op(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(us===null||!us.has(n))){t=sa(r,t),t=bb(e,t,1),e=cs(e,t,1),t=tr(),e!==null&&(rl(e,1,t),cr(e,t));break}}e=e.return}}function CN(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=tr(),t.pingedLanes|=t.suspendedLanes&r,_t===t&&(Pt&r)===r&&(ht===4||ht===3&&(Pt&130023424)===Pt&&500>st()-Im?Ws(t,0):Tm|=r),cr(t,e)}function Fb(t,e){e===0&&(t.mode&1?(e=Wl,Wl<<=1,!(Wl&130023424)&&(Wl=4194304)):e=1);var r=tr();t=Cn(t,e),t!==null&&(rl(t,e,r),cr(t,r))}function AN(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Fb(t,r)}function PN(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(e),Fb(t,r)}var Ub;Ub=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||or.current)ar=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ar=!1,vN(t,e,r);ar=!!(t.flags&131072)}else ar=!1,Ke&&e.flags&1048576&&Hv(e,qc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;wc(t,e),t=e.pendingProps;var s=ea(e,qt.current);Wi(e,r),s=_m(null,e,n,t,s,r);var i=km();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(n)?(i=!0,Wc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ym(e),s.updater=Du,e.stateNode=s,s._reactInternals=e,Qh(e,n,t,r),e=Jh(null,e,n,!0,i,r)):(e.tag=0,Ke&&i&&um(e),Zt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(wc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=DN(n),t=$r(n,t),s){case 0:e=Xh(null,e,n,t,r);break e;case 1:e=Sp(null,e,n,t,r);break e;case 11:e=Ep(null,e,n,t,r);break e;case 14:e=jp(null,e,n,$r(n.type,t),r);break e}throw Error(ee(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:$r(n,s),Xh(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:$r(n,s),Sp(t,e,n,s,r);case 3:e:{if(Nb(e),t===null)throw Error(ee(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Xv(t,e),Qc(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=sa(Error(ee(423)),e),e=Tp(t,e,n,r,s);break e}else if(n!==s){s=sa(Error(ee(424)),e),e=Tp(t,e,n,r,s);break e}else for(fr=ls(e.stateNode.containerInfo.firstChild),gr=e,Ke=!0,Or=null,r=Qv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ta(),n===s){e=An(t,e,r);break e}Zt(t,e,n,r)}e=e.child}return e;case 5:return Jv(e),t===null&&qh(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Uh(n,s)?o=null:i!==null&&Uh(n,i)&&(e.flags|=32),kb(t,e),Zt(t,e,o,r),e.child;case 6:return t===null&&qh(e),null;case 13:return Eb(t,e,r);case 4:return xm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ra(e,null,n,r):Zt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:$r(n,s),Ep(t,e,n,s,r);case 7:return Zt(t,e,e.pendingProps,r),e.child;case 8:return Zt(t,e,e.pendingProps.children,r),e.child;case 12:return Zt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ze(Gc,n._currentValue),n._currentValue=o,i!==null)if(zr(i.value,o)){if(i.children===s.children&&!or.current){e=An(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Sn(-1,r&-r),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),Gh(i.return,r,e),l.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ee(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Gh(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Zt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Wi(e,r),s=Ar(s),n=n(s),e.flags|=1,Zt(t,e,n,r),e.child;case 14:return n=e.type,s=$r(n,e.pendingProps),s=$r(n.type,s),jp(t,e,n,s,r);case 15:return wb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:$r(n,s),wc(t,e),e.tag=1,lr(n)?(t=!0,Wc(e)):t=!1,Wi(e,r),xb(e,n,s),Qh(e,n,s,r),Jh(null,e,n,!0,t,r);case 19:return jb(t,e,r);case 22:return _b(t,e,r)}throw Error(ee(156,e.tag))};function Bb(t,e){return gv(t,e)}function RN(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,r,n){return new RN(t,e,r,n)}function Rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DN(t){if(typeof t=="function")return Rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jf)return 11;if(t===Zf)return 14}return 2}function hs(t,e){var r=t.alternate;return r===null?(r=Tr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Nc(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")Rm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ti:return Hs(r.children,s,i,e);case Xf:o=8,s|=8;break;case vh:return t=Tr(12,r,e,s|2),t.elementType=vh,t.lanes=i,t;case bh:return t=Tr(13,r,e,s),t.elementType=bh,t.lanes=i,t;case wh:return t=Tr(19,r,e,s),t.elementType=wh,t.lanes=i,t;case Jx:return Ou(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yx:o=10;break e;case Xx:o=9;break e;case Jf:o=11;break e;case Zf:o=14;break e;case Hn:o=16,n=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Tr(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Hs(t,e,r,n){return t=Tr(7,t,n,e),t.lanes=r,t}function Ou(t,e,r,n){return t=Tr(22,t,n,e),t.elementType=Jx,t.lanes=r,t.stateNode={isHidden:!1},t}function Xd(t,e,r){return t=Tr(6,t,null,e),t.lanes=r,t}function Jd(t,e,r){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $N(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pd(0),this.expirationTimes=Pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dm(t,e,r,n,s,i,o,l,u){return t=new $N(t,e,r,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(i),t}function MN(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Si,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function zb(t){if(!t)return vs;t=t._reactInternals;e:{if(ci(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var r=t.type;if(lr(r))return zv(t,r,e)}return e}function Wb(t,e,r,n,s,i,o,l,u){return t=Dm(r,n,!0,t,s,i,o,l,u),t.context=zb(null),r=t.current,n=tr(),s=ds(r),i=Sn(n,s),i.callback=e??null,cs(r,i,s),t.current.lanes=s,rl(t,s,n),cr(t,n),t}function Lu(t,e,r,n){var s=e.current,i=tr(),o=ds(s);return r=zb(r),e.context===null?e.context=r:e.pendingContext=r,e=Sn(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=cs(s,e,o),t!==null&&(Fr(t,s,o,i),xc(t,s,o)),o}function nu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function $m(t,e){Lp(t,e),(t=t.alternate)&&Lp(t,e)}function ON(){return null}var Hb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mm(t){this._internalRoot=t}Vu.prototype.render=Mm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Lu(t,e,null,null)};Vu.prototype.unmount=Mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Js(function(){Lu(null,t,null,null)}),e[In]=null}};function Vu(t){this._internalRoot=t}Vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=_v();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Gn.length&&e!==0&&e<Gn[r].priority;r++);Gn.splice(r,0,t),r===0&&Nv(t)}};function Om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vp(){}function LN(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=nu(o);i.call(d)}}var o=Wb(e,n,t,0,null,!1,!1,"",Vp);return t._reactRootContainer=o,t[In]=o.current,Co(t.nodeType===8?t.parentNode:t),Js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=nu(u);l.call(d)}}var u=Dm(t,0,!1,null,null,!1,!1,"",Vp);return t._reactRootContainer=u,t[In]=u.current,Co(t.nodeType===8?t.parentNode:t),Js(function(){Lu(e,u,r,n)}),u}function Uu(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=nu(o);l.call(u)}}Lu(e,o,t,s)}else o=LN(r,e,t,s,n);return nu(o)}bv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=to(e.pendingLanes);r!==0&&(rm(e,r|1),cr(e,st()),!(De&6)&&(ia=st()+500,js()))}break;case 13:Js(function(){var n=Cn(t,1);if(n!==null){var s=tr();Fr(n,t,1,s)}}),$m(t,1)}};nm=function(t){if(t.tag===13){var e=Cn(t,134217728);if(e!==null){var r=tr();Fr(e,t,134217728,r)}$m(t,134217728)}};wv=function(t){if(t.tag===13){var e=ds(t),r=Cn(t,e);if(r!==null){var n=tr();Fr(r,t,e,n)}$m(t,e)}};_v=function(){return Ve};kv=function(t,e){var r=Ve;try{return Ve=t,e()}finally{Ve=r}};Ah=function(t,e,r){switch(e){case"input":if(Nh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Au(n);if(!s)throw Error(ee(90));ev(n),Nh(n,s)}}}break;case"textarea":rv(t,r);break;case"select":e=r.value,e!=null&&Fi(t,!!r.multiple,e,!1)}};cv=Cm;uv=Js;var VN={usingClientEntryPoint:!1,Events:[sl,Pi,Au,ov,lv,Cm]},Qa={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FN={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fv(t),t===null?null:t.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||ON,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{Su=tc.inject(FN),Xr=tc}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VN;wr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Om(e))throw Error(ee(200));return MN(t,e,null,r)};wr.createRoot=function(t,e){if(!Om(t))throw Error(ee(299));var r=!1,n="",s=Hb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dm(t,1,!1,null,null,r,!1,n,s),t[In]=e.current,Co(t.nodeType===8?t.parentNode:t),new Mm(e)};wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=fv(e),t=t===null?null:t.stateNode,t};wr.flushSync=function(t){return Js(t)};wr.hydrate=function(t,e,r){if(!Fu(e))throw Error(ee(200));return Uu(null,t,e,!0,r)};wr.hydrateRoot=function(t,e,r){if(!Om(t))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Hb;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Wb(e,null,t,1,r??null,s,!1,i,o),t[In]=e.current,Co(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Vu(e)};wr.render=function(t,e,r){if(!Fu(e))throw Error(ee(200));return Uu(null,t,e,!1,r)};wr.unmountComponentAtNode=function(t){if(!Fu(t))throw Error(ee(40));return t._reactRootContainer?(Js(function(){Uu(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};wr.unstable_batchedUpdates=Cm;wr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Fu(r))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Uu(t,e,r,!1,n)};wr.version="18.3.1-next-f1338f8080-20240426";function qb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qb)}catch(t){console.error(t)}}qb(),qx.exports=wr;var UN=qx.exports,Fp=UN;yh.createRoot=Fp.createRoot,yh.hydrateRoot=Fp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vo(){return Vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vo.apply(this,arguments)}var ts;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ts||(ts={}));const Up="popstate";function BN(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return df("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:su(s)}return WN(e,r,null,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zN(){return Math.random().toString(36).substr(2,8)}function Bp(t,e){return{usr:t.state,key:t.key,idx:e}}function df(t,e,r,n){return r===void 0&&(r=null),Vo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wa(e):e,{state:r,key:e&&e.key||n||zN()})}function su(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function WN(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=ts.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Vo({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function g(){l=ts.Pop;let C=h(),E=C==null?null:C-d;d=C,u&&u({action:l,location:v.location,delta:E})}function m(C,E){l=ts.Push;let y=df(v.location,C,E);d=h()+1;let N=Bp(y,d),R=v.createHref(y);try{o.pushState(N,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&u&&u({action:l,location:v.location,delta:1})}function b(C,E){l=ts.Replace;let y=df(v.location,C,E);d=h();let N=Bp(y,d),R=v.createHref(y);o.replaceState(N,"",R),i&&u&&u({action:l,location:v.location,delta:0})}function k(C){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof C=="string"?C:su(C);return y=y.replace(/ $/,"%20"),it(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let v={get action(){return l},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Up,g),u=C,()=>{s.removeEventListener(Up,g),u=null}},createHref(C){return e(s,C)},createURL:k,encodeLocation(C){let E=k(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:b,go(C){return o.go(C)}};return v}var zp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zp||(zp={}));function HN(t,e,r){return r===void 0&&(r="/"),qN(t,e,r)}function qN(t,e,r,n){let s=typeof e=="string"?wa(e):e,i=Vm(s.pathname||"/",r);if(i==null)return null;let o=Gb(t);GN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=iE(i);l=rE(o[u],d)}return l}function Gb(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(it(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=fs([n,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(it(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Gb(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:eE(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Kb(i.path))s(i,o,u)}),e}function Kb(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Kb(n.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function GN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:tE(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const KN=/^:[\w-]+$/,QN=3,YN=2,XN=1,JN=10,ZN=-2,Wp=t=>t==="*";function eE(t,e){let r=t.split("/"),n=r.length;return r.some(Wp)&&(n+=ZN),e&&(n+=YN),r.filter(s=>!Wp(s)).reduce((s,i)=>s+(KN.test(i)?QN:i===""?XN:JN),n)}function tE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function rE(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",g=nE({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:fs([i,g.pathname]),pathnameBase:uE(fs([i,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(i=fs([i,g.pathnameBase]))}return o}function nE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=sE(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,h,g)=>{let{paramName:m,isOptional:b}=h;if(m==="*"){let v=l[g]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const k=l[g];return b&&!k?d[m]=void 0:d[m]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function sE(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Lm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function iE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const aE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oE=t=>aE.test(t);function lE(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?wa(t):t,i;if(r)if(oE(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Lm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=Hp(r.substring(1),"/"):i=Hp(r,e)}else i=e;return{pathname:i,search:dE(n),hash:hE(s)}}function Hp(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zd(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cE(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Fm(t,e){let r=cE(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Um(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=wa(t):(s=Vo({},t),it(!s.pathname||!s.pathname.includes("?"),Zd("?","pathname","search",s)),it(!s.pathname||!s.pathname.includes("#"),Zd("#","pathname","hash",s)),it(!s.search||!s.search.includes("#"),Zd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let g=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}l=g>=0?e[g]:"/"}let u=lE(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const fs=t=>t.join("/").replace(/\/\/+/g,"/"),uE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qb=["post","put","patch","delete"];new Set(Qb);const mE=["get",...Qb];new Set(mE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fo.apply(this,arguments)}const Bm=P.createContext(null),gE=P.createContext(null),Ss=P.createContext(null),Bu=P.createContext(null),Ts=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Yb=P.createContext(null);function pE(t,e){let{relative:r}=e===void 0?{}:e;_a()||it(!1);let{basename:n,navigator:s}=P.useContext(Ss),{hash:i,pathname:o,search:l}=Jb(t,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:fs([n,o])),s.createHref({pathname:u,search:l,hash:i})}function _a(){return P.useContext(Bu)!=null}function ui(){return _a()||it(!1),P.useContext(Bu).location}function Xb(t){P.useContext(Ss).static||P.useLayoutEffect(t)}function al(){let{isDataRoute:t}=P.useContext(Ts);return t?IE():yE()}function yE(){_a()||it(!1);let t=P.useContext(Bm),{basename:e,future:r,navigator:n}=P.useContext(Ss),{matches:s}=P.useContext(Ts),{pathname:i}=ui(),o=JSON.stringify(Fm(s,r.v7_relativeSplatPath)),l=P.useRef(!1);return Xb(()=>{l.current=!0}),P.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=Um(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:fs([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,o,i,t])}function Jb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=P.useContext(Ss),{matches:s}=P.useContext(Ts),{pathname:i}=ui(),o=JSON.stringify(Fm(s,n.v7_relativeSplatPath));return P.useMemo(()=>Um(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function xE(t,e){return vE(t,e)}function vE(t,e,r,n){_a()||it(!1);let{navigator:s}=P.useContext(Ss),{matches:i}=P.useContext(Ts),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ui(),h;if(e){var g;let C=typeof e=="string"?wa(e):e;u==="/"||(g=C.pathname)!=null&&g.startsWith(u)||it(!1),h=C}else h=d;let m=h.pathname||"/",b=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=HN(t,{pathname:b}),v=NE(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:fs([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:fs([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,r,n);return e&&v?P.createElement(Bu.Provider,{value:{location:Fo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ts.Pop}},v):v}function bE(){let t=TE(),e=fE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),r?P.createElement("pre",{style:s},r):null,null)}const wE=P.createElement(bE,null);class _E extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?P.createElement(Ts.Provider,{value:this.props.routeContext},P.createElement(Yb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kE(t){let{routeContext:e,match:r,children:n}=t,s=P.useContext(Bm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(Ts.Provider,{value:e},n)}function NE(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);h>=0||it(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:m,errors:b}=r,k=g.route.loader&&m[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,g,m)=>{let b,k=!1,v=null,C=null;r&&(b=l&&g.route.id?l[g.route.id]:void 0,v=g.route.errorElement||wE,u&&(d<0&&m===0?(CE("route-fallback"),k=!0,C=null):d===m&&(k=!0,C=g.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),y=()=>{let N;return b?N=v:k?N=C:g.route.Component?N=P.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,P.createElement(kE,{match:g,routeContext:{outlet:h,matches:E,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?P.createElement(_E,{location:r.location,revalidation:r.revalidation,component:v,error:b,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var Zb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Zb||{}),ew=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ew||{});function EE(t){let e=P.useContext(Bm);return e||it(!1),e}function jE(t){let e=P.useContext(gE);return e||it(!1),e}function SE(t){let e=P.useContext(Ts);return e||it(!1),e}function tw(t){let e=SE(),r=e.matches[e.matches.length-1];return r.route.id||it(!1),r.route.id}function TE(){var t;let e=P.useContext(Yb),r=jE(),n=tw();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function IE(){let{router:t}=EE(Zb.UseNavigateStable),e=tw(ew.UseNavigateStable),r=P.useRef(!1);return Xb(()=>{r.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Fo({fromRouteId:e},i)))},[t,e])}const qp={};function CE(t,e,r){qp[t]||(qp[t]=!0)}function AE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hf(t){let{to:e,replace:r,state:n,relative:s}=t;_a()||it(!1);let{future:i,static:o}=P.useContext(Ss),{matches:l}=P.useContext(Ts),{pathname:u}=ui(),d=al(),h=Um(e,Fm(l,i.v7_relativeSplatPath),u,s==="path"),g=JSON.stringify(h);return P.useEffect(()=>d(JSON.parse(g),{replace:r,state:n,relative:s}),[d,g,s,r,n]),null}function Er(t){it(!1)}function PE(t){let{basename:e="/",children:r=null,location:n,navigationType:s=ts.Pop,navigator:i,static:o=!1,future:l}=t;_a()&&it(!1);let u=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:i,static:o,future:Fo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof n=="string"&&(n=wa(n));let{pathname:h="/",search:g="",hash:m="",state:b=null,key:k="default"}=n,v=P.useMemo(()=>{let C=Vm(h,u);return C==null?null:{location:{pathname:C,search:g,hash:m,state:b,key:k},navigationType:s}},[u,h,g,m,b,k,s]);return v==null?null:P.createElement(Ss.Provider,{value:d},P.createElement(Bu.Provider,{children:r,value:v}))}function RE(t){let{children:e,location:r}=t;return xE(ff(e),r)}new Promise(()=>{});function ff(t,e){e===void 0&&(e=[]);let r=[];return P.Children.forEach(t,(n,s)=>{if(!P.isValidElement(n))return;let i=[...e,s];if(n.type===P.Fragment){r.push.apply(r,ff(n.props.children,i));return}n.type!==Er&&it(!1),!n.props.index||!n.props.children||it(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ff(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mf(){return mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mf.apply(this,arguments)}function DE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function $E(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ME(t,e){return t.button===0&&(!e||e==="_self")&&!$E(t)}function gf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function OE(t,e){let r=gf(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const LE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VE="6";try{window.__reactRouterVersion=VE}catch{}const FE="startTransition",Gp=C2[FE];function UE(t){let{basename:e,children:r,future:n,window:s}=t,i=P.useRef();i.current==null&&(i.current=BN({window:s,v5Compat:!0}));let o=i.current,[l,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=P.useCallback(g=>{d&&Gp?Gp(()=>u(g)):u(g)},[u,d]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.useEffect(()=>AE(n),[n]),P.createElement(PE,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const BE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pn=P.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:g}=e,m=DE(e,LE),{basename:b}=P.useContext(Ss),k,v=!1;if(typeof d=="string"&&zE.test(d)&&(k=d,BE))try{let N=new URL(window.location.href),R=d.startsWith("//")?new URL(N.protocol+d):new URL(d),L=Vm(R.pathname,b);R.origin===N.origin&&L!=null?d=L+R.search+R.hash:v=!0}catch{}let C=pE(d,{relative:s}),E=WE(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:g});function y(N){n&&n(N),N.defaultPrevented||E(N)}return P.createElement("a",mf({},m,{href:k||C,onClick:v||i?n:y,ref:r,target:u}))});var Kp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Kp||(Kp={}));var Qp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qp||(Qp={}));function WE(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=al(),d=ui(),h=Jb(t,{relative:o});return P.useCallback(g=>{if(ME(g,r)){g.preventDefault();let m=n!==void 0?n:su(d)===su(h);u(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,h,n,s,r,t,i,o,l])}function HE(t){let e=P.useRef(gf(t)),r=P.useRef(!1),n=ui(),s=P.useMemo(()=>OE(n.search,r.current?null:e.current),[n.search]),i=al(),o=P.useCallback((l,u)=>{const d=gf(typeof l=="function"?l(s):l);r.current=!0,i("?"+d,u)},[i,s]);return[s,o]}const qE={},Yp=t=>{let e;const r=new Set,n=(h,g)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const b=e;e=g??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(k=>k(e,b))}},s=()=>e,u={setState:n,getState:s,getInitialState:()=>d,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{(qE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=e=t(n,s,u);return u},GE=t=>t?Yp(t):Yp;var rw={exports:{}},nw={},sw={exports:{}},iw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=P;function KE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QE=typeof Object.is=="function"?Object.is:KE,YE=aa.useState,XE=aa.useEffect,JE=aa.useLayoutEffect,ZE=aa.useDebugValue;function ej(t,e){var r=e(),n=YE({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return JE(function(){s.value=r,s.getSnapshot=e,eh(s)&&i({inst:s})},[t,r,e]),XE(function(){return eh(s)&&i({inst:s}),t(function(){eh(s)&&i({inst:s})})},[t]),ZE(r),r}function eh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!QE(t,r)}catch{return!0}}function tj(t,e){return e()}var rj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tj:ej;iw.useSyncExternalStore=aa.useSyncExternalStore!==void 0?aa.useSyncExternalStore:rj;sw.exports=iw;var nj=sw.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=P,sj=nj;function ij(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aj=typeof Object.is=="function"?Object.is:ij,oj=sj.useSyncExternalStore,lj=zu.useRef,cj=zu.useEffect,uj=zu.useMemo,dj=zu.useDebugValue;nw.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=lj(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=uj(function(){function u(b){if(!d){if(d=!0,h=b,b=n(b),s!==void 0&&o.hasValue){var k=o.value;if(s(k,b))return g=k}return g=b}if(k=g,aj(h,b))return k;var v=n(b);return s!==void 0&&s(k,v)?(h=b,k):(h=b,g=v)}var d=!1,h,g,m=r===void 0?null:r;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,r,n,s]);var l=oj(t,i[0],i[1]);return cj(function(){o.hasValue=!0,o.value=l},[l]),dj(l),l};rw.exports=nw;var hj=rw.exports;const fj=Dx(hj),aw={},{useDebugValue:mj}=Gf,{useSyncExternalStoreWithSelector:gj}=fj;let Xp=!1;const pj=t=>t;function yj(t,e=pj,r){(aw?"production":void 0)!=="production"&&r&&!Xp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Xp=!0);const n=gj(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return mj(n),n}const xj=t=>{(aw?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?GE(t):t,r=(n,s)=>yj(e,n,s);return Object.assign(r,e),r},zm=t=>xj,vj={};function bj(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const o=u=>u===null?null:JSON.parse(u,void 0),l=(i=r.getItem(s))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const Uo=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Uo(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Uo(n)(r)}}}},wj=(t,e)=>(r,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,E)=>({...E,...C}),...e},o=!1;const l=new Set,u=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...C)},n,s);const h=Uo(i.serialize),g=()=>{const C=i.partialize({...n()});let E;const y=h({state:C,version:i.version}).then(N=>d.setItem(i.name,N)).catch(N=>{E=N});if(E)throw E;return y},m=s.setState;s.setState=(C,E)=>{m(C,E),g()};const b=t((...C)=>{r(...C),g()},n,s);let k;const v=()=>{var C;if(!d)return;o=!1,l.forEach(y=>y(n()));const E=((C=i.onRehydrateStorage)==null?void 0:C.call(i,n()))||void 0;return Uo(d.getItem.bind(d))(i.name).then(y=>{if(y)return i.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return i.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var N;return k=i.merge(y,(N=n())!=null?N:b),r(k,!0),g()}).then(()=>{E==null||E(k,void 0),o=!0,u.forEach(y=>y(k))}).catch(y=>{E==null||E(void 0,y)})};return s.persist={setOptions:C=>{i={...i,...C},C.getStorage&&(d=C.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:C=>(l.add(C),()=>{l.delete(C)}),onFinishHydration:C=>(u.add(C),()=>{u.delete(C)})},v(),k||b},_j=(t,e)=>(r,n,s)=>{let i={storage:bj(()=>localStorage),partialize:v=>v,version:0,merge:(v,C)=>({...C,...v}),...e},o=!1;const l=new Set,u=new Set;let d=i.storage;if(!d)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},n,s);const h=()=>{const v=i.partialize({...n()});return d.setItem(i.name,{state:v,version:i.version})},g=s.setState;s.setState=(v,C)=>{g(v,C),h()};const m=t((...v)=>{r(...v),h()},n,s);s.getInitialState=()=>m;let b;const k=()=>{var v,C;if(!d)return;o=!1,l.forEach(y=>{var N;return y((N=n())!=null?N:m)});const E=((C=i.onRehydrateStorage)==null?void 0:C.call(i,(v=n())!=null?v:m))||void 0;return Uo(d.getItem.bind(d))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return[!0,i.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var N;const[R,L]=y;if(b=i.merge(L,(N=n())!=null?N:m),r(b,!0),R)return h()}).then(()=>{E==null||E(b,void 0),b=n(),o=!0,u.forEach(y=>y(b))}).catch(y=>{E==null||E(void 0,y)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(d=v.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(u.add(v),()=>{u.delete(v)})},i.skipHydration||k(),b||m},kj=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((vj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),wj(t,e)):_j(t,e),Wm=kj,_e=[{id:"1",name:"",login:"artyom03",password:"248artdex",avatar:"/avatars/artyom.jpg"},{id:"2",name:"",login:"adel05",password:"058adeldex",avatar:"/avatars/adel.jpg"},{id:"3",name:"",login:"ksen03",password:"907ksendex",avatar:"/avatars/kseniya.jpg"},{id:"4",name:"",login:"olga04",password:"638olgadex",avatar:"/avatars/olga.jpg"},{id:"5",name:"",login:"anastasia05",password:"638anastadex",avatar:"/avatars/anastasia.jpg"}],Hm={trading:{label:"",icon:"",color:"green"},learning:{label:"",icon:"",color:"blue"},technical:{label:" ",icon:"",color:"purple"},stream:{label:"",icon:"",color:"red"},research:{label:" ",icon:"",color:"yellow"},organization:{label:"   ",icon:"",color:"indigo"}},iu={pending:{label:" ",color:"yellow"},in_progress:{label:" ",color:"blue"},completed:{label:"",color:"green"},closed:{label:"",color:"gray"},rejected:{label:"",color:"red"}},Nt=zm()(Wm(t=>({user:null,isAuthenticated:!1,login:(e,r)=>{const n=_e.find(s=>s.login===e&&s.password===r);return n?(t({user:n,isAuthenticated:!0}),!0):!1},logout:()=>t({user:null,isAuthenticated:!1})}),{name:"apevault-auth"})),Nj="9119ApeVault",Yt=zm()(Wm(t=>({isAdmin:!1,activateAdmin:e=>e===Nj?(t({isAdmin:!0}),!0):!1,deactivateAdmin:()=>t({isAdmin:!1})}),{name:"apevault-admin"})),Be=zm()(Wm(t=>({theme:"light",toggleTheme:()=>t(e=>{const r=e.theme==="light"?"dark":"light";return document.body.classList.toggle("dark",r==="dark"),{theme:r}}),setTheme:e=>t(()=>(document.body.classList.toggle("dark",e==="dark"),{theme:e}))}),{name:"apevault-theme"}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ej={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const r=P.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>P.createElement("svg",{ref:h,...Ej,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${jj(t)}`,l].join(" "),...d},[...e.map(([g,m])=>P.createElement(g,m)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=he("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=he("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=he("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=he("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=he("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=he("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=he("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=he("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=he("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=he("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=he("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=he("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=he("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),mw="/assets/logo-DoMo9ObD.png",zj=()=>{const[t,e]=P.useState("member"),[r,n]=P.useState(""),[s,i]=P.useState(""),[o,l]=P.useState(""),{login:u,user:d,isAuthenticated:h}=Nt(),{theme:g,toggleTheme:m}=Be(),{activateAdmin:b}=Yt(),k=al(),[v]=HE();P.useEffect(()=>{document.body.classList.toggle("dark",g==="dark")},[g]),P.useEffect(()=>{var y,N,R;if(h&&d){k("/management");return}if((y=window.Telegram)!=null&&y.WebApp){window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand();const M=v.get("tgWebAppData")||window.Telegram.WebApp.initData,I=v.get("login"),_=v.get("password");if(I&&_&&u(I,_)){k("/management");return}if(M)try{const S=new URLSearchParams(M).get("user");if(S){const x=JSON.parse(decodeURIComponent(S)).id;sessionStorage.setItem("telegram_user_id",String(x));const H=localStorage.getItem("apevault-auth");if(H)try{const U=JSON.parse(H);if((N=U.state)!=null&&N.user){const B=U.state.user;if(u(B.login,B.password)){k("/management");return}}}catch(U){console.error("Error parsing saved auth:",U)}console.log("Telegram Mini App detected, user ID:",x)}}catch(j){console.error("Error parsing Telegram initData:",j)}const w=(R=window.Telegram.WebApp.initDataUnsafe)==null?void 0:R.user;w&&(sessionStorage.setItem("telegram_user_id",String(w.id)),console.log("Telegram user detected:",w.first_name))}},[v,h,d,k,u]);const C=y=>{if(y.preventDefault(),l(""),!s){l(",  ");return}if(t==="admin")b(s)?k("/management"):l("  ");else{if(!r){l(",  ");return}u(r,s)?k("/management"):l("   ")}},E=()=>{m()};return a.jsxs("div",{className:`min-h-screen flex items-center justify-center relative overflow-hidden ${g==="dark"?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100"}`,children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:`absolute top-20 left-10 w-72 h-72 rounded-full blur-3xl opacity-20 ${g==="dark"?"bg-green-500":"bg-green-400"}`}),a.jsx("div",{className:`absolute bottom-20 right-10 w-96 h-96 rounded-full blur-3xl opacity-20 ${g==="dark"?"bg-blue-500":"bg-blue-400"}`}),a.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full blur-3xl opacity-10 ${g==="dark"?"bg-purple-500":"bg-purple-400"}`})]}),a.jsx("button",{onClick:E,className:`absolute top-6 right-6 p-3 rounded-full transition-all duration-300 shadow-lg hover:scale-110 z-10 ${g==="dark"?"bg-gray-800 hover:bg-gray-700 text-yellow-400 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-700 border border-gray-200"}`,"aria-label":"Toggle theme",children:g==="dark"?a.jsx(fw,{className:"w-6 h-6"}):a.jsx(hw,{className:"w-6 h-6"})}),a.jsxs("div",{className:`w-full max-w-md p-8 rounded-2xl shadow-2xl backdrop-blur-sm border relative z-10 ${g==="dark"?"bg-gray-800/90 border-gray-700":"bg-white/90 border-gray-200"}`,children:[a.jsxs("div",{className:"text-center mb-8 relative",children:[a.jsx("div",{className:"absolute -top-4 -left-4 animate-pulse",children:a.jsx(pr,{className:`w-6 h-6 ${g==="dark"?"text-green-400":"text-green-500"} opacity-60`})}),a.jsx("div",{className:"absolute -top-4 -right-4 animate-pulse delay-300",children:a.jsx(pr,{className:`w-6 h-6 ${g==="dark"?"text-blue-400":"text-blue-500"} opacity-60`})}),a.jsx("div",{className:"mx-auto mb-6 flex justify-center relative",children:a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${g==="dark"?"bg-gray-700":"bg-gradient-to-br from-green-50 to-blue-50"}`,children:a.jsx("img",{src:mw,alt:"ApeVault Logo",className:"w-24 h-24 object-contain"})})}),a.jsx("h1",{className:`text-4xl font-bold mb-3 bg-gradient-to-r ${g==="dark"?"from-green-400 to-blue-400 text-transparent bg-clip-text":"from-green-600 to-blue-600 text-transparent bg-clip-text"}`,children:"ApeVault"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[a.jsx(en,{className:`w-5 h-5 ${g==="dark"?"text-green-400":"text-green-600"}`}),a.jsx("p",{className:`text-lg font-medium ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "})]}),a.jsx("p",{className:`text-sm ${g==="dark"?"text-gray-400":"text-gray-500"}`,children:"    "})]}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-semibold mb-3 ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsxs("div",{className:`grid grid-cols-2 gap-3 p-1 rounded-xl ${g==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[a.jsxs("button",{type:"button",onClick:()=>{e("member"),n(""),i(""),l("")},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${t==="member"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg":g==="dark"?"text-gray-400 hover:text-white hover:bg-gray-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[a.jsx(tn,{className:"w-5 h-5"}),a.jsx("span",{children:""})]}),a.jsxs("button",{type:"button",onClick:()=>{e("admin"),n(""),i(""),l("")},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${t==="admin"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg":g==="dark"?"text-gray-400 hover:text-white hover:bg-gray-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[a.jsx(en,{className:"w-5 h-5"}),a.jsx("span",{children:""})]})]})]}),t==="member"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"login",className:`block text-sm font-semibold mb-2 ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:[a.jsx(la,{className:"w-4 h-4 inline mr-2"}),""]}),a.jsx("div",{className:"relative",children:a.jsx("input",{id:"login",type:"text",value:r,onChange:y=>n(y.target.value),className:`w-full px-4 py-3 rounded-xl border-2 transition-all ${g==="dark"?"bg-gray-700/50 border-gray-600 text-white placeholder-gray-500 focus:border-green-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-green-500"} focus:outline-none focus:ring-4 focus:ring-green-500/20`,placeholder:"  ",autoComplete:"username"})})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"password",className:`block text-sm font-semibold mb-2 ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:[a.jsx(en,{className:"w-4 h-4 inline mr-2"}),""]}),a.jsx("div",{className:"relative",children:a.jsx("input",{id:"password",type:"password",value:s,onChange:y=>i(y.target.value),className:`w-full px-4 py-3 rounded-xl border-2 transition-all ${g==="dark"?"bg-gray-700/50 border-gray-600 text-white placeholder-gray-500 focus:border-green-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-green-500"} focus:outline-none focus:ring-4 focus:ring-green-500/20`,placeholder:t==="admin"?"  ":"  ",autoComplete:t==="admin"?"off":"current-password"})}),t==="admin"&&a.jsx("p",{className:`mt-2 text-xs ${g==="dark"?"text-gray-400":"text-gray-500"}`,children:"       "})]}),o&&a.jsx("div",{className:`p-4 rounded-xl border-2 ${g==="dark"?"bg-red-500/20 border-red-500 text-red-400":"bg-red-50 border-red-300 text-red-700"} text-sm font-medium animate-shake`,children:o}),a.jsx("button",{type:"submit",className:"w-full py-3 px-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",children:"  "})]}),a.jsx("div",{className:`mt-6 pt-6 border-t ${g==="dark"?"border-gray-700":"border-gray-200"} text-center`,children:a.jsx("p",{className:`text-xs ${g==="dark"?"text-gray-400":"text-gray-500"}`,children:"    ApeVault"})})]})]})},Wr=({children:t})=>{const{theme:e,toggleTheme:r}=Be(),{isAdmin:n}=Yt(),s=ui(),[i,o]=P.useState(!1),[l,u]=P.useState(!1),d=[{path:"/management",label:"",icon:Zr},{path:"/earnings",label:"",icon:Wu},{path:"/tasks",label:"",icon:Zs},{path:"/rating",label:"",icon:di}],h=[{path:"/about",label:" ",icon:Ur},{path:"/faq",label:"FAQ",icon:Km}],g=d.some(v=>s.pathname===v.path),m=v=>s.pathname===v,b=h.some(v=>s.pathname===v.path),k=v=>s.pathname===v;return P.useEffect(()=>{o(!1),u(!1)},[s.pathname]),a.jsxs("div",{className:`min-h-screen ${e==="dark"?"bg-gray-900":"bg-gray-50"} pb-20 lg:pb-0`,children:[a.jsx("header",{className:`${e==="dark"?"bg-gray-800":"bg-white"} shadow-md sticky top-0 z-50 hidden lg:block`,children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-shrink-0",children:[a.jsx("img",{src:mw,alt:"ApeVault Logo",className:"w-10 h-10 object-contain flex-shrink-0"}),a.jsx("h1",{className:`text-xl font-bold truncate ${e==="dark"?"text-white":"text-gray-900"}`,children:"ApeVault"})]}),a.jsxs("nav",{className:"flex items-center space-x-1 flex-wrap",children:[a.jsxs(pn,{to:"/call",className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${s.pathname==="/call"?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(qi,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:"Call"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!i),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${g?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(sy,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:""}),a.jsx(pf,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),a.jsx("div",{className:`absolute top-full left-0 mt-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:d.map(v=>a.jsxs(pn,{to:v.path,onClick:()=>o(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${m(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${v.path===d[0].path?"rounded-t-lg":""} ${v.path===d[d.length-1].path?"rounded-b-lg":""}`,children:[a.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:v.label})]},v.path))})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!l),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${b?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(Ur,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:" "}),a.jsx(pf,{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`})]}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),a.jsx("div",{className:`absolute top-full left-0 mt-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:h.map((v,C)=>a.jsxs(pn,{to:v.path,onClick:()=>u(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${k(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${C===0?"rounded-t-lg":""} ${C===h.length-1?"rounded-b-lg":""}`,children:[a.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:v.label})]},v.path))})]})]}),a.jsxs(pn,{to:"/profile",className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${s.pathname==="/profile"?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(la,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:""})]}),n&&a.jsxs(pn,{to:"/admin",className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${s.pathname==="/admin"?"bg-purple-600 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(en,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 ml-4",children:[n&&a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-purple-600 text-white rounded-lg",children:[a.jsx(en,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{className:"text-sm whitespace-nowrap",children:""})]}),a.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors flex-shrink-0 ${e==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Toggle theme",children:e==="dark"?a.jsx(fw,{className:"w-5 h-5 text-yellow-400"}):a.jsx(hw,{className:"w-5 h-5 text-gray-700"})})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:t}),a.jsx("nav",{className:`lg:hidden fixed bottom-0 left-0 right-0 ${e==="dark"?"bg-gray-800":"bg-white"} border-t-2 ${e==="dark"?"border-gray-700":"border-gray-200"} shadow-2xl z-50`,children:a.jsx("div",{className:"max-w-7xl mx-auto px-2",children:a.jsxs("div",{className:"flex items-center justify-around h-16",children:[a.jsxs(pn,{to:"/call",className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${s.pathname==="/call"?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[a.jsx(qi,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:"Call"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!i),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${g?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[a.jsx(sy,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:""})]}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:()=>o(!1)}),a.jsx("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:d.map(v=>a.jsxs(pn,{to:v.path,onClick:()=>o(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${m(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${v.path===d[0].path?"rounded-t-lg":""} ${v.path===d[d.length-1].path?"rounded-b-lg":""}`,children:[a.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:v.label})]},v.path))})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!l),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${b?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[a.jsx(Ur,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:" "})]}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:()=>u(!1)}),a.jsx("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:h.map((v,C)=>a.jsxs(pn,{to:v.path,onClick:()=>u(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${k(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${C===0?"rounded-t-lg":""} ${C===h.length-1?"rounded-b-lg":""}`,children:[a.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{children:v.label})]},v.path))})]})]}),a.jsxs(pn,{to:"/profile",className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${s.pathname==="/profile"?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[a.jsx(la,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:""})]})]})})})]})};var ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},Wj=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,g=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),n.push(r[h],r[g],r[m],r[b])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const g=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new Hj;const m=i<<2|l>>4;if(n.push(m),d!==64){const b=l<<4&240|d>>2;if(n.push(b),g!==64){const k=d<<6&192|g;n.push(k)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qj=function(t){const e=gw(t);return pw.encodeByteArray(e,!0)},au=function(t){return qj(t).replace(/\./g,"")},yw=function(t){try{return pw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=()=>Gj().__FIREBASE_DEFAULTS__,Qj=()=>{if(typeof process>"u"||typeof ay>"u")return;const t=ay.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yw(t[1]);return e&&JSON.parse(e)},Hu=()=>{try{return Kj()||Qj()||Yj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xw=t=>{var e,r;return(r=(e=Hu())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},vw=t=>{const e=xw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},bw=()=>{var t;return(t=Hu())===null||t===void 0?void 0:t.config},ww=t=>{var e;return(e=Hu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[au(JSON.stringify(r)),au(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function Zj(){var t;const e=(t=Hu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nS(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sS(){return!Zj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iS(){try{return typeof indexedDB=="object"}catch{return!1}}function aS(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="FirebaseError";class hn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=oS,Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ol.prototype.create)}}class ol{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?lS(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new hn(s,l,n)}}function lS(t,e){return t.replace(cS,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const cS=/\{\$([^}]+)}/g;function uS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ou(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(oy(i)&&oy(o)){if(!ou(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function oy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function dS(t,e){const r=new hS(t,e);return r.subscribe.bind(r)}class hS{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");fS(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=th),s.error===void 0&&(s.error=th),s.complete===void 0&&(s.complete=th);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fS(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function th(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Xj;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pS(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:gS(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gS(t){return t===Os?void 0:t}function pS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new mS(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const xS={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},vS=Ce.INFO,bS={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},wS=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=bS[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=vS,this._logHandler=wS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const _S=(t,e)=>e.some(r=>t instanceof r);let ly,cy;function kS(){return ly||(ly=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NS(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kw=new WeakMap,xf=new WeakMap,Nw=new WeakMap,rh=new WeakMap,Ym=new WeakMap;function ES(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(ms(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&kw.set(r,t)}).catch(()=>{}),Ym.set(e,t),e}function jS(t){if(xf.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xf.set(t,e)}let vf={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ms(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SS(t){vf=t(vf)}function TS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(nh(this),e,...r);return Nw.set(n,e.sort?e.sort():[e]),ms(n)}:NS().includes(t)?function(...e){return t.apply(nh(this),e),ms(kw.get(this))}:function(...e){return ms(t.apply(nh(this),e))}}function IS(t){return typeof t=="function"?TS(t):(t instanceof IDBTransaction&&jS(t),_S(t,kS())?new Proxy(t,vf):t)}function ms(t){if(t instanceof IDBRequest)return ES(t);if(rh.has(t))return rh.get(t);const e=IS(t);return e!==t&&(rh.set(t,e),Ym.set(e,t)),e}const nh=t=>Ym.get(t);function CS(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=ms(o);return n&&o.addEventListener("upgradeneeded",u=>{n(ms(o.result),u.oldVersion,u.newVersion,ms(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const AS=["get","getKey","getAll","getAllKeys","count"],PS=["put","add","delete","clear"],sh=new Map;function uy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=PS.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||AS.includes(r)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&u.done]))[0]};return sh.set(e,i),i}SS(t=>({...t,get:(e,r,n)=>uy(e,r)||t.get(e,r,n),has:(e,r)=>!!uy(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(DS(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function DS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",dy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn=new Qm("@firebase/app"),$S="@firebase/app-compat",MS="@firebase/analytics-compat",OS="@firebase/analytics",LS="@firebase/app-check-compat",VS="@firebase/app-check",FS="@firebase/auth",US="@firebase/auth-compat",BS="@firebase/database",zS="@firebase/data-connect",WS="@firebase/database-compat",HS="@firebase/functions",qS="@firebase/functions-compat",GS="@firebase/installations",KS="@firebase/installations-compat",QS="@firebase/messaging",YS="@firebase/messaging-compat",XS="@firebase/performance",JS="@firebase/performance-compat",ZS="@firebase/remote-config",eT="@firebase/remote-config-compat",tT="@firebase/storage",rT="@firebase/storage-compat",nT="@firebase/firestore",sT="@firebase/vertexai-preview",iT="@firebase/firestore-compat",aT="firebase",oT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="[DEFAULT]",lT={[bf]:"fire-core",[$S]:"fire-core-compat",[OS]:"fire-analytics",[MS]:"fire-analytics-compat",[VS]:"fire-app-check",[LS]:"fire-app-check-compat",[FS]:"fire-auth",[US]:"fire-auth-compat",[BS]:"fire-rtdb",[zS]:"fire-data-connect",[WS]:"fire-rtdb-compat",[HS]:"fire-fn",[qS]:"fire-fn-compat",[GS]:"fire-iid",[KS]:"fire-iid-compat",[QS]:"fire-fcm",[YS]:"fire-fcm-compat",[XS]:"fire-perf",[JS]:"fire-perf-compat",[ZS]:"fire-rc",[eT]:"fire-rc-compat",[tT]:"fire-gcs",[rT]:"fire-gcs-compat",[nT]:"fire-fst",[iT]:"fire-fst-compat",[sT]:"fire-vertex","fire-js":"fire-js",[aT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,cT=new Map,_f=new Map;function hy(t,e){try{t.container.addComponent(e)}catch(r){Pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ti(t){const e=t.name;if(_f.has(e))return Pn.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,t);for(const r of lu.values())hy(r,t);for(const r of cT.values())hy(r,t);return!0}function qu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function rs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new ol("app","Firebase",uT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=oT;function Ew(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:wf,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw gs.create("bad-app-name",{appName:String(s)});if(r||(r=bw()),!r)throw gs.create("no-options");const i=lu.get(s);if(i){if(ou(r,i.options)&&ou(n,i.config))return i;throw gs.create("duplicate-app",{appName:s})}const o=new yS(s);for(const u of _f.values())o.addComponent(u);const l=new dT(r,n,o);return lu.set(s,l),l}function Xm(t=wf){const e=lu.get(t);if(!e&&t===wf&&bw())return Ew();if(!e)throw gs.create("no-app",{appName:t});return e}function rn(t,e,r){var n;let s=(n=lT[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pn.warn(l.join(" "));return}ti(new bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebase-heartbeat-database",fT=1,zo="firebase-heartbeat-store";let ih=null;function jw(){return ih||(ih=CS(hT,fT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zo)}catch(r){console.warn(r)}}}}).catch(t=>{throw gs.create("idb-open",{originalErrorMessage:t.message})})),ih}async function mT(t){try{const r=(await jw()).transaction(zo),n=await r.objectStore(zo).get(Sw(t));return await r.done,n}catch(e){if(e instanceof hn)Pn.warn(e.message);else{const r=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pn.warn(r.message)}}}async function fy(t,e){try{const n=(await jw()).transaction(zo,"readwrite");await n.objectStore(zo).put(e,Sw(t)),await n.done}catch(r){if(r instanceof hn)Pn.warn(r.message);else{const n=gs.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Pn.warn(n.message)}}}function Sw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,pT=30*24*60*60*1e3;class yT{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new vT(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=my();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=pT}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Pn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=my(),{heartbeatsToSend:n,unsentEntries:s}=xT(this._heartbeatsCache.heartbeats),i=au(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Pn.warn(r),""}}}function my(){return new Date().toISOString().substring(0,10)}function xT(t,e=gT){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gy(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),gy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class vT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iS()?aS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await mT(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return fy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return fy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gy(t){return au(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){ti(new bs("platform-logger",e=>new RS(e),"PRIVATE")),ti(new bs("heartbeat",e=>new yT(e),"PRIVATE")),rn(bf,dy,t),rn(bf,dy,"esm2017"),rn("fire-js","")}bT("");var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,Tw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function w(){}w.prototype=_.prototype,I.D=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(j,S,A){for(var x=Array(arguments.length-2),H=2;H<arguments.length;H++)x[H-2]=arguments[H];return _.prototype[S].apply(j,x)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,w){w||(w=0);var j=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)j[S]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(S=0;16>S;++S)j[S]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],S=I.g[2];var A=I.g[3],x=_+(A^w&(S^A))+j[0]+3614090360&4294967295;_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[1]+3905402710&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[2]+606105819&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[3]+3250441966&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(A^w&(S^A))+j[4]+4118548399&4294967295,_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[5]+1200080426&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[6]+2821735955&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[7]+4249261313&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(A^w&(S^A))+j[8]+1770035416&4294967295,_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[9]+2336552879&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[10]+4294925233&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[11]+2304563134&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(A^w&(S^A))+j[12]+1804603682&4294967295,_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[13]+4254626195&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[14]+2792965006&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[15]+1236535329&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(S^A&(w^S))+j[1]+4129170786&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[6]+3225465664&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[11]+643717713&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[0]+3921069994&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(S^A&(w^S))+j[5]+3593408605&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[10]+38016083&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[15]+3634488961&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[4]+3889429448&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(S^A&(w^S))+j[9]+568446438&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[14]+3275163606&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[3]+4107603335&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[8]+1163531501&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(S^A&(w^S))+j[13]+2850285829&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[2]+4243563512&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[7]+1735328473&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[12]+2368359562&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(w^S^A)+j[5]+4294588738&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[8]+2272392833&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[11]+1839030562&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[14]+4259657740&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(w^S^A)+j[1]+2763975236&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[4]+1272893353&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[7]+4139469664&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[10]+3200236656&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(w^S^A)+j[13]+681279174&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[0]+3936430074&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[3]+3572445317&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[6]+76029189&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(w^S^A)+j[9]+3654602809&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[12]+3873151461&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[15]+530742520&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[2]+3299628645&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(S^(w|~A))+j[0]+4096336452&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[7]+1126891415&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[14]+2878612391&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[5]+4237533241&4294967295,w=S+(x<<21&4294967295|x>>>11),x=_+(S^(w|~A))+j[12]+1700485571&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[3]+2399980690&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[10]+4293915773&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[1]+2240044497&4294967295,w=S+(x<<21&4294967295|x>>>11),x=_+(S^(w|~A))+j[8]+1873313359&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[15]+4264355552&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[6]+2734768916&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[13]+1309151649&4294967295,w=S+(x<<21&4294967295|x>>>11),x=_+(S^(w|~A))+j[4]+4149444226&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[11]+3174756917&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[2]+718787259&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(S+(x<<21&4294967295|x>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+A&4294967295}n.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var w=_-this.blockSize,j=this.B,S=this.h,A=0;A<_;){if(S==0)for(;A<=w;)s(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(j[S++]=I.charCodeAt(A++),S==this.blockSize){s(this,j),S=0;break}}else for(;A<_;)if(j[S++]=I[A++],S==this.blockSize){s(this,j),S=0;break}}this.h=S,this.o+=_},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var w=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=w&255,w/=256;for(this.u(I),I=Array(16),_=w=0;4>_;++_)for(var j=0;32>j;j+=8)I[w++]=this.g[_]>>>j&255;return I};function i(I,_){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function o(I,_){this.h=_;for(var w=[],j=!0,S=I.length-1;0<=S;S--){var A=I[S]|0;j&&A==_||(w[S]=A,j=!1)}this.g=w}var l={};function u(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return C(d(-I));for(var _=[],w=1,j=0;I>=w;j++)_[j]=I/w|0,w*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(_,8)),j=g,S=0;S<I.length;S+=8){var A=Math.min(8,I.length-S),x=parseInt(I.substring(S,S+A),_);8>A?(A=d(Math.pow(_,A)),j=j.j(A).add(d(x))):(j=j.j(w),j=j.add(d(x)))}return j}var g=u(0),m=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(v(this))return-C(this).m();for(var I=0,_=1,w=0;w<this.g.length;w++){var j=this.i(w);I+=(0<=j?j:4294967296+j)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(v(this))return"-"+C(this).toString(I);for(var _=d(Math.pow(I,6)),w=this,j="";;){var S=R(w,_).g;w=E(w,S.j(_));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=S,k(w))return A+j;for(;6>A.length;)A="0"+A;j=A+j}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=E(this,I),v(I)?-1:k(I)?0:1};function C(I){for(var _=I.g.length,w=[],j=0;j<_;j++)w[j]=~I.g[j];return new o(w,~I.h).add(m)}t.abs=function(){return v(this)?C(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0,S=0;S<=_;S++){var A=j+(this.i(S)&65535)+(I.i(S)&65535),x=(A>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);j=x>>>16,A&=65535,x&=65535,w[S]=x<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(I,_){return I.add(C(_))}t.j=function(I){if(k(this)||k(I))return g;if(v(this))return v(I)?C(this).j(C(I)):C(C(this).j(I));if(v(I))return C(this.j(C(I)));if(0>this.l(b)&&0>I.l(b))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,w=[],j=0;j<2*_;j++)w[j]=0;for(j=0;j<this.g.length;j++)for(var S=0;S<I.g.length;S++){var A=this.i(j)>>>16,x=this.i(j)&65535,H=I.i(S)>>>16,U=I.i(S)&65535;w[2*j+2*S]+=x*U,y(w,2*j+2*S),w[2*j+2*S+1]+=A*U,y(w,2*j+2*S+1),w[2*j+2*S+1]+=x*H,y(w,2*j+2*S+1),w[2*j+2*S+2]+=A*H,y(w,2*j+2*S+2)}for(j=0;j<_;j++)w[j]=w[2*j+1]<<16|w[2*j];for(j=_;j<2*_;j++)w[j]=0;return new o(w,0)};function y(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function N(I,_){this.g=I,this.h=_}function R(I,_){if(k(_))throw Error("division by zero");if(k(I))return new N(g,g);if(v(I))return _=R(C(I),_),new N(C(_.g),C(_.h));if(v(_))return _=R(I,C(_)),new N(C(_.g),_.h);if(30<I.g.length){if(v(I)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,j=_;0>=j.l(I);)w=L(w),j=L(j);var S=M(w,1),A=M(j,1);for(j=M(j,2),w=M(w,2);!k(j);){var x=A.add(j);0>=x.l(I)&&(S=S.add(w),A=x),j=M(j,1),w=M(w,1)}return _=E(I,S.j(_)),new N(S,_)}for(S=g;0<=I.l(_);){for(w=Math.max(1,Math.floor(I.m()/_.m())),j=Math.ceil(Math.log(w)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),A=d(w),x=A.j(_);v(x)||0<x.l(I);)w-=j,A=d(w),x=A.j(_);k(A)&&(A=m),S=S.add(A),I=E(I,x)}return new N(S,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0;j<_;j++)w[j]=this.i(j)&I.i(j);return new o(w,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0;j<_;j++)w[j]=this.i(j)|I.i(j);return new o(w,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0;j<_;j++)w[j]=this.i(j)^I.i(j);return new o(w,this.h^I.h)};function L(I){for(var _=I.g.length+1,w=[],j=0;j<_;j++)w[j]=I.i(j)<<1|I.i(j-1)>>>31;return new o(w,I.h)}function M(I,_){var w=_>>5;_%=32;for(var j=I.g.length-w,S=[],A=0;A<j;A++)S[A]=0<_?I.i(A+w)>>>_|I.i(A+w+1)<<32-_:I.i(A+w);return new o(S,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Tw=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,qs=o}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iw,no,Cw,Ec,kf,Aw,Pw,Rw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,p){return c==Array.prototype||c==Object.prototype||(c[f]=p.value),c};function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nc=="object"&&nc];for(var f=0;f<c.length;++f){var p=c[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(c,f){if(f)e:{var p=n;c=c.split(".");for(var T=0;T<c.length-1;T++){var O=c[T];if(!(O in p))break e;p=p[O]}c=c[c.length-1],T=p[c],f=f(T),f!=T&&f!=null&&e(p,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var p=0,T=!1,O={next:function(){if(!T&&p<c.length){var z=p++;return{value:f(z,c[z]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,p){return c.call.apply(c.bind,arguments)}function g(c,f,p){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function m(c,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,m.apply(null,arguments)}function b(c,f){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function k(c,f){function p(){}p.prototype=f.prototype,c.aa=f.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(T,O,z){for(var re=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)re[Ue-2]=arguments[Ue];return f.prototype[O].apply(T,re)}}function v(c){const f=c.length;if(0<f){const p=Array(f);for(let T=0;T<f;T++)p[T]=c[T];return p}return[]}function C(c,f){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(u(T)){const O=c.length||0,z=T.length||0;c.length=O+z;for(let re=0;re<z;re++)c[O+re]=T[re]}else c.push(T)}}class E{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var L=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function M(c,f,p){for(const T in c)f.call(p,c[T],T,c)}function I(c,f){for(const p in c)f.call(void 0,c[p],p,c)}function _(c){const f={};for(const p in c)f[p]=c[p];return f}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,f){let p,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(p in T)c[p]=T[p];for(let z=0;z<w.length;z++)p=w[z],Object.prototype.hasOwnProperty.call(T,p)&&(c[p]=T[p])}}function S(c){var f=1;c=c.split(":");const p=[];for(;0<f&&c.length;)p.push(c.shift()),f--;return c.length&&p.push(c.join(":")),p}function A(c){l.setTimeout(()=>{throw c},0)}function x(){var c=V;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class H{constructor(){this.h=this.g=null}add(f,p){const T=U.get();T.set(f,p),this.h?this.h.next=T:this.g=T,this.h=T}}var U=new E(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let q,F=!1,V=new H,D=()=>{const c=l.Promise.resolve(void 0);q=()=>{c.then(W)}};var W=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(p){A(p)}var f=U;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}F=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return c}();function le(c,f){if(te.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(L){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else p=="mouseover"?f=c.fromElement:p=="mouseout"&&(f=c.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&le.aa.h.call(this)}}k(le,te);var fe={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),X=0;function G(c,f,p,T,O){this.listener=c,this.proxy=null,this.src=f,this.type=p,this.capture=!!T,this.ha=O,this.key=++X,this.da=this.fa=!1}function K(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ne(c){this.src=c,this.g={},this.h=0}Ne.prototype.add=function(c,f,p,T,O){var z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);var re=se(c,f,T,O);return-1<re?(f=c[re],p||(f.fa=!1)):(f=new G(f,this.src,z,!!T,O),f.fa=p,c.push(f)),f};function ke(c,f){var p=f.type;if(p in c.g){var T=c.g[p],O=Array.prototype.indexOf.call(T,f,void 0),z;(z=0<=O)&&Array.prototype.splice.call(T,O,1),z&&(K(f),c.g[p].length==0&&(delete c.g[p],c.h--))}}function se(c,f,p,T){for(var O=0;O<c.length;++O){var z=c[O];if(!z.da&&z.listener==f&&z.capture==!!p&&z.ha==T)return O}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),Pe={};function gt(c,f,p,T,O){if(Array.isArray(f)){for(var z=0;z<f.length;z++)gt(c,f[z],p,T,O);return null}return p=kr(p),c&&c[J]?c.K(f,p,d(T)?!!T.capture:!1,O):Ee(c,f,p,!1,T,O)}function Ee(c,f,p,T,O,z){if(!f)throw Error("Invalid event type");var re=d(O)?!!O.capture:!!O,Ue=je(c);if(Ue||(c[pe]=Ue=new Ne(c)),p=Ue.add(f,p,T,re,z),p.proxy)return p;if(T=ve(),p.proxy=T,T.src=c,T.listener=p,c.addEventListener)ue||(O=re),O===void 0&&(O=!1),c.addEventListener(f.toString(),T,O);else if(c.attachEvent)c.attachEvent(pt(f.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ve(){function c(p){return f.call(c.src,c.listener,p)}const f=Et;return c}function Xt(c,f,p,T,O){if(Array.isArray(f))for(var z=0;z<f.length;z++)Xt(c,f[z],p,T,O);else T=d(T)?!!T.capture:!!T,p=kr(p),c&&c[J]?(c=c.i,f=String(f).toString(),f in c.g&&(z=c.g[f],p=se(z,p,T,O),-1<p&&(K(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete c.g[f],c.h--)))):c&&(c=je(c))&&(f=c.g[f.toString()],c=-1,f&&(c=se(f,p,T,O)),(p=-1<c?f[c]:null)&&at(p))}function at(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[J])ke(f.i,c);else{var p=c.type,T=c.proxy;f.removeEventListener?f.removeEventListener(p,T,c.capture):f.detachEvent?f.detachEvent(pt(p),T):f.addListener&&f.removeListener&&f.removeListener(T),(p=je(f))?(ke(p,c),p.h==0&&(p.src=null,f[pe]=null)):K(c)}}}function pt(c){return c in Pe?Pe[c]:Pe[c]="on"+c}function Et(c,f){if(c.da)c=!0;else{f=new le(f,this);var p=c.listener,T=c.ha||c.src;c.fa&&at(c),c=p.call(T,f)}return c}function je(c){return c=c[pe],c instanceof Ne?c:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function kr(c){return typeof c=="function"?c:(c[Re]||(c[Re]=function(f){return c.handleEvent(f)}),c[Re])}function yt(){$.call(this),this.i=new Ne(this),this.M=this,this.F=null}k(yt,$),yt.prototype[J]=!0,yt.prototype.removeEventListener=function(c,f,p,T){Xt(this,c,f,p,T)};function jt(c,f){var p,T=c.F;if(T)for(p=[];T;T=T.F)p.push(T);if(c=c.M,T=f.type||f,typeof f=="string")f=new te(f,c);else if(f instanceof te)f.target=f.target||c;else{var O=f;f=new te(T,c),j(f,O)}if(O=!0,p)for(var z=p.length-1;0<=z;z--){var re=f.g=p[z];O=yi(re,T,!0,f)&&O}if(re=f.g=c,O=yi(re,T,!0,f)&&O,O=yi(re,T,!1,f)&&O,p)for(z=0;z<p.length;z++)re=f.g=p[z],O=yi(re,T,!1,f)&&O}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var p=c.g[f],T=0;T<p.length;T++)K(p[T]);delete c.g[f],c.h--}}this.F=null},yt.prototype.K=function(c,f,p,T){return this.i.add(String(c),f,!1,p,T)},yt.prototype.L=function(c,f,p,T){return this.i.add(String(c),f,!0,p,T)};function yi(c,f,p,T){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,z=0;z<f.length;++z){var re=f[z];if(re&&!re.da&&re.capture==p){var Ue=re.listener,Tt=re.ha||re.src;re.fa&&ke(c.i,re),O=Ue.call(Tt,T)!==!1&&O}}return O&&!T.defaultPrevented}function wl(c,f,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function _l(c){c.g=wl(()=>{c.g=null,c.i&&(c.i=!1,_l(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class dd extends ${constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:_l(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(c){$.call(this),this.h=c,this.g={}}k(Cs,$);var kl=[];function Nl(c){M(c.g,function(f,p){this.g.hasOwnProperty(p)&&at(f)},c),c.g={}}Cs.prototype.N=function(){Cs.aa.N.call(this),Nl(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Aa=l.JSON.stringify,hd=l.JSON.parse,fd=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Pa(){}Pa.prototype.h=null;function Ra(c){return c.h||(c.h=c.i())}function Q(){}var ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){te.call(this,"d")}k(me,te);function ge(){te.call(this,"c")}k(ge,te);var Te={},ot=null;function Mt(){return ot=ot||new yt}Te.La="serverreachability";function St(c){te.call(this,Te.La,c)}k(St,te);function xt(c){const f=Mt();jt(f,new St(f))}Te.STAT_EVENT="statevent";function Nr(c,f){te.call(this,Te.STAT_EVENT,c),this.stat=f}k(Nr,te);function et(c){const f=Mt();jt(f,new Nr(f,c))}Te.Ma="timingevent";function Ot(c,f){te.call(this,Te.Ma,c),this.size=f}k(Ot,te);function vt(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function md(c,f,p,T,O,z){c.info(function(){if(c.g)if(z)for(var re="",Ue=z.split("&"),Tt=0;Tt<Ue.length;Tt++){var $e=Ue[Tt].split("=");if(1<$e.length){var Lt=$e[0];$e=$e[1];var Vt=Lt.split("_");re=2<=Vt.length&&Vt[1]=="type"?re+(Lt+"="+$e+"&"):re+(Lt+"=redacted&")}}else re=null;else re=z;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+p+`
`+re})}function q1(c,f,p,T,O,z,re){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+p+`
`+z+" "+re})}function xi(c,f,p,T){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+K1(c,p)+(T?" "+T:"")})}function G1(c,f){c.info(function(){return"TIMEOUT: "+f})}As.prototype.info=function(){};function K1(c,f){if(!c.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var T=p[c];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var re=1;re<O.length;re++)O[re]=""}}}}return Aa(p)}catch{return f}}var El={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gd;function jl(){}k(jl,Pa),jl.prototype.g=function(){return new XMLHttpRequest},jl.prototype.i=function(){return{}},gd=new jl;function Vn(c,f,p,T){this.j=c,this.i=f,this.l=p,this.R=T||1,this.U=new Cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kg}function Kg(){this.i=null,this.g="",this.h=!1}var Qg={},pd={};function yd(c,f,p){c.L=1,c.v=Cl(mn(f)),c.m=p,c.P=!0,Yg(c,null)}function Yg(c,f){c.F=Date.now(),Sl(c),c.A=mn(c.v);var p=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),u0(p.i,"t",T),c.C=0,p=c.j.J,c.h=new Kg,c.g=T0(c.j,p?f:null,!c.m),0<c.O&&(c.M=new dd(m(c.Y,c,c.g),c.O)),f=c.U,p=c.g,T=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(kl[0]=O.toString()),O=kl);for(var z=0;z<O.length;z++){var re=gt(p,O[z],T||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),xt(),md(c.i,c.u,c.A,c.l,c.R,c.m)}Vn.prototype.ca=function(c){c=c.target;const f=this.M;f&&gn(c)==3?f.j():this.Y(c)},Vn.prototype.Y=function(c){try{if(c==this.g)e:{const Vt=gn(this.g);var f=this.g.Ba();const wi=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||y0(this.g)))){this.J||Vt!=4||f==7||(f==8||0>=wi?xt(3):xt(2)),xd(this);var p=this.g.Z();this.X=p;t:if(Xg(this)){var T=y0(this.g);c="";var O=T.length,z=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),Da(this);var re="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(T[f],{stream:!(z&&f==O-1)});T.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=p==200,q1(this.i,this.u,this.A,this.l,this.R,Vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Tt=this.g;if((Ue=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ue)){var $e=Ue;break t}}$e=null}if(p=$e)xi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,p);else{this.o=!1,this.s=3,et(12),Ps(this),Da(this);break e}}if(this.P){p=!0;let Rr;for(;!this.J&&this.C<re.length;)if(Rr=Q1(this,re),Rr==pd){Vt==4&&(this.s=4,et(14),p=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Qg){this.s=4,et(15),xi(this.i,this.l,re,"[Invalid Chunk]"),p=!1;break}else xi(this.i,this.l,Rr,null),vd(this,Rr);if(Xg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||re.length!=0||this.h.h||(this.s=1,et(16),p=!1),this.o=this.o&&p,!p)xi(this.i,this.l,re,"[Invalid Chunked Response]"),Ps(this),Da(this);else if(0<re.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Ed(Lt),Lt.M=!0,et(11))}}else xi(this.i,this.l,re,null),vd(this,re);Vt==4&&Ps(this),this.o&&!this.J&&(Vt==4?N0(this.j,this):(this.o=!1,Sl(this)))}else h2(this.g),p==400&&0<re.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),Ps(this),Da(this)}}}catch{}finally{}};function Xg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Q1(c,f){var p=c.C,T=f.indexOf(`
`,p);return T==-1?pd:(p=Number(f.substring(p,T)),isNaN(p)?Qg:(T+=1,T+p>f.length?pd:(f=f.slice(T,T+p),c.C=T+p,f)))}Vn.prototype.cancel=function(){this.J=!0,Ps(this)};function Sl(c){c.S=Date.now()+c.I,Jg(c,c.I)}function Jg(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=vt(m(c.ba,c),f)}function xd(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Vn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(G1(this.i,this.A),this.L!=2&&(xt(),et(17)),Ps(this),this.s=2,Da(this)):Jg(this,this.S-c)};function Da(c){c.j.G==0||c.J||N0(c.j,c)}function Ps(c){xd(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Nl(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function vd(c,f){try{var p=c.j;if(p.G!=0&&(p.g==c||bd(p.h,c))){if(!c.K&&bd(p.h,c)&&p.G==3){try{var T=p.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Ml(p),Dl(p);else break e;Nd(p),et(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=vt(m(p.Za,p),6e3));if(1>=t0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ds(p,11)}else if((c.K||p.g==c)&&Ml(p),!y(f))for(O=p.Da.g.parse(f),f=0;f<O.length;f++){let $e=O[f];if(p.T=$e[0],$e=$e[1],p.G==2)if($e[0]=="c"){p.K=$e[1],p.ia=$e[2];const Lt=$e[3];Lt!=null&&(p.la=Lt,p.j.info("VER="+p.la));const Vt=$e[4];Vt!=null&&(p.Aa=Vt,p.j.info("SVER="+p.Aa));const wi=$e[5];wi!=null&&typeof wi=="number"&&0<wi&&(T=1.5*wi,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Rr=c.g;if(Rr){const Ll=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ll){var z=T.h;z.g||Ll.indexOf("spdy")==-1&&Ll.indexOf("quic")==-1&&Ll.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(wd(z,z.h),z.h=null))}if(T.D){const jd=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;jd&&(T.ya=jd,We(T.I,T.D,jd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var re=c;if(T.qa=S0(T,T.J?T.ia:null,T.W),re.K){r0(T.h,re);var Ue=re,Tt=T.L;Tt&&(Ue.I=Tt),Ue.B&&(xd(Ue),Sl(Ue)),T.g=re}else _0(T);0<p.i.length&&$l(p)}else $e[0]!="stop"&&$e[0]!="close"||Ds(p,7);else p.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Ds(p,7):kd(p):$e[0]!="noop"&&p.l&&p.l.ta($e),p.v=0)}}xt(4)}catch{}}var Y1=class{constructor(c,f){this.g=c,this.map=f}};function Zg(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function t0(c){return c.h?1:c.g?c.g.size:0}function bd(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function wd(c,f){c.g?c.g.add(f):c.h=f}function r0(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Zg.prototype.cancel=function(){if(this.i=n0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function n0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const p of c.g.values())f=f.concat(p.D);return f}return v(c.i)}function X1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],p=c.length,T=0;T<p;T++)f.push(c[T]);return f}f=[],p=0;for(T in c)f[p++]=c[T];return f}function J1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var p=0;p<c;p++)f.push(p);return f}f=[],p=0;for(const T in c)f[p++]=T;return f}}}function s0(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var p=J1(c),T=X1(c),O=T.length,z=0;z<O;z++)f.call(void 0,T[z],p&&p[z],c)}var i0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z1(c,f){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var T=c[p].indexOf("="),O=null;if(0<=T){var z=c[p].substring(0,T);O=c[p].substring(T+1)}else z=c[p];f(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Rs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Rs){this.h=c.h,Tl(this,c.j),this.o=c.o,this.g=c.g,Il(this,c.s),this.l=c.l;var f=c.i,p=new Oa;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),a0(this,p),this.m=c.m}else c&&(f=String(c).match(i0))?(this.h=!1,Tl(this,f[1]||"",!0),this.o=$a(f[2]||""),this.g=$a(f[3]||"",!0),Il(this,f[4]),this.l=$a(f[5]||"",!0),a0(this,f[6]||"",!0),this.m=$a(f[7]||"")):(this.h=!1,this.i=new Oa(null,this.h))}Rs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ma(f,o0,!0),":");var p=this.g;return(p||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ma(f,o0,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Ma(p,p.charAt(0)=="/"?r2:t2,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Ma(p,s2)),c.join("")};function mn(c){return new Rs(c)}function Tl(c,f,p){c.j=p?$a(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Il(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function a0(c,f,p){f instanceof Oa?(c.i=f,i2(c.i,c.h)):(p||(f=Ma(f,n2)),c.i=new Oa(f,c.h))}function We(c,f,p){c.i.set(f,p)}function Cl(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $a(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ma(c,f,p){return typeof c=="string"?(c=encodeURI(c).replace(f,e2),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function e2(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var o0=/[#\/\?@]/g,t2=/[#\?:]/g,r2=/[#\?]/g,n2=/[#\?@]/g,s2=/#/g;function Oa(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Fn(c){c.g||(c.g=new Map,c.h=0,c.i&&Z1(c.i,function(f,p){c.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Oa.prototype,t.add=function(c,f){Fn(this),this.i=null,c=vi(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(f),this.h+=1,this};function l0(c,f){Fn(c),f=vi(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function c0(c,f){return Fn(c),f=vi(c,f),c.g.has(f)}t.forEach=function(c,f){Fn(this),this.g.forEach(function(p,T){p.forEach(function(O){c.call(f,O,T,this)},this)},this)},t.na=function(){Fn(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let T=0;T<f.length;T++){const O=c[T];for(let z=0;z<O.length;z++)p.push(f[T])}return p},t.V=function(c){Fn(this);let f=[];if(typeof c=="string")c0(this,c)&&(f=f.concat(this.g.get(vi(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)f=f.concat(c[p])}return f},t.set=function(c,f){return Fn(this),this.i=null,c=vi(this,c),c0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function u0(c,f,p){l0(c,f),0<p.length&&(c.i=null,c.g.set(vi(c,f),v(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var T=f[p];const z=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var O=z;re[T]!==""&&(O+="="+encodeURIComponent(String(re[T]))),c.push(O)}}return this.i=c.join("&")};function vi(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function i2(c,f){f&&!c.j&&(Fn(c),c.i=null,c.g.forEach(function(p,T){var O=T.toLowerCase();T!=O&&(l0(this,T),u0(this,O,p))},c)),c.j=f}function a2(c,f){const p=new As;if(l.Image){const T=new Image;T.onload=b(Un,p,"TestLoadImage: loaded",!0,f,T),T.onerror=b(Un,p,"TestLoadImage: error",!1,f,T),T.onabort=b(Un,p,"TestLoadImage: abort",!1,f,T),T.ontimeout=b(Un,p,"TestLoadImage: timeout",!1,f,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else f(!1)}function o2(c,f){const p=new As,T=new AbortController,O=setTimeout(()=>{T.abort(),Un(p,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:T.signal}).then(z=>{clearTimeout(O),z.ok?Un(p,"TestPingServer: ok",!0,f):Un(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Un(p,"TestPingServer: error",!1,f)})}function Un(c,f,p,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(p)}catch{}}function l2(){this.g=new fd}function c2(c,f,p){const T=p||"";try{s0(c,function(O,z){let re=O;d(O)&&(re=Aa(O)),f.push(T+z+"="+encodeURIComponent(re))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function Al(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Al,Pa),Al.prototype.g=function(){return new Pl(this.l,this.j)},Al.prototype.i=function(c){return function(){return c}}({});function Pl(c,f){yt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Pl,yt),t=Pl.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Va(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;d0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function d0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?La(this):Va(this),this.readyState==3&&d0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,La(this))},t.Qa=function(c){this.g&&(this.response=c,La(this))},t.ga=function(){this.g&&La(this)};function La(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Va(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=f.next();return c.join(`\r
`)};function Va(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function h0(c){let f="";return M(c,function(p,T){f+=T,f+=":",f+=p,f+=`\r
`}),f}function _d(c,f,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=h0(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):We(c,f,p))}function tt(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(tt,yt);var u2=/^https?$/i,d2=["POST","PUT"];t=tt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gd.g(),this.v=this.o?Ra(this.o):Ra(gd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(z){f0(this,z);return}if(c=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)p.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())p.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(d2,f,void 0))||T||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of p)this.g.setRequestHeader(z,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{p0(this),this.u=!0,this.g.send(c),this.u=!1}catch(z){f0(this,z)}};function f0(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,m0(c),Rl(c)}function m0(c){c.A||(c.A=!0,jt(c,"complete"),jt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,jt(this,"complete"),jt(this,"abort"),Rl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rl(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?g0(this):this.bb())},t.bb=function(){g0(this)};function g0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||gn(c)!=4||c.Z()!=2)){if(c.u&&gn(c)==4)wl(c.Ea,0,c);else if(jt(c,"readystatechange"),gn(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var T;if(T=re===0){var O=String(c.D).match(i0)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),T=!u2.test(O?O.toLowerCase():"")}p=T}if(p)jt(c,"complete"),jt(c,"success");else{c.m=6;try{var z=2<gn(c)?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.Z()+"]",m0(c)}}finally{Rl(c)}}}}function Rl(c,f){if(c.g){p0(c);const p=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||jt(c,"ready");try{p.onreadystatechange=T}catch{}}}function p0(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function gn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),hd(f)}};function y0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function h2(c){const f={};c=(c.g&&2<=gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(y(c[T]))continue;var p=S(c[T]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=f[O]||[];f[O]=z,z.push(p)}I(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(c,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||f}function x0(c){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,c),this.cb=Fa("retryDelaySeedMs",1e4,c),this.Wa=Fa("forwardChannelMaxRetries",2,c),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zg(c&&c.concurrentRequestLimit),this.Da=new l2,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=x0.prototype,t.la=8,t.G=1,t.connect=function(c,f,p,T){et(0),this.W=c,this.H=f||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=S0(this,null,this.W),$l(this)};function kd(c){if(v0(c),c.G==3){var f=c.U++,p=mn(c.I);if(We(p,"SID",c.K),We(p,"RID",f),We(p,"TYPE","terminate"),Ua(c,p),f=new Vn(c,c.j,f),f.L=2,f.v=Cl(mn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=T0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Sl(f)}j0(c)}function Dl(c){c.g&&(Ed(c),c.g.cancel(),c.g=null)}function v0(c){Dl(c),c.u&&(l.clearTimeout(c.u),c.u=null),Ml(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function $l(c){if(!e0(c.h)&&!c.s){c.s=!0;var f=c.Ga;q||D(),F||(q(),F=!0),V.add(f,c),c.B=0}}function f2(c,f){return t0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=vt(m(c.Ga,c,f),E0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new Vn(this,this.j,c);let z=this.o;if(this.S&&(z?(z=_(z),j(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=w0(this,O,f),p=mn(this.I),We(p,"RID",c),We(p,"CVER",22),this.D&&We(p,"X-HTTP-Session-Id",this.D),Ua(this,p),z&&(this.O?f="headers="+encodeURIComponent(String(h0(z)))+"&"+f:this.m&&_d(p,this.m,z)),wd(this.h,O),this.Ua&&We(p,"TYPE","init"),this.P?(We(p,"$req",f),We(p,"SID","null"),O.T=!0,yd(O,p,null)):yd(O,p,f),this.G=2}}else this.G==3&&(c?b0(this,c):this.i.length==0||e0(this.h)||b0(this))};function b0(c,f){var p;f?p=f.l:p=c.U++;const T=mn(c.I);We(T,"SID",c.K),We(T,"RID",p),We(T,"AID",c.T),Ua(c,T),c.m&&c.o&&_d(T,c.m,c.o),p=new Vn(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),f&&(c.i=f.D.concat(c.i)),f=w0(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wd(c.h,p),yd(p,T,f)}function Ua(c,f){c.H&&M(c.H,function(p,T){We(f,T,p)}),c.l&&s0({},function(p,T){We(f,T,p)})}function w0(c,f,p){p=Math.min(c.i.length,p);var T=c.l?m(c.l.Na,c.l,c):null;e:{var O=c.i;let z=-1;for(;;){const re=["count="+p];z==-1?0<p?(z=O[0].g,re.push("ofs="+z)):z=0:re.push("ofs="+z);let Ue=!0;for(let Tt=0;Tt<p;Tt++){let $e=O[Tt].g;const Lt=O[Tt].map;if($e-=z,0>$e)z=Math.max(0,O[Tt].g-100),Ue=!1;else try{c2(Lt,re,"req"+$e+"_")}catch{T&&T(Lt)}}if(Ue){T=re.join("&");break e}}}return c=c.i.splice(0,p),f.D=c,T}function _0(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;q||D(),F||(q(),F=!0),V.add(f,c),c.v=0}}function Nd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=vt(m(c.Fa,c),E0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,k0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=vt(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Dl(this),k0(this))};function Ed(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function k0(c){c.g=new Vn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=mn(c.qa);We(f,"RID","rpc"),We(f,"SID",c.K),We(f,"AID",c.T),We(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(f,"TO",c.ja),We(f,"TYPE","xmlhttp"),Ua(c,f),c.m&&c.o&&_d(f,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Cl(mn(f)),p.m=null,p.P=!0,Yg(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Dl(this),Nd(this),et(19))};function Ml(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function N0(c,f){var p=null;if(c.g==f){Ml(c),Ed(c),c.g=null;var T=2}else if(bd(c.h,f))p=f.D,r0(c.h,f),T=1;else return;if(c.G!=0){if(f.o)if(T==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;T=Mt(),jt(T,new Ot(T,p)),$l(c)}else _0(c);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&f2(c,f)||T==2&&Nd(c)))switch(p&&0<p.length&&(f=c.h,f.i=f.i.concat(p)),O){case 1:Ds(c,5);break;case 4:Ds(c,10);break;case 3:Ds(c,6);break;default:Ds(c,2)}}}function E0(c,f){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*f}function Ds(c,f){if(c.j.info("Error code "+f),f==2){var p=m(c.fb,c),T=c.Xa;const O=!T;T=new Rs(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tl(T,"https"),Cl(T),O?a2(T.toString(),p):o2(T.toString(),p)}else et(2);c.G=0,c.l&&c.l.sa(f),j0(c),v0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function j0(c){if(c.G=0,c.ka=[],c.l){const f=n0(c.h);(f.length!=0||c.i.length!=0)&&(C(c.ka,f),C(c.ka,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.ra()}}function S0(c,f,p){var T=p instanceof Rs?mn(p):new Rs(p);if(T.g!="")f&&(T.g=f+"."+T.g),Il(T,T.s);else{var O=l.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var z=new Rs(null);T&&Tl(z,T),f&&(z.g=f),O&&Il(z,O),p&&(z.l=p),T=z}return p=c.D,f=c.ya,p&&f&&We(T,p,f),We(T,"VER",c.la),Ua(c,T),T}function T0(c,f,p){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new tt(new Al({eb:p})):new tt(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function I0(){}t=I0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ol(){}Ol.prototype.g=function(c,f){return new dr(c,f)};function dr(c,f){yt.call(this),this.g=new x0(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new bi(this)}k(dr,yt),dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dr.prototype.close=function(){kd(this.g)},dr.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Aa(c),c=p);f.i.push(new Y1(f.Ya++,c)),f.G==3&&$l(f)},dr.prototype.N=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,dr.aa.N.call(this)};function C0(c){me.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const p in f){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}k(C0,me);function A0(){ge.call(this),this.status=1}k(A0,ge);function bi(c){this.g=c}k(bi,I0),bi.prototype.ua=function(){jt(this.g,"a")},bi.prototype.ta=function(c){jt(this.g,new C0(c))},bi.prototype.sa=function(c){jt(this.g,new A0)},bi.prototype.ra=function(){jt(this.g,"b")},Ol.prototype.createWebChannel=Ol.prototype.g,dr.prototype.send=dr.prototype.o,dr.prototype.open=dr.prototype.m,dr.prototype.close=dr.prototype.close,Rw=function(){return new Ol},Pw=function(){return Mt()},Aw=Te,kf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},El.NO_ERROR=0,El.TIMEOUT=8,El.HTTP_ERROR=6,Ec=El,Gg.COMPLETE="complete",Cw=Gg,Q.EventType=ne,ne.OPEN="a",ne.CLOSE="b",ne.ERROR="c",ne.MESSAGE="d",yt.prototype.listen=yt.prototype.K,no=Q,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Iw=tt}).apply(typeof nc<"u"?nc:typeof self<"u"?self:typeof window<"u"?window:{});const yy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new Qm("@firebase/firestore");function Ya(){return ri.logLevel}function ce(t,...e){if(ri.logLevel<=Ce.DEBUG){const r=e.map(Jm);ri.debug(`Firestore (${ka}): ${t}`,...r)}}function Rn(t,...e){if(ri.logLevel<=Ce.ERROR){const r=e.map(Jm);ri.error(`Firestore (${ka}): ${t}`,...r)}}function ca(t,...e){if(ri.logLevel<=Ce.WARN){const r=e.map(Jm);ri.warn(`Firestore (${ka}): ${t}`,...r)}}function Jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t="Unexpected state"){const e=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: `+t;throw Rn(e),new Error(e)}function Fe(t,e){t||xe()}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends hn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(zt.UNAUTHENTICATED))}shutdown(){}}class _T{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kT{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Fe(this.o===void 0);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ps,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ps)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Fe(typeof n.accessToken=="string"),new Dw(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new zt(e)}}class NT{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ET{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new NT(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ST{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Fe(this.o===void 0);const n=i=>{i.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Fe(typeof r.token=="string"),this.R=r.token,new jT(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=TT(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Me(t,e){return t<e?-1:t>e?1:0}function ua(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new mt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new mt(0,0))}static max(){return new be(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,r,n){r===void 0?r=0:r>e.length&&xe(),n===void 0?n=e.length-r:n>e.length-r&&xe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Wo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Wo?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),o=r.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class qe extends Wo{construct(e,r,n){return new qe(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ae(Y.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new qe(r)}static emptyPath(){return new qe([])}}const IT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Wo{construct(e,r,n){return new At(e,r,n)}static isValidIdentifier(e){return IT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ae(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ae(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(i(),s++)}if(i(),o)throw new ae(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(r)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(qe.fromString(e))}static fromName(e){return new de(qe.fromString(e).popFirst(5))}static empty(){return new de(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return qe.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new qe(e.slice()))}}function CT(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=be.fromTimestamp(n===1e9?new mt(r+1,0):new mt(r,n));return new ws(s,de.empty(),e)}function AT(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ws(be.min(),de.empty(),-1)}static max(){return new ws(be.max(),de.empty(),-1)}}function PT(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=de.comparator(t.documentKey,e.documentKey),r!==0?r:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==RT)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Z((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Z?r:Z.resolve(r)}catch(r){return Z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.reject(r)}static resolve(e){return new Z((r,n)=>{r(e)})}static reject(e){return new Z((r,n)=>{n(e)})}static waitFor(e){return new Z((r,n)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&r()},u=>n(u))}),o=!0,i===s&&r()})}static or(e){let r=Z.resolve(!1);for(const n of e)r=r.next(s=>s?Z.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Z((n,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;r(e[d]).next(h=>{o[d]=h,++l,l===i&&n(o)},h=>s(h))}})}static doWhile(e,r){return new Z((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function $T(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ul(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zm.oe=-1;function Gu(t){return t==null}function cu(t){return t===0&&1/t==-1/0}function MT(t){return typeof t=="number"&&Number.isInteger(t)&&!cu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function fi(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Mw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,r){this.comparator=e,this.root=r||Ct.EMPTY}insert(e,r){return new Je(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Ct.RED,this.left=s??Ct.EMPTY,this.right=i??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Ct(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Ct(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new vy(this.data.getIterator())}getIteratorFrom(e){return new vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Rt(this.comparator);return r.data=e,r}}class vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new mr([])}unionWith(e){let r=new Rt(At.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new mr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ow("Invalid base64 string: "+i):i}}(e);return new $t(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new $t(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const OT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(Fe(!!t),typeof t=="string"){let e=0;const r=OT.exec(t);if(Fe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ni(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function tg(t){const e=t.mapValue.fields.__previous_value__;return eg(e)?tg(e):e}function Ho(t){const e=_s(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,r,n,s,i,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class qo{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic={mapValue:{}};function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eg(t)?4:FT(t)?9007199254740991:VT(t)?10:11:xe()}function ln(t,e){if(t===e)return!0;const r=si(t);if(r!==si(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ho(t).isEqual(Ho(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=_s(s.timestampValue),l=_s(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ni(s.bytesValue).isEqual(ni(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),l=nt(i.doubleValue);return o===l?cu(o)===cu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],ln);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(xy(o)!==xy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!ln(o[u],l[u])))return!1;return!0}(t,e);default:return xe()}}function Go(t,e){return(t.values||[]).find(r=>ln(r,e))!==void 0}function da(t,e){if(t===e)return 0;const r=si(t),n=si(e);if(r!==n)return Me(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=nt(i.integerValue||i.doubleValue),u=nt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return by(t.timestampValue,e.timestampValue);case 4:return by(Ho(t),Ho(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ni(i),u=ni(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Me(l[d],u[d]);if(h!==0)return h}return Me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Me(nt(i.latitude),nt(o.latitude));return l!==0?l:Me(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,h;const g=i.fields||{},m=o.fields||{},b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=(u=m.value)===null||u===void 0?void 0:u.arrayValue,v=Me(((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0,((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:wy(b,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ic.mapValue&&o===ic.mapValue)return 0;if(i===ic.mapValue)return 1;if(o===ic.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=Me(u[g],h[g]);if(m!==0)return m;const b=da(l[u[g]],d[h[g]]);if(b!==0)return b}return Me(u.length,h.length)}(t.mapValue,e.mapValue);default:throw xe()}}function by(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const r=_s(t),n=_s(e),s=Me(r.seconds,n.seconds);return s!==0?s:Me(r.nanos,n.nanos)}function wy(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=da(r[s],n[s]);if(i)return i}return Me(r.length,n.length)}function ha(t){return Nf(t)}function Nf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=_s(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ni(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return de.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Nf(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${Nf(r.fields[o])}`;return s+"}"}(t.mapValue):xe()}function _y(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ef(t){return!!t&&"integerValue"in t}function rg(t){return!!t&&"arrayValue"in t}function ky(t){return!!t&&"nullValue"in t}function Ny(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function VT(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=yo(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=yo(t.arrayValue.values[r]);return e}return Object.assign({},t)}function FT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!jc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(r)}setAll(e){let r=At.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=yo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());jc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ln(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];jc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){fi(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ir(yo(this.value))}}function Lw(t){const e=[];return fi(t.fields,(r,n)=>{const s=new At([r]);if(jc(n)){const i=Lw(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,r,n,s,i,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,be.min(),be.min(),be.min(),ir.empty(),0)}static newFoundDocument(e,r,n,s){return new Ht(e,1,r,be.min(),n,s,0)}static newNoDocument(e,r){return new Ht(e,2,r,be.min(),be.min(),ir.empty(),0)}static newUnknownDocument(e,r){return new Ht(e,3,r,be.min(),be.min(),ir.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r){this.position=e,this.inclusive=r}}function Ey(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=de.comparator(de.fromName(o.referenceValue),r.key):n=da(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function jy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ln(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,r="asc"){this.field=e,this.dir=r}}function UT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{}class ut extends Vw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new zT(e,r,n):r==="array-contains"?new qT(e,n):r==="in"?new GT(e,n):r==="not-in"?new KT(e,n):r==="array-contains-any"?new QT(e,n):new ut(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new WT(e,n):new HT(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(da(r,this.value)):r!==null&&si(this.value)===si(r)&&this.matchesComparison(da(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends Vw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Hr(e,r)}matches(e){return Fw(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fw(t){return t.op==="and"}function Uw(t){return BT(t)&&Fw(t)}function BT(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function jf(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(Uw(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(r=>jf(r)).join(",");return`${t.op}(${e})`}}function Bw(t,e){return t instanceof ut?function(n,s){return s instanceof ut&&n.op===s.op&&n.field.isEqual(s.field)&&ln(n.value,s.value)}(t,e):t instanceof Hr?function(n,s){return s instanceof Hr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,l)=>i&&Bw(o,s.filters[l]),!0):!1}(t,e):void xe()}function zw(t){return t instanceof ut?function(r){return`${r.field.canonicalString()} ${r.op} ${ha(r.value)}`}(t):t instanceof Hr?function(r){return r.op.toString()+" {"+r.getFilters().map(zw).join(" ,")+"}"}(t):"Filter"}class zT extends ut{constructor(e,r,n){super(e,r,n),this.key=de.fromName(n.referenceValue)}matches(e){const r=de.comparator(e.key,this.key);return this.matchesComparison(r)}}class WT extends ut{constructor(e,r){super(e,"in",r),this.keys=Ww("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class HT extends ut{constructor(e,r){super(e,"not-in",r),this.keys=Ww("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Ww(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>de.fromName(n.referenceValue))}class qT extends ut{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return rg(r)&&Go(r.arrayValue,this.value)}}class GT extends ut{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Go(this.value.arrayValue,r)}}class KT extends ut{constructor(e,r){super(e,"not-in",r)}matches(e){if(Go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Go(this.value.arrayValue,r)}}class QT extends ut{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!rg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Go(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,r=null,n=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Sy(t,e=null,r=[],n=[],s=null,i=null,o=null){return new YT(t,e,r,n,s,i,o)}function ng(t){const e=we(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>jf(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Gu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ha(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ha(n)).join(",")),e.ue=r}return e.ue}function sg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!UT(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Bw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jy(t.startAt,e.startAt)&&jy(t.endAt,e.endAt)}function Sf(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,r=null,n=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function XT(t,e,r,n,s,i,o,l){return new Na(t,e,r,n,s,i,o,l)}function Hw(t){return new Na(t)}function Ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qw(t){return t.collectionGroup!==null}function xo(t){const e=we(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Rt(At.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ko(i,n))}),r.has(At.keyField().canonicalString())||e.ce.push(new Ko(At.keyField(),n))}return e.ce}function nn(t){const e=we(t);return e.le||(e.le=JT(e,xo(t))),e.le}function JT(t,e){if(t.limitType==="F")return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ko(s.field,i)});const r=t.endAt?new uu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new uu(t.startAt.position,t.startAt.inclusive):null;return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Tf(t,e){const r=t.filters.concat([e]);return new Na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function If(t,e,r){return new Na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ku(t,e){return sg(nn(t),nn(e))&&t.limitType===e.limitType}function Gw(t){return`${ng(nn(t))}|lt:${t.limitType}`}function Ni(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>zw(s)).join(", ")}]`),Gu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>ha(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>ha(s)).join(",")),`Target(${n})`}(nn(t))}; limitType=${t.limitType})`}function Qu(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):de.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of xo(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,u){const d=Ey(o,l,u);return o.inclusive?d<=0:d<0}(n.startAt,xo(n),s)||n.endAt&&!function(o,l,u){const d=Ey(o,l,u);return o.inclusive?d>=0:d>0}(n.endAt,xo(n),s))}(t,e)}function ZT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kw(t){return(e,r)=>{let n=!1;for(const s of xo(t)){const i=eI(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function eI(t,e,r){const n=t.field.isKeyField()?de.comparator(e.key,r.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?da(u,d):xe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return Mw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Je(de.comparator);function Dn(){return tI}const Qw=new Je(de.comparator);function so(...t){let e=Qw;for(const r of t)e=e.insert(r.key,r);return e}function Yw(t){let e=Qw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Bs(){return vo()}function Xw(){return vo()}function vo(){return new Ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const rI=new Je(de.comparator),nI=new Rt(de.comparator);function Ie(...t){let e=nI;for(const r of t)e=e.add(r);return e}const sI=new Rt(Me);function iI(){return sI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(e)?"-0":e}}function Jw(t){return{integerValue:""+t}}function aI(t,e){return MT(e)?Jw(e):ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function oI(t,e,r){return t instanceof du?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&eg(i)&&(i=tg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(r,e):t instanceof Qo?e_(t,e):t instanceof Yo?t_(t,e):function(s,i){const o=Zw(s,i),l=Iy(o)+Iy(s.Pe);return Ef(o)&&Ef(s.Pe)?Jw(l):ig(s.serializer,l)}(t,e)}function lI(t,e,r){return t instanceof Qo?e_(t,e):t instanceof Yo?t_(t,e):r}function Zw(t,e){return t instanceof hu?function(n){return Ef(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class du extends Yu{}class Qo extends Yu{constructor(e){super(),this.elements=e}}function e_(t,e){const r=r_(e);for(const n of t.elements)r.some(s=>ln(s,n))||r.push(n);return{arrayValue:{values:r}}}class Yo extends Yu{constructor(e){super(),this.elements=e}}function t_(t,e){let r=r_(e);for(const n of t.elements)r=r.filter(s=>!ln(s,n));return{arrayValue:{values:r}}}class hu extends Yu{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Iy(t){return nt(t.integerValue||t.doubleValue)}function r_(t){return rg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cI(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Qo&&s instanceof Qo||n instanceof Yo&&s instanceof Yo?ua(n.elements,s.elements,ln):n instanceof hu&&s instanceof hu?ln(n.Pe,s.Pe):n instanceof du&&s instanceof du}(t.transform,e.transform)}class uI{constructor(e,r){this.version=e,this.transformResults=r}}class Br{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xu{}function n_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ag(t.key,Br.none()):new dl(t.key,t.data,Br.none());{const r=t.data,n=ir.empty();let s=new Rt(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new Is(t.key,n,new mr(s.toArray()),Br.none())}}function dI(t,e,r){t instanceof dl?function(s,i,o){const l=s.value.clone(),u=Ay(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Is?function(s,i,o){if(!Sc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ay(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(s_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function bo(t,e,r,n){return t instanceof dl?function(i,o,l,u){if(!Sc(i.precondition,o))return l;const d=i.value.clone(),h=Py(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof Is?function(i,o,l,u){if(!Sc(i.precondition,o))return l;const d=Py(i.fieldTransforms,u,o),h=o.data;return h.setAll(s_(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,r,n):function(i,o,l){return Sc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function hI(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=Zw(n.transform,s||null);i!=null&&(r===null&&(r=ir.empty()),r.set(n.field,i))}return r||null}function Cy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ua(n,s,(i,o)=>cI(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dl extends Xu{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends Xu{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function s_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Ay(t,e,r){const n=new Map;Fe(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);n.set(i.field,lI(o,l,r[s]))}return n}function Py(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,oI(i,o,e))}return n}class ag extends Xu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends Xu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&dI(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=bo(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=bo(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Xw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(s.key)?null:l;const u=n_(o,l);u!==null&&n.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(r,n)=>Cy(r,n))&&ua(this.baseMutations,e.baseMutations,(r,n)=>Cy(r,n))}}class og{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Fe(e.mutations.length===n.length);let s=function(){return rI}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new og(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ae;function yI(t){switch(t){default:return xe();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function i_(t){if(t===void 0)return Rn("GRPC error has no .code"),Y.UNKNOWN;switch(t){case lt.OK:return Y.OK;case lt.CANCELLED:return Y.CANCELLED;case lt.UNKNOWN:return Y.UNKNOWN;case lt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case lt.INTERNAL:return Y.INTERNAL;case lt.UNAVAILABLE:return Y.UNAVAILABLE;case lt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case lt.NOT_FOUND:return Y.NOT_FOUND;case lt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case lt.ABORTED:return Y.ABORTED;case lt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case lt.DATA_LOSS:return Y.DATA_LOSS;default:return xe()}}(Ae=lt||(lt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new qs([4294967295,4294967295],0);function Ry(t){const e=xI().encode(t),r=new Tw;return r.update(e),new Uint8Array(r.digest())}function Dy(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qs([r,n],0),new qs([s,i],0)]}class lg{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new io(`Invalid padding: ${r}`);if(n<0)throw new io(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new io(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=qs.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(qs.fromNumber(n)));return s.compare(vI)===1&&(s=new qs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Ry(e),[n,s]=Dy(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lg(i,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=Ry(e),[n,s]=Dy(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ju(be.min(),s,new Je(Me),Dn(),Ie())}}class hl{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new hl(n,r,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class a_{constructor(e,r){this.targetId=e,this.me=r}}class o_{constructor(e,r,n=$t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class $y{constructor(){this.fe=0,this.ge=Oy(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),r=Ie(),n=Ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:xe()}}),new hl(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Oy()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Dn(),this.qe=My(),this.Qe=new Je(Me)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Sf(i))if(n===0){const o=new de(i.path);this.Ue(r,o,Ht.newNoDocument(o,be.min()))}else Fe(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,d)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,l;try{o=ni(n).toUint8Array()}catch(u){if(u instanceof Ow)return ca("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lg(o,s,i)}catch(u){return ca(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Sf(l.target)){const u=new de(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ht.newNoDocument(u,e))}i.be&&(r.set(o,i.ve()),i.Ce())}});let n=Ie();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ju(e,r,this.Qe,this.ke,n);return this.ke=Dn(),this.qe=My(),this.Qe=new Je(Me),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new $y,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Rt(Me),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ce("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $y),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function My(){return new Je(de.comparator)}function Oy(){return new Je(de.comparator)}const wI={asc:"ASCENDING",desc:"DESCENDING"},_I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kI={and:"AND",or:"OR"};class NI{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Cf(t,e){return t.useProto3Json||Gu(e)?e:{value:e}}function fu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EI(t,e){return fu(t,e.toTimestamp())}function sn(t){return Fe(!!t),be.fromTimestamp(function(r){const n=_s(r);return new mt(n.seconds,n.nanos)}(t))}function cg(t,e){return Af(t,e).canonicalString()}function Af(t,e){const r=function(s){return new qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function c_(t){const e=qe.fromString(t);return Fe(m_(e)),e}function Pf(t,e){return cg(t.databaseId,e.path)}function ah(t,e){const r=c_(e);if(r.get(1)!==t.databaseId.projectId)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new de(d_(r))}function u_(t,e){return cg(t.databaseId,e)}function jI(t){const e=c_(t);return e.length===4?qe.emptyPath():d_(e)}function Rf(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d_(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ly(t,e,r){return{name:Pf(t,e),fields:r.value.mapValue.fields}}function SI(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Fe(h===void 0||typeof h=="string"),$t.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),$t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?Y.UNKNOWN:i_(d.code);return new ae(h,d.message||"")}(o);r=new o_(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=ah(t,n.document.name),i=sn(n.document.updateTime),o=n.document.createTime?sn(n.document.createTime):be.min(),l=new ir({mapValue:{fields:n.document.fields}}),u=Ht.newFoundDocument(s,i,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new Tc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=ah(t,n.document),i=n.readTime?sn(n.readTime):be.min(),o=Ht.newNoDocument(s,i),l=n.removedTargetIds||[];r=new Tc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=ah(t,n.document),i=n.removedTargetIds||[];r=new Tc([],i,s,null)}else{if(!("filter"in e))return xe();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new pI(s,i),l=n.targetId;r=new a_(l,o)}}return r}function TI(t,e){let r;if(e instanceof dl)r={update:Ly(t,e.key,e.value)};else if(e instanceof ag)r={delete:Pf(t,e.key)};else if(e instanceof Is)r={update:Ly(t,e.key,e.data),updateMask:OI(e.fieldMask)};else{if(!(e instanceof fI))return xe();r={verify:Pf(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const l=o.transform;if(l instanceof du)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw xe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:EI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:xe()}(t,e.precondition)),r}function II(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(r=>function(s,i){let o=s.updateTime?sn(s.updateTime):sn(i);return o.isEqual(be.min())&&(o=sn(i)),new uI(o,s.transformResults||[])}(r,e))):[]}function CI(t,e){return{documents:[u_(t,e.path)]}}function AI(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=u_(t,s);const i=function(d){if(d.length!==0)return f_(Hr.create(d,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ei(m.field),direction:DI(m.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Cf(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:r,parent:s}}function PI(t){let e=jI(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Fe(n===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(g){const m=h_(g);return m instanceof Hr&&Uw(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(g){return g.map(m=>function(k){return new Ko(ji(k.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Gu(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(g){const m=!!g.before,b=g.values||[];return new uu(b,m)}(r.startAt));let d=null;return r.endAt&&(d=function(g){const m=!g.before,b=g.values||[];return new uu(b,m)}(r.endAt)),XT(e,s,o,i,l,"F",u,d)}function RI(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function h_(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ji(r.unaryFilter.field);return ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ji(r.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ji(r.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ji(r.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(t):t.fieldFilter!==void 0?function(r){return ut.create(ji(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Hr.create(r.compositeFilter.filters.map(n=>h_(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe()}}(r.compositeFilter.op))}(t):xe()}function DI(t){return wI[t]}function $I(t){return _I[t]}function MI(t){return kI[t]}function Ei(t){return{fieldPath:t.canonicalString()}}function ji(t){return At.fromServerFormat(t.fieldPath)}function f_(t){return t instanceof ut?function(r){if(r.op==="=="){if(Ny(r.value))return{unaryFilter:{field:Ei(r.field),op:"IS_NAN"}};if(ky(r.value))return{unaryFilter:{field:Ei(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ny(r.value))return{unaryFilter:{field:Ei(r.field),op:"IS_NOT_NAN"}};if(ky(r.value))return{unaryFilter:{field:Ei(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ei(r.field),op:$I(r.op),value:r.value}}}(t):t instanceof Hr?function(r){const n=r.getFilters().map(s=>f_(s));return n.length===1?n[0]:{compositeFilter:{op:MI(r.op),filters:n}}}(t):xe()}function OI(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function m_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,r,n,s,i=be.min(),o=be.min(),l=$t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.ct=e}}function VI(t){const e=PI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?If(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.un=new UI}addToCollectionParentIndex(e,r){return this.un.add(r),Z.resolve()}getCollectionParents(e,r){return Z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Z.resolve()}deleteFieldIndex(e,r){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,r){return Z.resolve()}getDocumentsMatchingTarget(e,r){return Z.resolve(null)}getIndexType(e,r){return Z.resolve(0)}getFieldIndexes(e,r){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,r){return Z.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,r){return Z.resolve(ws.min())}updateCollectionGroup(e,r,n){return Z.resolve()}updateIndexEntries(e,r){return Z.resolve()}}class UI{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Rt(qe.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Rt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fa(0)}static kn(){return new fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.changes=new Ea(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&bo(n.mutation,s,mr.empty(),mt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ie()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ie()){const s=Bs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=so();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Bs();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ie()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let i=Dn();const o=vo(),l=function(){return vo()}();return r.forEach((u,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Is)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),bo(h.mutation,d,h.mutation.getFieldMask(),mt.now())):o.set(d.key,mr.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>{var g;return l.set(d,new zI(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,r){const n=vo();let s=new Je((o,l)=>o-l),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let h=n.get(u)||mr.empty();h=l.applyToLocalView(d,h),n.set(u,h);const g=(s.get(l.batchId)||Ie()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,g=Xw();h.forEach(m=>{if(!i.has(m)){const b=n_(r.get(m),n.get(m));b!==null&&g.set(m,b),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return Z.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):qw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Z.resolve(Bs());let l=-1,u=i;return o.next(d=>Z.forEach(d,(h,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,Ie())).next(h=>({batchId:l,changes:Yw(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new de(r)).next(n=>{let s=so();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=so();return this.indexManager.getCollectionParents(e,i).next(l=>Z.forEach(l,u=>{const d=function(g,m){return new Na(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ht.newInvalidDocument(h)))});let l=so();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&bo(h.mutation,d,mr.empty(),mt.now()),Qu(r,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:sn(s.createTime)}}(r)),Z.resolve()}getNamedQuery(e,r){return Z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:VI(s.bundledQuery),readTime:sn(s.readTime)}}(r)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.overlays=new Je(de.comparator),this.Ir=new Map}getOverlay(e,r){return Z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Bs();return Z.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Z.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Z.resolve()}getOverlaysForCollection(e,r,n){const s=Bs(),i=r.length+1,o=new de(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Je((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=i.get(d.largestBatchId);h===null&&(h=Bs(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Bs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return Z.resolve(l)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new gI(r,n));let i=this.Ir.get(r);i===void 0&&(i=Ie(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Tr=new Rt(bt.Er),this.dr=new Rt(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new bt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new bt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new de(new qe([])),n=new bt(r,e),s=new bt(r,e+1),i=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new de(new qe([])),n=new bt(r,e),s=new bt(r,e+1);let i=Ie();return this.dr.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new bt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class bt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return de.comparator(e.key,r.key)||Me(e.wr,r.wr)}static Ar(e,r){return Me(e.wr,r.wr)||de.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Rt(bt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mI(i,r,n,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new bt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,r){return Z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new bt(r,0),s=new bt(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],o=>{const l=this.Dr(o.wr);i.push(l)}),Z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Rt(Me);return r.forEach(s=>{const i=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{n=n.add(l.wr)})}),Z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;de.isDocumentKey(i)||(i=i.child(""));const o=new bt(new de(i),0);let l=new Rt(Me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),Z.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Fe(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Z.forEach(r.mutations,s=>{const i=new bt(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new bt(r,0),s=this.br.firstAfterOrEqual(n);return Z.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.Mr=e,this.docs=function(){return new Je(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Z.resolve(n?n.document.mutableCopy():Ht.newInvalidDocument(r))}getEntries(e,r){let n=Dn();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Ht.newInvalidDocument(s))}),Z.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Dn();const o=r.path,l=new de(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||PT(AT(h),n)<=0||(s.has(h.key)||Qu(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Z.resolve(i)}getAllFromCollectionGroup(e,r,n,s){xe()}Or(e,r){return Z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new YI(this)}getSize(e){return Z.resolve(this.size)}}class YI extends BI{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.persistence=e,this.Nr=new Ea(r=>ng(r),sg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ug,this.targetCount=0,this.kr=fa.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new fa(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Z.resolve()}updateTargetData(e,r){return this.Kn(r),Z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Z.waitFor(i).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Z.resolve(n)}containsKey(e,r){return Z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Zm(0),this.Kr=!1,this.Kr=!0,this.$r=new GI,this.referenceDelegate=e(this),this.Ur=new XI(this),this.indexManager=new FI,this.remoteDocumentCache=function(s){return new QI(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new LI(r),this.Gr=new HI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new qI,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new KI(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ce("MemoryPersistence","Starting transaction:",e);const s=new ZI(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class ZI extends DT{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Jr=new ug,this.Yr=null}static Zr(e){return new dg(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,n=>{const s=de.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,be.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Z.or([()=>Z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Ie(),s=Ie();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hg(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sS()?8:$T(Gt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new e5;return this.Xi(e,r,o).next(l=>{if(i.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ya()<=Ce.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ni(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Ya()<=Ce.DEBUG&&ce("QueryEngine","Query:",Ni(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ya()<=Ce.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ni(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(r))):Z.resolve())}Yi(e,r){if(Ty(r))return Z.resolve(null);let n=nn(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=If(r,null,"F"),n=nn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=Ie(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.ts(r,l);return this.ns(r,d,o,u.readTime)?this.Yi(e,If(r,null,"F")):this.rs(e,d,r,u)}))})))}Zi(e,r,n,s){return Ty(r)||s.isEqual(be.min())?Z.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const o=this.ts(r,i);return this.ns(r,o,n,s)?Z.resolve(null):(Ya()<=Ce.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ni(r)),this.rs(e,o,r,CT(s,-1)).next(l=>l))})}ts(e,r){let n=new Rt(Kw(e));return r.forEach((s,i)=>{Qu(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ya()<=Ce.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ni(r)),this.Ji.getDocumentsMatchingQuery(e,r,ws.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Je(Me),this._s=new Ea(i=>ng(i),sg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function n5(t,e,r,n){return new r5(t,e,r,n)}async function g_(t,e){const r=we(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],l=[];let u=Ie();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function s5(t,e){const r=we(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const g=d.batch,m=g.keys();let b=Z.resolve();return m.forEach(k=>{b=b.next(()=>h.getEntry(u,k)).next(v=>{const C=d.docVersions.get(k);Fe(C!==null),v.version.compareTo(C)<0&&(g.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function p_(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function i5(t,e){const r=we(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const l=[];e.targetChanges.forEach((h,g)=>{const m=s.get(g);if(!m)return;l.push(r.Ur.removeMatchingKeys(i,h.removedDocuments,g).next(()=>r.Ur.addMatchingKeys(i,h.addedDocuments,g)));let b=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken($t.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,n)),s=s.insert(g,b),function(v,C,E){return v.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,b,h)&&l.push(r.Ur.updateTargetData(i,b))});let u=Dn(),d=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(a5(i,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!n.isEqual(be.min())){const h=r.Ur.getLastRemoteSnapshotVersion(i).next(g=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(h)}return Z.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(r.os=s,i))}function a5(t,e,r){let n=Ie(),s=Ie();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=Dn();return r.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ce("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function o5(t,e){const r=we(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function l5(t,e){const r=we(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Z.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new ns(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Df(t,e,r){const n=we(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ul(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Vy(t,e,r){const n=we(t);let s=be.min(),i=Ie();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const g=we(u),m=g._s.get(h);return m!==void 0?Z.resolve(g.os.get(m)):g.Ur.getTargetData(d,h)}(n,o,nn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:be.min(),r?i:Ie())).next(l=>(c5(n,ZT(e),l),{documents:l,Ts:i})))}function c5(t,e,r){let n=t.us.get(e)||be.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class Fy{constructor(){this.activeTargetIds=iI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u5{constructor(){this.so=new Fy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fy,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function oh(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class m5 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,o){const l=oh(),u=this.xo(r,n.toUriEncodedString());ce("RestConnection",`Sending RPC '${r}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(r,u,d,s).then(h=>(ce("RestConnection",`Received RPC '${r}' ${l}: `,h),h),h=>{throw ca("RestConnection",`RPC '${r}' ${l} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(r,n,s,i,o,l){return this.Mo(r,n,s,i,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ka}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>r[o]=i),s&&s.headers.forEach((i,o)=>r[o]=i)}xo(r,n){const s=h5[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=oh();return new Promise((o,l)=>{const u=new Iw;u.setWithCredentials(!0),u.listenOnce(Cw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ec.NO_ERROR:const h=u.getResponseJson();ce(Bt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Ec.TIMEOUT:ce(Bt,`RPC '${e}' ${i} timed out`),l(new ae(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:const g=u.getStatus();if(ce(Bt,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const k=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(E)>=0?E:Y.UNKNOWN}(b.status);l(new ae(k,b.message))}else l(new ae(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ae(Y.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{ce(Bt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);ce(Bt,`RPC '${e}' ${i} sending request:`,s),u.send(r,"POST",d,n,15)})}Bo(e,r,n){const s=oh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Rw(),l=Pw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=i.join("");ce(Bt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,b=!1;const k=new f5({Io:C=>{b?ce(Bt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(ce(Bt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),ce(Bt,`RPC '${e}' stream ${s} sending:`,C),g.send(C))},To:()=>g.close()}),v=(C,E,y)=>{C.listen(E,N=>{try{y(N)}catch(R){setTimeout(()=>{throw R},0)}})};return v(g,no.EventType.OPEN,()=>{b||(ce(Bt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),v(g,no.EventType.CLOSE,()=>{b||(b=!0,ce(Bt,`RPC '${e}' stream ${s} transport closed`),k.So())}),v(g,no.EventType.ERROR,C=>{b||(b=!0,ca(Bt,`RPC '${e}' stream ${s} transport errored:`,C),k.So(new ae(Y.UNAVAILABLE,"The operation could not be completed")))}),v(g,no.EventType.MESSAGE,C=>{var E;if(!b){const y=C.data[0];Fe(!!y);const N=y,R=N.error||((E=N[0])===null||E===void 0?void 0:E.error);if(R){ce(Bt,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let M=function(w){const j=lt[w];if(j!==void 0)return i_(j)}(L),I=R.message;M===void 0&&(M=Y.INTERNAL,I="Unknown error status: "+L+" with message "+R.message),b=!0,k.So(new ae(M,I)),g.close()}else ce(Bt,`RPC '${e}' stream ${s} received:`,y),k.bo(y)}}),v(l,Aw.STAT_EVENT,C=>{C.stat===kf.PROXY?ce(Bt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===kf.NOPROXY&&ce(Bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){return new NI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,r,n,s,i,o,l,u){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new y_(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Y.RESOURCE_EXHAUSTED?(Rn(r.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ae(Y.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g5 extends x_{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=SI(this.serializer,e),n=function(i){if(!("targetChange"in i))return be.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?sn(o.readTime):be.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Rf(this.serializer),r.addTarget=function(i,o){let l;const u=o.target;if(l=Sf(u)?{documents:CI(i,u)}:{query:AI(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=l_(i,o.resumeToken);const d=Cf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(be.min())>0){l.readTime=fu(i,o.snapshotVersion.toTimestamp());const d=Cf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=RI(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Rf(this.serializer),r.removeTarget=e,this.a_(r)}}class p5 extends x_{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=II(e.writeResults,e.commitTime),n=sn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Rf(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>TI(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Af(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(Y.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Af(r,n),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class x5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rn(r),this.D_=!1):ce("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{n.enqueueAndForget(async()=>{mi(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=we(u);d.L_.add(4),await fl(d),d.q_.set("Unknown"),d.L_.delete(4),await ed(d)}(this))})}),this.q_=new x5(n,s)}}async function ed(t){if(mi(t))for(const e of t.B_)await e(!0)}async function fl(t){for(const e of t.B_)await e(!1)}function v_(t,e){const r=we(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),pg(r)?gg(r):ja(r).r_()&&mg(r,e))}function fg(t,e){const r=we(t),n=ja(r);r.N_.delete(e),n.r_()&&b_(r,e),r.N_.size===0&&(n.r_()?n.o_():mi(r)&&r.q_.set("Unknown"))}function mg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ja(t).A_(e)}function b_(t,e){t.Q_.xe(e),ja(t).R_(e)}function gg(t){t.Q_=new bI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.q_.v_()}function pg(t){return mi(t)&&!ja(t).n_()&&t.N_.size>0}function mi(t){return we(t).L_.size===0}function w_(t){t.Q_=void 0}async function b5(t){t.q_.set("Online")}async function w5(t){t.N_.forEach((e,r)=>{mg(t,e)})}async function _5(t,e){w_(t),pg(t)?(t.q_.M_(e),gg(t)):t.q_.set("Unknown")}async function k5(t,e,r){if(t.q_.set("Online"),e instanceof o_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(n){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await mu(t,n)}else if(e instanceof Tc?t.Q_.Ke(e):e instanceof a_?t.Q_.He(e):t.Q_.We(e),!r.isEqual(be.min()))try{const n=await p_(t.localStore);r.compareTo(n)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken($t.EMPTY_BYTE_STRING,h.snapshotVersion)),b_(i,u);const g=new ns(h.target,u,d,h.sequenceNumber);mg(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){ce("RemoteStore","Failed to raise snapshot:",n),await mu(t,n)}}async function mu(t,e,r){if(!ul(e))throw e;t.L_.add(1),await fl(t),t.q_.set("Offline"),r||(r=()=>p_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await ed(t)})}function __(t,e){return e().catch(r=>mu(t,r,e))}async function td(t){const e=we(t),r=ks(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;N5(e);)try{const s=await o5(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,E5(e,s)}catch(s){await mu(e,s)}k_(e)&&N_(e)}function N5(t){return mi(t)&&t.O_.length<10}function E5(t,e){t.O_.push(e);const r=ks(t);r.r_()&&r.V_&&r.m_(e.mutations)}function k_(t){return mi(t)&&!ks(t).n_()&&t.O_.length>0}function N_(t){ks(t).start()}async function j5(t){ks(t).p_()}async function S5(t){const e=ks(t);for(const r of t.O_)e.m_(r.mutations)}async function T5(t,e,r){const n=t.O_.shift(),s=og.from(n,e,r);await __(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await td(t)}async function I5(t,e){e&&ks(t).V_&&await async function(n,s){if(function(o){return yI(o)&&o!==Y.ABORTED}(s.code)){const i=n.O_.shift();ks(n).s_(),await __(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await td(n)}}(t,e),k_(t)&&N_(t)}async function By(t,e){const r=we(t);r.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const n=mi(r);r.L_.add(3),await fl(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await ed(r)}async function C5(t,e){const r=we(t);e?(r.L_.delete(2),await ed(r)):e||(r.L_.add(2),await fl(r),r.q_.set("Unknown"))}function ja(t){return t.K_||(t.K_=function(r,n,s){const i=we(r);return i.w_(),new g5(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:b5.bind(null,t),Ro:w5.bind(null,t),mo:_5.bind(null,t),d_:k5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pg(t)?gg(t):t.q_.set("Unknown")):(await t.K_.stop(),w_(t))})),t.K_}function ks(t){return t.U_||(t.U_=function(r,n,s){const i=we(r);return i.w_(),new p5(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j5.bind(null,t),mo:I5.bind(null,t),f_:S5.bind(null,t),g_:T5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await td(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,l=new yg(e,r,o,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(t,e){if(Rn("AsyncQueue",`${e}: ${t}`),ul(t))return new ae(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.comparator=e?(r,n)=>e(r,n)||de.comparator(r.key,n.key):(r,n)=>de.comparator(r.key,n.key),this.keyedMap=so(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Gi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Gi)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Gi;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.W_=new Je(de.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ma{constructor(e,r,n,s,i,o,l,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new ma(e,r,Gi.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class P5{constructor(){this.queries=Wy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=we(r),i=s.queries;s.queries=Wy(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(n)})})(this,new ae(Y.ABORTED,"Firestore shutting down"))}}function Wy(){return new Ea(t=>Gw(t),Ku)}async function R5(t,e){const r=we(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new A5,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=xg(o,`Initialization of query '${Ni(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&vg(r)}async function D5(t,e){const r=we(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function $5(t,e){const r=we(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(n=!0);o.z_=s}}n&&vg(r)}function M5(t,e,r){const n=we(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function vg(t){t.Y_.forEach(e=>{e.next()})}var $f,Hy;(Hy=$f||($f={})).ea="default",Hy.Cache="cache";class O5{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ma(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$f.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this.key=e}}class j_{constructor(e){this.key=e}}class L5{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=Kw(e),this.Ra=new Gi(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new zy,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,g)=>{const m=s.get(h),b=Qu(this.query,g)?g:null,k=!!m&&this.mutatedKeys.has(m.key),v=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let C=!1;m&&b?m.data.isEqual(b.data)?k!==v&&(n.track({type:3,doc:b}),C=!0):this.ga(m,b)||(n.track({type:2,doc:b}),C=!0,(u&&this.Aa(b,u)>0||d&&this.Aa(b,d)<0)&&(l=!0)):!m&&b?(n.track({type:0,doc:b}),C=!0):m&&!b&&(n.track({type:1,doc:m}),C=!0,(u||d)&&(l=!0)),C&&(b?(o=o.add(b),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:l,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(b,k){const v=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return v(b)-v(k)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(n),s=s!=null&&s;const l=r&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ma(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new j_(n))}),this.da.forEach(n=>{e.has(n)||r.push(new E_(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ie();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class V5{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class F5{constructor(e){this.key=e,this.va=!1}}class U5{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ea(l=>Gw(l),Ku),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(de.comparator),this.Na=new Map,this.La=new ug,this.Ba={},this.ka=new Map,this.qa=fa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function B5(t,e,r=!0){const n=P_(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await S_(n,e,r,!0),s}async function z5(t,e){const r=P_(t);await S_(r,e,!0,!1)}async function S_(t,e,r,n){const s=await l5(t.localStore,nn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await W5(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&v_(t.remoteStore,s),l}async function W5(t,e,r,n,s){t.Ka=(g,m,b)=>async function(v,C,E,y){let N=C.view.ma(E);N.ns&&(N=await Vy(v.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,N)));const R=y&&y.targetChanges.get(C.targetId),L=y&&y.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(N,v.isPrimaryClient,R,L);return Gy(v,C.targetId,M.wa),M.snapshot}(t,g,m,b);const i=await Vy(t.localStore,e,!0),o=new L5(e,i.Ts),l=o.ma(i.documents),u=hl.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Gy(t,r,d.wa);const h=new V5(e,r,o);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),d.snapshot}async function H5(t,e,r){const n=we(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(o=>!Ku(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Df(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&fg(n.remoteStore,s.targetId),Mf(n,s.targetId)}).catch(cl)):(Mf(n,s.targetId),await Df(n.localStore,s.targetId,!0))}async function q5(t,e){const r=we(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fg(r.remoteStore,n.targetId))}async function G5(t,e,r){const n=eC(t);try{const s=await function(o,l){const u=we(o),d=mt.now(),h=l.reduce((b,k)=>b.add(k.key),Ie());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Dn(),v=Ie();return u.cs.getEntries(b,h).next(C=>{k=C,k.forEach((E,y)=>{y.isValidDocument()||(v=v.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,k)).next(C=>{g=C;const E=[];for(const y of l){const N=hI(y,g.get(y.key).overlayedDocument);N!=null&&E.push(new Is(y.key,N,Lw(N.value.mapValue),Br.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,E,l)}).next(C=>{m=C;const E=C.applyToLocalDocumentSet(g,v);return u.documentOverlayCache.saveOverlays(b,C.batchId,E)})}).then(()=>({batchId:m.batchId,changes:Yw(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Je(Me)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(n,s.batchId,r),await ml(n,s.changes),await td(n.remoteStore)}catch(s){const i=xg(s,"Failed to persist write");r.reject(i)}}async function T_(t,e){const r=we(t);try{const n=await i5(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Na.get(i);o&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Fe(o.va):s.removedDocuments.size>0&&(Fe(o.va),o.va=!1))}),await ml(r,n,e)}catch(n){await cl(n)}}function qy(t,e,r){const n=we(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=we(o);u.onlineState=l;let d=!1;u.queries.forEach((h,g)=>{for(const m of g.j_)m.Z_(l)&&(d=!0)}),d&&vg(u)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function K5(t,e,r){const n=we(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let o=new Je(de.comparator);o=o.insert(i,Ht.newNoDocument(i,be.min()));const l=Ie().add(i),u=new Ju(be.min(),new Map,new Je(Me),o,l);await T_(n,u),n.Oa=n.Oa.remove(i),n.Na.delete(e),bg(n)}else await Df(n.localStore,e,!1).then(()=>Mf(n,e,r)).catch(cl)}async function Q5(t,e){const r=we(t),n=e.batch.batchId;try{const s=await s5(r.localStore,e);C_(r,n,null),I_(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ml(r,s)}catch(s){await cl(s)}}async function Y5(t,e,r){const n=we(t);try{const s=await function(o,l){const u=we(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(g=>(Fe(g!==null),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);C_(n,e,r),I_(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ml(n,s)}catch(s){await cl(s)}}function I_(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function C_(t,e,r){const n=we(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Mf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||A_(t,n)})}function A_(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(fg(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),bg(t))}function Gy(t,e,r){for(const n of r)n instanceof E_?(t.La.addReference(n.key,e),X5(t,n)):n instanceof j_?(ce("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||A_(t,n.key)):xe()}function X5(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ce("SyncEngine","New document in limbo: "+r),t.xa.add(n),bg(t))}function bg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new de(qe.fromString(e)),n=t.qa.next();t.Na.set(n,new F5(r)),t.Oa=t.Oa.insert(r,n),v_(t.remoteStore,new ns(nn(Hw(r.path)),n,"TargetPurposeLimboResolution",Zm.oe))}}async function ml(t,e,r){const n=we(t),s=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,u)=>{o.push(n.Ka(u,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const g=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){s.push(d);const g=hg.Wi(u.targetId,d);i.push(g)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(u,d){const h=we(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Z.forEach(d,m=>Z.forEach(m.$i,b=>h.persistence.referenceDelegate.addReference(g,m.targetId,b)).next(()=>Z.forEach(m.Ui,b=>h.persistence.referenceDelegate.removeReference(g,m.targetId,b)))))}catch(g){if(!ul(g))throw g;ce("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const b=h.os.get(m),k=b.snapshotVersion,v=b.withLastLimboFreeSnapshotVersion(k);h.os=h.os.insert(m,v)}}}(n.localStore,i))}async function J5(t,e){const r=we(t);if(!r.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const n=await g_(r.localStore,e);r.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new ae(Y.CANCELLED,o))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ml(r,n.hs)}}function Z5(t,e){const r=we(t),n=r.Na.get(e);if(n&&n.va)return Ie().add(n.key);{let s=Ie();const i=r.Ma.get(e);if(!i)return s;for(const o of i){const l=r.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function P_(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K5.bind(null,e),e.Ca.d_=$5.bind(null,e.eventManager),e.Ca.$a=M5.bind(null,e.eventManager),e}function eC(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y5.bind(null,e),e}class gu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return n5(this.persistence,new t5,e.initialUser,this.serializer)}Ga(e){return new JI(dg.Zr,this.serializer)}Wa(e){return new u5}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gu.provider={build:()=>new gu};class Of{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>qy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=J5.bind(null,this.syncEngine),await C5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P5}()}createDatastore(e){const r=Zu(e.databaseInfo.databaseId),n=function(i){return new m5(i)}(e.databaseInfo);return function(i,o,l,u){return new y5(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,l){return new v5(n,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>qy(this.syncEngine,r,0),function(){return Uy.D()?new Uy:new d5}())}createSyncEngine(e,r){return function(s,i,o,l,u,d,h){const g=new U5(s,i,o,l,u,d);return h&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=we(s);ce("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await fl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=$w.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=xg(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ch(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await g_(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ky(t,e){t.asyncQueue.verifyOperationInProgress();const r=await nC(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>By(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>By(e.remoteStore,s)),t._onlineComponents=e}async function nC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;ca("Error using user provided cache. Falling back to memory cache: "+r),await ch(t,new gu)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await ch(t,new gu);return t._offlineComponents}async function R_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await Ky(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await Ky(t,new Of))),t._onlineComponents}function sC(t){return R_(t).then(e=>e.syncEngine)}async function iC(t){const e=await R_(t),r=e.eventManager;return r.onListen=B5.bind(null,e.syncEngine),r.onUnlisten=H5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=z5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=q5.bind(null,e.syncEngine),r}function aC(t,e,r={}){const n=new ps;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new tC({next:m=>{h.Za(),o.enqueueAndForget(()=>D5(i,g)),m.fromCache&&u.source==="server"?d.reject(new ae(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new O5(l,h,{includeMetadataChanges:!0,_a:!0});return R5(i,g)}(await iC(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e,r){if(!r)throw new ae(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oC(t,e,r,n){if(e===!0&&n===!0)throw new ae(Y.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Yy(t){if(!de.isDocumentKey(t))throw new ae(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xy(t){if(de.isDocumentKey(t))throw new ae(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function ii(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=rd(t);throw new ae(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D_((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jy(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new wT;switch(n.type){case"firstParty":return new ET(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ae(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Qy.get(r);n&&(ce("ComponentProvider","Removing Datastore"),Qy.delete(r),n.terminate())}(this),Promise.resolve()}}function lC(t,e,r,n={}){var s;const i=(t=ii(t,nd))._getSettings(),o=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=zt.MOCK_USER;else{l=_w(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new ae(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new zt(d)}t._authCredentials=new _T(new Dw(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class yr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yr(this.firestore,e,this._key)}}class ys extends gi{constructor(e,r,n){super(e,r,Hw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new de(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function Qt(t,e,...r){if(t=Kt(t),$_("collection","path",e),t instanceof nd){const n=qe.fromString(e,...r);return Xy(n),new ys(t,null,n)}{if(!(t instanceof yr||t instanceof ys))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(qe.fromString(e,...r));return Xy(n),new ys(t.firestore,null,n)}}function ur(t,e,...r){if(t=Kt(t),arguments.length===1&&(e=$w.newId()),$_("doc","path",e),t instanceof nd){const n=qe.fromString(e,...r);return Yy(n),new yr(t,null,new de(n))}{if(!(t instanceof yr||t instanceof ys))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(qe.fromString(e,...r));return Yy(n),new yr(t.firestore,t instanceof ys?t.converter:null,new de(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new y_(this,"async_queue_retry"),this.Vu=()=>{const n=lh();n&&ce("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=lh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=lh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ps;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ul(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Rn("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=yg.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class gl extends nd{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Zy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zy(e),this._firestoreClient=void 0,await e}}}function cC(t,e){const r=typeof t=="object"?t:Xm(),n=typeof t=="string"?t:"(default)",s=qu(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=vw("firestore");i&&lC(s,...i)}return s}function M_(t){if(t._terminated)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uC(t),t._firestoreClient}function uC(t){var e,r,n;const s=t._freezeSettings(),i=function(l,u,d,h){return new LT(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,D_(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga($t.fromBase64String(e))}catch(r){throw new ae(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ga($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ae(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ae(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ae(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=/^__.*__$/;class hC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,r,this.fieldTransforms):new dl(e,this.data,r,this.fieldTransforms)}}class O_{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Is(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function L_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Ng{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(L_(this.Cu)&&dC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fC{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Zu(e)}Qu(e,r,n,s=!1){return new Ng({Cu:e,methodName:r,qu:n,path:At.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eg(t){const e=t._freezeSettings(),r=Zu(t._databaseId);return new fC(t._databaseId,!!e.ignoreUndefinedProperties,r)}function mC(t,e,r,n,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);jg("Data must be an object, but it was:",o,n);const l=V_(n,o);let u,d;if(i.merge)u=new mr(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const g of i.mergeFields){const m=Lf(e,g,r);if(!o.contains(m))throw new ae(Y.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);U_(h,m)||h.push(m)}u=new mr(h),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new hC(new ir(l),u,d)}class id extends wg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof id}}function gC(t,e,r,n){const s=t.Qu(1,e,r);jg("Data must be an object, but it was:",s,n);const i=[],o=ir.empty();fi(n,(u,d)=>{const h=Sg(e,u,r);d=Kt(d);const g=s.Nu(h);if(d instanceof id)i.push(h);else{const m=pl(d,g);m!=null&&(i.push(h),o.set(h,m))}});const l=new mr(i);return new O_(o,l,s.fieldTransforms)}function pC(t,e,r,n,s,i){const o=t.Qu(1,e,r),l=[Lf(e,n,r)],u=[s];if(i.length%2!=0)throw new ae(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Lf(e,i[m])),u.push(i[m+1]);const d=[],h=ir.empty();for(let m=l.length-1;m>=0;--m)if(!U_(d,l[m])){const b=l[m];let k=u[m];k=Kt(k);const v=o.Nu(b);if(k instanceof id)d.push(b);else{const C=pl(k,v);C!=null&&(d.push(b),h.set(b,C))}}const g=new mr(d);return new O_(h,g,o.fieldTransforms)}function yC(t,e,r,n=!1){return pl(r,t.Qu(n?4:3,e))}function pl(t,e){if(F_(t=Kt(t)))return jg("Unsupported field value:",e,t),V_(t,e);if(t instanceof wg)return function(n,s){if(!L_(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const l of n){let u=pl(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return aI(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=mt.fromDate(n);return{timestampValue:fu(s.serializer,i)}}if(n instanceof mt){const i=new mt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fu(s.serializer,i)}}if(n instanceof _g)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ga)return{bytesValue:l_(s.serializer,n._byteString)};if(n instanceof yr){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cg(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof kg)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ig(l.serializer,u)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${rd(n)}`)}(t,e)}function V_(t,e){const r={};return Mw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(n,s)=>{const i=pl(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function F_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof _g||t instanceof ga||t instanceof yr||t instanceof wg||t instanceof kg)}function jg(t,e,r){if(!F_(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=rd(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Lf(t,e,r){if((e=Kt(e))instanceof sd)return e._internalPath;if(typeof e=="string")return Sg(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,r)}const xC=new RegExp("[~\\*/\\[\\]]");function Sg(t,e,r){if(e.search(xC)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new sd(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function pu(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${n}`),o&&(u+=` in document ${s}`),u+=")"),new ae(Y.INVALID_ARGUMENT,l+t+u)}function U_(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ad("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class vC extends B_{data(){return super.data()}}function ad(t,e){return typeof e=="string"?Sg(t,e):e instanceof sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class z_ extends Tg{}function ft(t,e,...r){let n=[];e instanceof Tg&&n.push(e),n=n.concat(r),function(i){const o=i.filter(u=>u instanceof Ig).length,l=i.filter(u=>u instanceof od).length;if(o>1||o>0&&l>0)throw new ae(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class od extends z_{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new od(e,r,n)}_apply(e){const r=this._parse(e);return W_(e._query,r),new gi(e.firestore,e.converter,Tf(e._query,r))}_parse(e){const r=Eg(e.firestore);return function(i,o,l,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tx(g,h);const b=[];for(const k of g)b.push(ex(u,i,k));m={arrayValue:{values:b}}}else m=ex(u,i,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tx(g,h),m=yC(l,o,g,h==="in"||h==="not-in");return ut.create(d,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function xr(t,e,r){const n=e,s=ad("where",t);return od._create(s,n,r)}class Ig extends Tg{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Ig(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Hr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)W_(o,u),o=Tf(o,u)}(e._query,r),new gi(e.firestore,e.converter,Tf(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends z_{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Cg(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ko(i,o)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Na(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Xo(t,e="asc"){const r=e,n=ad("orderBy",t);return Cg._create(n,r)}function ex(t,e,r){if(typeof(r=Kt(r))=="string"){if(r==="")throw new ae(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(e)&&r.indexOf("/")!==-1)throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(qe.fromString(r));if(!de.isDocumentKey(n))throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return _y(t,new de(n))}if(r instanceof yr)return _y(t,r._key);throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rd(r)}.`)}function tx(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W_(t,e){const r=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class wC{convertValue(e,r="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return fi(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>nt(o.doubleValue));return new kg(i)}convertGeoPoint(e){return new _g(nt(e.latitude),nt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=tg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ho(e));default:return null}}convertTimestamp(e){const r=_s(e);return new mt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=qe.fromString(e);Fe(m_(n));const s=new qo(n.get(1),n.get(3)),i=new de(n.popFirst(5));return s.isEqual(r)||Rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kC extends B_{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ad("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ic extends kC{data(e={}){return super.data(e)}}class NC{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new oc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ic(this._firestore,this._userDataWriter,n.key,n,new oc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ae(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ic(s._firestore,s._userDataWriter,l.doc.key,l.doc,new oc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ic(s._firestore,s._userDataWriter,l.doc.key,l.doc,new oc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:EC(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function EC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}class jC extends wC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,r)}}function cn(t){t=ii(t,gi);const e=ii(t.firestore,gl),r=M_(e),n=new jC(e);return bC(t._query),aC(r,t._query).then(s=>new NC(e,n,t,s))}function Sa(t,e,r,...n){t=ii(t,yr);const s=ii(t.firestore,gl),i=Eg(s);let o;return o=typeof(e=Kt(e))=="string"||e instanceof sd?pC(i,"updateDoc",t._key,e,r,n):gC(i,"updateDoc",t._key,e),Ag(s,[o.toMutation(t._key,Br.exists(!0))])}function pi(t){return Ag(ii(t.firestore,gl),[new ag(t._key,Br.none())])}function Ta(t,e){const r=ii(t.firestore,gl),n=ur(t),s=_C(t.converter,e);return Ag(r,[mC(Eg(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Br.exists(!1))]).then(()=>n)}function Ag(t,e){return function(n,s){const i=new ps;return n.asyncQueue.enqueueAndForget(async()=>G5(await sC(n),s,i)),i.promise}(M_(t),e)}(function(e,r=!0){(function(s){ka=s})(hi),ti(new bs("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new gl(new kT(n.getProvider("auth-internal")),new ST(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ae(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qo(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),rn(yy,"4.7.3",e),rn(yy,"4.7.3","esm2017")})();var SC="firebase",TC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn(SC,TC,"app");function Pg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function H_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IC=H_,q_=new ol("auth","Firebase",H_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=new Qm("@firebase/auth");function CC(t,...e){yu.logLevel<=Ce.WARN&&yu.warn(`Auth (${hi}): ${t}`,...e)}function Cc(t,...e){yu.logLevel<=Ce.ERROR&&yu.error(`Auth (${hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw Rg(t,...e)}function an(t,...e){return Rg(t,...e)}function G_(t,e,r){const n=Object.assign(Object.assign({},IC()),{[e]:r});return new ol("auth","Firebase",n).create(e,{appName:t.name})}function Gs(t){return G_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return q_.create(t,...e)}function ye(t,e,...r){if(!t)throw Rg(e,...r)}function kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cc(e),new Error(e)}function Mn(t,e){t||kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AC(){return rx()==="http:"||rx()==="https:"}function rx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AC()||tS()||"connection"in navigator)?navigator.onLine:!0}function RC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,r){this.shortDelay=e,this.longDelay=r,Mn(r>e,"Short delay should be less than long delay!"),this.isMobile=Jj()||rS()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e){Mn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new yl(3e4,6e4);function $g(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ia(t,e,r,n,s={}){return Q_(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=ll(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return eS()||(d.referrerPolicy="no-referrer"),K_.fetch()(Y_(t,t.config.apiHost,r,l),d)})}async function Q_(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},DC),e);try{const s=new OC(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw lc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw lc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw lc(t,"user-disabled",o);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw G_(t,h,d);$n(t,h)}}catch(s){if(s instanceof hn)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function MC(t,e,r,n,s={}){const i=await Ia(t,e,r,n,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Y_(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Dg(t.config,s):`${t.config.apiScheme}://${s}`}class OC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(an(this.auth,"network-request-failed")),$C.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lc(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=an(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,e){return Ia(t,"POST","/v1/accounts:delete",e)}async function X_(t,e){return Ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VC(t,e=!1){const r=Kt(t),n=await r.getIdToken(e),s=Mg(n);ye(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:wo(uh(s.auth_time)),issuedAtTime:wo(uh(s.iat)),expirationTime:wo(uh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uh(t){return Number(t)*1e3}function Mg(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Cc("JWT malformed, contained fewer than 3 sections"),null;try{const s=yw(r);return s?JSON.parse(s):(Cc("Failed to decode base64 JWT payload"),null)}catch(s){return Cc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nx(t){const e=Mg(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof hn&&FC(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function FC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Jo(t,X_(r,{idToken:n}));ye(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?J_(i.providerUserInfo):[],l=zC(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ff(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,g)}async function BC(t){const e=Kt(t);await xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zC(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function J_(t){return t.map(e=>{var{providerId:r}=e,n=Pg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(t,e){const r=await Q_(t,{},async()=>{const n=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Y_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",K_.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function HC(t,e){return Ia(t,"POST","/v2/accounts:revokeToken",$g(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const r=nx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await WC(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new Ki;return n&&(ye(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ki,this.toJSON())}_performRefresh(){return kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Pg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ff(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Jo(this,this.stsTokenManager.getToken(this.auth,e));return ye(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return VC(this,e)}reload(){return BC(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Nn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await xu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rs(this.auth.app))return Promise.reject(Gs(this.auth));const e=await this.getIdToken();return await Jo(this,LC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,l,u,d,h;const g=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,b=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=r.photoURL)!==null&&o!==void 0?o:void 0,v=(l=r.tenantId)!==null&&l!==void 0?l:void 0,C=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=r.createdAt)!==null&&d!==void 0?d:void 0,y=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:R,isAnonymous:L,providerData:M,stsTokenManager:I}=r;ye(N&&I,e,"internal-error");const _=Ki.fromJSON(this.name,I);ye(typeof N=="string",e,"internal-error"),zn(g,e.name),zn(m,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof L=="boolean",e,"internal-error"),zn(b,e.name),zn(k,e.name),zn(v,e.name),zn(C,e.name),zn(E,e.name),zn(y,e.name);const w=new Nn({uid:N,auth:e,email:m,emailVerified:R,displayName:g,isAnonymous:L,photoURL:k,phoneNumber:b,tenantId:v,stsTokenManager:_,createdAt:E,lastLoginAt:y});return M&&Array.isArray(M)&&(w.providerData=M.map(j=>Object.assign({},j))),C&&(w._redirectEventId=C),w}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ki;s.updateFromServerResponse(r);const i=new Nn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await xu(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?J_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ki;l.updateFromIdToken(n);const u=new Nn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ff(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new Map;function En(t){Mn(t instanceof Function,"Expected a class definition");let e=sx.get(t);return e?(Mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Z_.type="NONE";const ix=Z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t,e,r){return`firebase:${t}:${e}:${r}`}class Qi{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ac(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ac("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Qi(En(ix),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||En(ix);const o=Ac(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){const g=Nn._fromJSON(e,h);d!==i&&(l=g),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Qi(i,e,n):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Qi(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i1(e))return"Blackberry";if(a1(e))return"Webos";if(t1(e))return"Safari";if((e.includes("chrome/")||r1(e))&&!e.includes("edge/"))return"Chrome";if(s1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function e1(t=Gt()){return/firefox\//i.test(t)}function t1(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r1(t=Gt()){return/crios\//i.test(t)}function n1(t=Gt()){return/iemobile/i.test(t)}function s1(t=Gt()){return/android/i.test(t)}function i1(t=Gt()){return/blackberry/i.test(t)}function a1(t=Gt()){return/webos/i.test(t)}function Og(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qC(t=Gt()){var e;return Og(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GC(){return nS()&&document.documentMode===10}function o1(t=Gt()){return Og(t)||s1(t)||a1(t)||i1(t)||/windows phone/i.test(t)||n1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e=[]){let r;switch(t){case"Browser":r=ax(Gt());break;case"Worker":r=`${ax(Gt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${hi}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(t,e={}){return Ia(t,"GET","/v2/passwordPolicy",$g(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=6;class XC{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:YC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ox(this),this.idTokenSubscription=new ox(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=En(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Qi.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await X_(this,{idToken:e}),n=await Nn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(rs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await xu(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rs(this.app))return Promise.reject(Gs(this));const r=e?Kt(e):null;return r&&ye(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rs(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rs(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QC(this),r=new XC(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ol("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await HC(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&En(e)||this._popupRedirectResolver;ye(r,this,"argument-error"),this.redirectPersistenceManager=await Qi.create(this,[En(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&CC(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Lg(t){return Kt(t)}class ox{constructor(e){this.auth=e,this.observer=null,this.addObserver=dS(r=>this.observer=r)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZC(t){Vg=t}function e4(t){return Vg.loadJS(t)}function t4(){return Vg.gapiScript}function r4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t,e){const r=qu(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(ou(i,e??{}))return s;$n(s,"already-initialized")}return r.initialize({options:e})}function s4(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function i4(t,e,r){const n=Lg(t);ye(n._canInitEmulator,n,"emulator-config-failed"),ye(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=c1(e),{host:o,port:l}=a4(e),u=l===null?"":`:${l}`;n.config.emulator={url:`${i}//${o}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),o4()}function c1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function a4(t){const e=c1(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:lx(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:lx(o)}}}function lx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o4(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,r){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t,e){return MC(t,"POST","/v1/accounts:signInWithIdp",$g(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="http://localhost";class ai extends u1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):$n("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Pg(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new ai(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Yi(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Yi(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Yi(e,r)}buildRequest(){const e={requestUri:l4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ll(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends d1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends xl{constructor(){super("facebook.com")}static credential(e){return ai._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ai._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Yn.credential(r,n)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends xl{constructor(){super("github.com")}static credential(e){return ai._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.GITHUB_SIGN_IN_METHOD="github.com";Xn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends xl{constructor(){super("twitter.com")}static credential(e,r){return ai._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Jn.credential(r,n)}catch{return null}}}Jn.TWITTER_SIGN_IN_METHOD="twitter.com";Jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Nn._fromIdTokenResponse(e,n,s),o=cx(n);return new pa({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=cx(n);return new pa({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function cx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends hn{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,vu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new vu(e,r,n,s)}}function h1(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vu._fromErrorAndOperation(t,i,e,n):i})}async function c4(t,e,r=!1){const n=await Jo(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return pa._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e,r=!1){const{auth:n}=t;if(rs(n.app))return Promise.reject(Gs(n));const s="reauthenticate";try{const i=await Jo(t,h1(n,s,e,t),r);ye(i.idToken,n,"internal-error");const o=Mg(i.idToken);ye(o,n,"internal-error");const{sub:l}=o;return ye(t.uid===l,n,"user-mismatch"),pa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e,r=!1){if(rs(t.app))return Promise.reject(Gs(t));const n="signIn",s=await h1(t,n,e),i=await pa._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function h4(t,e,r,n){return Kt(t).onIdTokenChanged(e,r,n)}function f4(t,e,r){return Kt(t).beforeAuthStateChanged(e,r)}const bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(bu,"1"),this.storage.removeItem(bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=1e3,g4=10;class m1 extends f1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);GC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,g4):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},m4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}m1.type="LOCAL";const p4=m1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1 extends f1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}g1.type="SESSION";const p1=g1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new ld(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async d=>d(r.origin,i)),u=await y4(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Fg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return window}function v4(t){on().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}async function b4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _4(){return y1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebaseLocalStorageDb",k4=1,wu="firebaseLocalStorage",v1="fbase_key";class vl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function cd(t,e){return t.transaction([wu],e?"readwrite":"readonly").objectStore(wu)}function N4(){const t=indexedDB.deleteDatabase(x1);return new vl(t).toPromise()}function Uf(){const t=indexedDB.open(x1,k4);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(wu,{keyPath:v1})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(wu)?e(n):(n.close(),await N4(),e(await Uf()))})})}async function ux(t,e,r){const n=cd(t,!0).put({[v1]:e,value:r});return new vl(n).toPromise()}async function E4(t,e){const r=cd(t,!1).get(e),n=await new vl(r).toPromise();return n===void 0?null:n.value}function dx(t,e){const r=cd(t,!0).delete(e);return new vl(r).toPromise()}const j4=800,S4=3;class b1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uf(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>S4)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(_4()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await b4(),!this.activeServiceWorker)return;this.sender=new x4(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uf();return await ux(e,bu,"1"),await dx(e,bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>ux(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>E4(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>dx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=cd(s,!1).getAll();return new vl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b1.type="LOCAL";const T4=b1;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e){return e?En(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends u1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Yi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function C4(t){return d4(t.auth,new Ug(t),t.bypassAuthState)}function A4(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),u4(r,new Ug(t),t.bypassAuthState)}async function P4(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),c4(r,new Ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C4;case"linkViaPopup":case"linkViaRedirect":return P4;case"reauthViaPopup":case"reauthViaRedirect":return A4;default:$n(this.auth,"internal-error")}}resolve(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new yl(2e3,1e4);class Vi extends w1{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Mn(this.filter.length===1,"Popup operations only handle one event");const e=Fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R4.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="pendingRedirect",Pc=new Map;class $4 extends w1{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Pc.get(this.auth._key());if(!e){try{const n=await M4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Pc.set(this.auth._key(),e)}return this.bypassAuthState||Pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M4(t,e){const r=V4(e),n=L4(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function O4(t,e){Pc.set(t._key(),e)}function L4(t){return En(t._redirectPersistence)}function V4(t){return Ac(D4,t.config.apiKey,t.name)}async function F4(t,e,r=!1){if(rs(t.app))return Promise.reject(Gs(t));const n=Lg(t),s=I4(n,e),o=await new $4(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=10*60*1e3;class B4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z4(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!_1(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(an(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U4&&this.cachedEventUids.clear(),this.cachedEventUids.has(hx(e))}saveEventToCache(e){this.cachedEventUids.add(hx(e)),this.lastProcessedEventTime=Date.now()}}function hx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function z4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e={}){return Ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q4=/^https?/;async function G4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W4(t);for(const r of e)try{if(K4(r))return}catch{}$n(t,"unauthorized-domain")}function K4(t){const e=Vf(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!q4.test(r))return!1;if(H4.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new yl(3e4,6e4);function fx(){const t=on().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Y4(t){return new Promise((e,r)=>{var n,s,i;function o(){fx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fx(),r(an(t,"network-request-failed"))},timeout:Q4.get()})}if(!((s=(n=on().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=on().gapi)===null||i===void 0)&&i.load)o();else{const l=r4("iframefcb");return on()[l]=()=>{gapi.load?o():r(an(t,"network-request-failed"))},e4(`${t4()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Rc=null,e})}let Rc=null;function X4(t){return Rc=Rc||Y4(t),Rc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new yl(5e3,15e3),Z4="__/auth/iframe",eA="emulator/auth/iframe",tA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nA(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dg(e,eA):`https://${t.config.authDomain}/${Z4}`,n={apiKey:e.apiKey,appName:t.name,v:hi},s=rA.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${ll(n).slice(1)}`}async function sA(t){const e=await X4(t),r=on().gapi;return ye(r,t,"internal-error"),e.open({where:document.body,url:nA(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tA,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),l=on().setTimeout(()=>{i(o)},J4.get());function u(){on().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aA=500,oA=600,lA="_blank",cA="http://localhost";class mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uA(t,e,r,n=aA,s=oA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},iA),{width:n.toString(),height:s.toString(),top:i,left:o}),d=Gt().toLowerCase();r&&(l=r1(d)?lA:r),e1(d)&&(e=e||cA,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,k])=>`${m}${b}=${k},`,"");if(qC(d)&&l!=="_self")return dA(e||"",l),new mx(null);const g=window.open(e||"",l,h);ye(g,t,"popup-blocked");try{g.focus()}catch{}return new mx(g)}function dA(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="__/auth/handler",fA="emulator/auth/handler",mA=encodeURIComponent("fac");async function gx(t,e,r,n,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:hi,eventId:s};if(e instanceof d1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof xl){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${mA}=${encodeURIComponent(u)}`:"";return`${gA(t)}?${ll(l).slice(1)}${d}`}function gA({config:t}){return t.emulator?Dg(t,fA):`https://${t.authDomain}/${hA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="webStorageSupport";class pA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p1,this._completeRedirectFn=F4,this._overrideRedirectResult=O4}async _openPopup(e,r,n,s){var i;Mn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gx(e,r,n,Vf(),s);return uA(e,o,Fg())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await gx(e,r,n,Vf(),s);return v4(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Mn(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await sA(e),n=new B4(e);return r.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(dh,{type:dh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[dh];o!==void 0&&r(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=G4(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return o1()||t1()||Og()}}const yA=pA;var px="@firebase/auth",yx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bA(t){ti(new bs("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l1(t)},d=new JC(n,s,i,u);return s4(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ti(new bs("auth-internal",e=>{const r=Lg(e.getProvider("auth").getImmediate());return(n=>new xA(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),rn(px,yx,vA(t)),rn(px,yx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=5*60,_A=ww("authIdTokenMaxAge")||wA;let xx=null;const kA=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>_A)return;const s=r==null?void 0:r.token;xx!==s&&(xx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NA(t=Xm()){const e=qu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=n4(t,{popupRedirectResolver:yA,persistence:[T4,p4,p1]}),n=ww("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=kA(i.toString());f4(r,o,()=>o(r.currentUser)),h4(r,l=>o(l))}}const s=xw("auth");return s&&i4(r,`http://${s}`),r}function EA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZC({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=an("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",EA().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bA("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firebasestorage.googleapis.com",jA="storageBucket",SA=2*60*1e3,TA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends hn{constructor(e,r,n=0){super(hh(e),`Firebase Storage: ${r} (${hh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var un;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(un||(un={}));function hh(t){return"storage/"+t}function IA(){const t="An unknown error occurred, please check the error payload for server response.";return new fn(un.UNKNOWN,t)}function CA(){return new fn(un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AA(){return new fn(un.CANCELED,"User canceled the upload/download.")}function PA(t){return new fn(un.INVALID_URL,"Invalid URL '"+t+"'.")}function RA(t){return new fn(un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vx(t){return new fn(un.INVALID_ARGUMENT,t)}function N1(){return new fn(un.APP_DELETED,"The Firebase app was deleted.")}function DA(t){return new fn(un.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Lr.makeFromUrl(e,r)}catch{return new Lr(e,"")}if(n.path==="")return n;throw RA(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",g=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${h}/b/${s}/o${m}`,"i"),k={bucket:1,path:3},v=r===k1?"(?:storage.googleapis.com|storage.cloud.google.com)":r,C="([^?#]*)",E=new RegExp(`^https?://${v}/${s}/${C}`,"i"),N=[{regex:l,indices:u,postModify:i},{regex:b,indices:k,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<N.length;R++){const L=N[R],M=L.regex.exec(e);if(M){const I=M[L.indices.bucket];let _=M[L.indices.path];_||(_=""),n=new Lr(I,_),L.postModify(n);break}}if(n==null)throw PA(e);return n}}class $A{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t,e,r){let n=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function g(C){s=setTimeout(()=>{s=null,t(b,u())},C)}function m(){i&&clearTimeout(i)}function b(C,...E){if(d){m();return}if(C){m(),h.call(null,C,...E);return}if(u()||o){m(),h.call(null,C,...E);return}n<64&&(n*=2);let N;l===1?(l=2,N=0):N=(n+Math.random())*1e3,g(N)}let k=!1;function v(C){k||(k=!0,m(),!d&&(s!==null?(C||(l=2),clearTimeout(s),g(0)):C||(l=1)))}return g(0),i=setTimeout(()=>{o=!0,v(!0)},r),v}function OA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return t!==void 0}function bx(t,e,r,n){if(n<e)throw vx(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw vx(`Invalid value for '${t}'. Expected ${r} or less.`)}function VA(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var _u;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_u||(_u={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,r,n,s,i,o,l,u,d,h,g,m=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new cc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===_u.NO_ERROR,u=i.getStatus();if(!l||FA(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===_u.ABORT;n(!1,new cc(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new cc(d,i))})},r=(n,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());LA(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=IA();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?N1():AA();o(u)}else{const u=CA();o(u)}};this.canceled_?r(!1,new cc(!1,null,!0)):this.backoffId_=MA(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cc{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function BA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qA(t,e,r,n,s,i,o=!0){const l=VA(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return WA(d,e),BA(d,r),zA(d,i),HA(d,n),new UA(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,r){this._service=e,r instanceof Lr?this._location=r:this._location=Lr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new ku(e,r)}get root(){const e=new Lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KA(this._location.path)}get storage(){return this._service}get parent(){const e=GA(this._location.path);if(e===null)return null;const r=new Lr(this._location.bucket,e);return new ku(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw DA(e)}}function wx(t,e){const r=e==null?void 0:e[jA];return r==null?null:Lr.makeFromBucketSpec(r,t)}function QA(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:_w(s,t.app.options.projectId))}class YA{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=k1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SA,this._maxUploadRetryTime=TA,this._requests=new Set,s!=null?this._bucket=Lr.makeFromBucketSpec(s,this._host):this._bucket=wx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lr.makeFromBucketSpec(this._url,e):this._bucket=wx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ku(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new $A(N1());{const o=qA(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const _x="@firebase/storage",kx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="storage";function XA(t=Xm(),e){t=Kt(t);const n=qu(t,E1).getImmediate({identifier:e}),s=vw("storage");return s&&JA(n,...s),n}function JA(t,e,r,n={}){QA(t,e,r,n)}function ZA(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new YA(r,n,s,e,hi)}function eP(){ti(new bs(E1,ZA,"PUBLIC").setMultipleInstances(!0)),rn(_x,kx,""),rn(_x,kx,"esm2017")}eP();const xn={apiKey:"your-api-key",authDomain:"your-auth-domain",projectId:"your-project-id",storageBucket:"your-storage-bucket",messagingSenderId:"your-messaging-sender-id",appId:"your-app-id"};console.log("Firebase config check:",{hasApiKey:!!xn.apiKey&&xn.apiKey!=="your-api-key",authDomain:xn.authDomain,projectId:xn.projectId,hasStorageBucket:!!xn.storageBucket&&xn.storageBucket!=="your-storage-bucket",hasAppId:!!xn.appId&&xn.appId!=="your-app-id"});console.log("Raw env values:",{VITE_FIREBASE_API_KEY:void 0,VITE_FIREBASE_AUTH_DOMAIN:void 0,VITE_FIREBASE_PROJECT_ID:void 0,VITE_FIREBASE_STORAGE_BUCKET:void 0});const Bg=Ew(xn);NA(Bg);const Oe=cC(Bg);XA(Bg);console.log("Firestore db initialized:",!!Oe);const tP=30,Nx=t=>t.toString().padStart(2,"0"),rP=()=>{const t=new Date;return t.setDate(t.getDate()-tP),{dateOnly:`${t.getFullYear()}-${Nx(t.getMonth()+1)}-${Nx(t.getDate())}`,iso:t.toISOString()}},uc=async(t,e,r)=>{const n=Qt(Oe,t),s=ft(n,xr(e,"<",r)),i=await cn(s);await Promise.all(i.docs.map(o=>pi(ur(Oe,t,o.id))))},nP=async()=>{try{const{dateOnly:t,iso:e}=rP();await Promise.all([uc("workSlots","date",t),uc("dayStatuses","date",t),uc("earnings","date",t),uc("referrals","createdAt",e)])}catch(t){console.error("Failed to cleanup old data",t)}},On=async(t,e)=>{const r=Qt(Oe,"workSlots");let n;t&&e||t?n=ft(r,xr("userId","==",t)):e?n=ft(r,xr("date","==",e)):n=ft(r);let i=(await cn(n)).docs.map(o=>{const l=o.data(),u=((l==null?void 0:l.slots)||[]).map(d=>d.break&&!d.breaks?{...d,breaks:[d.break],break:void 0}:d);return{id:o.id,userId:(l==null?void 0:l.userId)||"",date:(l==null?void 0:l.date)||"",slots:u,participants:(l==null?void 0:l.participants)||[],...(l==null?void 0:l.comment)&&{comment:l.comment}}});return t&&e&&(i=i.filter(o=>o.date===e)),i.sort((o,l)=>o.date.localeCompare(l.date)),i},sP=async t=>{try{console.log("addWorkSlot: Starting, db initialized:",!!Oe);const e=Qt(Oe,"workSlots");console.log("addWorkSlot: Collection reference created");const r=Object.fromEntries(Object.entries(t).filter(([s,i])=>i!==void 0));console.log("addWorkSlot: Clean slot prepared:",r),console.log("addWorkSlot: Calling addDoc...");const n=await Ta(e,r);return console.log("addWorkSlot: Work slot added successfully:",n.id),n}catch(e){throw console.error("addWorkSlot: Error caught:",e),console.error("addWorkSlot: Error code:",e==null?void 0:e.code),console.error("addWorkSlot: Error message:",e==null?void 0:e.message),console.error("addWorkSlot: Full error:",JSON.stringify(e,null,2)),e}},iP=async(t,e)=>{const r=ur(Oe,"workSlots",t),n=Object.fromEntries(Object.entries(e).filter(([s,i])=>i!==void 0));await Sa(r,n)},zg=async t=>{const e=ur(Oe,"workSlots",t);await pi(e)},jn=async(t,e)=>{const r=Qt(Oe,"dayStatuses");let n;t?n=ft(r,xr("userId","==",t)):n=ft(r);let i=(await cn(n)).docs.map(o=>{const l=o.data();return{id:o.id,userId:(l==null?void 0:l.userId)||"",date:(l==null?void 0:l.date)||"",type:(l==null?void 0:l.type)||"dayoff",...(l==null?void 0:l.comment)&&{comment:l.comment},...(l==null?void 0:l.endDate)&&{endDate:l.endDate}}});return i.sort((o,l)=>o.date.localeCompare(l.date)),i},aP=async t=>{try{const e=Qt(Oe,"dayStatuses"),r=Object.fromEntries(Object.entries(t).filter(([s,i])=>i!==void 0));console.log("Adding day status:",r);const n=await Ta(e,r);return console.log("Day status added successfully:",n.id),n}catch(e){throw console.error("Error in addDayStatus:",e),e}},oP=async(t,e)=>{const r=ur(Oe,"dayStatuses",t),n=Object.fromEntries(Object.entries(e).filter(([s,i])=>i!==void 0));await Sa(r,n)},j1=async t=>{const e=ur(Oe,"dayStatuses",t);await pi(e)},Zo=async(t,e,r)=>{const n=Qt(Oe,"earnings");let s;t?s=ft(n):e&&r?s=ft(n,xr("date",">=",e),xr("date","<=",r)):s=ft(n);let o=(await cn(s)).docs.map(l=>{const u=l.data();return{id:l.id,userId:(u==null?void 0:u.userId)||"",date:(u==null?void 0:u.date)||"",amount:(u==null?void 0:u.amount)||0,poolAmount:(u==null?void 0:u.poolAmount)||0,slotId:(u==null?void 0:u.slotId)||"",participants:(u==null?void 0:u.participants)||[]}});return t&&(o=o.filter(l=>(l.participants&&l.participants.length>0?[...l.participants,l.userId]:[l.userId]).includes(t))),t&&e&&r?o=o.filter(l=>l.date>=e&&l.date<=r):!t&&e&&r&&(o=o.filter(l=>l.date>=e&&l.date<=r)),o.sort((l,u)=>u.date.localeCompare(l.date)),o},lP=async t=>{try{const e=Qt(Oe,"earnings"),r=Object.fromEntries(Object.entries(t).filter(([s,i])=>i!==void 0));console.log("Adding earnings:",r);const n=await Ta(e,r);return console.log("Earnings added successfully:",n.id),n}catch(e){throw console.error("Error in addEarnings:",e),e}},cP=async(t,e)=>{const r=ur(Oe,"earnings",t),n=Object.fromEntries(Object.entries(e).filter(([s,i])=>i!==void 0));await Sa(r,n)},uP=async t=>{const e=ur(Oe,"earnings",t);await pi(e)},S1=async t=>{const e=Qt(Oe,"ratings");let r=ft(e);return t&&(r=ft(r,xr("userId","==",t))),(await cn(r)).docs.map(s=>{const i=s.data();return{id:s.id,userId:i.userId||"",earnings:i.earnings||0,messages:i.messages||0,initiatives:i.initiatives||0,signals:i.signals||0,profitableSignals:i.profitableSignals||0,referrals:i.referrals||0,daysOff:i.daysOff||0,sickDays:i.sickDays||0,vacationDays:i.vacationDays||0,poolAmount:i.poolAmount||0,rating:i.rating||0,lastUpdated:i.lastUpdated||new Date().toISOString()}})},T1=async(t,e,r)=>{try{const n=Qt(Oe,"messages"),s=ft(n,xr("userId","==",t));return(await cn(s)).docs.filter(l=>{const d=l.data().date||"";return d>=e&&d<=r}).length}catch(n){console.error("Error getting weekly messages:",n);const s=Qt(Oe,"ratings"),i=ft(s,xr("userId","==",t)),o=await cn(i);return o.empty?0:o.docs[0].data().messages||0}},dP=async t=>{try{const e=Qt(Oe,"referrals"),r=Object.fromEntries(Object.entries(t).filter(([s,i])=>i!==void 0));console.log("Adding referral:",r);const n=await Ta(e,r);return console.log("Referral added successfully:",n.id),n}catch(e){throw console.error("Error in addReferral:",e),e}},I1=async(t,e,r)=>{const n=Qt(Oe,"referrals");let s;s=ft(n,Xo("createdAt","desc"));let o=(await cn(s)).docs.map(l=>{const u=l.data();return{id:l.id,referralId:u.referralId,ownerId:u.ownerId,name:u.name,age:u.age,createdAt:u.createdAt,comment:u.comment}});return e&&r&&(o=o.filter(l=>l.createdAt>=e&&l.createdAt<=r)),o.sort((l,u)=>l.createdAt<u.createdAt?1:-1)},hP=async(t,e)=>{const r=ur(Oe,"referrals",t),n=Object.fromEntries(Object.entries(e).filter(([s,i])=>i!==void 0));await Sa(r,n)},fP=async t=>{const e=ur(Oe,"referrals",t);await pi(e)},mP=async t=>{const e=Qt(Oe,"calls");return(await Ta(e,t)).id},gP=async t=>{const e=Qt(Oe,"calls"),r=[];r.push(Xo("createdAt","desc"));let n;return r.length>0?n=ft(e,...r):n=ft(e,Xo("createdAt","desc")),(await cn(n)).docs.map(o=>{const l=o.data();return{id:o.id,userId:l.userId||"",network:l.network||"",ticker:l.ticker||"",pair:l.pair||"",entryPoint:l.entryPoint||"",target:l.target||"",strategy:l.strategy||"flip",risks:l.risks||"",cancelConditions:l.cancelConditions,comment:l.comment,createdAt:l.createdAt||new Date().toISOString(),status:l.status||"active",maxProfit:l.maxProfit,currentPnL:l.currentPnL,currentMarketCap:l.currentMarketCap,signalMarketCap:l.signalMarketCap,currentPrice:l.currentPrice,entryPrice:l.entryPrice}})},pP=async(t,e)=>{const r=ur(Oe,"calls",t);await Sa(r,e)},yP=async t=>{const e=ur(Oe,"calls",t);await pi(e)},xP=async t=>{const e=Qt(Oe,"tasks");return(await Ta(e,t)).id},C1=async t=>{const e=Qt(Oe,"tasks"),r=[];t!=null&&t.status&&r.push(xr("status","==",t.status)),t!=null&&t.category&&r.push(xr("category","==",t.category)),t!=null&&t.createdBy&&r.push(xr("createdBy","==",t.createdBy)),r.push(Xo("createdAt","desc"));let n;r.length>0?n=ft(e,...r):n=ft(e,Xo("createdAt","desc"));let i=(await cn(n)).docs.map(d=>{const h=d.data(),m=((Array.isArray(h.assignees)?h.assignees:(h.assignedTo||[]).map(k=>({userId:k,priority:"medium"})))||[]).map(k=>({userId:k.userId||"",priority:k.priority==="high"||k.priority==="low"?k.priority:"medium",comment:k.comment})).filter(k=>!!k.userId),b=m.map(k=>k.userId);return{id:d.id,title:h.title||"",description:h.description,category:h.category||"trading",status:h.status||"pending",createdBy:h.createdBy||"",assignedTo:b,assignees:m,approvals:h.approvals||[],createdAt:h.createdAt||new Date().toISOString(),updatedAt:h.updatedAt||new Date().toISOString(),completedAt:h.completedAt,closedAt:h.closedAt,completedBy:h.completedBy,priority:h.priority,dueDate:h.dueDate||new Date().toISOString().split("T")[0],dueTime:h.dueTime||"12:00"}});const o=new Date,l=new Date(o.getTime()-12*60*60*1e3),u=i.filter(d=>d.status==="closed"&&d.closedAt?new Date(d.closedAt)<l:!1);if(u.length>0&&(await Promise.all(u.map(d=>A1(d.id))),i=i.filter(d=>!u.find(h=>h.id===d.id))),t!=null&&t.assignedTo)if(Array.isArray(t.assignedTo)){const d=t.assignedTo;d.length>0&&(i=i.filter(h=>d.some(g=>h.assignedTo.includes(g))))}else i=i.filter(d=>d.assignedTo.includes(t.assignedTo));return i},zs=async(t,e)=>{const r=ur(Oe,"tasks",t),n={...e,updatedAt:new Date().toISOString()};await Sa(r,n)},A1=async t=>{const e=ur(Oe,"tasks",t);await pi(e)},vP=({onSuccess:t,onCancel:e,callToEdit:r})=>{const{theme:n}=Be(),{user:s}=Nt(),[i,o]=P.useState(!1),[l,u]=P.useState(""),[d,h]=P.useState({network:(r==null?void 0:r.network)||"solana",ticker:(r==null?void 0:r.ticker)||"",pair:(r==null?void 0:r.pair)||"",entryPoint:(r==null?void 0:r.entryPoint)||"",target:(r==null?void 0:r.target)||"",strategy:(r==null?void 0:r.strategy)||"flip",risks:(r==null?void 0:r.risks)||"",cancelConditions:(r==null?void 0:r.cancelConditions)||"",comment:(r==null?void 0:r.comment)||""}),g=["solana","bsc","ethereum","base","ton","tron","sui","cex"],m=[{value:"flip",label:" "},{value:"medium",label:" "},{value:"long",label:" "}],b={solana:"Solana",bsc:"BSC",ethereum:"Ethereum",base:"Base",ton:"Ton",tron:"Tron",sui:"SUI",cex:"CEX "},k=async y=>{if(y.preventDefault(),u(""),o(!0),!d.ticker.trim()){u("  "),o(!1);return}if(!d.pair.trim()){u("  "),o(!1);return}if(!d.entryPoint.trim()){u("    "),o(!1);return}if(!d.target.trim()){u(" /  "),o(!1);return}if(!d.risks.trim()){u(" "),o(!1);return}try{if(r){const N={network:d.network,ticker:d.ticker,pair:d.pair,entryPoint:d.entryPoint,target:d.target,strategy:d.strategy,risks:d.risks,cancelConditions:d.cancelConditions||void 0,comment:d.comment||void 0};await pP(r.id,N)}else{if(!s){u("  .       ."),o(!1);return}const N={...d,userId:s.id,createdAt:new Date().toISOString(),status:"active",cancelConditions:d.cancelConditions||void 0,comment:d.comment||void 0};await mP(N)}t==null||t()}catch(N){console.error("Error creating call:",N),u("   .  .")}finally{o(!1)}},v=n==="dark"?"text-white":"text-gray-900",C=n==="dark"?"border-gray-700":"border-gray-200",E=n==="dark"?"bg-gray-700":"bg-gray-50";return a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[l&&a.jsx("div",{className:`p-4 rounded-lg ${n==="dark"?"bg-red-900/30 border border-red-700 text-red-300":"bg-red-50 border border-red-200 text-red-800"}`,children:l}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:" *"}),a.jsx("select",{value:d.network,onChange:y=>h({...d,network:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,required:!0,children:g.map(y=>a.jsx("option",{value:y,children:b[y]},y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"  *"}),a.jsx("input",{type:"text",value:d.ticker,onChange:y=>h({...d,ticker:y.target.value.toUpperCase()}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:" ",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"  *"}),a.jsx("input",{type:"text",value:d.pair,onChange:y=>h({...d,pair:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"PEPE/USDT, DOGE/USDT...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"     *"}),a.jsx("input",{type:"text",value:d.entryPoint,onChange:y=>h({...d,entryPoint:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"10M  10M-15M (  )",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"/   *"}),a.jsx("input",{type:"text",value:d.target,onChange:y=>h({...d,target:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"20M, 30M, 50M (  )",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:" *"}),a.jsx("select",{value:d.strategy,onChange:y=>h({...d,strategy:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,required:!0,children:m.map(y=>a.jsx("option",{value:y.value,children:y.label},y.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:" *"}),a.jsx("textarea",{value:d.risks,onChange:y=>h({...d,risks:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[100px] resize-y`,placeholder:"   ...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"    "}),a.jsx("textarea",{value:d.cancelConditions,onChange:y=>h({...d,cancelConditions:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[80px] resize-y`,placeholder:"        ..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"  "}),a.jsx("textarea",{value:d.comment,onChange:y=>h({...d,comment:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[100px] resize-y`,placeholder:"   ..."})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{type:"submit",disabled:i,className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${n==="dark"?"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-700 disabled:text-gray-400":"bg-green-500 hover:bg-green-600 text-white disabled:bg-gray-300 disabled:text-gray-500"}`,children:i?"...":r?" ":" "}),e&&a.jsx("button",{type:"button",onClick:e,className:`px-6 py-3 rounded-lg font-semibold transition-colors ${n==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""})]})]})},bP=()=>{var W;const{theme:t}=Be(),{user:e}=Nt(),[r,n]=P.useState([]),[s,i]=P.useState(!0),[o,l]=P.useState(!1),[u,d]=P.useState(!1),[h,g]=P.useState(!0),[m,b]=P.useState(null),[k,v]=P.useState(null),[C,E]=P.useState(null),[y,N]=P.useState("");P.useEffect(()=>{R()},[]);const R=async()=>{i(!0);try{const $=await gP();n($),console.log("Loaded calls:",$.length,"User ID:",e==null?void 0:e.id),$.length>0&&console.log("First call userId:",$[0].userId)}catch($){console.error("Error loading calls:",$),n([])}finally{i(!1)}},L=P.useMemo(()=>{const $={};return r.forEach(te=>{const ue=_e.find(J=>J.id===te.userId),le=te.userId||"unknown",fe=(ue==null?void 0:ue.name)||"";$[le]||($[le]={name:fe,totalCalls:0,activeCalls:0,completedCalls:0,cancelledCalls:0,avgPnL:0,totalPnL:0,maxProfit:0}),$[le].totalCalls++,te.status==="active"&&$[le].activeCalls++,te.status==="completed"&&$[le].completedCalls++,te.status==="cancelled"&&$[le].cancelledCalls++,te.currentPnL!==void 0&&($[le].totalPnL+=te.currentPnL),te.maxProfit!==void 0&&te.maxProfit>$[le].maxProfit&&($[le].maxProfit=te.maxProfit)}),Object.keys($).forEach(te=>{const ue=$[te];ue.totalCalls>0&&(ue.avgPnL=ue.totalPnL/ue.totalCalls)}),Object.values($).sort((te,ue)=>ue.totalCalls-te.totalCalls)},[r]),M=P.useMemo(()=>{const $=r.length,te=r.filter(X=>X.status==="active").length,ue=r.filter(X=>X.status==="completed").length,le=r.filter(X=>X.status==="cancelled").length,fe=r.length>0?r.reduce((X,G)=>X+(G.currentPnL||0),0)/r.length:0,J=r.reduce((X,G)=>G.maxProfit!==void 0&&(!X||(X.maxProfit||0)<G.maxProfit)?G:X,null);return{total:$,active:te,completed:ue,cancelled:le,avgPnL:fe,bestCall:J}},[r]),I=()=>{l(!1),v(null),R()},_=()=>{l(!1),v(null)},w=$=>{v($),l(!0)},j=$=>{b($),d(!0)},S=async()=>{if(m)try{await yP(m),d(!1),b(null),R()}catch($){console.error("Error deleting call:",$),alert("   ")}},A=async $=>{try{await navigator.clipboard.writeText($),E($),setTimeout(()=>E(null),2e3)}catch(te){console.error("Failed to copy:",te)}},x=t==="dark"?"bg-gray-800":"bg-white",H=t==="dark"?"text-white":"text-gray-900",U=t==="dark"?"text-gray-400":"text-gray-600",B=t==="dark"?"border-gray-700":"border-gray-200",q={solana:{bg:"bg-purple-500/10",text:"text-purple-400",icon:"bg-purple-500"},bsc:{bg:"bg-yellow-500/10",text:"text-yellow-400",icon:"bg-yellow-500"},ethereum:{bg:"bg-blue-500/10",text:"text-blue-400",icon:"bg-blue-500"},base:{bg:"bg-indigo-500/10",text:"text-indigo-400",icon:"bg-indigo-500"},ton:{bg:"bg-cyan-500/10",text:"text-cyan-400",icon:"bg-cyan-500"},tron:{bg:"bg-red-500/10",text:"text-red-400",icon:"bg-red-500"},sui:{bg:"bg-green-500/10",text:"text-green-400",icon:"bg-green-500"},cex:{bg:"bg-orange-500/10",text:"text-orange-400",icon:"bg-orange-500"}},F={flip:{label:"",icon:"",color:"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 border-yellow-500/30"},medium:{label:"",icon:"",color:"bg-blue-500/20 text-blue-600 dark:text-blue-400 border-blue-500/30"},long:{label:"",icon:"",color:"bg-purple-500/20 text-purple-600 dark:text-purple-400 border-purple-500/30"}},V={active:{label:"",color:"bg-green-500/20 text-green-600 dark:text-green-400 border-green-500/30"},completed:{label:"",color:"bg-blue-500/20 text-blue-600 dark:text-blue-400 border-blue-500/30"},cancelled:{label:"",color:"bg-red-500/20 text-red-600 dark:text-red-400 border-red-500/30"},reviewed:{label:" ",color:"bg-gray-500/20 text-gray-600 dark:text-gray-400 border-gray-500/30"}},D=r.filter($=>$.ticker.toLowerCase().includes(y.toLowerCase())||$.pair.toLowerCase().includes(y.toLowerCase())||$.network.toLowerCase().includes(y.toLowerCase()));return a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-2xl p-8 ${x} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-32 -mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-blue-500/10 to-purple-500/10 rounded-full blur-2xl -ml-24 -mb-24"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white transform transition-transform hover:scale-110`,children:a.jsx(qi,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:`text-4xl font-extrabold mb-2 ${H} flex items-center gap-3`,children:[a.jsx("span",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-blue-600 text-transparent bg-clip-text",children:"Trading Signals"}),a.jsx(pr,{className:`w-6 h-6 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]}),a.jsxs("p",{className:`text-base font-medium ${U} flex items-center gap-2`,children:[a.jsx("span",{className:"text-green-500",children:""}),"    "]})]})]})}),a.jsxs("button",{onClick:()=>{v(null),l(!0)},className:"w-full lg:w-auto px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-200 flex items-center justify-center gap-2 font-semibold shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx(oa,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Vj,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 ${U}`}),a.jsx("input",{type:"text",value:y,onChange:$=>N($.target.value),placeholder:"  ,   ...",className:`w-full pl-12 pr-4 py-3 rounded-xl border-2 ${B} ${t==="dark"?"bg-gray-700/50":"bg-gray-50"} ${H} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`})]})]})]}),h&&r.length>0&&a.jsxs("div",{className:`${x} rounded-2xl p-6 shadow-xl border ${B}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:`text-2xl font-bold ${H} flex items-center gap-2`,children:[a.jsx(Jp,{className:"w-6 h-6 text-green-500"}),""]}),a.jsx("button",{onClick:()=>g(!h),className:`p-2 rounded-lg ${t==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:a.jsx(br,{className:`w-5 h-5 ${U}`})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Sj,{className:"w-5 h-5 text-blue-500"}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" "})]}),a.jsx("p",{className:`text-2xl font-bold ${H}`,children:M.total})]}),a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-green-500/10 border border-green-500/20":"bg-green-50 border border-green-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(qi,{className:"w-5 h-5 text-green-500"}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),a.jsx("p",{className:`text-2xl font-bold ${H}`,children:M.active})]}),a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-purple-500/10 border border-purple-500/20":"bg-purple-50 border border-purple-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Bo,{className:"w-5 h-5 text-purple-500"}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),a.jsx("p",{className:`text-2xl font-bold ${H}`,children:M.completed})]}),a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-orange-500/10 border border-orange-500/20":"bg-orange-50 border border-orange-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(di,{className:"w-5 h-5 text-orange-500"}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" PNL"})]}),a.jsxs("p",{className:`text-2xl font-bold ${M.avgPnL>=0?"text-green-500":"text-red-500"}`,children:[M.avgPnL>=0?"+":"",M.avgPnL.toFixed(2),"%"]})]})]}),M.bestCall&&a.jsxs("div",{className:`p-4 rounded-xl mb-6 ${t==="dark"?"bg-gradient-to-r from-green-500/10 to-green-600/10 border border-green-500/20":"bg-gradient-to-r from-green-50 to-green-100 border border-green-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ow,{className:"w-5 h-5 text-green-500"}),a.jsx("p",{className:`text-sm font-semibold ${H}`,children:" "})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:`font-bold ${H}`,children:M.bestCall.pair}),a.jsxs("p",{className:`text-xs ${U}`,children:[": ",M.bestCall.ticker]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-green-500",children:["+",((W=M.bestCall.maxProfit)==null?void 0:W.toFixed(2))||"0.00","%"]}),a.jsx("p",{className:`text-xs ${U}`,children:"MAX "})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:`text-lg font-bold ${H} mb-4 flex items-center gap-2`,children:[a.jsx(tn,{className:"w-5 h-5 text-green-500"}),"  "]}),a.jsx("div",{className:"space-y-3",children:L.map($=>a.jsxs("div",{className:`p-4 rounded-xl border ${B} ${t==="dark"?"bg-gray-700/30":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center text-white font-bold",children:$.name[0]}),a.jsxs("div",{children:[a.jsx("p",{className:`font-bold ${H}`,children:$.name}),a.jsxs("p",{className:`text-xs ${U}`,children:[" : ",$.totalCalls]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:`text-lg font-bold ${$.avgPnL>=0?"text-green-500":"text-red-500"}`,children:[$.avgPnL>=0?"+":"",$.avgPnL.toFixed(2),"%"]}),a.jsx("p",{className:`text-xs ${U}`,children:" PNL"})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-green-500/10":"bg-green-50"}`,children:[a.jsx("p",{className:`text-sm font-bold ${H}`,children:$.activeCalls}),a.jsx("p",{className:`text-xs ${U}`,children:""})]}),a.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-blue-500/10":"bg-blue-50"}`,children:[a.jsx("p",{className:`text-sm font-bold ${H}`,children:$.completedCalls}),a.jsx("p",{className:`text-xs ${U}`,children:""})]}),a.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-red-500/10":"bg-red-50"}`,children:[a.jsx("p",{className:`text-sm font-bold ${H}`,children:$.cancelledCalls}),a.jsx("p",{className:`text-xs ${U}`,children:""})]}),a.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-purple-500/10":"bg-purple-50"}`,children:[a.jsxs("p",{className:"text-sm font-bold text-purple-500",children:["+",$.maxProfit.toFixed(1),"%"]}),a.jsx("p",{className:`text-xs ${U}`,children:"MAX"})]})]})]},$.name))})]})]}),r.length>0&&!h&&a.jsxs("button",{onClick:()=>g(!0),className:`w-full ${x} rounded-xl p-4 shadow-lg border ${B} hover:shadow-xl transition-all flex items-center justify-center gap-2 ${t==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-50"}`,children:[a.jsx(Jp,{className:"w-5 h-5 text-green-500"}),a.jsx("span",{className:`font-semibold ${H}`,children:" "})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:`${x} rounded-2xl p-8 shadow-2xl border ${B} max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom-4 duration-300`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:`text-3xl font-bold ${H}`,children:k?" ":"  "}),a.jsx("button",{onClick:_,className:`p-2 rounded-xl transition-colors ${t==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:a.jsx(br,{className:`w-6 h-6 ${U}`})})]}),a.jsx(vP,{callToEdit:k,onSuccess:I,onCancel:_})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:`${x} rounded-2xl p-8 shadow-2xl border ${B} max-w-md w-full animate-in slide-in-from-bottom-4 duration-300`,children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:a.jsx(po,{className:"w-8 h-8 text-red-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-2xl font-bold ${H}`,children:" ?"}),a.jsx("p",{className:U,children:"   "})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>{d(!1),b(null)},className:`flex-1 px-6 py-3 rounded-xl font-semibold transition-colors ${t==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),a.jsx("button",{onClick:S,className:`flex-1 px-6 py-3 rounded-xl font-semibold transition-colors ${t==="dark"?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:""})]})]})}),!o&&a.jsx(a.Fragment,{children:s?a.jsxs("div",{className:`${x} rounded-2xl p-12 text-center ${B} border shadow-xl`,children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:`${U} text-lg`,children:" ..."})]}):r.length===0?a.jsxs("div",{className:`${x} rounded-2xl p-12 text-center ${B} border shadow-xl`,children:[a.jsx(pr,{className:`w-20 h-20 mx-auto mb-6 ${U}`}),a.jsx("h3",{className:`text-2xl font-bold ${H} mb-2`,children:" "}),a.jsx("p",{className:U,children:"     "})]}):D.length===0?a.jsxs("div",{className:`${x} rounded-2xl p-12 text-center ${B} border shadow-xl`,children:[a.jsx(pr,{className:`w-20 h-20 mx-auto mb-6 ${U}`}),a.jsx("h3",{className:`text-2xl font-bold ${H} mb-2`,children:"  "}),a.jsx("p",{className:U,children:"  "}),a.jsxs("p",{className:`${U} text-xs mt-2`,children:[" : ",r.length,", : ",D.length]})]}):a.jsx("div",{className:"grid grid-cols-1 gap-6",children:D.map($=>{const te=_e.find(X=>X.id===$.userId),ue=q[$.network]||{bg:"bg-gray-500/10",text:"text-gray-400",icon:"bg-gray-500"},le=F[$.strategy]||F.flip,fe=V[$.status]||V.active,J=C===$.ticker;return a.jsxs("div",{className:`${x} rounded-2xl p-6 shadow-xl border ${B} hover:shadow-2xl transition-all duration-300 group relative overflow-hidden`,children:[a.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-600 ${$.status==="active"?"opacity-100":"opacity-50"}`}),a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsxs("div",{className:`${ue.bg} ${ue.text} px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 border ${B}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${ue.icon}`}),$.network.toUpperCase()]}),a.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-medium border ${fe.color}`,children:fe.label}),te&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center text-white text-xs font-bold",children:te.name[0]}),a.jsx("span",{className:`text-xs ${U}`,children:te.name})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("h2",{className:`text-3xl font-bold ${H} mb-1`,children:$.pair}),a.jsx("p",{className:`text-xs ${U} uppercase tracking-wider`,children:" "})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs("span",{className:`font-mono text-sm ${U} bg-gray-100 dark:bg-gray-700/50 px-2 py-1 rounded`,children:[" ",$.ticker]}),a.jsx("button",{onClick:()=>A($.ticker),className:`p-1.5 rounded-lg transition-all ${t==="dark"?"bg-gray-700/50 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,title:" ",children:J?a.jsx(Bo,{className:"w-4 h-4 text-green-500"}):a.jsx(lw,{className:`w-4 h-4 ${U}`})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>w($),className:`p-3 rounded-xl transition-all duration-200 ${t==="dark"?"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400":"bg-blue-50 hover:bg-blue-100 text-blue-600"}`,title:"",children:a.jsx(Ir,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>j($.id),className:`p-3 rounded-xl transition-all duration-200 ${t==="dark"?"bg-red-500/10 hover:bg-red-500/20 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,title:"",children:a.jsx(er,{className:"w-5 h-5"})})]})]}),($.maxProfit!==void 0||$.currentPnL!==void 0)&&a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[$.maxProfit!==void 0&&a.jsxs("div",{className:`p-3 rounded-xl ${t==="dark"?"bg-green-500/10 border border-green-500/20":"bg-green-50 border border-green-200"}`,children:[a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U} mb-1`,children:"MAX "}),a.jsxs("p",{className:"text-xl font-bold text-green-500",children:["+",$.maxProfit.toFixed(2),"%"]})]}),$.currentPnL!==void 0&&a.jsxs("div",{className:`p-3 rounded-xl ${t==="dark"?$.currentPnL>=0?"bg-green-500/10 border border-green-500/20":"bg-red-500/10 border border-red-500/20":$.currentPnL>=0?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U} mb-1`,children:" PNL"}),a.jsxs("p",{className:`text-xl font-bold ${$.currentPnL>=0?"text-green-500":"text-red-500"}`,children:[$.currentPnL>=0?"+":"",$.currentPnL.toFixed(2),"%"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-green-50/50"} border ${B}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(yf,{className:`w-4 h-4 ${t==="dark"?"text-green-400":"text-green-600"}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" ()"})]}),a.jsx("p",{className:`${H} font-medium`,children:$.entryPoint})]}),a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-blue-50/50"} border ${B}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(yf,{className:`w-4 h-4 ${t==="dark"?"text-blue-400":"text-blue-600"}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" ()"})]}),a.jsx("p",{className:`${H} font-medium`,children:$.target})]}),a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-purple-50/50"} border ${B}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(qi,{className:`w-4 h-4 ${t==="dark"?"text-purple-400":"text-purple-600"}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),a.jsxs("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-medium border ${le.color}`,children:[le.icon," ",le.label]})]}),a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-gray-50/50"} border ${B}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ei,{className:`w-4 h-4 ${U}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),a.jsx("p",{className:`${H} text-sm`,children:new Date($.createdAt).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-red-500/5 border-red-500/20":"bg-red-50/50 border-red-200/50"} border`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(po,{className:`w-4 h-4 ${t==="dark"?"text-red-400":"text-red-600"}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${t==="dark"?"text-red-400":"text-red-600"}`,children:""})]}),a.jsx("p",{className:`${H} text-sm leading-relaxed`,children:$.risks})]}),$.cancelConditions&&a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-orange-500/5 border-orange-500/20":"bg-orange-50/50 border-orange-200/50"} border`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(po,{className:`w-4 h-4 ${t==="dark"?"text-orange-400":"text-orange-600"}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${t==="dark"?"text-orange-400":"text-orange-600"}`,children:" "})]}),a.jsx("p",{className:`${H} text-sm leading-relaxed`,children:$.cancelConditions})]}),$.comment&&a.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-gray-50/50"} border ${B}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Gm,{className:`w-4 h-4 ${U}`}),a.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),a.jsx("p",{className:`${H} text-sm leading-relaxed`,children:$.comment})]})]})]},$.id)})})})]})})};function Nu(t){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nu(t)}function dn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ze(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function kt(t){Ze(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Nu(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wP(t,e){Ze(2,arguments);var r=kt(t).getTime(),n=dn(e);return new Date(r+n)}var _P={};function Ca(){return _P}function kP(t,e){var r,n,s,i,o,l,u,d;Ze(1,arguments);var h=Ca(),g=dn((r=(n=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=kt(t),b=m.getDay(),k=(b<g?7:0)+b-g;return m.setDate(m.getDate()-k),m.setHours(0,0,0,0),m}function NP(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Ex(t){Ze(1,arguments);var e=kt(t);return e.setHours(0,0,0,0),e}var P1=6e4,R1=36e5;function EP(t,e){Ze(2,arguments);var r=Ex(t),n=Ex(e);return r.getTime()===n.getTime()}function jP(t){return Ze(1,arguments),t instanceof Date||Nu(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function SP(t){if(Ze(1,arguments),!jP(t)&&typeof t!="number")return!1;var e=kt(t);return!isNaN(Number(e))}function TP(t,e){var r;Ze(1,arguments);var n=t||{},s=kt(n.start),i=kt(n.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var l=[],u=s;u.setHours(0,0,0,0);var d=Number((r=void 0)!==null&&r!==void 0?r:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=o;)l.push(kt(u)),u.setDate(u.getDate()+d),u.setHours(0,0,0,0);return l}function IP(t,e){var r,n,s,i,o,l,u,d;Ze(1,arguments);var h=Ca(),g=dn((r=(n=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=kt(t),b=m.getDay(),k=(b<g?-7:0)+6-(b-g);return m.setDate(m.getDate()+k),m.setHours(23,59,59,999),m}function CP(t,e){Ze(2,arguments);var r=dn(e);return wP(t,-r)}var AP=864e5;function PP(t){Ze(1,arguments);var e=kt(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),s=r-n;return Math.floor(s/AP)+1}function Eu(t){Ze(1,arguments);var e=1,r=kt(t),n=r.getUTCDay(),s=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-s),r.setUTCHours(0,0,0,0),r}function D1(t){Ze(1,arguments);var e=kt(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var s=Eu(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=Eu(i);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function RP(t){Ze(1,arguments);var e=D1(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=Eu(r);return n}var DP=6048e5;function $P(t){Ze(1,arguments);var e=kt(t),r=Eu(e).getTime()-RP(e).getTime();return Math.round(r/DP)+1}function ya(t,e){var r,n,s,i,o,l,u,d;Ze(1,arguments);var h=Ca(),g=dn((r=(n=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=kt(t),b=m.getUTCDay(),k=(b<g?7:0)+b-g;return m.setUTCDate(m.getUTCDate()-k),m.setUTCHours(0,0,0,0),m}function $1(t,e){var r,n,s,i,o,l,u,d;Ze(1,arguments);var h=kt(t),g=h.getUTCFullYear(),m=Ca(),b=dn((r=(n=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&n!==void 0?n:(u=m.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=new Date(0);k.setUTCFullYear(g+1,0,b),k.setUTCHours(0,0,0,0);var v=ya(k,e),C=new Date(0);C.setUTCFullYear(g,0,b),C.setUTCHours(0,0,0,0);var E=ya(C,e);return h.getTime()>=v.getTime()?g+1:h.getTime()>=E.getTime()?g:g-1}function MP(t,e){var r,n,s,i,o,l,u,d;Ze(1,arguments);var h=Ca(),g=dn((r=(n=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1),m=$1(t,e),b=new Date(0);b.setUTCFullYear(m,0,g),b.setUTCHours(0,0,0,0);var k=ya(b,e);return k}var OP=6048e5;function LP(t,e){Ze(1,arguments);var r=kt(t),n=ya(r,e).getTime()-MP(r,e).getTime();return Math.round(n/OP)+1}function Le(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var Wn={y:function(e,r){var n=e.getUTCFullYear(),s=n>0?n:1-n;return Le(r==="yy"?s%100:s,r.length)},M:function(e,r){var n=e.getUTCMonth();return r==="M"?String(n+1):Le(n+1,2)},d:function(e,r){return Le(e.getUTCDate(),r.length)},a:function(e,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,r){return Le(e.getUTCHours()%12||12,r.length)},H:function(e,r){return Le(e.getUTCHours(),r.length)},m:function(e,r){return Le(e.getUTCMinutes(),r.length)},s:function(e,r){return Le(e.getUTCSeconds(),r.length)},S:function(e,r){var n=r.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,n-3));return Le(i,r.length)}},ki={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VP={G:function(e,r,n){var s=e.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Wn.y(e,r)},Y:function(e,r,n,s){var i=$1(e,s),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return Le(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):Le(o,r.length)},R:function(e,r){var n=D1(e);return Le(n,r.length)},u:function(e,r){var n=e.getUTCFullYear();return Le(n,r.length)},Q:function(e,r,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return Le(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,r,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return Le(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,r,n){var s=e.getUTCMonth();switch(r){case"M":case"MM":return Wn.M(e,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,r,n){var s=e.getUTCMonth();switch(r){case"L":return String(s+1);case"LL":return Le(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,r,n,s){var i=LP(e,s);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):Le(i,r.length)},I:function(e,r,n){var s=$P(e);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):Le(s,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Wn.d(e,r)},D:function(e,r,n){var s=PP(e);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Le(s,r.length)},E:function(e,r,n){var s=e.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,r,n,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return Le(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,r,n,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return Le(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,r,n){var s=e.getUTCDay(),i=s===0?7:s;switch(r){case"i":return String(i);case"ii":return Le(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,r,n){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,r,n){var s=e.getUTCHours(),i;switch(s===12?i=ki.noon:s===0?i=ki.midnight:i=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,r,n){var s=e.getUTCHours(),i;switch(s>=17?i=ki.evening:s>=12?i=ki.afternoon:s>=4?i=ki.morning:i=ki.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Wn.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Wn.H(e,r)},K:function(e,r,n){var s=e.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Le(s,r.length)},k:function(e,r,n){var s=e.getUTCHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):Le(s,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Wn.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Wn.s(e,r)},S:function(e,r){return Wn.S(e,r)},X:function(e,r,n,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return Sx(o);case"XXXX":case"XX":return Ls(o);case"XXXXX":case"XXX":default:return Ls(o,":")}},x:function(e,r,n,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(r){case"x":return Sx(o);case"xxxx":case"xx":return Ls(o);case"xxxxx":case"xxx":default:return Ls(o,":")}},O:function(e,r,n,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+jx(o,":");case"OOOO":default:return"GMT"+Ls(o,":")}},z:function(e,r,n,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+jx(o,":");case"zzzz":default:return"GMT"+Ls(o,":")}},t:function(e,r,n,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return Le(o,r.length)},T:function(e,r,n,s){var i=s._originalDate||e,o=i.getTime();return Le(o,r.length)}};function jx(t,e){var r=t>0?"-":"+",n=Math.abs(t),s=Math.floor(n/60),i=n%60;if(i===0)return r+String(s);var o=e;return r+String(s)+o+Le(i,2)}function Sx(t,e){if(t%60===0){var r=t>0?"-":"+";return r+Le(Math.abs(t)/60,2)}return Ls(t,e)}function Ls(t,e){var r=e||"",n=t>0?"-":"+",s=Math.abs(t),i=Le(Math.floor(s/60),2),o=Le(s%60,2);return n+i+r+o}var Tx=function(e,r){switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},M1=function(e,r){switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},FP=function(e,r){var n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return Tx(e,r);var o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",Tx(s,r)).replace("{{time}}",M1(i,r))},UP={p:M1,P:FP},BP=["D","DD"],zP=["YY","YYYY"];function WP(t){return BP.indexOf(t)!==-1}function HP(t){return zP.indexOf(t)!==-1}function Ix(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var qP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GP=function(e,r,n){var s,i=qP[e];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Xi(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var KP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XP={date:Xi({formats:KP,defaultWidth:"full"}),time:Xi({formats:QP,defaultWidth:"full"}),dateTime:Xi({formats:YP,defaultWidth:"full"})},JP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZP=function(e,r,n,s){return JP[e]};function Qr(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var l=t.defaultWidth,u=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[u]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var eR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aR=function(e,r){var n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},oR={ordinalNumber:aR,era:Qr({values:eR,defaultWidth:"wide"}),quarter:Qr({values:tR,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qr({values:rR,defaultWidth:"wide"}),day:Qr({values:nR,defaultWidth:"wide"}),dayPeriod:Qr({values:sR,defaultWidth:"wide",formattingValues:iR,defaultFormattingWidth:"wide"})};function Yr(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?cR(l,function(g){return g.test(o)}):lR(l,function(g){return g.test(o)}),d;d=t.valueCallback?t.valueCallback(u):u,d=r.valueCallback?r.valueCallback(d):d;var h=e.slice(o.length);return{value:d,rest:h}}}function lR(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function cR(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function O1(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var s=n[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=e.slice(s.length);return{value:o,rest:l}}}var uR=/^(\d+)(th|st|nd|rd)?/i,dR=/\d+/i,hR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fR={any:[/^b/i,/^(a|c)/i]},mR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gR={any:[/1/i,/2/i,/3/i,/4/i]},pR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_R={ordinalNumber:O1({matchPattern:uR,parsePattern:dR,valueCallback:function(e){return parseInt(e,10)}}),era:Yr({matchPatterns:hR,defaultMatchWidth:"wide",parsePatterns:fR,defaultParseWidth:"any"}),quarter:Yr({matchPatterns:mR,defaultMatchWidth:"wide",parsePatterns:gR,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yr({matchPatterns:pR,defaultMatchWidth:"wide",parsePatterns:yR,defaultParseWidth:"any"}),day:Yr({matchPatterns:xR,defaultMatchWidth:"wide",parsePatterns:vR,defaultParseWidth:"any"}),dayPeriod:Yr({matchPatterns:bR,defaultMatchWidth:"any",parsePatterns:wR,defaultParseWidth:"any"})},kR={code:"en-US",formatDistance:GP,formatLong:XP,formatRelative:ZP,localize:oR,match:_R,options:{weekStartsOn:0,firstWeekContainsDate:1}},NR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ER=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jR=/^'([^]*?)'?$/,SR=/''/g,TR=/[a-zA-Z]/;function L1(t,e,r){var n,s,i,o,l,u,d,h,g,m,b,k,v,C,E,y,N,R;Ze(2,arguments);var L=String(e),M=Ca(),I=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:M.locale)!==null&&n!==void 0?n:kR,_=dn((i=(o=(l=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&l!==void 0?l:M.firstWeekContainsDate)!==null&&o!==void 0?o:(g=M.locale)===null||g===void 0||(m=g.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=dn((b=(k=(v=(C=r==null?void 0:r.weekStartsOn)!==null&&C!==void 0?C:r==null||(E=r.locale)===null||E===void 0||(y=E.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&v!==void 0?v:M.weekStartsOn)!==null&&k!==void 0?k:(N=M.locale)===null||N===void 0||(R=N.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&b!==void 0?b:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var j=kt(t);if(!SP(j))throw new RangeError("Invalid time value");var S=NP(j),A=CP(j,S),x={firstWeekContainsDate:_,weekStartsOn:w,locale:I,_originalDate:j},H=L.match(ER).map(function(U){var B=U[0];if(B==="p"||B==="P"){var q=UP[B];return q(U,I.formatLong)}return U}).join("").match(NR).map(function(U){if(U==="''")return"'";var B=U[0];if(B==="'")return IR(U);var q=VP[B];if(q)return!(r!=null&&r.useAdditionalWeekYearTokens)&&HP(U)&&Ix(U,e,String(t)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&WP(U)&&Ix(U,e,String(t)),q(A,U,I.localize,x);if(B.match(TR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return U}).join("");return H}function IR(t){var e=t.match(jR);return e?e[1].replace(SR,"'"):t}function CR(t,e){Ze(2,arguments);var r=kt(t),n=kt(e);return r.getTime()<n.getTime()}function oi(t,e){var r;Ze(1,arguments);var n=dn((r=void 0)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=DR(t),i;if(s.date){var o=$R(s.date,n);i=MR(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),u=0,d;if(s.time&&(u=OR(s.time),isNaN(u)))return new Date(NaN);if(s.timezone){if(d=LR(s.timezone),isNaN(d))return new Date(NaN)}else{var h=new Date(l+u),g=new Date(0);return g.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),g.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),g}return new Date(l+u+d)}var dc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},AR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,PR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,RR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function DR(t){var e={},r=t.split(dc.dateTimeDelimiter),n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],dc.timeZoneDelimiter.test(e.date)&&(e.date=t.split(dc.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){var s=dc.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function $R(t,e){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};var s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function MR(t,e){if(e===null)return new Date(NaN);var r=t.match(AR);if(!r)return new Date(NaN);var n=!!r[4],s=Xa(r[1]),i=Xa(r[2])-1,o=Xa(r[3]),l=Xa(r[4]),u=Xa(r[5])-1;if(n)return zR(e,l,u)?VR(e,l,u):new Date(NaN);var d=new Date(0);return!UR(e,i,o)||!BR(e,s)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(s,o)),d)}function Xa(t){return t?parseInt(t):1}function OR(t){var e=t.match(PR);if(!e)return NaN;var r=fh(e[1]),n=fh(e[2]),s=fh(e[3]);return WR(r,n,s)?r*R1+n*P1+s*1e3:NaN}function fh(t){return t&&parseFloat(t.replace(",","."))||0}function LR(t){if(t==="Z")return 0;var e=t.match(RR);if(!e)return 0;var r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return HR(n,s)?r*(n*R1+s*P1):NaN}function VR(t,e,r){var n=new Date(0);n.setUTCFullYear(t,0,4);var s=n.getUTCDay()||7,i=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}var FR=[31,null,31,30,31,30,31,31,30,31,30,31];function V1(t){return t%400===0||t%4===0&&t%100!==0}function UR(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(FR[e]||(V1(t)?29:28))}function BR(t,e){return e>=1&&e<=(V1(t)?366:365)}function zR(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function WR(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function HR(t,e){return e>=0&&e<=59}function Cx(t,e,r){Ze(2,arguments);var n=ya(t,r),s=ya(e,r);return n.getTime()===s.getTime()}function Ja(t,e){if(t.one!==void 0&&e===1)return t.one;var r=e%10,n=e%100;return r===1&&n!==11?t.singularNominative.replace("{{count}}",String(e)):r>=2&&r<=4&&(n<10||n>20)?t.singularGenitive.replace("{{count}}",String(e)):t.pluralGenitive.replace("{{count}}",String(e))}function Jt(t){return function(e,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?t.future?Ja(t.future,e):" "+Ja(t.regular,e):t.past?Ja(t.past,e):Ja(t.regular,e)+" ":Ja(t.regular,e)}}var qR={lessThanXSeconds:Jt({regular:{one:" ",singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{one:",   ",singularNominative:",   {{count}} ",singularGenitive:",   {{count}} ",pluralGenitive:",   {{count}} "}}),xSeconds:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "},past:{singularNominative:"{{count}}  ",singularGenitive:"{{count}}  ",pluralGenitive:"{{count}}  "},future:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "}}),halfAMinute:function(e,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?" ":" ":""},lessThanXMinutes:Jt({regular:{one:" ",singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{one:",   ",singularNominative:",   {{count}} ",singularGenitive:",   {{count}} ",pluralGenitive:",   {{count}} "}}),xMinutes:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "},past:{singularNominative:"{{count}}  ",singularGenitive:"{{count}}  ",pluralGenitive:"{{count}}  "},future:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "}}),aboutXHours:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xHours:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),xDays:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),aboutXWeeks:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xWeeks:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),aboutXMonths:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xMonths:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),aboutXYears:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xYears:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),overXYears:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:",   {{count}} ",singularGenitive:",   {{count}} ",pluralGenitive:",   {{count}} "}}),almostXYears:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}})},GR=function(e,r,n){return qR[e](r,n)},KR={full:"EEEE, d MMMM y '.'",long:"d MMMM y '.'",medium:"d MMM y '.'",short:"dd.MM.y"},QR={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},YR={any:"{{date}}, {{time}}"},XR={date:Xi({formats:KR,defaultWidth:"full"}),time:Xi({formats:QR,defaultWidth:"full"}),dateTime:Xi({formats:YR,defaultWidth:"any"})},Wg=["","","","","","",""];function JR(t){var e=Wg[t];switch(t){case 0:return"'  "+e+" ' p";case 1:case 2:case 4:return"'  "+e+" ' p";case 3:case 5:case 6:return"'  "+e+" ' p"}}function Ax(t){var e=Wg[t];return t===2?"' "+e+" ' p":"' "+e+" ' p"}function ZR(t){var e=Wg[t];switch(t){case 0:return"'  "+e+" ' p";case 1:case 2:case 4:return"'  "+e+" ' p";case 3:case 5:case 6:return"'  "+e+" ' p"}}var e3={lastWeek:function(e,r,n){var s=e.getUTCDay();return Cx(e,r,n)?Ax(s):JR(s)},yesterday:"' ' p",today:"' ' p",tomorrow:"' ' p",nextWeek:function(e,r,n){var s=e.getUTCDay();return Cx(e,r,n)?Ax(s):ZR(s)},other:"P"},t3=function(e,r,n,s){var i=e3[e];return typeof i=="function"?i(r,n,s):i},r3={narrow:[" ..",".."],abbreviated:[" . .",". ."],wide:["  "," "]},n3={narrow:["1","2","3","4"],abbreviated:["1- .","2- .","3- .","4- ."],wide:["1- ","2- ","3- ","4- "]},s3={narrow:["","","","","","","","","","","",""],abbreviated:[".",".","",".","","","",".",".",".",".","."],wide:["","","","","","","","","","","",""]},i3={narrow:["","","","","","","","","","","",""],abbreviated:[".",".",".",".","",".",".",".",".",".",".","."],wide:["","","","","","","","","","","",""]},a3={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},o3={narrow:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},abbreviated:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},l3={narrow:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},abbreviated:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},c3=function(e,r){var n=Number(e),s=r==null?void 0:r.unit,i;return s==="date"?i="-":s==="week"||s==="minute"||s==="second"?i="-":i="-",n+i},u3={ordinalNumber:c3,era:Qr({values:r3,defaultWidth:"wide"}),quarter:Qr({values:n3,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qr({values:s3,defaultWidth:"wide",formattingValues:i3,defaultFormattingWidth:"wide"}),day:Qr({values:a3,defaultWidth:"wide"}),dayPeriod:Qr({values:o3,defaultWidth:"any",formattingValues:l3,defaultFormattingWidth:"wide"})},d3=/^(\d+)(-?(||||||||||))?/i,h3=/\d+/i,f3={narrow:/^(( )?\.?\s?\.?)/i,abbreviated:/^(( )?\.?\s?\.?)/i,wide:/^(  | | )/i},m3={any:[/^/i,/^/i]},g3={narrow:/^[1234]/i,abbreviated:/^[1234](-?[]??)? .?/i,wide:/^[1234](-?[]??)? /i},p3={any:[/1/i,/2/i,/3/i,/4/i]},y3={narrow:/^[]/i,abbreviated:/^(||?||[]|[]?|[]?||?||?|)\.?/i,wide:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[]|[])/i},x3={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},v3={narrow:/^[]/i,short:/^(|||||||||||)\.?/i,abbreviated:/^(||||||||||||).?/i,wide:/^([]|?|?|[]|?|[]|[])/i},b3={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^[]/i,/^[]/i,/^/i,/^/i,/^/i,/^[]/i,/^[]/i]},w3={narrow:/^([]|\.?|\.?|[]|||\.?|[])/i,abbreviated:/^([]|\.?|\.?|[]|||\.?|[])/i,wide:/^([]|||[]|||?|[])/i},_3={any:{am:/^/i,pm:/^/i,midnight:/^/i,noon:/^/i,morning:/^/i,afternoon:/^[]/i,evening:/^/i,night:/^/i}},k3={ordinalNumber:O1({matchPattern:d3,parsePattern:h3,valueCallback:function(e){return parseInt(e,10)}}),era:Yr({matchPatterns:f3,defaultMatchWidth:"wide",parsePatterns:m3,defaultParseWidth:"any"}),quarter:Yr({matchPatterns:g3,defaultMatchWidth:"wide",parsePatterns:p3,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yr({matchPatterns:y3,defaultMatchWidth:"wide",parsePatterns:x3,defaultParseWidth:"any"}),day:Yr({matchPatterns:v3,defaultMatchWidth:"wide",parsePatterns:b3,defaultParseWidth:"any"}),dayPeriod:Yr({matchPatterns:w3,defaultMatchWidth:"wide",parsePatterns:_3,defaultParseWidth:"any"})},N3={code:"ru",formatDistance:GR,formatLong:XR,formatRelative:t3,localize:u3,match:k3,options:{weekStartsOn:1,firstWeekContainsDate:1}};const oe=(t,e="dd.MM.yyyy")=>{const r=typeof t=="string"?oi(t):t;return L1(r,e,{locale:N3})},bl=(t=new Date)=>{const e=kP(t,{weekStartsOn:1}),r=IP(t,{weekStartsOn:1});return{start:e,end:r}},Hg=(t=new Date)=>{const{start:e,end:r}=bl(t);return TP({start:e,end:r})},F1=t=>{const e=new Date,r=new Date(e);r.setHours(0,0,0,0),r.setDate(r.getDate()-(t-1));const n=new Date(e);return n.setHours(23,59,59,999),{start:r,end:n}},E3=(t,e)=>{const r=typeof t=="string"?oi(t):t,n=typeof e=="string"?oi(e):e;return EP(r,n)},ud=t=>t.reduce((e,r)=>{const[n,s]=r.start.split(":").map(Number),[i,o]=r.end.split(":").map(Number),l=n*60+s;let d=(i*60+o-l)/60;if((d<0||r.endDate)&&(d+=24),r.breaks&&r.breaks.length>0){const h=r.breaks.reduce((g,m)=>{const[b,k]=m.start.split(":").map(Number),[v,C]=m.end.split(":").map(Number),E=b*60+k;let N=(v*60+C-E)/60;return N<0&&(N+=24),g+N},0);d-=h}return e+d},0),ss=t=>{const[e,r]=t.split(":").map(Number);return e*60+r},U1=(t,e)=>{if(!t||!e)return[];const r=oi(t),n=oi(e);if(CR(n,r))return[];const s=[],i=new Date(r);for(;i<=n;)s.push(oe(i,"yyyy-MM-dd")),i.setDate(i.getDate()+1);return s},B1=t=>{const e=Array.from(new Set(t.filter(Boolean)));return e.sort(),e},j3=(t,e)=>{const r=ss(t.start),n=ss(t.end),s=ss(e.start),i=ss(e.end);return r<i&&n>s},Bf=()=>{const t=new Date,e=3*60,r=t.getTimezoneOffset();return new Date(t.getTime()+(e+r)*60*1e3)},Px=(t,e=Bf())=>{const r=e.getHours(),n=new Date(`${L1(e,"yyyy-MM-dd")}T${t}:00`);return r>=21||e>n},S3=t=>{const e=Math.floor(t),r=Math.round((t-e)*60);return e===0&&r===0?"0":e===0?`${r}`:r===0?`${e}`:`${e} ${r}`},Ji=(t,e,r,n)=>{const s=t,i=e||t;if(i<r||s>n)return 0;const o=s>r?s:r,l=i<n?i:n,u=oi(o),h=oi(l).getTime()-u.getTime();return Math.floor(h/(1e3*60*60*24))+1},T3=({selectedUserId:t,slotFilter:e,onEditSlot:r,onEditStatus:n})=>{const{theme:s}=Be(),{user:i}=Nt(),{isAdmin:o}=Yt(),[l,u]=P.useState([]),[d,h]=P.useState([]),[g,m]=P.useState(new Date),[b,k]=P.useState(!0),v=Hg(g),C=t?_e.filter(S=>S.id===t):_e;P.useEffect(()=>{E()},[t,g]),P.useEffect(()=>{const S=()=>{E()};return window.addEventListener("focus",S),()=>window.removeEventListener("focus",S)},[]);const E=async()=>{k(!0);try{const S=new Date(v[0]);S.setHours(0,0,0,0);const A=new Date(v[6]);A.setHours(23,59,59,999);const x=oe(S,"yyyy-MM-dd"),H=oe(A,"yyyy-MM-dd"),[U,B]=await Promise.all([On(),jn()]),q=U.filter(W=>W.date>=x&&W.date<=H),F=B.filter(W=>{const $=W.date,te=W.endDate||W.date;return $<=H&&te>=x}),V=t?q.filter(W=>W.userId===t):q,D=t?F.filter(W=>W.userId===t):F;console.log("Loaded slots:",{weekStart:x,weekEnd:H,allSlotsCount:U.length,weekSlotsCount:q.length,filteredSlotsCount:V.length,selectedUserId:t}),u(V),h(D)}catch(S){console.error("Error loading data:",S)}finally{k(!1)}},y=async S=>{var A;if(!o&&(i==null?void 0:i.id)!==((A=l.find(x=>x.id===S))==null?void 0:A.userId)){alert("     ");return}confirm(" ?")&&(await zg(S),E())},N=async S=>{var A;if(!o&&(i==null?void 0:i.id)!==((A=d.find(x=>x.id===S))==null?void 0:A.userId)){alert("     ");return}confirm(" ?")&&(await j1(S),E())},R=S=>{const A=new Date;A.setHours(0,0,0,0);const x=new Date(S.date);if(x.setHours(0,0,0,0),x>A)return!0;if(x.getTime()===A.getTime()){const U=new Date,B=U.getHours()*60+U.getMinutes();return S.slots.some(q=>{if(q.endDate){const W=new Date(q.endDate);if(W.setHours(0,0,0,0),new Date(A).setHours(23,59,59),W>A)return!0;if(W.getTime()===A.getTime()){const[te,ue]=q.end.split(":").map(Number);return te*60+ue>B}return!1}const[F,V]=q.end.split(":").map(Number);return F*60+V>B})}return S.slots.some(U=>{if(U.endDate){const B=new Date(U.endDate);return B.setHours(0,0,0,0),B>=A}return!1})},L=(S,A)=>{const x=l.find(H=>H.userId===S&&H.date===A)||null;if(x&&e!=="all"){const H=R(x);if(e==="upcoming"&&!H||e==="completed"&&H)return null}return x},M=(S,A)=>d.find(x=>x.userId!==S?!1:x.endDate?x.date<=A&&x.endDate>=A:x.date===A)||null,I=S=>{const x=l.filter(F=>F.userId===S).reduce((F,V)=>F+ud(V.slots),0),H=d.filter(F=>F.userId===S),U=H.filter(F=>F.type==="dayoff").length,B=H.filter(F=>F.type==="sick").length,q=H.filter(F=>F.type==="vacation").length;return{totalHours:x,daysOff:U,sickDays:B,vacationDays:q}},_=S=>{const A=new Date(g);S==="prev"?A.setDate(A.getDate()-7):A.setDate(A.getDate()+7),m(A)};if(b)return a.jsx("div",{className:`rounded-lg p-8 text-center ${s==="dark"?"bg-gray-800":"bg-white"}`,children:a.jsx("p",{className:s==="dark"?"text-gray-400":"text-gray-600",children:"..."})});const w=s==="dark"?"text-white":"text-gray-900",j=s==="dark"?"text-gray-300":"text-gray-600";return a.jsxs("div",{className:`rounded-lg ${s==="dark"?"bg-gray-800":"bg-white"} shadow-md overflow-hidden`,children:[a.jsxs("div",{className:`p-4 border-b ${s==="dark"?"border-gray-700":"border-gray-200"} flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between`,children:[a.jsx("button",{onClick:()=>_("prev"),className:"w-full sm:w-auto px-3 py-2 text-sm sm:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"  "}),a.jsxs("span",{className:`${w} font-semibold text-center text-sm sm:text-base`,children:[oe(v[0],"dd.MM.yyyy")," - ",oe(v[6],"dd.MM.yyyy")]}),a.jsx("button",{onClick:()=>_("next"),className:"w-full sm:w-auto px-3 py-2 text-sm sm:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"  "})]}),a.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-8 px-3 sm:px-4 md:px-6 lg:px-8",children:a.jsx("div",{className:"min-w-full inline-block align-middle",children:a.jsxs("table",{className:"w-full min-w-[640px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:`${s==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx("th",{className:`px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 text-left text-xs sm:text-sm font-semibold ${w} sticky left-0 z-20 ${s==="dark"?"bg-gray-700":"bg-gray-100"}`,children:""}),v.map(S=>a.jsx("th",{className:`px-1.5 sm:px-2 md:px-3 lg:px-4 py-2 sm:py-2.5 md:py-3 text-center text-xs sm:text-sm font-semibold ${w} whitespace-nowrap`,children:a.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[a.jsx("span",{className:"text-[10px] sm:text-xs opacity-70",children:oe(S,"EEE")}),a.jsx("span",{children:oe(S,"dd.MM")})]})},S.toISOString())),a.jsx("th",{className:`px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 text-center text-xs sm:text-sm font-bold ${w} whitespace-nowrap`,children:""})]})}),a.jsx("tbody",{children:C.map((S,A)=>{const x=I(S.id),H=A%2===0;return a.jsxs("tr",{className:`
                    group border-b transition-all duration-300 relative
                    ${s==="dark"?"border-gray-700/30":"border-gray-200/30"}
                    ${H?s==="dark"?"bg-gradient-to-r from-gray-800/40 via-gray-800/20 to-transparent hover:from-gray-800/70 hover:via-gray-800/50 hover:shadow-lg hover:shadow-green-500/10":"bg-gradient-to-r from-gray-50/70 via-gray-50/40 to-transparent hover:from-gray-100/90 hover:via-gray-100/70 hover:shadow-lg hover:shadow-green-500/5":s==="dark"?"bg-gradient-to-r from-gray-800/10 via-gray-800/5 to-transparent hover:from-gray-800/50 hover:via-gray-800/30 hover:shadow-lg hover:shadow-green-500/10":"bg-gradient-to-r from-white via-gray-50/30 to-transparent hover:from-gray-50 hover:via-gray-50/60 hover:shadow-lg hover:shadow-green-500/5"}
                    hover:scale-[1.01] hover:-translate-y-0.5
                  `,children:[a.jsx("td",{className:`px-2 sm:px-3 md:px-4 py-2 sm:py-3 md:py-4 font-semibold text-xs sm:text-sm ${w} sticky left-0 z-10 transition-all duration-300 backdrop-blur-sm min-w-[140px] sm:min-w-[160px] ${H?s==="dark"?"bg-gradient-to-r from-gray-800/40 via-gray-800/20 to-transparent group-hover:from-gray-800/70 group-hover:via-gray-800/50":"bg-gradient-to-r from-gray-50/70 via-gray-50/40 to-transparent group-hover:from-gray-100/90 group-hover:via-gray-100/70":s==="dark"?"bg-gradient-to-r from-gray-800/10 via-gray-800/5 to-transparent group-hover:from-gray-800/50 group-hover:via-gray-800/30":"bg-gradient-to-r from-white via-gray-50/30 to-transparent group-hover:from-gray-50 group-hover:via-gray-50/60"}`,children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"relative flex-shrink-0 group/avatar",children:[S.avatar?a.jsx("img",{src:S.avatar,alt:S.name,className:"w-8 h-8 sm:w-10 sm:h-10 md:w-11 md:h-11 rounded-full object-cover border-2 shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-green-500/30 ring-2 ring-transparent group-hover:ring-green-500/50",style:{borderColor:s==="dark"?"rgba(34, 197, 94, 0.6)":"rgba(34, 197, 94, 0.4)"},onError:U=>{const B=U.target;B.style.display="none";const q=B.nextElementSibling;q&&(q.style.display="flex")}}):null,a.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 md:w-11 md:h-11 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all duration-300 shadow-lg ring-2 ring-transparent group-hover/avatar:scale-110 group-hover/avatar:shadow-xl group-hover/avatar:ring-green-500/50 ${s==="dark"?"bg-gradient-to-br from-green-500 via-green-600 to-blue-500 text-white group-hover/avatar:shadow-green-500/40":"bg-gradient-to-br from-green-400 via-green-500 to-blue-400 text-white group-hover/avatar:shadow-green-400/40"} ${S.avatar?"absolute inset-0 hidden":""}`,children:S.name.charAt(0).toUpperCase()}),a.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3.5 md:h-3.5 bg-green-500 rounded-full border border-white sm:border-2 shadow-lg animate-pulse opacity-0 group-hover/avatar:opacity-100 transition-opacity duration-300"})]}),a.jsx("span",{className:"font-semibold group-hover:text-green-500 transition-colors duration-300 truncate hidden sm:inline",children:S.name}),a.jsx("span",{className:"font-semibold group-hover:text-green-500 transition-colors duration-300 sm:hidden",children:(S.name.split(" ")[0]||S.name).substring(0,8)})]})}),v.map(U=>{const B=oe(U,"yyyy-MM-dd"),q=L(S.id,B),F=M(S.id,B);return a.jsx("td",{className:"px-1 sm:px-2 py-2 sm:py-3 text-center border-l border-r border-transparent hover:border-blue-500/20 transition-colors min-w-[80px] sm:min-w-[100px]",children:q?a.jsxs("div",{className:"space-y-2",children:[(()=>{const V=R(q),D=V?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-gray-500 to-gray-600",$=V?Zr:qm;return q.slots.map((te,ue)=>a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:`${D} text-white rounded-md sm:rounded-lg px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs font-semibold shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl ${V?"hover:shadow-blue-500/50 ring-2 ring-blue-400/30":"hover:shadow-gray-500/50 ring-2 ring-gray-400/30"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-0.5 sm:gap-1 flex-wrap",children:[a.jsx($,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 animate-pulse flex-shrink-0"}),a.jsxs("span",{className:"whitespace-nowrap",children:[te.start," - ",te.end]}),te.endDate&&a.jsxs("span",{className:"text-[9px] sm:text-[10px] opacity-90 whitespace-nowrap",children:["( ",oe(new Date(te.endDate),"dd.MM"),")"]})]})}),te.breaks&&te.breaks.length>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:`text-[10px] ${s==="dark"?"text-gray-400":"text-gray-600"} font-medium`,children:":"}),te.breaks.map((le,fe)=>a.jsx("div",{className:`${s==="dark"?"bg-gray-700/90":"bg-white"} ${s==="dark"?"text-gray-200":"text-gray-900"} border-2 ${s==="dark"?"border-orange-500/50":"border-orange-300"} rounded-md sm:rounded-lg px-1.5 sm:px-2 py-0.5 sm:py-1 text-[9px] sm:text-[10px] font-medium shadow-md transition-all duration-300 hover:scale-105 hover:shadow-lg ${s==="dark"?"hover:border-orange-400/70 hover:shadow-orange-500/20":"hover:border-orange-400 hover:shadow-orange-400/20"}`,children:a.jsxs("span",{className:"flex items-center gap-0.5 sm:gap-1 justify-center flex-wrap",children:[a.jsx("span",{className:"w-0.5 h-0.5 sm:w-1 sm:h-1 rounded-full bg-orange-500 flex-shrink-0"}),a.jsxs("span",{className:"whitespace-nowrap",children:[le.start," - ",le.end]})]})},fe))]})]},ue))})(),q.comment&&a.jsxs("div",{className:"flex items-center justify-center group relative",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-400 cursor-help"}),a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:q.comment})]}),a.jsx("div",{className:"flex gap-1 justify-center",children:o||(S==null?void 0:S.id)===q.userId?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>r(q),className:"p-1 text-blue-500 hover:bg-blue-500 hover:text-white rounded",children:a.jsx(Ir,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>y(q.id),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded",children:a.jsx(er,{className:"w-3 h-3"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:a.jsx(Ir,{className:"w-3 h-3"})}),a.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:a.jsx(er,{className:"w-3 h-3"})})]})})]}):F?a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:`text-white rounded px-2 py-1 text-xs ${F.type==="dayoff"?"bg-yellow-500":F.type==="sick"?"bg-purple-500":"bg-orange-500"}`,children:F.type==="dayoff"?"":F.type==="sick"?"":""}),F.comment&&a.jsxs("div",{className:"flex items-center justify-center group relative",children:[a.jsx(Ur,{className:"w-4 h-4 text-gray-400 cursor-help"}),a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:F.comment})]}),a.jsx("div",{className:"flex gap-1 justify-center",children:o||(S==null?void 0:S.id)===F.userId?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>n(F),className:"p-1 text-blue-500 hover:bg-blue-500 hover:text-white rounded",children:a.jsx(Ir,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>N(F.id),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded",children:a.jsx(er,{className:"w-3 h-3"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:a.jsx(Ir,{className:"w-3 h-3"})}),a.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:a.jsx(er,{className:"w-3 h-3"})})]})})]}):a.jsx("span",{className:`text-sm ${j}`,children:""})},B)}),a.jsx("td",{className:`px-4 py-3 text-sm ${w}`,children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{children:[": ",x.totalHours.toFixed(1)]}),a.jsxs("div",{children:[": ",x.daysOff]}),a.jsxs("div",{children:[": ",x.sickDays]}),a.jsxs("div",{children:[": ",x.vacationDays]})]})})]},S.id)})})]})})})]})},I3=({selectedUserId:t,slotFilter:e,onEditSlot:r,onEditStatus:n})=>{const{theme:s}=Be(),{user:i}=Nt(),{isAdmin:o}=Yt(),[l,u]=P.useState([]),[d,h]=P.useState([]),[g,m]=P.useState(new Date),[b,k]=P.useState(!0),v=Hg(g);P.useEffect(()=>{C()},[t,g]),P.useEffect(()=>{const w=()=>{C()};return window.addEventListener("focus",w),()=>window.removeEventListener("focus",w)},[]);const C=async()=>{k(!0);try{const w=new Date(v[0]);w.setHours(0,0,0,0);const j=new Date(v[6]);j.setHours(23,59,59,999);const S=oe(w,"yyyy-MM-dd"),A=oe(j,"yyyy-MM-dd"),[x,H]=await Promise.all([On(),jn()]),U=x.filter(V=>V.date>=S&&V.date<=A),B=H.filter(V=>{const D=V.date,W=V.endDate||V.date;return D<=A&&W>=S}),q=t?U.filter(V=>V.userId===t):U,F=t?B.filter(V=>V.userId===t):B;console.log("Loaded slots (week view):",{weekStart:S,weekEnd:A,allSlotsCount:x.length,weekSlotsCount:U.length,filteredSlotsCount:q.length,selectedUserId:t}),u(q),h(F)}catch(w){console.error("Error loading data:",w)}finally{k(!1)}},E=async w=>{var j;if(!o&&(i==null?void 0:i.id)!==((j=l.find(S=>S.id===w))==null?void 0:j.userId)){alert("     ");return}confirm(" ?")&&(await zg(w),C())},y=async w=>{var j;if(!o&&(i==null?void 0:i.id)!==((j=d.find(S=>S.id===w))==null?void 0:j.userId)){alert("     ");return}confirm(" ?")&&(await j1(w),C())},N=w=>{const j=new Date;j.setHours(0,0,0,0);const S=new Date(w.date);if(S.setHours(0,0,0,0),S>j)return!0;if(S.getTime()===j.getTime()){const x=new Date,H=x.getHours()*60+x.getMinutes();return w.slots.some(U=>{if(U.endDate){const V=new Date(U.endDate);if(V.setHours(0,0,0,0),new Date(j).setHours(23,59,59),V>j)return!0;if(V.getTime()===j.getTime()){const[W,$]=U.end.split(":").map(Number);return W*60+$>H}return!1}const[B,q]=U.end.split(":").map(Number);return B*60+q>H})}return w.slots.some(x=>{if(x.endDate){const H=new Date(x.endDate);return H.setHours(0,0,0,0),H>=j}return!1})},R=w=>{let j=l.filter(S=>S.date===w);return e!=="all"&&(j=j.filter(S=>{const A=N(S);return e==="upcoming"?A:e==="completed"?!A:!0})),j},L=w=>d.filter(j=>j.endDate?j.date<=w&&j.endDate>=w:j.date===w),M=w=>{const j=new Date(g);w==="prev"?j.setDate(j.getDate()-7):j.setDate(j.getDate()+7),m(j)};if(b)return a.jsx("div",{className:`rounded-lg p-8 text-center ${s==="dark"?"bg-gray-800":"bg-white"}`,children:a.jsx("p",{className:s==="dark"?"text-gray-400":"text-gray-600",children:"..."})});const I=s==="dark"?"text-white":"text-gray-900",_=s==="dark"?"text-gray-400":"text-gray-600";return a.jsxs("div",{className:`rounded-lg ${s==="dark"?"bg-gray-800":"bg-white"} shadow-md overflow-hidden`,children:[a.jsxs("div",{className:`p-3 sm:p-4 border-b ${s==="dark"?"border-gray-700":"border-gray-200"} flex flex-col gap-2 sm:gap-3 sm:flex-row sm:items-center sm:justify-between`,children:[a.jsx("button",{onClick:()=>M("prev"),className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm md:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors touch-manipulation active:scale-95",children:"  "}),a.jsxs("span",{className:`${I} font-semibold text-center text-xs sm:text-sm md:text-base whitespace-nowrap`,children:[oe(v[0],"dd.MM.yyyy")," - ",oe(v[6],"dd.MM.yyyy")]}),a.jsx("button",{onClick:()=>M("next"),className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm md:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors touch-manipulation active:scale-95",children:"  "})]}),a.jsx("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:v.map(w=>{const j=oe(w,"yyyy-MM-dd"),S=R(j),A=L(j);return a.jsxs("div",{className:`rounded-lg p-4 ${s==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[a.jsx("h3",{className:`text-lg font-semibold mb-3 ${I}`,children:oe(w,"dd.MM.yyyy")}),a.jsxs("div",{className:"space-y-2",children:[A.map(x=>{const U=_e.find(q=>q.id===x.userId)||_e.find(q=>({artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"})[x.userId]===q.id),B=(U==null?void 0:U.name)||x.userId;return a.jsxs("div",{className:`group relative flex items-center justify-between p-4 rounded-xl shadow-xl border-2 transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl ${x.type==="dayoff"?"bg-gradient-to-r from-yellow-500 to-yellow-600 border-yellow-400/40 ring-2 ring-yellow-500/20 hover:ring-4 hover:ring-yellow-400/30":x.type==="sick"?"bg-gradient-to-r from-purple-500 to-purple-600 border-purple-400/40 ring-2 ring-purple-500/20 hover:ring-4 hover:ring-purple-400/30":"bg-gradient-to-r from-orange-500 to-orange-600 border-orange-400/40 ring-2 ring-orange-500/20 hover:ring-4 hover:ring-orange-400/30"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white font-medium",children:B}),a.jsx("span",{className:"text-white text-sm",children:x.type==="dayoff"?"":x.type==="sick"?"":""}),x.comment&&a.jsxs("div",{className:"relative group",children:[a.jsx(Ur,{className:"w-4 h-4 text-white cursor-help"}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap",children:x.comment})]})]}),a.jsx("div",{className:"flex gap-2",children:o||(i==null?void 0:i.id)===x.userId?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>n(x),className:"p-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded transition-colors",children:a.jsx(Ir,{className:"w-4 h-4 text-white"})}),a.jsx("button",{onClick:()=>y(x.id),className:"p-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded transition-colors",children:a.jsx(er,{className:"w-4 h-4 text-white"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{disabled:!0,className:"p-1 bg-white bg-opacity-10 cursor-not-allowed rounded",title:"     ",children:a.jsx(Ir,{className:"w-4 h-4 text-white opacity-50"})}),a.jsx("button",{disabled:!0,className:"p-1 bg-white bg-opacity-10 cursor-not-allowed rounded",title:"     ",children:a.jsx(er,{className:"w-4 h-4 text-white opacity-50"})})]})})]},x.id)}),S.map(x=>{const U=_e.find(D=>D.id===x.userId)||_e.find(D=>({artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"})[x.userId]===D.id),B=(U==null?void 0:U.name)||x.userId,q=N(x),F=q?"bg-gradient-to-r from-blue-500 to-blue-600 border-blue-400/30":"bg-gradient-to-r from-gray-500 to-gray-600 border-gray-400/30",V=q?Zr:qm;return a.jsxs("div",{className:`group relative space-y-2 sm:space-y-3 p-3 sm:p-4 ${F} rounded-lg sm:rounded-xl shadow-xl border-2 transition-all duration-300 hover:shadow-2xl active:scale-[0.98] sm:hover:scale-[1.03] mb-2 sm:mb-3 ${q?"border-blue-400/40 hover:border-blue-300/60 ring-2 ring-blue-500/20 hover:ring-4 hover:ring-blue-400/30":"border-gray-400/30 hover:border-gray-300/50 ring-2 ring-gray-500/10 hover:ring-4 hover:ring-gray-400/20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-white/20 pb-2 sm:pb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[a.jsxs("div",{className:"relative flex-shrink-0 group/avatar",children:[U!=null&&U.avatar?a.jsx("img",{src:U.avatar,alt:B,className:`w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 lg:w-11 lg:h-11 rounded-full object-cover border-2 shadow-xl transition-all duration-300 group-hover/avatar:scale-110 group-hover/avatar:shadow-2xl ${q?"border-white/50 ring-2 ring-white/40 ring-offset-2 ring-offset-blue-500/20 group-hover/avatar:ring-4 group-hover/avatar:ring-white/60":"border-white/40 ring-2 ring-white/30 ring-offset-2 ring-offset-gray-500/20 group-hover/avatar:ring-4 group-hover/avatar:ring-white/50"}`,onError:D=>{const W=D.target;W.style.display="none";const $=W.nextElementSibling;$&&($.style.display="flex")}}):null,a.jsx("div",{className:`w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 lg:w-11 lg:h-11 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all duration-300 shadow-xl group-hover/avatar:scale-110 group-hover/avatar:shadow-2xl ${q?"bg-white/25 backdrop-blur-md border-2 border-white/40 ring-2 ring-white/30 group-hover/avatar:ring-4 group-hover/avatar:ring-white/60":"bg-white/15 backdrop-blur-md border-2 border-white/30 ring-2 ring-white/20 group-hover/avatar:ring-4 group-hover/avatar:ring-white/50"} ${U!=null&&U.avatar?"absolute inset-0 hidden":""}`,children:B.charAt(0).toUpperCase()}),a.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3.5 md:h-3.5 rounded-full border border-white sm:border-2 shadow-lg animate-pulse opacity-0 group-hover/avatar:opacity-100 transition-opacity duration-300 ${q?"bg-blue-400":"bg-gray-400"}`})]}),a.jsx("span",{className:"text-white font-bold text-sm sm:text-base group-hover:scale-105 transition-transform duration-300 truncate",children:B})]}),a.jsx("div",{className:"flex gap-2",children:o||(i==null?void 0:i.id)===x.userId?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>r(x),className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:a.jsx(Ir,{className:"w-4 h-4 text-white"})}),a.jsx("button",{onClick:()=>E(x.id),className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:a.jsx(er,{className:"w-4 h-4 text-white"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{disabled:!0,className:"p-1.5 bg-white/10 cursor-not-allowed rounded-lg",title:"     ",children:a.jsx(Ir,{className:"w-4 h-4 text-white/50"})}),a.jsx("button",{disabled:!0,className:"p-1.5 bg-white/10 cursor-not-allowed rounded-lg",title:"     ",children:a.jsx(er,{className:"w-4 h-4 text-white/50"})})]})})]}),a.jsxs("div",{className:"space-y-2",children:[x.slots.map((D,W)=>a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:`bg-white/25 backdrop-blur-md rounded-md sm:rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 border-2 transition-all duration-300 hover:scale-105 hover:shadow-xl ${q?"border-white/40 ring-2 ring-white/20 hover:border-white/60 hover:ring-4 hover:ring-white/40":"border-white/30 ring-2 ring-white/10 hover:border-white/50 hover:ring-4 hover:ring-white/30"}`,children:a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[a.jsx(V,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 text-white flex-shrink-0 ${q?"animate-pulse":""}`}),a.jsxs("span",{className:"text-white font-bold text-xs sm:text-sm whitespace-nowrap",children:[D.start," - ",D.end]}),D.endDate&&a.jsxs("span",{className:"text-white/80 font-medium text-[10px] sm:text-xs whitespace-nowrap",children:["( ",oe(new Date(D.endDate),"dd.MM"),")"]})]})}),D.breaks&&D.breaks.length>0&&a.jsxs("div",{className:"space-y-1 ml-6",children:[a.jsx("div",{className:`text-[10px] ${s==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:":"}),D.breaks.map(($,te)=>a.jsx("div",{className:`${s==="dark"?"bg-gray-700/95":"bg-white"} ${s==="dark"?"text-gray-200":"text-gray-900"} border-2 ${s==="dark"?"border-orange-500/60":"border-orange-300"} rounded-md sm:rounded-lg px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs font-semibold shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl ${s==="dark"?"hover:border-orange-400/80 hover:shadow-orange-500/30 ring-2 ring-orange-500/20 hover:ring-4 hover:ring-orange-400/40":"hover:border-orange-400 hover:shadow-orange-400/30 ring-2 ring-orange-300/20 hover:ring-4 hover:ring-orange-300/40"}`,children:a.jsxs("span",{className:"flex items-center gap-1 sm:gap-1.5 justify-center flex-wrap",children:[a.jsx("span",{className:`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full ${s==="dark"?"bg-orange-400":"bg-orange-500"} animate-pulse flex-shrink-0`}),a.jsxs("span",{className:"whitespace-nowrap",children:[$.start," - ",$.end]})]})},te))]})]},W)),x.comment&&a.jsxs("div",{className:"relative group flex items-center gap-2 pt-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-white cursor-help"}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap",children:x.comment})]})]})]},x.id)}),S.length===0&&A.length===0&&a.jsx("p",{className:`text-sm ${_}`,children:" "})]})]},j)})})]})},C3=({slot:t,onClose:e,onSave:r})=>{var Ra;const{user:n}=Nt(),{theme:s}=Be(),{isAdmin:i}=Yt(),o=s==="dark"?"text-white":"text-gray-900",l=(t==null?void 0:t.date)||oe(new Date,"yyyy-MM-dd"),[u,d]=P.useState(l),[h,g]=P.useState(t!=null&&t.userId?[t.userId]:n!=null&&n.id?[n.id]:[]),[m,b]=P.useState(((Ra=t==null?void 0:t.slots)==null?void 0:Ra.map(Q=>{const ne=Q;return ne.break&&!ne.breaks?{...Q,breaks:[ne.break]}:Q}))||[]),[k,v]=P.useState(""),[C,E]=P.useState(""),[y,N]=P.useState(!1),[R,L]=P.useState(""),[M,I]=P.useState(""),[_,w]=P.useState(""),[j,S]=P.useState(null),[A,x]=P.useState(null),[H,U]=P.useState(null),[B,q]=P.useState((t==null?void 0:t.comment)||""),[F,V]=P.useState(!1),[D,W]=P.useState([]),[$,te]=P.useState(!1),[ue,le]=P.useState([]),[fe,J]=P.useState("single"),[X,G]=P.useState(l),[K,Ne]=P.useState(l),[ke,se]=P.useState(l),[pe,Pe]=P.useState([]),[gt,Ee]=P.useState(""),[ve,Xt]=P.useState(!1),at=["","","","","","",""],pt=i&&!t;P.useEffect(()=>{console.log("SlotForm mounted, user:",n==null?void 0:n.name,"slots count:",m.length)},[]),P.useEffect(()=>{if(F&&u){const Q=new Date(u),ne=Q.getDay()===0?6:Q.getDay()-1;W([ne])}},[F,u]),P.useEffect(()=>{fe!=="single"&&(V(!1),te(!1),W([]),le([]))},[fe]),P.useEffect(()=>{if(y&&u&&k&&C)if(k>=C){const Q=new Date(u);Q.setDate(Q.getDate()+1),L(oe(Q,"yyyy-MM-dd"))}else L("");else L("")},[y,u,k,C]);const Et=()=>{if(!k||!C){Ee("    ");return}const Q=y&&k>=C;if(!Q&&k>=C){Ee('      .  "  "  ,    .');return}let ne;if(Q&&u)if(R)ne=R;else{const ge=new Date(u);ge.setDate(ge.getDate()+1),ne=oe(ge,"yyyy-MM-dd")}const me={start:k,end:C,...ne&&{endDate:ne},breaks:[]};b([...m,me]),v(""),E(""),N(!1),L(""),I(""),w(""),S(null),Ee("")},je=Q=>{if(!M||!_){Ee("     ");return}const ne=m[Q];if(!ne)return;if(M>=_){Ee("       ");return}const me=ss(M),ge=ss(_),Te=ss(ne.start),ot=ss(ne.end),Mt=ne.endDate||ot<=Te;let St=!1;if(Mt){const vt=me>=Te&&me<1440&&ge>me&&ge<=1440&&ge>me,As=me>=0&&me<=ot&&ge>me&&ge<=ot,md=me>=Te&&me<1440&&ge>0&&ge<=ot&&me>ge;St=vt||As||md}else St=me>=Te&&ge<=ot&&ge>me;if(!St){Ee(`       (${ne.start} - ${ne.end})`);return}const xt=ne.breaks||[];for(let Ot=0;Ot<xt.length;Ot++){if(A===Q&&H===Ot)continue;const vt=xt[Ot];if(M>=vt.start&&M<vt.end||_>vt.start&&_<=vt.end||M<=vt.start&&_>=vt.end){Ee("   ");return}}let Nr;A===Q&&H!==null?(Nr=[...xt],Nr[H]={start:M,end:_},Nr.sort((Ot,vt)=>Ot.start.localeCompare(vt.start))):Nr=[...xt,{start:M,end:_}].sort((Ot,vt)=>Ot.start.localeCompare(vt.start));const et=[...m];et[Q]={...ne,breaks:Nr},b(et),I(""),w(""),S(null),x(null),U(null),Ee("")},Re=(Q,ne)=>{const me=m[Q];if(!me||!me.breaks||!me.breaks[ne])return;const ge=me.breaks[ne];x(Q),U(ne),S(Q),I(ge.start),w(ge.end),Ee("")},kr=()=>{I(""),w(""),S(null),x(null),U(null),Ee("")},yt=(Q,ne)=>{const me=m[Q];if(!me||!me.breaks)return;const ge=me.breaks.filter((ot,Mt)=>Mt!==ne),Te=[...m];Te[Q]={...me,breaks:ge.length>0?ge:void 0},b(Te)},jt=Q=>{b(m.filter((ne,me)=>me!==Q))},yi=Q=>{D.includes(Q)?W(D.filter(ne=>ne!==Q)):W([...D,Q])},wl=Q=>{ue.includes(Q)?le(ue.filter(ne=>ne!==Q)):le([...ue,Q])},_l=Q=>{g(ne=>ne.includes(Q)?ne.filter(me=>me!==Q):[...ne,Q])},dd=()=>{h.length===_e.length?g([]):g(_e.map(Q=>Q.id))},Cs=()=>{if(!ke)return;const Q=B1([...pe,ke]);Pe(Q),se("")},kl=Q=>{Pe(ne=>ne.filter(me=>me!==Q))},Nl=()=>{if(pt){if(fe==="range")return U1(X,K);if(fe==="multiple")return pe}return[u]},Aa=()=>t?[t.userId]:pt?h:i&&!n?h.length>0?h:[]:n!=null&&n.id?[n.id]:[],hd=Q=>{var ne;return((ne=_e.find(me=>me.id===Q))==null?void 0:ne.name)||Q},fd=async(Q,ne)=>{const ge=(await On(void 0,Q)).filter(Te=>Te.id!==(t==null?void 0:t.id));for(const Te of ne)for(const ot of ge)if(j3(Te,ot.slots[0])&&ot.participants.length>=3)return` ${Te.start}-${Te.end}      (3)`;return null},Pa=async()=>{if(console.log("handleSave called"),!i&&!n){console.log("No user found"),Ee("  ");return}if(m.length===0){Ee("     ");return}if(t&&!i&&n&&t.userId!==n.id){Ee("     "),Xt(!1);return}const Q=Aa();if(Q.length===0){Ee("    ");return}const ne=Nl();if(ne.length===0){Ee(" ");return}const me=async(ge,Te,ot=[ge])=>{const Mt=await fd(Te,m);if(Mt)throw new Error(`[${hd(ge)}  ${oe(new Date(Te),"dd.MM.yyyy")}] ${Mt}`);const St={userId:ge,date:Te,slots:m,...B&&{comment:B},participants:ot};t?await iP(t.id,St):await sP(St)};console.log("Starting save process..."),Ee(""),Xt(!0);try{if(t){await me(t.userId,u,t.participants||[t.userId]),r();return}if(F&&D.length>0){const ge=new Date(u),Te=ge.getMonth(),ot=ge.getFullYear(),Mt=new Date(ot,Te+1,0).getDate();for(let St=1;St<=Mt;St++){const xt=new Date(ot,Te,St),Nr=xt.getDay()===0?6:xt.getDay()-1;if(D.includes(Nr)){const et=oe(xt,"yyyy-MM-dd");for(const Ot of Q)await me(Ot,et)}}}else if($&&ue.length>0){const ge=new Date(u),Te=ge.getMonth(),ot=ge.getFullYear(),Mt=new Date(ot,Te+1,0).getDate();for(let St=1;St<=Mt;St++){const xt=new Date(ot,Te,St),Nr=xt.getDay()===0?6:xt.getDay()-1;if(ue.includes(Nr)){const et=oe(xt,"yyyy-MM-dd");for(const Ot of Q)await me(Ot,et)}}}else if(pt&&fe!=="single")for(const ge of ne)for(const Te of Q)await me(Te,ge);else for(const ge of Q)await me(ge,u);r()}catch(ge){console.error("Error saving slot:",ge);const Te=ge.message||ge.code||"  ";Ee(Te)}finally{Xt(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto touch-manipulation",children:a.jsx("div",{className:`w-full max-w-2xl rounded-lg sm:rounded-xl shadow-xl ${s==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto my-4 sm:my-8`,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[a.jsx("h3",{className:`text-lg sm:text-xl font-bold ${o} pr-2`,children:t?" ":" "}),a.jsx("button",{onClick:e,className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${s==="dark"?"hover:bg-gray-700 active:bg-gray-600":"hover:bg-gray-100 active:bg-gray-200"} transition-colors touch-manipulation`,"aria-label":"",children:a.jsx(br,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[pt&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:_e.map(Q=>a.jsxs("label",{className:`px-3 py-1.5 rounded-full border cursor-pointer text-sm flex items-center gap-2 ${h.includes(Q.id)?"bg-green-500 border-green-500 text-white":s==="dark"?"bg-gray-700 border-gray-600 text-gray-200":"bg-gray-100 border-gray-300 text-gray-700"}`,children:[a.jsx("input",{type:"checkbox",checked:h.includes(Q.id),onChange:()=>_l(Q.id),className:"hidden"}),Q.name]},Q.id))}),a.jsx("button",{type:"button",onClick:dd,className:"text-sm text-green-600 hover:text-green-700",children:h.length===_e.length?" ":" "})]})]}),pt&&a.jsxs("div",{children:[a.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "}),a.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"single",label:" "},{value:"range",label:" "},{value:"multiple",label:" "}].map(Q=>a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"radio",value:Q.value,checked:fe===Q.value,onChange:ne=>J(ne.target.value)}),a.jsx("span",{className:s==="dark"?"text-gray-200":"text-gray-700",children:Q.label})]},Q.value))})]}),(!pt||fe==="single")&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("input",{type:"date",value:u,onChange:Q=>d(Q.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),pt&&fe==="range"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsx("input",{type:"date",value:X,onChange:Q=>G(Q.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsx("input",{type:"date",value:K,min:X,onChange:Q=>Ne(Q.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]})]}),pt&&fe==="multiple"&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"date",value:ke,onChange:Q=>se(Q.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`}),a.jsx("button",{type:"button",onClick:Cs,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:""})]}),pe.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map(Q=>a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(Q,"dd.MM.yyyy"),a.jsx("button",{type:"button",onClick:()=>kl(Q),className:"text-red-500 hover:text-red-600",children:"x"})]},Q))}):a.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsxs("div",{className:"space-y-2 mb-2",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:a.jsxs("div",{className:"flex gap-2 flex-1",children:[a.jsx("input",{type:"time",value:k,onChange:Q=>v(Q.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""}),a.jsx("span",{className:"mx-1 sm:mx-2 text-gray-500 text-sm sm:text-base flex items-center",children:""}),a.jsx("input",{type:"time",value:C,onChange:Q=>E(Q.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"crossMidnight",checked:y,onChange:Q=>{N(Q.target.checked),Q.target.checked||L("")},className:`w-4 h-4 rounded border-2 ${s==="dark"?"border-gray-600 bg-gray-700 checked:bg-green-500 checked:border-green-500":"border-gray-300 bg-white checked:bg-green-500 checked:border-green-500"} focus:ring-2 focus:ring-green-500 cursor-pointer touch-manipulation`}),a.jsx("label",{htmlFor:"crossMidnight",className:`text-xs sm:text-sm font-medium cursor-pointer ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"   (  )"})]}),y&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-1 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"  (:    )"}),a.jsx("input",{type:"date",value:R,onChange:Q=>L(Q.target.value),min:u,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`}),R&&a.jsxs("p",{className:`mt-1 text-xs ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:[": ",u," ",k,"  ",R," ",C]})]}),a.jsxs("button",{onClick:Et,className:"w-full px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(oa,{className:"w-4 h-4"})," "]})]}),a.jsx("div",{className:"space-y-3",children:m.map((Q,ne)=>a.jsxs("div",{className:`flex flex-col gap-2 p-3 rounded-lg ${s==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("span",{className:o,children:[Q.start," - ",Q.end]}),Q.endDate&&a.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${s==="dark"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700 border border-blue-300"}`,children:[" ",oe(new Date(Q.endDate),"dd.MM.yyyy")]})]}),a.jsx("button",{onClick:()=>jt(ne),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors flex-shrink-0",title:" ",children:a.jsx(er,{className:"w-4 h-4"})})]}),Q.breaks&&Q.breaks.length>0&&a.jsxs("div",{className:"ml-4 space-y-1",children:[a.jsx("span",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:":"}),Q.breaks.map((me,ge)=>A===ne&&H===ge?null:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("span",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:[me.start," - ",me.end]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>Re(ne,ge),className:"p-1 text-blue-400 hover:bg-blue-400 hover:text-white rounded transition-colors",title:" ",children:a.jsx(Ir,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>yt(ne,ge),className:"p-1 text-red-400 hover:bg-red-400 hover:text-white rounded transition-colors",title:" ",children:a.jsx(br,{className:"w-3 h-3"})})]})]},ge))]}),a.jsx("div",{className:"ml-4 space-y-2 border-t pt-2 border-gray-500 border-opacity-30",children:j===ne?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"time",value:M,onChange:me=>I(me.target.value),className:`flex-1 px-3 py-1.5 text-sm rounded-lg border ${s==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""}),a.jsx("input",{type:"time",value:_,onChange:me=>w(me.target.value),className:`flex-1 px-3 py-1.5 text-sm rounded-lg border ${s==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>je(ne),className:"flex-1 px-3 py-1.5 text-sm bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:A===ne&&H!==null?"":" "}),a.jsx("button",{onClick:kr,className:"px-3 py-1.5 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors",children:""})]})]}):a.jsxs("button",{onClick:()=>{S(ne),I(""),w(""),x(null),U(null),Ee("")},className:"w-full px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center gap-1",children:[a.jsx(oa,{className:"w-3 h-3"})," "]})})]},ne))}),m.length>0&&a.jsxs("p",{className:`text-sm mt-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[" : ",ud(m).toFixed(1)]})]}),(!pt||fe==="single")&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:F,onChange:Q=>{if(Q.target.checked&&$){Ee("    ");return}V(Q.target.checked),Ee("")},className:"w-4 h-4"}),a.jsx("span",{className:`${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"     "})]}),F&&a.jsxs("div",{className:"ml-6",children:[a.jsx("p",{className:`text-sm mb-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"  :"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:at.map((Q,ne)=>a.jsx("button",{onClick:()=>yi(ne),className:`px-3 py-1 rounded-lg transition-colors ${D.includes(ne)?"bg-green-500 text-white":s==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:Q},ne))})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:$,onChange:Q=>{if(Q.target.checked&&F){Ee("    ");return}te(Q.target.checked),Ee("")},className:"w-4 h-4"}),a.jsx("span",{className:`${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"      "})]}),$&&a.jsxs("div",{className:"ml-6",children:[a.jsx("p",{className:`text-sm mb-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"  :"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:at.map((Q,ne)=>a.jsx("button",{onClick:()=>wl(ne),className:`px-3 py-1 rounded-lg transition-colors ${ue.includes(ne)?"bg-green-500 text-white":s==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:Q},ne))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("textarea",{value:B,onChange:Q=>q(Q.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"  ()"})]}),gt&&a.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:gt}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[a.jsx("button",{onClick:Q=>{console.log("Save button clicked!",{loading:ve,slotsCount:m.length,disabled:ve||m.length===0}),Q.preventDefault(),Pa()},disabled:ve||m.length===0,className:"flex-1 px-4 py-2.5 sm:py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100",children:ve?"...":""}),a.jsx("button",{onClick:e,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${s==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:""})]})]})]})})})},A3=({type:t,status:e,onClose:r,onSave:n})=>{const{user:s}=Nt(),{theme:i}=Be(),{isAdmin:o}=Yt(),l=i==="dark"?"text-white":"text-gray-900",u=(e==null?void 0:e.date)||oe(new Date,"yyyy-MM-dd"),[d,h]=P.useState(e!=null&&e.userId?[e.userId]:s!=null&&s.id?[s.id]:[]),[g,m]=P.useState(u),[b,k]=P.useState((e==null?void 0:e.endDate)||u),[v,C]=P.useState(!!(e!=null&&e.endDate)),[E,y]=P.useState((e==null?void 0:e.comment)||""),[N,R]=P.useState(""),[L,M]=P.useState(!1),[I,_]=P.useState("single"),[w,j]=P.useState(u),[S,A]=P.useState(u),[x,H]=P.useState(u),[U,B]=P.useState([]),q=o&&!e;P.useEffect(()=>{v||k(g)},[v,g]),P.useEffect(()=>{q&&I!=="single"&&C(!1)},[q,I]);const F=G=>{h(K=>K.includes(G)?K.filter(Ne=>Ne!==G):[...K,G])},V=()=>{d.length===_e.length?h([]):h(_e.map(G=>G.id))},D=()=>{if(!x)return;const G=B1([...U,x]);B(G),H("")},W=G=>{B(K=>K.filter(Ne=>Ne!==G))},$=()=>e?[e.userId]:q?d:o&&!s?d.length>0?d:[]:s!=null&&s.id?[s.id]:[],te=G=>{var K;return((K=_e.find(Ne=>Ne.id===G))==null?void 0:K.name)||G},ue=()=>{if(q){if(I==="range")return t==="dayoff"?U1(w,S).map(K=>({date:K})):w&&S?[{date:w,endDate:S}]:[];if(I==="multiple")return t==="dayoff"?U.map(K=>({date:K})):U.map(K=>({date:K,endDate:K}))}const G={date:g};return t!=="dayoff"&&(v||e!=null&&e.endDate)&&(G.endDate=b),[G]},le=async(G,K,Ne)=>{if(!o&&!s)return"  ";const ke=new Date,se=new Date(K),pe=new Date(Ne||K);if(t==="dayoff"&&E3(se,ke))return"    .     .";if(t==="sick"){const Pe=new Date;Pe.setHours(0,0,0,0);const gt=new Date(Pe);gt.setDate(gt.getDate()+2);const Ee=new Date(K);if(Ee.setHours(0,0,0,0),Ee<Pe||Ee>gt)return"        + 2 .   .";const ve=Math.ceil((pe.getTime()-se.getTime())/(1e3*60*60*24))+1;if(ve<1)return"     1 ";if(ve>14)return"     14    ";const Xt=new Date(se.getFullYear(),se.getMonth(),1),at=new Date(se.getFullYear(),se.getMonth()+1,0);if((await jn(G)).filter(je=>je.type==="sick"&&je.date>=oe(Xt,"yyyy-MM-dd")&&je.date<=oe(at,"yyyy-MM-dd")).length+ve>14)return"  14   "}if(t==="vacation"){if(Math.ceil((pe.getTime()-se.getTime())/864e5)+1>14)return"     14   ";const gt=new Date(se.getFullYear(),0,1),Ee=new Date(se.getFullYear(),11,31);if((await jn(G)).filter(at=>at.type==="vacation"&&at.date>=oe(gt,"yyyy-MM-dd")&&at.date<=oe(Ee,"yyyy-MM-dd")).length>=6)return"  6   "}if(t==="dayoff"){const Pe=new Date(se);Pe.setDate(Pe.getDate()-Pe.getDay()+1);const gt=new Date(Pe);gt.setDate(Pe.getDate()+6);let ve=(await jn(G)).filter(Et=>Et.type==="dayoff"&&Et.date>=oe(Pe,"yyyy-MM-dd")&&Et.date<=oe(gt,"yyyy-MM-dd"));if(e&&(ve=ve.filter(Et=>Et.id!==e.id)),ve.length>=2)return"     2 ";const at=(await jn()).filter(Et=>Et.type==="dayoff"&&Et.date===K),pt=new Set(at.map(Et=>Et.userId));if(e&&e.type==="dayoff"&&e.date===K&&pt.delete(e.userId),pt.size>=3)return"        (3 ).   ."}return null},fe=async()=>{if(console.log("handleSave called (DayStatusForm)"),!o&&!s){console.log("No user found"),R("  ");return}if(e&&!o&&s&&e.userId!==s.id){R("     "),M(!1);return}const G=$();if(G.length===0){R("    ");return}const K=ue();if(K.length===0){R(" ");return}const Ne=async(ke,se)=>{const pe=await le(ke,se.date,se.endDate);if(pe)throw new Error(`[${te(ke)}  ${oe(se.date,"dd.MM.yyyy")}] ${pe}`);const Pe={userId:ke,date:se.date,type:t,...se.endDate&&{endDate:se.endDate},...E&&{comment:E}};e?await oP(e.id,Pe):await aP(Pe)};console.log("Starting save process..."),R(""),M(!0);try{if(e){const ke={date:g};t!=="dayoff"&&(v||e.endDate)&&(ke.endDate=b),await Ne(e.userId,ke),n();return}for(const ke of G)for(const se of K)await Ne(ke,se);n()}catch(ke){console.error("Error saving day status:",ke);const se=ke.message||ke.code||"  ";R(se)}finally{M(!1)}},J={dayoff:"",sick:"",vacation:""},X={dayoff:"bg-yellow-500",sick:"bg-purple-500",vacation:"bg-orange-500"};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto touch-manipulation",children:a.jsx("div",{className:`w-full max-w-md rounded-lg sm:rounded-xl shadow-xl ${i==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto my-4 sm:my-8`,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[a.jsxs("h3",{className:`text-lg sm:text-xl font-bold ${l} pr-2`,children:[e?"":""," ",J[t]]}),a.jsx("button",{onClick:r,className:`p-2 rounded-lg ${i==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[q&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:_e.map(G=>a.jsxs("label",{className:`px-3 py-1.5 rounded-full border cursor-pointer text-sm flex items-center gap-2 ${d.includes(G.id)?"bg-green-500 border-green-500 text-white":i==="dark"?"bg-gray-700 border-gray-600 text-gray-200":"bg-gray-100 border-gray-300 text-gray-700"}`,children:[a.jsx("input",{type:"checkbox",checked:d.includes(G.id),onChange:()=>F(G.id),className:"hidden"}),G.name]},G.id))}),a.jsx("button",{type:"button",onClick:V,className:"text-sm text-green-600 hover:text-green-700",children:d.length===_e.length?" ":" "})]})]}),q&&a.jsxs("div",{children:[a.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "}),a.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"single",label:" "},{value:"range",label:t==="dayoff"?" ( )":" "},{value:"multiple",label:" "}].map(G=>a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"radio",value:G.value,checked:I===G.value,onChange:K=>_(K.target.value)}),a.jsx("span",{className:i==="dark"?"text-gray-200":"text-gray-700",children:G.label})]},G.value))})]}),(!q||I==="single")&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsx("input",{type:"date",value:g,onChange:G=>m(G.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),q&&I==="range"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("input",{type:"date",value:w,onChange:G=>j(G.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("input",{type:"date",value:S,min:w,onChange:G=>A(G.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]})]}),q&&I==="multiple"&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"date",value:x,onChange:G=>H(G.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`}),a.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:""})]}),U.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(G=>a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(G,"dd.MM.yyyy"),a.jsx("button",{type:"button",onClick:()=>W(G),className:"text-red-500 hover:text-red-600",children:"x"})]},G))}):a.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),(t==="sick"||t==="vacation")&&(!q||I==="single")&&a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:v,onChange:G=>C(G.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:`${i==="dark"?"text-gray-300":"text-gray-700"}`,children:" "})]}),v&&a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsx("input",{type:"date",value:b,onChange:G=>k(G.target.value),min:g,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("textarea",{value:E,onChange:G=>y(G.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"  ()"})]}),N&&a.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:N}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[a.jsx("button",{onClick:fe,disabled:L,className:`flex-1 px-4 py-2.5 sm:py-2 ${X[t]} hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100`,children:L?"...":""}),a.jsx("button",{onClick:r,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${i==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:""})]})]})]})})})},P3=({onClose:t,onSave:e})=>{const{user:r}=Nt(),{theme:n}=Be(),{isAdmin:s}=Yt(),i=n==="dark"?"text-white":"text-gray-900",[o,l]=P.useState(s?[]:r!=null&&r.id?[r.id]:[]),[u,d]=P.useState(!1),[h,g]=P.useState(!1),[m,b]=P.useState(!1),[k,v]=P.useState(null),[C,E]=P.useState([]),[y,N]=P.useState(""),[R,L]=P.useState(""),[M,I]=P.useState(""),[_,w]=P.useState(""),[j,S]=P.useState(!1),A=["","","","","","",""],x=D=>{if(D){if(h||m){w("    ,   ");return}d(!0),w("")}else d(!1),v(null)},H=D=>{if(D){if(u||m){w("    ,   ");return}g(!0),w("")}else g(!1),E([]),N("")},U=D=>{if(D){if(u||h){w("    ,   ");return}b(!0),w("")}else b(!1),L(""),I("")},B=D=>{o.includes(D)?l(o.filter(W=>W!==D)):l([...o,D])},q=()=>{if(!y){w(" ");return}if(C.includes(y)){w("   ");return}E([...C,y].sort()),N(""),w("")},F=D=>{E(C.filter(W=>W!==D))},V=async()=>{var W;if(!s&&!r){w("  ");return}const D=s?o:r?[r.id]:[];if(D.length===0){w("    ");return}if(!u&&!h&&!m){w("   ");return}if(u&&k===null){w("  ");return}if(h&&C.length===0){w("    ");return}if(m){if(!R||!M){w("     ");return}if(R>M){w("     ");return}}w(""),S(!0);try{const $=D.map(X=>On(X)),ue=(await Promise.all($)).flat();let le=[];if(u?le=ue.filter(X=>{const G=new Date(X.date+"T00:00:00");return(G.getDay()===0?6:G.getDay()-1)===k}).map(X=>X.id):h?le=ue.filter(X=>C.includes(X.date)).map(X=>X.id):m&&(le=ue.filter(X=>X.date>=R&&X.date<=M).map(X=>X.id)),le.length===0){w("    "),S(!1);return}const fe=D.length>1?`${D.length} `:((W=_e.find(X=>X.id===D[0]))==null?void 0:W.name)||"",J=u?`   ${fe}  ${A[k]}? (${le.length} )`:m?`   ${fe}  ${oe(R,"dd.MM.yyyy")}  ${oe(M,"dd.MM.yyyy")}? (${le.length} )`:`  ${fe}   ? (${le.length} )`;if(!confirm(J)){S(!1);return}await Promise.all(le.map(X=>zg(X))),e()}catch($){console.error("Error deleting slots:",$);const te=$.message||$.code||"   ";w(te)}finally{S(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-4 sm:py-0 overflow-y-auto",children:a.jsx("div",{className:`w-full max-w-2xl rounded-lg shadow-xl ${n==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:`text-xl font-bold ${i}`,children:" "}),a.jsx("button",{onClick:t,className:`p-2 rounded-lg ${n==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[s&&a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:[" ",o.length>0&&`(${o.length} )`]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:_e.map(D=>{const W=o.includes(D.id);return a.jsx("button",{onClick:()=>B(D.id),className:`px-3 py-1.5 rounded-lg transition-colors ${W?"bg-red-500 text-white":n==="dark"?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:D.name},D.id)})})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:D=>x(D.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:`${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"   "})]}),u&&a.jsxs("div",{className:"ml-6",children:[a.jsx("p",{className:`text-sm mb-2 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"  :"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:A.map((D,W)=>a.jsx("button",{onClick:()=>v(W),className:`px-3 py-1 rounded-lg transition-colors ${k===W?"bg-red-500 text-white":n==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:D},W))})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:h,onChange:D=>H(D.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:`${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"   "})]}),h&&a.jsxs("div",{className:"ml-6 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",value:y,onChange:D=>N(D.target.value),className:`flex-1 px-4 py-2 rounded-lg border ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`}),a.jsx("button",{onClick:q,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:""})]}),C.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:["  (",C.length,"):"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(D=>a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ${n==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx("span",{className:i,children:oe(D,"dd.MM.yyyy")}),a.jsx("button",{onClick:()=>F(D),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors",children:a.jsx(br,{className:"w-3 h-3"})})]},D))})]})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:m,onChange:D=>U(D.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:`${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"   "})]}),m&&a.jsxs("div",{className:"ml-6 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:`block text-xs mb-1 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:" "}),a.jsx("input",{type:"date",value:R,onChange:D=>L(D.target.value),className:`w-full px-4 py-2 rounded-lg border ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:`block text-xs mb-1 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:" "}),a.jsx("input",{type:"date",value:M,onChange:D=>I(D.target.value),min:R,className:`w-full px-4 py-2 rounded-lg border ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`})]})]}),R&&M&&a.jsxs("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:[" :  ",oe(R,"dd.MM.yyyy"),"  ",oe(M,"dd.MM.yyyy")]})]}),_&&a.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:_}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:V,disabled:j||!u&&!h&&!m,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(er,{className:"w-4 h-4"}),j?"...":" "]}),a.jsx("button",{onClick:t,className:`px-4 py-2 rounded-lg transition-colors ${n==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:""})]})]})]})})})},R3=()=>{const{theme:t}=Be(),[e,r]=P.useState("table"),[n,s]=P.useState("all"),[i,o]=P.useState(!1),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[g,m]=P.useState(null),[b,k]=P.useState(null),[v,C]=P.useState(null),[E,y]=P.useState(null),[N,R]=P.useState({slotsThisWeek:0,activeMembers:0,upcomingSlots:0,completedSlots:0}),[L,M]=P.useState(!1);P.useEffect(()=>{_()},[]),P.useEffect(()=>{const D=window.matchMedia("(max-width: 1023px)"),W=te=>{M(te.matches)};W(D);const $=te=>W(te);return D.addEventListener("change",$),()=>D.removeEventListener("change",$)},[]),P.useEffect(()=>{L&&e==="table"&&r("week")},[L,e]);const I=D=>{const W=new Date;W.setHours(0,0,0,0);const $=new Date(D.date);if($.setHours(0,0,0,0),$>W)return!0;if($.getTime()===W.getTime()){const ue=new Date,le=ue.getHours()*60+ue.getMinutes();return D.slots.some(fe=>{if(fe.endDate){const K=new Date(fe.endDate);if(K.setHours(0,0,0,0),K>W)return!0;if(K.getTime()===W.getTime()){const[Ne,ke]=fe.end.split(":").map(Number);return Ne*60+ke>le}return!1}const[J,X]=fe.end.split(":").map(Number);return J*60+X>le})}return D.slots.some(ue=>{if(ue.endDate){const le=new Date(ue.endDate);return le.setHours(0,0,0,0),le>=W}return!1})},_=async()=>{try{const D=Hg(new Date),W=oe(D[0],"yyyy-MM-dd"),$=oe(D[6],"yyyy-MM-dd"),[te,ue]=await Promise.all([On(),jn()]),le=te.filter(G=>G.date>=W&&G.date<=$),fe=new Set([...le.map(G=>G.userId),...ue.map(G=>G.userId)]),J=le.filter(I).length,X=le.length-J;R({slotsThisWeek:le.length,activeMembers:fe.size,upcomingSlots:J,completedSlots:X})}catch(D){console.error("Error loading stats:",D)}},w=()=>{C(null),o(!0)},j=D=>{C(D),o(!0)},S=D=>{m(D),y(null),h(!0)},A=D=>{y(D),m(D.type),h(!0)},x=()=>{u(!0)},H=()=>{o(!1),u(!1),h(!1),m(null),C(null),y(null),setTimeout(()=>{window.location.reload()},500)},U=t==="dark"?"bg-gray-800":"bg-white",B=t==="dark"?"text-white":"text-gray-900",q=t==="dark"?"text-gray-300":"text-gray-700",F=`rounded-xl sm:rounded-2xl p-4 sm:p-5 border ${t==="dark"?"bg-gray-900/40 border-gray-700 shadow-[0_20px_60px_rgba(0,0,0,0.5)]":"bg-white border-gray-200 shadow-[0_20px_60px_rgba(15,23,42,0.08)]"}`,V=D=>{if(D==="table"&&L){alert("     . ,  .");return}r(D)};return a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 ${U} shadow-lg border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 to-gray-800/90":"border-blue-200 bg-gradient-to-br from-white to-blue-50/30"}`,children:[a.jsxs("div",{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-green-500/10 to-yellow-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4 mb-4 sm:mb-6",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:a.jsx(rc,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-2",children:[a.jsx("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold bg-gradient-to-r ${t==="dark"?"from-blue-400 via-purple-400 to-pink-400 text-transparent bg-clip-text":"from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text"}`,children:" "}),a.jsx(pr,{className:`w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]}),a.jsxs("p",{className:`${q} text-sm sm:text-base font-medium hidden sm:flex flex-wrap items-center gap-2`,children:[a.jsx(uw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0"}),a.jsx("span",{children:"      ApeVault"})]})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-green-500/20":"bg-green-100"}`,children:a.jsx(ei,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-xs sm:text-sm ${q} truncate`,children:" "}),a.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-green-400":"text-green-600"}`,children:N.slotsThisWeek})]})]})}),a.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:a.jsx(Zr,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-xs sm:text-sm ${q} truncate`,children:""}),a.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:N.upcomingSlots})]})]})}),a.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-gray-500/10 border-gray-500/30":"bg-gray-50 border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-gray-500/20":"bg-gray-100"}`,children:a.jsx(rc,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-gray-400":"text-gray-600"}`})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-xs sm:text-sm ${q} truncate`,children:""}),a.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:N.completedSlots})]})]})}),a.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:a.jsx(tn,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-purple-400":"text-purple-600"}`})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-xs sm:text-sm ${q} truncate`,children:" "}),a.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-purple-400":"text-purple-600"}`,children:N.activeMembers})]})]})})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[a.jsxs("h2",{className:`text-base sm:text-lg font-bold ${B} flex items-center gap-2`,children:[a.jsx(rc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0"}),a.jsx("span",{children:" :"})]}),a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:`inline-flex flex-col sm:flex-row flex-wrap rounded-lg sm:rounded-xl p-1 sm:p-1.5 shadow-lg gap-1 ${t==="dark"?"bg-gray-700/50 border-2 border-gray-600":"bg-gray-200/50 border-2 border-gray-300"}`,children:[a.jsxs("button",{onClick:()=>s("all"),className:`px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 rounded-lg transition-all duration-300 text-xs sm:text-sm font-semibold flex items-center justify-center gap-1.5 sm:gap-2 relative touch-manipulation active:scale-95 ${n==="all"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white hover:scale-105":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 hover:scale-105"}`,children:[a.jsx(Zr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:""}),n==="all"&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-green-400 rounded-full animate-pulse"})]}),a.jsxs("button",{onClick:()=>s("upcoming"),className:`px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 rounded-lg transition-all duration-300 text-xs sm:text-sm font-semibold flex items-center justify-center gap-1.5 sm:gap-2 relative touch-manipulation active:scale-95 ${n==="upcoming"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white hover:scale-105":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 hover:scale-105"}`,children:[a.jsx(ei,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:""}),n==="upcoming"&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-blue-400 rounded-full animate-pulse"})]}),a.jsxs("button",{onClick:()=>s("completed"),className:`px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 rounded-lg transition-all duration-300 text-xs sm:text-sm font-semibold flex items-center justify-center gap-1.5 sm:gap-2 relative touch-manipulation active:scale-95 ${n==="completed"?"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white hover:scale-105":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 hover:scale-105"}`,children:[a.jsx(rc,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:""}),n==="completed"&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-gray-400 rounded-full animate-pulse"})]})]})})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[a.jsx("h2",{className:`text-base sm:text-lg md:text-xl font-semibold ${B}`,children:" "}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-2 sm:gap-3 w-full",children:[a.jsxs("div",{className:`flex rounded-lg sm:rounded-xl p-1 sm:p-1.5 w-full sm:w-auto shadow-inner ${t==="dark"?"bg-gray-700/50 border border-gray-600":"bg-gray-200/50 border border-gray-300"}`,children:[a.jsxs("button",{onClick:()=>V("table"),"aria-disabled":L,className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium touch-manipulation ${e==="table"&&!L?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/50 scale-105":L?"bg-gray-200/60 text-gray-400 cursor-not-allowed":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white active:scale-95":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 active:scale-95"}`,children:[a.jsx(iy,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:""})]}),a.jsxs("button",{onClick:()=>V("week"),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium touch-manipulation active:scale-95 ${e==="week"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white":"text-gray-700 hover:bg-gray-300 hover:text-gray-900"}`,children:[a.jsx(Zr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:""})]})]}),a.jsxs("button",{onClick:w,className:"w-full sm:flex-1 sm:w-auto px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium shadow-lg shadow-green-500/30 hover:shadow-green-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation",children:[a.jsx(oa,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:" "})]}),a.jsxs("button",{onClick:x,className:"w-full sm:flex-1 sm:w-auto px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium shadow-lg shadow-red-500/30 hover:shadow-red-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation",children:[a.jsx(er,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:" "})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:flex-1",children:[a.jsx("button",{onClick:()=>S("dayoff"),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 font-medium shadow-lg shadow-yellow-500/30 hover:shadow-yellow-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation whitespace-nowrap",children:""}),a.jsx("button",{onClick:()=>S("sick"),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 font-medium shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation whitespace-nowrap",children:""}),a.jsx("button",{onClick:()=>S("vacation"),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 font-medium shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation whitespace-nowrap",children:""})]})]})]})]}),a.jsxs("div",{className:`mt-4 sm:mt-6 pt-4 sm:pt-6 border-t-2 ${t==="dark"?"border-gray-700/50":"border-gray-200/50"}`,children:[a.jsxs("label",{className:`block text-sm sm:text-base font-bold mb-3 sm:mb-4 flex items-center gap-2 ${B}`,children:[a.jsx(tn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0"}),a.jsx("span",{children:"  "})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("button",{onClick:()=>k(null),className:`group relative px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl transition-all duration-300 font-medium text-xs sm:text-sm shadow-lg touch-manipulation active:scale-95 sm:hover:scale-105 ${b===null?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-green-500/50 scale-105":t==="dark"?"bg-gray-700/50 border-2 border-gray-600 text-gray-300 hover:bg-gray-600/70 hover:border-green-500/50 hover:text-white":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-green-500/50 hover:text-green-600"}`,children:[a.jsxs("span",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsx(tn,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:" "})]}),b===null&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-2 h-2 sm:w-3 sm:h-3 bg-green-400 rounded-full border border-white sm:border-2 animate-pulse"})]}),_e.map(D=>a.jsxs("button",{onClick:()=>k(D.id),className:`group relative px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl transition-all duration-300 font-medium text-xs sm:text-sm shadow-lg flex items-center gap-2 sm:gap-3 touch-manipulation active:scale-95 sm:hover:scale-105 ${b===D.id?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-green-500/50 scale-105 ring-2 ring-green-400/50":t==="dark"?"bg-gray-700/50 border-2 border-gray-600 text-gray-300 hover:bg-gray-600/70 hover:border-green-500/50 hover:text-white":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-green-500/50 hover:text-green-600"}`,children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[D.avatar?a.jsx("img",{src:D.avatar,alt:D.name,className:`w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 rounded-full object-cover border-2 transition-all duration-300 ${b===D.id?"border-white ring-2 ring-white/50 scale-110":t==="dark"?"border-gray-500 group-hover:border-green-400":"border-gray-300 group-hover:border-green-400"}`,onError:W=>{const $=W.target;$.style.display="none";const te=$.nextElementSibling;te&&(te.style.display="flex")}}):null,a.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 rounded-full flex items-center justify-center font-bold text-xs transition-all duration-300 ${b===D.id?"bg-white/20 text-white ring-2 ring-white/50 scale-110":t==="dark"?"bg-gradient-to-br from-green-500/30 to-blue-500/30 text-gray-300 group-hover:from-green-500/50 group-hover:to-blue-500/50":"bg-gradient-to-br from-green-400/30 to-blue-400/30 text-gray-600 group-hover:from-green-400/50 group-hover:to-blue-400/50"} ${D.avatar?"absolute inset-0 hidden":""}`,children:D.name.charAt(0).toUpperCase()})]}),a.jsx("span",{className:"whitespace-nowrap truncate max-w-[100px] sm:max-w-none",children:D.name}),b===D.id&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-2 h-2 sm:w-3 sm:h-3 bg-green-400 rounded-full border border-white sm:border-2 animate-pulse"})]},D.id))]})]})]}),a.jsxs("div",{className:F,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm sm:text-base font-semibold ${B}`,children:" "}),a.jsx("p",{className:`text-xs sm:text-sm ${q}`,children:"         "})]}),L&&a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold text-amber-700 bg-amber-100 dark:text-amber-300 dark:bg-amber-500/10",children:[a.jsx(pr,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:" "})]})]}),e==="table"?L?a.jsx("div",{className:`rounded-lg border-2 border-dashed p-4 text-center ${t==="dark"?"bg-gray-800/60 border-gray-700 text-gray-300":"bg-gray-50 border-gray-200 text-gray-600"}`,children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(iy,{className:`w-8 h-8 ${t==="dark"?"text-gray-400":"text-gray-500"}`}),a.jsx("p",{className:"text-sm font-semibold",children:"     "}),a.jsx("p",{className:"text-xs",children:",  ApeVault Panel    ,    ."})]})}):a.jsx(T3,{selectedUserId:b,slotFilter:n,onEditSlot:j,onEditStatus:A}):a.jsx(I3,{selectedUserId:b,slotFilter:n,onEditSlot:j,onEditStatus:A})]}),i&&a.jsx(C3,{slot:v,onClose:H,onSave:H}),l&&a.jsx(P3,{onClose:H,onSave:H}),d&&g&&a.jsx(A3,{type:g,status:E,onClose:H,onSave:H})]})})},D3=({onClose:t,onSave:e,editingEarning:r})=>{const{user:n}=Nt(),{isAdmin:s}=Yt(),{theme:i}=Be(),o=i==="dark"?"text-white":"text-gray-900",l=!!r,[u,d]=P.useState((r==null?void 0:r.date)||oe(new Date,"yyyy-MM-dd")),[h,g]=P.useState((r==null?void 0:r.slotId)||""),[m,b]=P.useState((r==null?void 0:r.amount.toString())||""),[k,v]=P.useState((r==null?void 0:r.poolAmount.toString())||""),[C,E]=P.useState(r?r.participants.length>1:!1),[y,N]=P.useState(r?r.participants.filter(x=>x!==r.userId):[]),[R,L]=P.useState([]),[M,I]=P.useState(""),[_,w]=P.useState(!1);P.useEffect(()=>{j()},[u,n,l]);const j=async()=>{if(!(!s&&!n&&!l))try{const x=l||s?await On(void 0,u):await On(n.id,u),H=Bf(),U=oe(H,"yyyy-MM-dd"),B=l?x:x.filter(q=>{if(u!==U)return s;const F=q.slots[q.slots.length-1];return Px(F.end,H)||s});L(B)}catch(x){console.error("Error loading slots:",x)}},S=x=>{y.includes(x)?N(y.filter(H=>H!==x)):N([...y,x])},A=async()=>{if(!s&&!n&&!l){I("  ");return}I(""),w(!0);try{if(!h){I(" "),w(!1);return}if(!m||!k){I("  "),w(!1);return}const x=parseFloat(m),H=parseFloat(k);if(isNaN(x)||isNaN(H)||x<0||H<0){I("  "),w(!1);return}const U=R.find(B=>B.id===h);if(!U&&!l){I("   "),w(!1);return}if(!s&&!l){const B=Bf(),q=oe(B,"yyyy-MM-dd");if(u!==q){I("     "),w(!1);return}if(U){const F=U.slots[U.slots.length-1];if(!Px(F.end,B)){I("      .     21:00     "),w(!1);return}}}if(l&&r)await cP(r.id,{date:u,amount:x,poolAmount:H,slotId:h});else{const B=s&&!n?y.length>0?y:[]:C&&y.length>0?[...y,n.id]:[n.id];if(B.length===0){I("    "),w(!1);return}await lP({userId:B[0],date:u,amount:x,poolAmount:H,slotId:h,participants:B})}e()}catch(x){console.error("Error saving earnings:",x);const H=x.message||x.code||"  ";I(H)}finally{w(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto touch-manipulation",children:a.jsx("div",{className:`w-full max-w-md rounded-lg sm:rounded-xl shadow-xl ${i==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto my-4 sm:my-8`,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[a.jsx("h3",{className:`text-lg sm:text-xl font-bold ${o} pr-2`,children:l?" ":" "}),a.jsx("button",{onClick:t,className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${i==="dark"?"hover:bg-gray-700 active:bg-gray-600":"hover:bg-gray-100 active:bg-gray-200"} transition-colors touch-manipulation`,"aria-label":"",children:a.jsx(br,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between text-xs sm:text-sm font-medium mb-2 gap-1 sm:gap-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:[a.jsx("span",{children:""}),!s&&!l&&a.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400 whitespace-nowrap",children:"   "})]}),a.jsx("input",{type:"date",value:u,onChange:x=>d(x.target.value),disabled:!s&&!l,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed`}),l&&!s&&a.jsx("p",{className:`mt-1 text-xs ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:"    "})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsxs("select",{value:h,onChange:x=>g(x.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,children:[a.jsx("option",{value:"",children:" "}),R.map(x=>a.jsx("option",{value:x.id,children:x.slots.map(H=>`${H.start}-${H.end}`).join(", ")},x.id)),l&&r&&!R.find(x=>x.id===r.slotId)&&a.jsx("option",{value:r.slotId,disabled:!0,children:"[  -  ]"})]}),l&&r&&!R.find(x=>x.id===r.slotId)&&a.jsx("p",{className:`mt-1 text-xs ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:"     .      ."})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"  (.)"}),a.jsx("input",{type:"number",value:m,onChange:x=>b(x.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"0",min:"0",step:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"   (.)"}),a.jsx("input",{type:"number",value:k,onChange:x=>v(x.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"0",min:"0",step:"100"})]}),!l&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:C,onChange:x=>E(x.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:`${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "})]}),(C||s&&!n)&&a.jsx("div",{className:"ml-6 space-y-2",children:_e.filter(x=>!n||x.id!==n.id).map(x=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:y.includes(x.id),onChange:()=>S(x.id),className:"w-4 h-4"}),a.jsx("span",{className:i==="dark"?"text-gray-300":"text-gray-700",children:x.name})]},x.id))})]}),M&&a.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:M}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[a.jsx("button",{onClick:A,disabled:_,className:"flex-1 px-4 py-2.5 sm:py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100",children:_?"...":""}),a.jsx("button",{onClick:t,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${i==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:""})]})]})]})})})},$3=({earnings:t})=>{const{theme:e}=Be(),r=bl(),n=oe(r.start,"yyyy-MM-dd"),s=oe(r.end,"yyyy-MM-dd"),i=oe(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd"),o=oe(new Date(new Date().getFullYear(),new Date().getMonth()+1,0),"yyyy-MM-dd"),l=(m,b,k)=>{const v=t.filter(y=>(y.participants&&y.participants.length>0?[...y.participants,y.userId]:[y.userId]).includes(m)&&y.date>=b&&y.date<=k),C=v.reduce((y,N)=>{const R=N.participants&&N.participants.length>0?N.participants.length:1;return y+N.amount/R},0),E=v.reduce((y,N)=>{const R=N.participants&&N.participants.length>0?N.participants.length:1;return y+N.poolAmount/R},0);return{totalEarnings:C,totalPool:E,count:v.length}},u=_e.reduce((m,b)=>{const k=l(b.id,n,s);return m+k.totalEarnings},0),d=_e.reduce((m,b)=>{const k=l(b.id,n,s);return m+k.totalPool},0),h=_e.reduce((m,b)=>{const k=l(b.id,i,o);return m+k.totalEarnings},0),g=_e.reduce((m,b)=>{const k=l(b.id,i,o);return m+k.totalPool},0);return a.jsx("div",{className:`rounded-2xl ${e==="dark"?"bg-gray-800":"bg-white"} shadow-lg border-2 ${e==="dark"?"border-gray-700":"border-gray-200"} overflow-hidden`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:`p-2 rounded-lg ${e==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:a.jsx(di,{className:`w-5 h-5 ${e==="dark"?"text-blue-400":"text-blue-600"}`})}),a.jsx("h3",{className:`text-xl font-bold ${e==="dark"?"text-white":"text-gray-900"}`,children:" "})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:`text-lg font-semibold mb-4 px-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),a.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-gray-700/50 dark:border-gray-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[a.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""})]})}),a.jsxs("tbody",{children:[_e.map(m=>{const b=l(m.id,n,s);return a.jsxs("tr",{className:`border-b border-gray-700/30 dark:border-gray-700 transition-colors ${e==="dark"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[a.jsx("td",{className:`px-4 py-3 font-medium ${e==="dark"?"text-white":"text-gray-900"}`,children:m.name}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-green-400":"text-green-600"}`,children:[b.totalEarnings.toFixed(2)," "]}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[b.totalPool.toFixed(2)," "]})]},m.id)}),a.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/70":"bg-gray-100"} font-bold border-t-2 border-gray-700/50 dark:border-gray-700`,children:[a.jsx("td",{className:`px-4 py-3 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),a.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-green-400":"text-green-600"}`,children:[u.toFixed(2)," "]}),a.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[d.toFixed(2)," "]})]})]})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-semibold mb-4 px-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),a.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-gray-700/50 dark:border-gray-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[a.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""})]})}),a.jsxs("tbody",{children:[_e.map(m=>{const b=l(m.id,i,o);return a.jsxs("tr",{className:`border-b border-gray-700/30 dark:border-gray-700 transition-colors ${e==="dark"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[a.jsx("td",{className:`px-4 py-3 font-medium ${e==="dark"?"text-white":"text-gray-900"}`,children:m.name}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-green-400":"text-green-600"}`,children:[b.totalEarnings.toFixed(2)," "]}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[b.totalPool.toFixed(2)," "]})]},m.id)}),a.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/70":"bg-gray-100"} font-bold border-t-2 border-gray-700/50 dark:border-gray-700`,children:[a.jsx("td",{className:`px-4 py-3 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),a.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-green-400":"text-green-600"}`,children:[h.toFixed(2)," "]}),a.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[g.toFixed(2)," "]})]})]})]})})]})]})})},M3=({earnings:t,onEdit:e,onDelete:r})=>{const{theme:n}=Be(),{user:s}=Nt(),{isAdmin:i}=Yt(),[o,l]=P.useState(null),u=async m=>{if(confirm(" ,       ?")){l(m);try{await uP(m),r()}catch(b){console.error("Error deleting earnings:",b),alert("   ")}finally{l(null)}}},d=m=>{var b;return((b=_e.find(k=>k.id===m))==null?void 0:b.name)||m},h=m=>i||m.userId===(s==null?void 0:s.id),g=[...t].sort((m,b)=>b.date.localeCompare(m.date));return g.length===0?a.jsxs("div",{className:`rounded-2xl p-8 text-center border-2 ${n==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-md`,children:[a.jsx("p",{className:`${n==="dark"?"text-gray-400":"text-gray-600"} text-lg`,children:"    "}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"  ,     "})]}):a.jsx("div",{className:`rounded-2xl ${n==="dark"?"bg-gray-800":"bg-white"} shadow-lg border-2 ${n==="dark"?"border-gray-700":"border-gray-200"} overflow-hidden`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:`p-2 rounded-lg ${n==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:a.jsx(ry,{className:`w-5 h-5 ${n==="dark"?"text-blue-400":"text-blue-600"}`})}),a.jsx("h3",{className:`text-xl font-bold ${n==="dark"?"text-white":"text-gray-900"}`,children:"   "})]}),a.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-gray-700/50 dark:border-gray-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:`${n==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[a.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),a.jsx("th",{className:`px-4 py-3 text-center text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""})]})}),a.jsx("tbody",{children:g.map(m=>{const b=h(m);return a.jsxs("tr",{className:`border-b border-gray-700/30 dark:border-gray-700 transition-colors ${n==="dark"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[a.jsx("td",{className:`px-4 py-3 font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:oe(new Date(m.date+"T00:00:00"),"dd.MM.yyyy")}),a.jsx("td",{className:`px-4 py-3 font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:d(m.userId)}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${n==="dark"?"text-green-400":"text-green-600"}`,children:[m.amount.toFixed(2)," "]}),a.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${n==="dark"?"text-purple-400":"text-purple-600"}`,children:[m.poolAmount.toFixed(2)," "]}),a.jsx("td",{className:"px-4 py-3 text-center",children:b?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>e(m),className:`p-2 rounded-lg transition-colors ${n==="dark"?"hover:bg-gray-600 text-blue-400":"hover:bg-gray-200 text-blue-600"}`,title:"",children:a.jsx(ry,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>u(m.id),disabled:o===m.id,className:`p-2 rounded-lg transition-colors ${n==="dark"?"hover:bg-gray-600 text-red-400":"hover:bg-gray-200 text-red-600"} disabled:opacity-50 disabled:cursor-not-allowed`,title:"",children:a.jsx(er,{className:"w-4 h-4"})})]}):a.jsx("span",{className:`text-sm ${n==="dark"?"text-gray-500":"text-gray-400"}`,children:""})})]},m.id)})})]})})]})})},O3=()=>{const{theme:t}=Be(),[e,r]=P.useState(!1),[n,s]=P.useState(null),[i,o]=P.useState([]),[l,u]=P.useState(!0),[d,h]=P.useState({weekTotal:0,weekPool:0,monthTotal:0,monthPool:0}),g=t==="dark"?"text-white":"text-gray-900",m=t==="dark"?"bg-gray-800":"bg-white",b=()=>{const y=bl(),N=oe(y.start,"yyyy-MM-dd"),R=oe(y.end,"yyyy-MM-dd"),L=oe(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd"),M=oe(new Date(new Date().getFullYear(),new Date().getMonth()+1,0),"yyyy-MM-dd"),I=i.filter(w=>w.date>=N&&w.date<=R),_=i.filter(w=>w.date>=L&&w.date<=M);h({weekTotal:I.reduce((w,j)=>w+j.amount,0),weekPool:I.reduce((w,j)=>w+j.poolAmount,0),monthTotal:_.reduce((w,j)=>w+j.amount,0),monthPool:_.reduce((w,j)=>w+j.poolAmount,0)})};P.useEffect(()=>{k()},[]),P.useEffect(()=>{i.length>0&&b()},[i]);const k=async()=>{u(!0);try{const y=await Zo();o(y)}catch(y){console.error("Error loading earnings:",y)}finally{u(!1)}},v=y=>{s(y),r(!0)},C=()=>{r(!1),s(null)},E=()=>{r(!1),s(null),k()};return a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${m} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-start lg:justify-between mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex-1 min-w-0 space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:a.jsx(Wu,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${g} flex items-center gap-2 sm:gap-3`,children:[a.jsx("span",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-yellow-600 text-transparent bg-clip-text",children:" "}),a.jsx(pr,{className:`w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]})})]}),a.jsx("p",{className:`text-sm sm:text-base font-medium ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"        "})]}),a.jsxs("button",{onClick:()=>r(!0),className:"w-full lg:w-auto px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base font-semibold shadow-lg hover:shadow-xl active:scale-95 sm:hover:scale-105 transform touch-manipulation",children:[a.jsx(oa,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:" "})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:a.jsx(di,{className:`w-5 h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})}),a.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:""})]}),a.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:[d.weekTotal.toFixed(2)," "]})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:a.jsx(ny,{className:`w-5 h-5 ${t==="dark"?"text-purple-400":"text-purple-600"}`})}),a.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"  "})]}),a.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-purple-400":"text-purple-600"}`,children:[d.weekPool.toFixed(2)," "]})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/20":"bg-green-100"}`,children:a.jsx(Uj,{className:`w-5 h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})}),a.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:""})]}),a.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-green-400":"text-green-600"}`,children:[d.monthTotal.toFixed(2)," "]})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-orange-500/10 border-orange-500/30":"bg-orange-50 border-orange-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-orange-500/20":"bg-orange-100"}`,children:a.jsx(ny,{className:`w-5 h-5 ${t==="dark"?"text-orange-400":"text-orange-600"}`})}),a.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"  "})]}),a.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-orange-400":"text-orange-600"}`,children:[d.monthPool.toFixed(2)," "]})]})]}),a.jsx("div",{className:"hidden sm:flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-gray-700/50 dark:border-gray-700",children:a.jsx("h2",{className:`text-base sm:text-lg md:text-xl font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:" "})})]}),l?a.jsx("div",{className:`rounded-xl p-8 text-center border-2 ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-md`,children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),a.jsx("p",{className:t==="dark"?"text-gray-400":"text-gray-600",children:" ..."})]})}):a.jsxs(a.Fragment,{children:[a.jsx($3,{earnings:i}),a.jsx(M3,{earnings:i,onEdit:v,onDelete:k})]}),e&&a.jsx(D3,{onClose:C,onSave:E,editingEarning:n})]})})},z1=(t,e=0,r=0,n=0)=>{let s=0;(t.daysOff===0||t.daysOff<=2)&&(s+=10),t.sickDays<=7&&(s+=10),t.vacationDays<=7&&(s+=10),e>=30?s+=25:e>=20&&(s+=15),r>=6e3?s+=30:r>=3e3&&(s+=15);const i=Math.min(t.referrals*5,30);return s+=i,n>50&&(s+=15),Math.min(s,100)},W1=(t,e=0,r=0,n=0)=>{const s=t.daysOff===0||t.daysOff<=2?10:0,i=t.sickDays<=7?10:0,o=t.vacationDays<=7?10:0;let l=0;e>=30?l=25:e>=20&&(l=15);let u=0;r>=6e3?u=30:r>=3e3&&(u=15);const d=Math.min(t.referrals*5,30),h=n>50?15:0,g=Math.min(s+i+o+l+u+d+h,100);return{daysOff:t.daysOff,daysOffPoints:s,sickDays:t.sickDays,sickDaysPoints:i,vacationDays:t.vacationDays,vacationDaysPoints:o,weeklyHours:e,weeklyHoursPoints:l,weeklyEarnings:r,weeklyEarningsPoints:u,referrals:t.referrals,referralsPoints:d,weeklyMessages:n,weeklyMessagesPoints:h,totalRating:g}},L3=t=>t>=1&&t<=10?"#ef4444":t>=11&&t<=30?"#f97316":t>=31&&t<=59?"#eab308":t>=60&&t<=80?"#3b82f6":t>=81&&t<=100?"#10b981":"#6b7280",V3=({rating:t})=>{const{theme:e}=Be(),[r,n]=P.useState(null),s=_e.find(v=>v.id===t.userId),i=L3(t.rating),o=e==="dark"?"text-white":"text-gray-900",l=e==="dark"?"text-gray-400":"text-gray-600",u=e==="dark"?"bg-gray-800":"bg-white",d=e==="dark"?"border-gray-700":"border-gray-200",h=e==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",g=t.rating<=0?"4%":`${Math.min(t.rating,100)}%`,m=v=>v>=81?"":v>=60?"":v>=31?"":v>=11?"":v>=1?"":"",b=t.breakdown?[{icon:a.jsx(Zr,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.daysOff} `,points:t.breakdown.daysOffPoints,maxPoints:10,explanation:"0-2    = 10%  .  2  = 0%.   .",threshold:"0-2 ",color:"bg-yellow-500"},{icon:a.jsx(uw,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.sickDays} `,points:t.breakdown.sickDaysPoints,maxPoints:10,explanation:" 7     = 10%  .  7  = 0%.    30 .",threshold:"7 ",color:"bg-purple-500"},{icon:a.jsx(Mj,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.vacationDays} `,points:t.breakdown.vacationDaysPoints,maxPoints:10,explanation:" 7     = 10%  .  7  = 0%.    30 .",threshold:"7 ",color:"bg-orange-500"},{icon:a.jsx(ei,{className:"w-5 h-5"}),label:" ",value:S3(t.breakdown.weeklyHours),points:t.breakdown.weeklyHoursPoints,maxPoints:25,explanation:"30+    = 25%  . 20-29  = 15%.  20  = 0%.     .",threshold:"30: 25% | 20: 15%",color:"bg-blue-500"},{icon:a.jsx(Wu,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.weeklyEarnings.toFixed(2)} `,points:t.breakdown.weeklyEarningsPoints,maxPoints:30,explanation:"6000+    = 30%  . 3000-5999  = 15%.  3000  = 0%.   .",threshold:"6000: 30% | 3000: 15%",color:"bg-green-500"},{icon:a.jsx(tn,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.referrals} .`,points:t.breakdown.referralsPoints,maxPoints:30,explanation:"5%     .  30% (6 ).    30 .      .",threshold:"5%   ( 30%)",color:"bg-pink-500"},{icon:a.jsx(dw,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.weeklyMessages} `,points:t.breakdown.weeklyMessagesPoints,maxPoints:15,explanation:" 50      = 15%  .  50 = 0%.     (, ,   ..).    .",threshold:">50 ",color:"bg-indigo-500"}]:[],k=b.reduce((v,C)=>v+C.points,0);return a.jsxs("div",{className:`rounded-xl p-6 ${u} shadow-lg border ${d} transition-all hover:shadow-xl`,children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{children:[a.jsx("h3",{className:`text-2xl font-bold mb-1 ${o}`,children:(s==null?void 0:s.name)||""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-lg font-bold",style:{color:i},children:[t.rating.toFixed(1),"%"]}),a.jsx("span",{className:"text-2xl",children:m(t.rating)})]})]})}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-8 overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full transition-all duration-500 flex items-center justify-center text-sm font-bold text-white shadow-md",style:{width:g,backgroundColor:i,minWidth:t.rating<=0?"40px":void 0},children:t.rating>=10&&a.jsxs("span",{children:[t.rating.toFixed(0),"%"]})})}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsx("span",{className:`text-xs ${l}`,children:" "}),a.jsxs("span",{className:`text-xs font-semibold ${l}`,children:[k,"/100 "]})]})]})]}),t.breakdown&&a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(di,{className:`w-5 h-5 ${l}`}),a.jsx("h4",{className:`text-lg font-semibold ${o}`,children:"  "})]}),b.map((v,C)=>{const E=v.maxPoints>0?v.points/v.maxPoints*100:0,y=r===C;return a.jsxs("div",{className:`rounded-lg border ${d} overflow-hidden transition-all ${y?"shadow-md":""}`,children:[a.jsx("button",{onClick:()=>n(y?null:C),className:`w-full p-4 flex items-center justify-between ${h} transition-colors`,children:a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`p-2 rounded-lg ${v.color} text-white flex-shrink-0`,children:v.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:`font-semibold ${o} truncate`,children:v.label}),a.jsxs("span",{className:`font-bold ml-2 ${v.points>0?"text-green-500":"text-red-500"}`,children:[v.points,"/",v.maxPoints]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${v.color}`,style:{width:`${E}%`}})}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("span",{className:`text-xs ${l} truncate mr-2`,children:v.value}),a.jsx("span",{className:`text-xs ${l} whitespace-nowrap`,children:v.threshold})]})]}),a.jsx(Ur,{className:`w-4 h-4 flex-shrink-0 ml-2 ${l} transition-transform ${y?"rotate-180":""}`})]})}),y&&a.jsx("div",{className:`px-4 pb-4 pt-2 border-t ${d} ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:a.jsx("p",{className:`text-sm ${l} leading-relaxed`,children:v.explanation})})]},C)})]}),a.jsxs("div",{className:`pt-4 border-t ${d}`,children:[a.jsx("h4",{className:`text-sm font-semibold mb-3 ${o}`,children:" "}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:`p-3 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[a.jsx("div",{className:`text-xs ${l} mb-1`,children:" ()"}),a.jsxs("div",{className:`text-lg font-bold ${o}`,children:[t.earnings.toFixed(0)," "]})]}),a.jsxs("div",{className:`p-3 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[a.jsx("div",{className:`text-xs ${l} mb-1`,children:" "}),a.jsxs("div",{className:`text-lg font-bold ${o}`,children:[t.poolAmount.toFixed(0)," "]})]})]})]})]})},mh=()=>`REF-${Math.random().toString(36).slice(2,8).toUpperCase()}`,F3=({referral:t,onClose:e,onSave:r})=>{const{user:n}=Nt(),{theme:s}=Be(),[i,o]=P.useState(""),[l,u]=P.useState(""),[d,h]=P.useState(""),[g,m]=P.useState(mh()),[b,k]=P.useState(""),[v,C]=P.useState(!1),[E,y]=P.useState(!1);P.useEffect(()=>{t?(o(t.name),u(String(t.age)),m(t.referralId),h(t.comment||"")):(o(""),u(""),h(""),m(mh()))},[t]);const N=!!t,R=N?" ":" ",L=s==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900",M=s==="dark"?"text-gray-300":"text-gray-700",I=s==="dark"?"text-white":"text-gray-900",_=async()=>{if(!t){if(!n){k("  .       .");return}}if(!i.trim()||!l.trim()){k("   ");return}const j=Number(l);if(Number.isNaN(j)||j<16){k("      16");return}C(!0),k("");const S={referralId:g,ownerId:(t==null?void 0:t.ownerId)||n.id,name:i.trim(),age:j,createdAt:(t==null?void 0:t.createdAt)||new Date().toISOString(),...d.trim()&&{comment:d.trim()}};try{t?await hP(t.id,S):await dP(S),r()}catch(A){console.error("Error saving referral:",A);const x=A.message||A.code||"   ";k(x)}finally{C(!1)}},w=async()=>{if(t&&confirm(`  ${t.name}?`)){y(!0);try{await fP(t.id),r()}catch(j){console.error("Error deleting referral:",j);const S=j.message||j.code||"   ";k(S)}finally{y(!1)}}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-4 sm:py-0 overflow-y-auto",children:a.jsx("div",{className:`w-full max-w-md rounded-lg shadow-xl ${s==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto`,children:a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:`text-xl font-bold ${I}`,children:R}),a.jsx("button",{onClick:e,className:`p-2 rounded-lg ${L}`,children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:""}),a.jsx("input",{type:"text",value:i,onChange:j=>o(j.target.value),className:`w-full px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:" "})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:""}),a.jsx("input",{type:"number",value:l,onChange:j=>u(j.target.value),className:`w-full px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"18",min:16})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:""}),a.jsx("textarea",{value:d,onChange:j=>h(j.target.value),rows:3,className:`w-full px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:",    "})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:"ID "}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:g,readOnly:N,onChange:j=>m(j.target.value),className:`flex-1 px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500 ${N?"opacity-80 cursor-not-allowed":""}`}),!N&&a.jsxs("button",{type:"button",onClick:()=>m(mh()),className:"px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx(Oj,{className:"w-4 h-4"}),""]})]}),a.jsx("p",{className:`text-xs mt-1 ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"ID      ."})]}),b&&a.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:b}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[N&&a.jsxs("button",{onClick:w,disabled:E,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(er,{className:"w-4 h-4"}),E?"...":""]}),a.jsx("button",{onClick:_,disabled:v,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:v?"...":""}),a.jsx("button",{onClick:e,className:`px-4 py-2 rounded-lg transition-colors ${L}`,children:""})]})]})})})},U3=()=>{const{theme:t}=Be(),[e,r]=P.useState([]),[n,s]=P.useState(!0),[i,o]=P.useState([]),[l,u]=P.useState(!1),[d,h]=P.useState(null);P.useEffect(()=>{g()},[]);const g=async()=>{s(!0);try{const y=bl(),N=oe(y.start,"yyyy-MM-dd"),R=oe(y.end,"yyyy-MM-dd"),L=F1(30),M=oe(L.start,"yyyy-MM-dd"),I=oe(L.end,"yyyy-MM-dd"),_=L.start.toISOString(),w=L.end.toISOString(),j=await I1(void 0,_,w);o(j);const S=[];for(const A of _e){const H=(await Zo(A.id,N,R)).reduce((se,pe)=>{const Pe=pe.participants&&pe.participants.length>0?pe.participants.length:1;return se+pe.amount/Pe},0),U=await Zo(A.id,M,I),B=U.reduce((se,pe)=>{const Pe=pe.participants&&pe.participants.length>0?pe.participants.length:1;return se+pe.amount/Pe},0),q=U.reduce((se,pe)=>{const Pe=pe.participants&&pe.participants.length>0?pe.participants.length:1;return se+pe.poolAmount/Pe},0),V=(await jn(A.id)).filter(se=>{const pe=se.date,Pe=se.endDate||se.date;return pe<=I&&Pe>=M}),D=V.filter(se=>se.type==="dayoff").reduce((se,pe)=>se+Ji(pe.date,pe.endDate,M,I),0),W=V.filter(se=>se.type==="sick").reduce((se,pe)=>se+Ji(pe.date,pe.endDate,M,I),0),$=V.filter(se=>se.type==="vacation").reduce((se,pe)=>se+Ji(pe.date,pe.endDate,M,I),0),le=(await On(A.id)).filter(se=>se.date>=N&&se.date<=R).reduce((se,pe)=>se+ud(pe.slots),0),fe=await T1(A.id,N,R),X=(await S1(A.id))[0]||{userId:A.id,earnings:0,messages:0,initiatives:0,signals:0,profitableSignals:0,referrals:0,daysOff:0,sickDays:0,vacationDays:0,poolAmount:0,rating:0,lastUpdated:new Date().toISOString()},G=j.filter(se=>se.ownerId===A.id).length,K={userId:A.id,earnings:B,messages:X.messages||0,initiatives:X.initiatives||0,signals:X.signals||0,profitableSignals:X.profitableSignals||0,referrals:G,daysOff:D,sickDays:W,vacationDays:$,poolAmount:q,lastUpdated:new Date().toISOString()},Ne=z1(K,le,H,fe),ke=W1(K,le,H,fe);S.push({...K,rating:Ne,breakdown:ke})}S.sort((A,x)=>x.rating-A.rating),r(S)}catch(y){console.error("Error loading ratings:",y)}finally{s(!1)}},m=e.reduce((y,N)=>y+N.rating,0)/(e.length||1),b=t==="dark"?"text-white":"text-gray-900",k=t==="dark"?"text-gray-400":"text-gray-600",v=t==="dark"?"bg-gray-800":"bg-white",C=()=>{h(null),u(!0)},E=y=>{h(y),u(!0)};return a.jsxs(Wr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-blue-200 bg-gradient-to-br from-white via-blue-50/30 to-white"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-32 -mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-green-500/10 to-yellow-500/10 rounded-full blur-2xl -ml-24 -mb-24"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:a.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl",children:""})}),a.jsx("div",{className:"flex-1",children:a.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${b} flex items-center gap-2 sm:gap-3`,children:[a.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text",children:" "}),a.jsx("span",{className:"text-xl sm:text-2xl",children:""})]})})]}),a.jsx("p",{className:`text-sm sm:text-base font-medium ${k}`,children:"       "}),a.jsx("div",{className:`p-5 rounded-xl border-2 ${t==="dark"?"bg-gray-800/50 border-blue-500/20":"bg-blue-50/50 border-blue-200"} mb-4`,children:a.jsxs("p",{className:`text-sm leading-relaxed ${k}`,children:["    ",a.jsx("strong",{className:b,children:"7 "}),": , ,  ( ),  , ,      ( ).      .",a.jsx("strong",{className:b,children:"   - 100%"}),".      ."]})})]}),a.jsxs("button",{onClick:C,className:"w-full lg:w-auto px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-200 flex items-center justify-center gap-2 font-semibold shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("span",{children:" "})]})]})})]}),a.jsxs("div",{className:`rounded-2xl p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white to-green-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-6 mb-6",children:[a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white flex-shrink-0`,children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-2xl font-extrabold mb-2 ${b} flex items-center gap-2`,children:a.jsx("span",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-transparent bg-clip-text",children:"  "})}),a.jsx("p",{className:`text-sm ${k} font-medium`,children:"       "})]}),a.jsxs("div",{className:"text-center sm:text-right",children:[a.jsxs("div",{className:`text-5xl font-extrabold mb-1 ${t==="dark"?"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-400":"text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600"}`,children:[m.toFixed(1),"%"]}),a.jsx("p",{className:`text-xs ${k}`,children:" 100%"})]})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-12 overflow-hidden shadow-inner border-2 border-gray-300 dark:border-gray-600",children:a.jsx("div",{className:`h-full bg-gradient-to-r ${m>=80?"from-green-500 to-emerald-500":m>=50?"from-yellow-500 to-orange-500":"from-blue-500 to-purple-500"} transition-all duration-500 flex items-center justify-center shadow-lg`,style:{width:`${Math.min(m,100)}%`},children:m>=10&&a.jsxs("span",{className:"text-white text-sm font-bold px-3",children:[m.toFixed(1),"%"]})})})})]})]}),a.jsxs("div",{className:`rounded-2xl p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-pink-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-pink-200 bg-gradient-to-br from-white to-pink-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-pink-500/10 to-rose-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-pink-600 to-rose-600":"bg-gradient-to-br from-pink-500 to-rose-500"} text-white flex-shrink-0`,children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-2xl font-extrabold mb-2 ${b} flex items-center gap-2`,children:a.jsx("span",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-transparent bg-clip-text",children:"  30 "})}),a.jsxs("p",{className:`text-sm ${k} font-medium`,children:[" : ",a.jsx("strong",{className:`text-lg ${b}`,children:i.length})," "]})]})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:_e.map(y=>{const N=i.filter(R=>R.ownerId===y.id);return a.jsxs("div",{className:`p-4 rounded-lg border ${t==="dark"?"border-gray-700":"border-gray-200"} ${t==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:`${b} font-semibold`,children:y.name}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${N.length>0?t==="dark"?"bg-pink-600 text-white":"bg-pink-100 text-pink-700":t==="dark"?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"}`,children:[N.length," ",N.length===1?"":N.length<5?"":""]})]}),N.length>0&&a.jsx("div",{className:"space-y-2",children:N.map(R=>a.jsxs("div",{className:`rounded-lg border ${t==="dark"?"border-gray-600":"border-gray-300"} p-3 ${t==="dark"?"bg-gray-800":"bg-white"} flex flex-col gap-2 transition-all hover:shadow-md`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm font-semibold ${b} mb-1`,children:R.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[a.jsxs("span",{className:`px-2 py-1 rounded ${t==="dark"?"bg-gray-700":"bg-gray-100"} ${k}`,children:["ID: ",R.referralId]}),R.age&&a.jsxs("span",{className:`px-2 py-1 rounded ${t==="dark"?"bg-gray-700":"bg-gray-100"} ${k}`,children:[": ",R.age]}),a.jsx("span",{className:`px-2 py-1 rounded ${t==="dark"?"bg-gray-700":"bg-gray-100"} ${k}`,children:new Date(R.createdAt).toLocaleDateString("ru-RU")})]})]}),a.jsx("button",{onClick:()=>E(R),className:"self-start sm:self-auto px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-medium",children:""})]}),R.comment&&a.jsx("div",{className:`mt-2 pt-2 border-t ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:a.jsxs("p",{className:`text-xs ${k} italic`,children:[" ",R.comment]})})]},R.id))})]},y.id)})})]})]}),a.jsxs("div",{className:`rounded-2xl p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-purple-200 bg-gradient-to-br from-white to-purple-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-purple-600 to-indigo-600":"bg-gradient-to-br from-purple-500 to-indigo-500"} text-white flex-shrink-0`,children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-2xl font-extrabold mb-2 ${b} flex items-center gap-2`,children:a.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-transparent bg-clip-text",children:" "})}),a.jsx("p",{className:`text-sm ${k} font-medium`,children:"     "})]})]}),n?a.jsxs("div",{className:`rounded-xl p-12 text-center ${t==="dark"?"bg-gray-700/50":"bg-gray-50"} border-2 ${t==="dark"?"border-gray-600":"border-gray-200"}`,children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:`text-lg font-semibold ${b}`,children:" ..."}),a.jsx("p",{className:`text-sm ${k} mt-2`,children:",  "})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("div",{className:`px-4 py-2 rounded-xl ${t==="dark"?"bg-gray-700/50":"bg-gray-100"} border ${t==="dark"?"border-gray-600":"border-gray-200"}`,children:a.jsxs("span",{className:`text-sm font-semibold ${b}`,children:[" : ",a.jsx("span",{className:"text-purple-500 dark:text-purple-400",children:e.length})]})})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map((y,N)=>a.jsxs("div",{className:"relative transform transition-all duration-300 hover:scale-105",children:[N===0&&e.length>1&&a.jsxs("div",{className:"absolute -top-4 -right-4 z-20 bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900 text-xs font-extrabold px-4 py-2 rounded-full shadow-xl animate-pulse border-2 border-yellow-300 flex items-center gap-1",children:[a.jsx("span",{className:"text-base",children:""}),a.jsx("span",{children:""})]}),N===1&&e.length>2&&a.jsxs("div",{className:"absolute -top-4 -right-4 z-20 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-extrabold px-4 py-2 rounded-full shadow-xl border-2 border-gray-200 flex items-center gap-1",children:[a.jsx("span",{className:"text-base",children:""}),a.jsx("span",{children:"2- "})]}),N===2&&e.length>3&&a.jsxs("div",{className:"absolute -top-4 -right-4 z-20 bg-gradient-to-r from-orange-300 to-orange-400 text-orange-900 text-xs font-extrabold px-4 py-2 rounded-full shadow-xl border-2 border-orange-200 flex items-center gap-1",children:[a.jsx("span",{className:"text-base",children:""}),a.jsx("span",{children:"3- "})]}),a.jsx(V3,{rating:y})]},y.userId))})]})]})]})]}),l&&a.jsx(F3,{referral:d,onClose:()=>{u(!1),h(null)},onSave:()=>{u(!1),h(null),g()}})]})},B3=({onClose:t,onSave:e,editingTask:r})=>{const{user:n}=Nt(),{isAdmin:s}=Yt(),{theme:i}=Be(),o=!!r,l=i==="dark"?"text-white":"text-gray-900",u=i==="dark"?"bg-gray-800":"bg-white",d=i==="dark"?"bg-gray-700":"bg-gray-50",h=i==="dark"?"border-gray-600":"border-gray-300",[g,m]=P.useState((r==null?void 0:r.title)||""),[b,k]=P.useState((r==null?void 0:r.description)||""),[v,C]=P.useState((r==null?void 0:r.category)||"trading"),[E,y]=P.useState((r==null?void 0:r.priority)||"medium"),[N,R]=P.useState((r==null?void 0:r.dueDate)||oe(new Date,"yyyy-MM-dd")),[L,M]=P.useState((r==null?void 0:r.dueTime)||"12:00"),I=r&&r.assignees&&r.assignees.length>0?r.assignees:r?r.assignedTo.map(V=>({userId:V,priority:"medium"})):[],[_,w]=P.useState(I),[j,S]=P.useState(""),[A,x]=P.useState(!1),H=V=>{_.find(D=>D.userId===V)?w(D=>D.filter(W=>W.userId!==V)):w(D=>[...D,{userId:V,priority:"medium"}])},U=()=>{_.length===_e.length?w([]):w(_e.map(V=>({userId:V.id,priority:"medium"})))},B=(V,D)=>{w(W=>W.map($=>$.userId===V?{...$,priority:D}:$))},q=(V,D)=>{w(W=>W.map($=>$.userId===V?{...$,comment:D}:$))},F=async()=>{if(!s&&!n){S("  ");return}S(""),x(!0);try{if(!g.trim()){S("  "),x(!1);return}if(_.length===0){S("    "),x(!1);return}if(!N){S("  "),x(!1);return}if(!L){S("  "),x(!1);return}const V=new Date().toISOString(),D=(n==null?void 0:n.id)||"admin",W=_.map($=>$.userId);if(o&&r){const $=W.map(ue=>r.approvals.find(fe=>fe.userId===ue)||{userId:ue,status:"pending",updatedAt:V}),te={title:g.trim(),description:b.trim()||void 0,category:v,priority:E,assignedTo:W,assignees:_,approvals:$,dueDate:N,dueTime:L,updatedAt:V};await zs(r.id,te)}else{const $={title:g.trim(),description:b.trim()||void 0,category:v,status:"pending",createdBy:D,assignedTo:W,assignees:_,approvals:W.map(te=>({userId:te,status:"pending",updatedAt:V})),createdAt:V,updatedAt:V,priority:E,dueDate:N,dueTime:L};await xP($)}e()}catch(V){console.error("Error saving task:",V),S("   "),x(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:`${u} rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border-2 ${i==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative`,children:[a.jsxs("div",{className:`sticky top-0 ${u} border-b ${h} p-4 sm:p-6 flex items-center justify-between z-10`,children:[a.jsxs("h2",{className:`text-xl sm:text-2xl font-bold ${l} flex items-center gap-2`,children:[a.jsx(Gm,{className:"w-5 h-5 sm:w-6 sm:h-6"}),o?" ":" "]}),a.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-colors ${i==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[j&&a.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-center gap-2 text-red-500",children:[a.jsx(po,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:j})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:"  *"}),a.jsx("input",{type:"text",value:g,onChange:V=>m(V.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`,placeholder:"  "})]}),_.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:`block text-sm font-medium ${l}`,children:"  "}),a.jsx("div",{className:"space-y-3",children:_.map(V=>{const D=_e.find(W=>W.id===V.userId);return a.jsxs("div",{className:`p-3 rounded-lg border ${h} ${d} space-y-2`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{className:"text-sm font-medium",children:[(D==null?void 0:D.name)||""," ",a.jsxs("span",{className:"text-xs text-gray-500",children:["(",(D==null?void 0:D.login)||(D==null?void 0:D.id)||"",")"]})]}),a.jsxs("select",{value:V.priority,onChange:W=>B(V.userId,W.target.value),className:`px-3 py-1.5 rounded-lg border ${h} ${i==="dark"?"bg-gray-800 text-gray-100":"bg-white text-gray-700"}`,children:[a.jsx("option",{value:"low",children:" "}),a.jsx("option",{value:"medium",children:" "}),a.jsx("option",{value:"high",children:" "})]})]}),a.jsx("textarea",{value:V.comment||"",onChange:W=>q(V.userId,W.target.value),rows:2,className:`w-full px-3 py-2 rounded-lg border ${h} ${i==="dark"?"bg-gray-800 text-gray-100":"bg-white text-gray-700"} focus:outline-none focus:ring-2 focus:ring-green-500/50`,placeholder:"   ()"})]},V.userId)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:""}),a.jsx("textarea",{value:b,onChange:V=>k(V.target.value),rows:4,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all resize-none`,placeholder:"   ()"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[a.jsx(Fj,{className:"w-4 h-4"}),""]}),a.jsx("select",{value:v,onChange:V=>C(V.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`,children:Object.entries(Hm).map(([V,{label:D,icon:W}])=>a.jsxs("option",{value:V,children:[W," ",D]},V))})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:""}),a.jsxs("select",{value:E,onChange:V=>y(V.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`,children:[a.jsx("option",{value:"low",children:""}),a.jsx("option",{value:"medium",children:""}),a.jsx("option",{value:"high",children:""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[a.jsx(Zr,{className:"w-4 h-4"}),"  *"]}),a.jsx("input",{type:"date",value:N,onChange:V=>R(V.target.value),min:oe(new Date,"yyyy-MM-dd"),required:!0,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`})]}),a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[a.jsx(ei,{className:"w-4 h-4"}),"  *"]}),a.jsx("input",{type:"time",value:L,onChange:V=>M(V.target.value),required:!0,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("label",{className:`block text-sm font-medium ${l} flex items-center gap-2`,children:[a.jsx(tn,{className:"w-4 h-4"})," *"]}),a.jsx("button",{type:"button",onClick:U,className:`text-xs sm:text-sm px-3 py-1 rounded-lg transition-colors ${i==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:_.length===_e.length?" ":" "})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:_e.map(V=>{const D=_.some(W=>W.userId===V.id);return a.jsx("button",{type:"button",onClick:()=>H(V.id),className:`p-3 rounded-lg border-2 transition-all text-left ${D?i==="dark"?"border-green-500 bg-green-500/20":"border-green-500 bg-green-50":`${h} ${d}`}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${D?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:`text-sm font-medium ${D?i==="dark"?"text-green-400":"text-green-700":l}`,children:V.name})]})},V.id)})})]}),a.jsxs("div",{className:`flex flex-col sm:flex-row gap-3 pt-4 border-t ${h}`,children:[a.jsx("button",{onClick:F,disabled:A,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${A?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]"}`,children:A?"...":o?" ":" "}),a.jsx("button",{onClick:t,className:`px-6 py-3 rounded-lg font-semibold transition-colors ${i==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:""})]})]})]})})},qg=60*1e3,el=60*qg,Rx=24*el,z3=t=>{if(t<=0)return"";const e=Math.floor(t/Rx),r=Math.floor(t%Rx/el),n=Math.floor(t%el/qg);return e>0?`${e} ${r}`:r>0?`${r} ${n}`:`${Math.max(n,1)}`},W3=t=>t<=0?"overdue":t<=el?"urgent":t<=6*el?"soon":"on_track",gh=(t,e)=>{if(!t||!e)return{label:"",status:"unknown",isOverdue:!1};const n=new Date(`${t}T${e}`).getTime()-Date.now();if(Number.isNaN(n))return{label:"",status:"unknown",isOverdue:!1};const s=W3(n);return{label:z3(n),status:s,isOverdue:s==="overdue"}},H3=(t,e)=>{const r=P.useMemo(()=>gh(t,e),[t,e]),[n,s]=P.useState(r);return P.useEffect(()=>{s(gh(t,e));const i=setInterval(()=>{s(gh(t,e))},qg);return()=>clearInterval(i)},[t,e]),n},q3=(t,e)=>e==="dark"?{overdue:"bg-red-500/10 border-red-500/40 text-red-300",urgent:"bg-orange-500/10 border-orange-500/40 text-orange-200",soon:"bg-yellow-500/10 border-yellow-500/40 text-yellow-200",on_track:"bg-green-500/10 border-green-500/40 text-green-200",unknown:"bg-gray-600/30 border-gray-500/40 text-gray-200"}[t]:{overdue:"bg-red-50 border-red-200 text-red-600",urgent:"bg-orange-50 border-orange-200 text-orange-600",soon:"bg-yellow-50 border-yellow-200 text-yellow-700",on_track:"bg-green-50 border-green-200 text-green-700",unknown:"bg-gray-100 border-gray-200 text-gray-600"}[t],H1=({dueDate:t,dueTime:e,theme:r,size:n="default"})=>{const{label:s,status:i}=H3(t,e),o=q3(i,r),l=n==="compact"?"px-2 py-0.5 text-[11px]":"px-2.5 py-1 text-xs sm:text-sm",u=n==="compact"?"w-3 h-3":"w-4 h-4";return a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border font-medium ${l} ${o}`,children:[a.jsx(ei,{className:u}),s]})},G3=({task:t,onEdit:e,onDelete:r,onUpdate:n})=>{const{user:s}=Nt(),{isAdmin:i}=Yt(),{theme:o}=Be(),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[g,m]=P.useState(""),b=o==="dark"?"text-white":"text-gray-900",k=o==="dark"?"bg-gray-800":"bg-white",v=o==="dark"?"border-gray-600":"border-gray-300",C=Hm[t.category],E=iu[t.status],y=_e.find(B=>B.id===t.createdBy),N=t.assignees&&t.assignees.length>0?t.assignees:t.assignedTo.map(B=>({userId:B,priority:"medium"})),R=N.map(B=>B.userId),L=N.map(B=>{const q=_e.find(F=>F.id===B.userId);return q?{...B,member:q}:null}).filter(Boolean),M=i||(s==null?void 0:s.id)===t.createdBy,I=t.status==="pending"&&R.includes((s==null?void 0:s.id)||""),_=t.approvals.find(B=>B.userId===(s==null?void 0:s.id)),w=t.status==="pending"&&t.approvals.length>0&&t.approvals.every(B=>B.status==="approved"),j=async B=>{if(!(!s&&!i)){u(!0);try{const q=new Date().toISOString(),F={status:B,updatedAt:q};if(B==="completed")F.completedAt=q,F.completedBy=(s==null?void 0:s.id)||"admin";else if(B==="closed")F.closedAt=q;else if(B==="in_progress"&&t.status==="pending"&&!w){u(!1);return}await zs(t.id,F),n()}catch(q){console.error("Error updating task status:",q)}finally{u(!1)}}},S=async B=>{if(s){u(!0);try{const q=new Date().toISOString(),F=B==="approve"?"approved":"rejected",V=t.approvals.map(W=>W.userId===s.id?{...W,status:F,comment:B==="reject"&&g||void 0,updatedAt:q}:W);_||V.push({userId:s.id,status:F,comment:B==="reject"&&g||void 0,updatedAt:q});const D={approvals:V,updatedAt:q};B==="reject"?D.status="rejected":B==="approve"&&(D.status="in_progress"),await zs(t.id,D),B==="reject"&&(h(!1),m("")),n()}catch(q){console.error("Error approving task:",q)}finally{u(!1)}}},A=()=>{switch(t.priority){case"high":return o==="dark"?"text-red-400":"text-red-600";case"medium":return o==="dark"?"text-yellow-400":"text-yellow-600";case"low":return o==="dark"?"text-gray-400":"text-gray-600"}},x=B=>({high:{label:"",classes:o==="dark"?"bg-red-500/20 text-red-300 border-red-500/40":"bg-red-50 text-red-600 border-red-200"},medium:{label:"",classes:o==="dark"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/40":"bg-yellow-50 text-yellow-700 border-yellow-200"},low:{label:"",classes:o==="dark"?"bg-gray-500/20 text-gray-300 border-gray-500/40":"bg-gray-50 text-gray-700 border-gray-200"}})[B],H=()=>({pending:o==="dark"?"bg-yellow-500/20 border-yellow-500/50 text-yellow-400":"bg-yellow-50 border-yellow-200 text-yellow-700",in_progress:o==="dark"?"bg-blue-500/20 border-blue-500/50 text-blue-400":"bg-blue-50 border-blue-200 text-blue-700",completed:o==="dark"?"bg-green-500/20 border-green-500/50 text-green-400":"bg-green-50 border-green-200 text-green-700",closed:o==="dark"?"bg-gray-500/20 border-gray-500/50 text-gray-400":"bg-gray-50 border-gray-200 text-gray-700",rejected:o==="dark"?"bg-red-500/20 border-red-500/50 text-red-400":"bg-red-50 border-red-200 text-red-700"})[t.status],U=()=>{const B={green:{bg:o==="dark"?"bg-green-500/20":"bg-green-50",text:o==="dark"?"text-green-400":"text-green-700"},blue:{bg:o==="dark"?"bg-blue-500/20":"bg-blue-50",text:o==="dark"?"text-blue-400":"text-blue-700"},purple:{bg:o==="dark"?"bg-purple-500/20":"bg-purple-50",text:o==="dark"?"text-purple-400":"text-purple-700"},red:{bg:o==="dark"?"bg-red-500/20":"bg-red-50",text:o==="dark"?"text-red-400":"text-red-700"},yellow:{bg:o==="dark"?"bg-yellow-500/20":"bg-yellow-50",text:o==="dark"?"text-yellow-400":"text-yellow-700"},indigo:{bg:o==="dark"?"bg-indigo-500/20":"bg-indigo-50",text:o==="dark"?"text-indigo-400":"text-indigo-700"}};return B[C.color]||B.green};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`${k} rounded-xl border-2 ${v} p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all ${o==="dark"?"hover:border-green-500/50":"hover:border-green-300"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("h3",{className:`text-lg sm:text-xl font-bold ${b} truncate`,children:t.title})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs sm:text-sm font-medium ${U().bg} ${U().text}`,children:[C.icon," ",C.label]}),a.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs sm:text-sm font-medium border ${H()}`,children:E.label}),a.jsx("span",{className:`text-xs sm:text-sm font-medium ${A()}`,children:t.priority==="high"?" ":t.priority==="medium"?" ":" "})]})]}),M&&a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx("button",{onClick:()=>e(t),className:`p-2 rounded-lg transition-colors ${o==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,title:"",children:a.jsx(Ir,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>r(t.id),className:`p-2 rounded-lg transition-colors ${o==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,title:"",children:a.jsx(er,{className:"w-4 h-4"})})]})]}),t.description&&a.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"} mb-4 line-clamp-2`,children:t.description}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[a.jsx(la,{className:`w-4 h-4 ${o==="dark"?"text-blue-400":"text-blue-600"}`}),a.jsx("span",{className:`font-medium ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:":"}),a.jsx("span",{className:o==="dark"?"text-gray-400":"text-gray-600",children:(y==null?void 0:y.name)||""})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[a.jsx(tn,{className:`w-4 h-4 ${o==="dark"?"text-green-400":"text-green-600"}`}),a.jsx("span",{className:`font-medium ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:":"})]}),L.length>0?a.jsx("div",{className:"mt-2 space-y-2",children:L.map(B=>{const q=x(B.priority);return a.jsxs("div",{className:`p-3 rounded-lg border ${v} ${o==="dark"?"bg-gray-800/70":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-sm font-medium ${o==="dark"?"text-gray-100":"text-gray-800"}`,children:B.member.name}),a.jsx("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${q.classes}`,children:q.label})]}),B.comment&&a.jsx("p",{className:`text-xs mt-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:B.comment})]},B.member.id)})}):a.jsx("span",{className:"text-gray-500",children:" "})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-xs sm:text-sm",children:[a.jsx(Zr,{className:`w-4 h-4 ${o==="dark"?"text-gray-400":"text-gray-500"}`}),a.jsxs("span",{className:o==="dark"?"text-gray-400":"text-gray-600",children:[": ",oe(new Date(t.dueDate),"dd.MM.yyyy")," ",t.dueTime]}),a.jsx(H1,{dueDate:t.dueDate,dueTime:t.dueTime,theme:o})]}),t.status==="pending"&&t.approvals.length>0&&a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[a.jsx(po,{className:`w-4 h-4 ${o==="dark"?"text-yellow-400":"text-yellow-600"}`}),a.jsxs("span",{className:o==="dark"?"text-yellow-400":"text-yellow-600",children:[": ",t.approvals.filter(B=>B.status==="approved").length,"/",t.approvals.length]})]})]}),a.jsxs("div",{className:`flex flex-wrap gap-2 pt-4 border-t ${v}`,children:[I&&!_&&a.jsxs("button",{onClick:()=>S("approve"),className:"flex-1 sm:flex-none px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(Bo,{className:"w-4 h-4"}),""]}),I&&!_&&a.jsxs("button",{onClick:()=>h(!0),className:"flex-1 sm:flex-none px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"}),""]}),t.status==="pending"&&w&&(M||I)&&a.jsxs("button",{onClick:()=>j("in_progress"),disabled:l,className:"flex-1 sm:flex-none px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[a.jsx(ei,{className:"w-4 h-4"})," "]}),t.status==="in_progress"&&(M||R.includes((s==null?void 0:s.id)||""))&&a.jsxs("button",{onClick:()=>j("completed"),disabled:l,className:"flex-1 sm:flex-none px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[a.jsx(qm,{className:"w-4 h-4"}),""]}),t.status==="completed"&&M&&a.jsxs("button",{onClick:()=>j("closed"),disabled:l,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[a.jsx(Bj,{className:"w-4 h-4"}),""]})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`${k} rounded-xl p-6 max-w-md w-full border-2 ${v}`,children:[a.jsx("h3",{className:`text-lg font-bold mb-4 ${b}`,children:" "}),a.jsx("textarea",{value:g,onChange:B=>m(B.target.value),placeholder:"  ",rows:3,className:`w-full px-4 py-2 rounded-lg border ${v} ${o==="dark"?"bg-gray-700":"bg-gray-50"} ${b} mb-4 focus:outline-none focus:ring-2 focus:ring-green-500/50`}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>S("reject"),disabled:l||!g.trim(),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors bg-red-500 hover:bg-red-600 text-white disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>{h(!1),m("")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:""})]})]})})]})},K3=({selectedCategory:t,selectedStatus:e,selectedUsers:r,onCategoryChange:n,onStatusChange:s,onUsersChange:i,onClear:o})=>{const{theme:l}=Be(),u=l==="dark"?"text-white":"text-gray-900",d=l==="dark"?"bg-gray-800":"bg-white",h=l==="dark"?"border-gray-600":"border-gray-300",g=t!=="all"||e!=="all"||r.length>0;return a.jsxs("div",{className:`${d} rounded-xl border-2 ${h} p-4 sm:p-6 shadow-lg sticky top-4`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[a.jsx("div",{className:`p-2 rounded-lg ${l==="dark"?"bg-green-500/20":"bg-green-50"}`,children:a.jsx(ey,{className:`w-5 h-5 ${l==="dark"?"text-green-400":"text-green-600"}`})}),a.jsx("h3",{className:`text-lg font-bold ${u} flex-1`,children:""}),g&&a.jsxs("button",{onClick:o,className:`px-3 py-1.5 rounded-lg text-sm transition-all flex items-center gap-2 ${l==="dark"?"bg-red-500/20 hover:bg-red-500/30 text-red-400 border border-red-500/50":"bg-red-50 hover:bg-red-100 text-red-600 border border-red-200"}`,children:[a.jsx(br,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:""})]})]}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-semibold mb-3 ${u} flex items-center gap-2`,children:[a.jsx(pr,{className:"w-4 h-4"}),""]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>n("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${t==="all"?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:""}),Object.entries(Hm).map(([m,{label:b,icon:k}])=>a.jsxs("button",{onClick:()=>n(m),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${t===m?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:[a.jsx("span",{className:"mr-1.5",children:k}),b]},m))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-semibold mb-3 ${u} flex items-center gap-2`,children:[a.jsx(ey,{className:"w-4 h-4"}),""]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${e==="all"?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:""}),Object.entries(iu).map(([m,{label:b,color:k}])=>{const v={yellow:{active:l==="dark"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-yellow-50 border-yellow-500 text-yellow-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},blue:{active:l==="dark"?"bg-blue-500/20 border-blue-500 text-blue-400":"bg-blue-50 border-blue-500 text-blue-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},green:{active:l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},gray:{active:l==="dark"?"bg-gray-500/20 border-gray-500 text-gray-400":"bg-gray-50 border-gray-500 text-gray-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},red:{active:l==="dark"?"bg-red-500/20 border-red-500 text-red-400":"bg-red-50 border-red-500 text-red-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}},C=v[k]||v.gray;return a.jsx("button",{onClick:()=>s(m),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${e===m?C.active:C.inactive}`,children:b},m)})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-semibold mb-3 ${u} flex items-center gap-2`,children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),""]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>i([]),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${r.length===0?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:""}),_e.map(m=>{const b=r.includes(m.id);return a.jsx("button",{onClick:()=>{i(b?r.filter(k=>k!==m.id):[...r,m.id])},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${b?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:m.name},m.id)})]})]})]})]})},Q3=({tasks:t,onUpdate:e,onEdit:r,onDelete:n})=>{const{theme:s}=Be(),{user:i}=Nt(),{isAdmin:o}=Yt(),[l,u]=P.useState(null),[d,h]=P.useState(null),[g,m]=P.useState(null),[b,k]=P.useState(""),[v,C]=P.useState(null),[E,y]=P.useState(null),[N,R]=P.useState(null),L=s==="dark"?"text-white":"text-gray-900",M=s==="dark"?"bg-gray-800":"bg-white",I=s==="dark"?"border-gray-600":"border-gray-300",_=["pending","in_progress","completed","closed","rejected"],w=J=>J.assignees&&J.assignees.length>0?J.assignees:J.assignedTo.map(X=>({userId:X,priority:"medium"})),j=J=>w(J).map(X=>X.userId),S=J=>t.filter(X=>X.status===J),A=(J,X)=>{if(v){J.preventDefault();return}u(X),J.dataTransfer.effectAllowed="move",J.dataTransfer.setData("text/plain",X.id)},x=J=>{J.preventDefault(),J.dataTransfer.dropEffect="move"},H=()=>{u(null)},U=(J,X)=>{if(v||X.status==="rejected")return;const G=J.touches[0];y({x:G.clientX,y:G.clientY,task:X})},B=J=>{if(!E)return;J.preventDefault();const X=J.touches[0],G=document.elementFromPoint(X.clientX,X.clientY);if(G){const K=G.closest("[data-status]");if(K){const Ne=K.getAttribute("data-status");Ne&&R(Ne)}}},q=async(J,X)=>{if(!E)return;const G=J.changedTouches[0],K=document.elementFromPoint(G.clientX,G.clientY);if(K){const Ne=K.closest("[data-status]");if(Ne){const ke=Ne.getAttribute("data-status");ke&&ke!==X&&E.task.status!=="rejected"&&await V(E.task,ke)}}y(null),R(null)},F=async(J,X)=>{if(J.preventDefault(),J.stopPropagation(),!l||l.status===X||v){u(null);return}if(l.status==="rejected"&&X!=="pending"){u(null);return}if(X==="rejected"){u(null);return}C(l.id);try{const G=new Date().toISOString(),K={status:X,updatedAt:G};if(X==="completed")K.completedAt=G,K.completedBy=(i==null?void 0:i.id)||"admin";else if(X==="closed")K.closedAt=G;else if(X==="in_progress"&&l.status==="pending"){if(!l.approvals.every(ke=>ke.status==="approved")){C(null),u(null);return}}else X==="pending"&&l.status==="rejected"&&(K.approvals=j(l).map(Ne=>({userId:Ne,status:"pending",updatedAt:G})));await zs(l.id,K),e()}catch(G){console.error("Error updating task status:",G)}finally{C(null),u(null)}},V=async(J,X)=>{if(J.status===X||v===J.id){h(null);return}C(J.id);try{const G=new Date().toISOString(),K={status:X,updatedAt:G};if(X==="completed")K.completedAt=G,K.completedBy=(i==null?void 0:i.id)||"admin";else if(X==="closed")K.closedAt=G;else if(X==="in_progress"&&J.status==="pending"){if(!J.approvals.every(ke=>ke.status==="approved")){C(null),h(null);return}}else X==="pending"&&J.status==="rejected"&&(K.approvals=j(J).map(Ne=>({userId:Ne,status:"pending",updatedAt:G})));await zs(J.id,K),e(),h(null)}catch(G){console.error("Error updating task status:",G)}finally{C(null)}},D=async(J,X)=>{if(i){C(J.id);try{const G=new Date().toISOString(),K=X==="approve"?"approved":"rejected",Ne=J.approvals.map(se=>se.userId===i.id?{...se,status:K,comment:X==="reject"&&b||void 0,updatedAt:G}:se);J.approvals.find(se=>se.userId===i.id)||Ne.push({userId:i.id,status:K,comment:X==="reject"&&b||void 0,updatedAt:G});const ke={approvals:Ne,updatedAt:G};X==="reject"?ke.status="rejected":X==="approve"&&(ke.status="in_progress"),await zs(J.id,ke),e(),X==="reject"&&(m(null),k(""))}catch(G){console.error("Error approving task:",G)}finally{C(null)}}},W=async J=>{if(!(!i||J.createdBy!==i.id)){C(J.id);try{const X=new Date().toISOString();await zs(J.id,{status:"pending",approvals:j(J).map(G=>({userId:G,status:"pending",updatedAt:X})),updatedAt:X}),e()}catch(X){console.error("Error resubmitting task:",X)}finally{C(null)}}},$=J=>({pending:s==="dark"?"bg-yellow-500/20 border-yellow-500/50":"bg-yellow-50 border-yellow-200",in_progress:s==="dark"?"bg-blue-500/20 border-blue-500/50":"bg-blue-50 border-blue-200",completed:s==="dark"?"bg-green-500/20 border-green-500/50":"bg-green-50 border-green-200",closed:s==="dark"?"bg-gray-500/20 border-gray-500/50":"bg-gray-50 border-gray-200",rejected:s==="dark"?"bg-red-500/20 border-red-500/50":"bg-red-50 border-red-200"})[J],te=J=>({pending:s==="dark"?"text-yellow-400":"text-yellow-700",in_progress:s==="dark"?"text-blue-400":"text-blue-700",completed:s==="dark"?"text-green-400":"text-green-700",closed:s==="dark"?"text-gray-400":"text-gray-700",rejected:s==="dark"?"text-red-400":"text-red-700"})[J],ue=J=>{const X=new Date;return new Date(`${J.dueDate}T${J.dueTime}`)<X&&J.status!=="completed"&&J.status!=="closed"&&J.status!=="rejected"},le=J=>{if(J.status!=="pending"||!i||!j(J).includes(i.id))return!1;const G=J.approvals.find(K=>K.userId===i.id);return!G||G.status==="pending"},fe=J=>J.status!=="rejected"||!i?!1:J.createdBy===i.id||o;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto pb-4 -mx-4 px-4",children:a.jsx("div",{className:"flex gap-3 sm:gap-4 min-w-max",children:_.map(J=>{const X=S(J),G=iu[J];return a.jsxs("div",{"data-status":J,className:`flex-shrink-0 w-[280px] sm:w-80 ${M} rounded-xl border-2 ${I} p-3 sm:p-4 ${N===J?"border-green-500":""}`,onDragOver:x,onDrop:K=>F(K,J),onTouchMove:B,children:[a.jsx("div",{className:`mb-3 sm:mb-4 pb-2 sm:pb-3 border-b ${I}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:`text-base sm:text-lg font-bold ${te(J)}`,children:G.label}),a.jsx("span",{className:`px-2 py-1 rounded-lg text-xs sm:text-sm font-medium ${$(J)} ${te(J)}`,children:X.length})]})}),a.jsxs("div",{className:"space-y-2 sm:space-y-3 max-h-[calc(100vh-280px)] sm:max-h-[calc(100vh-300px)] overflow-y-auto",children:[X.map(K=>{var Ee;const Ne=ue(K),ke=o||(i==null?void 0:i.id)===K.createdBy,se=le(K),pe=fe(K),gt=w(K).map(ve=>{const Xt=_e.find(at=>at.id===ve.userId);return Xt?{...ve,member:Xt}:null}).filter(Boolean);return a.jsxs("div",{draggable:!v&&K.status!=="rejected",onDragStart:ve=>A(ve,K),onDragEnd:H,onTouchStart:ve=>U(ve,K),onTouchEnd:ve=>q(ve,J),className:`${M} rounded-lg border-2 ${I} p-2.5 sm:p-3 cursor-move hover:shadow-lg transition-all ${(l==null?void 0:l.id)===K.id||(E==null?void 0:E.task.id)===K.id?"opacity-50":""} ${Ne?"border-red-500":""} ${v===K.id?"opacity-50 pointer-events-none":""} ${K.status==="rejected"?"opacity-75":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h4",{className:`font-semibold text-xs sm:text-sm ${L} flex-1`,children:K.title}),a.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:a.jsxs("div",{className:"relative lg:hidden",children:[a.jsx("button",{onClick:()=>h((d==null?void 0:d.id)===K.id?null:K),className:`p-1 rounded ${s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:a.jsx($j,{className:"w-4 h-4"})}),(d==null?void 0:d.id)===K.id&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(null)}),a.jsx("div",{className:`absolute right-0 top-8 z-50 ${M} rounded-lg shadow-xl border-2 ${I} min-w-[200px]`,children:a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:`text-xs font-medium mb-2 px-2 py-1 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:" :"}),_.filter(ve=>ve!=="rejected"||K.status==="rejected").map(ve=>a.jsx("button",{onClick:()=>V(K,ve),disabled:K.status===ve||v===K.id,className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors mb-1 ${K.status===ve?$(ve):s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"} ${K.status===ve?te(ve):L} disabled:opacity-50`,children:iu[ve].label},ve)),ke&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`border-t ${I} my-2`}),a.jsx("button",{onClick:()=>{h(null),r(K)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors mb-1 ${s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"} ${L}`,children:""}),a.jsx("button",{onClick:()=>{h(null),n(K.id)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${s==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,children:""})]})]})})]})]})})]}),a.jsxs("div",{className:"space-y-1.5 text-xs mb-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:`flex items-center gap-1 ${s==="dark"?"text-blue-400":"text-blue-600"}`,children:[a.jsx("span",{className:"font-medium",children:":"}),a.jsx("span",{className:s==="dark"?"text-gray-400":"text-gray-600",children:((Ee=_e.find(ve=>ve.id===K.createdBy))==null?void 0:Ee.name)||""})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("div",{className:`flex items-center gap-1 ${s==="dark"?"text-green-400":"text-green-600"}`,children:a.jsx("span",{className:"font-medium",children:":"})}),gt.length>0?gt.map(ve=>a.jsxs("div",{className:`text-[11px] sm:text-xs ${s==="dark"?"text-gray-300":"text-gray-700"} flex flex-wrap gap-1`,children:[a.jsx("span",{className:"font-medium",children:ve.member.name}),a.jsx("span",{children:""}),a.jsx("span",{children:ve.priority==="high"?"":ve.priority==="medium"?"":""}),ve.comment&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"truncate max-w-[140px] sm:max-w-[180px]",children:ve.comment})]})]},ve.member.id)):a.jsx("span",{className:"text-gray-500",children:" "})]})]}),a.jsxs("div",{className:`flex items-center gap-1 flex-wrap ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[a.jsxs("span",{children:[" ",oe(new Date(K.dueDate),"dd.MM.yyyy")]}),a.jsxs("span",{children:[" ",K.dueTime]}),a.jsx(H1,{dueDate:K.dueDate,dueTime:K.dueTime,theme:s,size:"compact"})]}),K.description&&a.jsx("p",{className:`line-clamp-2 ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:K.description}),a.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:a.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${$(J)} ${te(J)}`,children:K.category==="trading"?"":K.category==="learning"?"":K.category==="technical"?"":K.category==="stream"?"":K.category==="research"?"":(K.category==="organization","")})})]}),se&&a.jsxs("div",{className:`flex gap-2 mt-2 pt-2 border-t ${I}`,children:[a.jsxs("button",{onClick:()=>D(K,"approve"),className:"flex-1 px-2 py-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-1",children:[a.jsx(Bo,{className:"w-3 h-3"}),""]}),a.jsxs("button",{onClick:()=>{m({task:K}),k("")},className:"flex-1 px-2 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-1",children:[a.jsx(br,{className:"w-3 h-3"}),""]})]}),pe&&a.jsx("div",{className:`mt-2 pt-2 border-t ${I}`,children:a.jsxs("button",{onClick:()=>W(K),disabled:v===K.id,className:"w-full px-2 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-1 disabled:opacity-50",children:[a.jsx(Lj,{className:"w-3 h-3"}),"  "]})})]},K.id)}),X.length===0&&a.jsxs("div",{className:`text-center py-6 sm:py-8 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:[a.jsx(Zs,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-xs sm:text-sm",children:" "})]})]})]},J)})})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`${M} rounded-xl p-6 max-w-md w-full border-2 ${I}`,children:[a.jsx("h3",{className:`text-lg font-bold mb-4 ${L}`,children:" "}),a.jsx("textarea",{value:b,onChange:J=>k(J.target.value),placeholder:"  ",rows:3,className:`w-full px-4 py-2 rounded-lg border ${I} ${s==="dark"?"bg-gray-700":"bg-gray-50"} ${L} mb-4 focus:outline-none focus:ring-2 focus:ring-green-500/50`}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>g.task&&D(g.task,"reject"),disabled:v===g.task.id||!b.trim(),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors bg-red-500 hover:bg-red-600 text-white disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>{m(null),k("")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:""})]})]})})]})},Y3=()=>{const{theme:t}=Be(),{user:e}=Nt(),[r,n]=P.useState(!1),[s,i]=P.useState(null),[o,l]=P.useState([]),[u,d]=P.useState(!0),[h,g]=P.useState("all"),[m,b]=P.useState("all"),[k,v]=P.useState([]),[C,E]=P.useState("kanban"),y=t==="dark"?"text-white":"text-gray-900",N=t==="dark"?"bg-gray-800":"bg-white";P.useEffect(()=>{R()},[e]),P.useEffect(()=>{R()},[h,m,k]);const R=async()=>{d(!0);try{const A={};h!=="all"&&(A.category=h),m!=="all"&&(A.status=m),k.length>0&&(A.assignedTo=k);const x=await C1(A);l(x)}catch(A){console.error("Error loading tasks:",A)}finally{d(!1)}},L=A=>{i(A),n(!0)},M=async A=>{if(confirm(" ,     ?"))try{await A1(A),R()}catch(x){console.error("Error deleting task:",x)}},I=()=>{n(!1),i(null)},_=()=>{n(!1),i(null),R()},w=()=>{g("all"),b("all"),v([])},j=o.filter(A=>!(h!=="all"&&A.category!==h||m!=="all"&&A.status!==m||k.length>0&&!k.some(x=>A.assignedTo.includes(x)))),S={pending:o.filter(A=>A.status==="pending").length,inProgress:o.filter(A=>A.status==="in_progress").length,completed:o.filter(A=>A.status==="completed").length,closed:o.filter(A=>A.status==="closed").length};return a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${N} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-start lg:justify-between mb-4 sm:mb-6",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[a.jsx(Zs,{className:`w-6 h-6 sm:w-8 sm:h-8 ${t==="dark"?"text-green-400":"text-green-600"}`}),a.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${y} flex items-center gap-2`,children:["",a.jsx(pr,{className:`w-5 h-5 sm:w-6 sm:h-6 ${t==="dark"?"text-yellow-400":"text-yellow-600"}`})]})]}),a.jsx("p",{className:`text-sm sm:text-base ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"    "})]})}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[a.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-yellow-400":"text-yellow-700"}`,children:" "}),a.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.pending})]}),a.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-blue-400":"text-blue-700"}`,children:" "}),a.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.inProgress})]}),a.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-green-400":"text-green-700"}`,children:""}),a.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.completed})]}),a.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-500/10 border-gray-500/30":"bg-gray-50 border-gray-200"}`,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-gray-400":"text-gray-700"}`,children:""}),a.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.closed})]})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6",children:[a.jsx("div",{className:"lg:w-80 flex-shrink-0",children:a.jsx(K3,{selectedCategory:h,selectedStatus:m,selectedUsers:k,onCategoryChange:g,onStatusChange:b,onUsersChange:v,onClear:w})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 gap-3",children:[a.jsxs("h2",{className:`text-xl font-bold ${y}`,children:[" (",j.length,")"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`flex rounded-lg border-2 ${t==="dark"?"border-gray-600":"border-gray-300"} overflow-hidden`,children:[a.jsx("button",{onClick:()=>E("kanban"),className:`px-3 py-2 transition-colors ${C==="kanban"?"bg-green-500 text-white":t==="dark"?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-50"}`,title:"Kanban ",children:a.jsx(Cj,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>E("list"),className:`px-3 py-2 transition-colors ${C==="list"?"bg-green-500 text-white":t==="dark"?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-50"}`,title:"",children:a.jsx(Aj,{className:"w-4 h-4"})})]}),a.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center gap-2",children:[a.jsx(oa,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:" "}),a.jsx("span",{className:"sm:hidden",children:""})]})]})]}),u?a.jsx("div",{className:`${N} rounded-xl p-8 text-center ${y}`,children:a.jsx("div",{className:"animate-pulse",children:"..."})}):j.length===0?a.jsxs("div",{className:`${N} rounded-xl p-8 text-center border-2 ${t==="dark"?"border-gray-600":"border-gray-300"}`,children:[a.jsx(Zs,{className:`w-12 h-12 mx-auto mb-4 ${t==="dark"?"text-gray-600":"text-gray-400"}`}),a.jsx("p",{className:`text-lg font-medium ${y} mb-2`,children:" "}),a.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:h!=="all"||m!=="all"||k.length>0?"  ":"  "})]}):C==="kanban"?a.jsx(Q3,{tasks:j,onUpdate:R,onEdit:L,onDelete:M}):a.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:j.map(A=>a.jsx(G3,{task:A,onEdit:L,onDelete:M,onUpdate:R},A.id))})]})]}),r&&a.jsx(B3,{onClose:I,onSave:_,editingTask:s})]})})},ph=[{id:"all",name:" ",icon:a.jsx(Km,{className:"w-5 h-5"}),color:"text-blue-600",darkColor:"text-blue-400"},{id:"auth",name:"",icon:a.jsx(Pj,{className:"w-5 h-5"}),color:"text-purple-600",darkColor:"text-purple-400"},{id:"slots",name:" ",icon:a.jsx(Zr,{className:"w-5 h-5"}),color:"text-green-600",darkColor:"text-green-400"},{id:"status",name:"",icon:a.jsx(Gm,{className:"w-5 h-5"}),color:"text-orange-600",darkColor:"text-orange-400"},{id:"rating",name:"",icon:a.jsx(di,{className:"w-5 h-5"}),color:"text-red-600",darkColor:"text-red-400"},{id:"earnings",name:"",icon:a.jsx(Wu,{className:"w-5 h-5"}),color:"text-yellow-600",darkColor:"text-yellow-400"},{id:"calls",name:" ",icon:a.jsx(qi,{className:"w-5 h-5"}),color:"text-emerald-600",darkColor:"text-emerald-400"},{id:"tasks",name:"",icon:a.jsx(Zs,{className:"w-5 h-5"}),color:"text-lime-600",darkColor:"text-lime-400"},{id:"admin",name:"",icon:a.jsx(en,{className:"w-5 h-5"}),color:"text-indigo-600",darkColor:"text-indigo-400"},{id:"messages",name:"",icon:a.jsx(dw,{className:"w-5 h-5"}),color:"text-cyan-600",darkColor:"text-cyan-400"},{id:"referrals",name:"",icon:a.jsx(tn,{className:"w-5 h-5"}),color:"text-pink-600",darkColor:"text-pink-400"},{id:"edit",name:"",icon:a.jsx(Ir,{className:"w-5 h-5"}),color:"text-teal-600",darkColor:"text-teal-400"},{id:"interface",name:" ",icon:a.jsx(cw,{className:"w-5 h-5"}),color:"text-violet-600",darkColor:"text-violet-400"}],hc=[{question:"    ?",answer:`1.     /start,        " : "
2.        
3.  /menu     
4.      ,    

     ,      .`,category:"auth"},{question:"  ?",answer:`   :
1.   /start
2.      
3.   : " : " (: mylogin : mypassword)
4.     :
     
     
     
       

  :
1.  
2.      : ""  ""
3.   "":
     
     
4.   "":
       
5.    (/) -     
6.  ""
7.       

:
  :  /logout
  :      

:
       
       
       /start      
  ,    ,      
          

  :
    ( :     )
 ,      
   ,   : @artyommedoed`,category:"auth"},{question:"      ?",answer:`    :
1.     
2.    "" ( )
3.   
4.  ""
5.       

   :
    ""     -  
    
     

  :
      
  / 
     
    
      

:
    (     )
     ""   

:
      
       `,category:"admin"},{question:"   ?",answer:` :
1.   /add_call
2.      :

 1 - :
    : Solana, BSC, Ethereum, Base, Ton, Tron, SUI  CEX 
    

 2 -  :
    (: PEPE, DOGE, BONK)
       (: PEPE)

 3 -  :
    (: PEPE/USDT)

 4 -  :
        
       (: 1000000  1000000-1500000)

 5 - :
       
       (: 2000000, 3000000, 5000000)

 6 - :
  : ,   

 7 - :
  ,    

 8 -  :
       ( "-"  )

 9 - :
    ( "-"  )

 :
1.    "Call"
2.   " "
3.     
4.  ""

 :
 /my_calls -  
 /all_calls -    
  "Call"   -      `,category:"calls"},{question:"   ?",answer:` :

 :
 /my_calls -     
   :
  -    
  -   
  -   ()
  -  ()
  - 
  -  (//)
  -  

 :
 /all_calls -     
    
    

 :
1.    "Call"
2.   :
      
      ,   
      
      

:
  "Call"   :
  -   
  -   
  -  PNL
  -  // 
  -  

  :
  :       
       /`,category:"calls"},{question:"    ?",answer:`  :

1. :
 Solana, BSC, Ethereum, Base, Ton, Tron, SUI  CEX 
  ,    

2.   ():
   (: PEPE)
   ,   
      

3.  :
   (: PEPE/USDT)
 ,     

4.  :
     ( )
      
 : 1000000  1000000-1500000

5. :
      
      
 : 2000000, 3000000, 5000000

6. :
  -   (-)
  -   (-)
  -   (-)

7. :
  ,     
     

8.  :
       
     

9. :
    
    

:
       ,    
         `,category:"calls"},{question:"   Management  ?",answer:` :

:
1. :
       ,   -  
        
        
       
        

2. :
        
        
       
         

 :
  -   
  -      
  -   

 :
  :     
  :     
 :   ( )  - ( )
     

:
     
     
   

:
  " "  " "
    

 :
  , , , 
   ( )
   `,category:"interface"},{question:"   ?",answer:`  :
   ,   
     
     

 :
  Management (  )
    
     
  

  :
1.     public/avatars/
2.     :
    artyom.jpg -  
    adel.jpg -  
    kseniya.jpg -  
    olga.jpg -  
    anastasia.jpg -  

  :
 : JPG, PNG   -
  : 200x200   
     
   : 1:1 ()

FALLBACK:
       :
  -    
  -     
  -     

:
     (public/avatars/)
 ,      
     `,category:"interface"},{question:"   ?",answer:` :

  :
1.  
2.           
3.   :
     () -   
     () -   
4.          

 :
        
   
     

 :

 :
   
  
   
    

 :
   
  
   
    /
    

:
     
       
     `,category:"interface"},{question:"     ?",answer:` :

 :
    ( blue-500  blue-600)
   
  
  :
  -  
  -  ,      

 :
    ( gray-500  gray-600)
   
  
  :
  -  
  -  ,     

:
     
 -  (gray-700)   
    
    

:
 "" -   
 "" -    
 "" -  

  :
  ,    
     
   
   `,category:"slots"},{question:"   ?",answer:` :
1.   /add_slot
2.     .. (: 25.12.2024)
3.      : (: 10:00)
4.    (: 14:00)
5.     (     "-"  )
6.   ()

 :
1.    Management
2.   " "
3.  :   ( ), ,   ,   
4.  ""

           .`,category:"slots"},{question:"   ?",answer:`      :

 :
-       . ,    19:00-21:00,    20:00-22:00
-      ,            

 :
-           
-  3      

:
  19:00-21:00   20:00-22:00  
  19:00-21:00   18:00-20:00  
  19:00-21:00   21:30-23:00  `,category:"slots"},{question:"  ?",answer:` :
1.   /schedule
2.      
3.   " "  " "    

  :
     (   ID)
 ,     
     
 ID    /

 :
1.    Management
2.        
3.      
4.    

 :
   
  
  
  `,category:"slots"},{question:"  ?",answer:` :
1.   /dayoff
2.      ..
3.   (,  "-"  )

 :
  2   
   3        
       (   )

 :
1.    Management
2.   " "
3.     ( )
4.   ()
5.  ""

          .`,category:"status"},{question:"  ?",answer:` :
1.   /sick
2.      ..
3.      (    )
4.   ()

 :
         + 2  
       
  14    
      1 

 :
1.    Management
2.   " "
3.   (     )
4.    `,category:"status"},{question:"  ?",answer:` :
1.   /vacation
2.       ..
3.    
4.   ()

 :
  14    
   6   
          

 :
1.    Management
2.   " "
3.     
4.    `,category:"status"},{question:"   ?",answer:`    ( 100%)   7   :

1.  (10%)
    0-2    = 10%
     2  = 0%

2.  (10%)
     7    = 10%
     7  = 0%

3.  (10%)
     7    = 10%
     7  = 0%

4.   ( 25%)
    30+    = 25%
    20-29  = 15%
     20  = 0%

5.  ( 30%)
    6000+    = 30%
    3000-5999  = 15%
     3000  = 0%

6.  ( 30%)
    5%   
     30% (6 )

7.    (15%)
     50    = 15%
    50   = 0%

 :
 /my_stats -     
 /team_kpd -   
  ""  `,category:"rating"},{question:"    ?",answer:` :

 :
  2   
   3     
     

 :
  :   + 2  
  14   
      

 :
  14   
   6   

 :
  ,       
  3    

 :
  :   
 :   

 :
  20      
  50      
  3000     

  :
      ,    .`,category:"rating"},{question:"  ?",answer:` :
1.   /add_earning
2.     ..  ""
3.    ( , : 5000)
4.    ( , : 1000)

:
        
       

 :
1.    Earnings
2.   " "
3.   (  "")
4.      
5.     (  )
6.  ""

 :
 /earnings_day -   
 /earnings_week -   `,category:"earnings"},{question:"    ?",answer:` :
1.   /add_pool
2.      
3.  ,   ID
4.  ID 
5.       ( )

:
         (  )
          
     

 :
1.    Earnings
2.   "  "
3.     
4.   
5.  ""

  -          .`,category:"earnings"},{question:"   ?",answer:`  :
1.   /admin
2.   
3.      

  :
1.       ""
2.   
3.     

 :

  :
     
       
    
    (  , ,  )
    

  :
  ,      
   
    
    

  :
      (  )
        
    

  :
      
    

 :
     (/remove_message)
     
      
   ""  

:
  : /logout -   
  :      
     ""   

:
     
     
        `,category:"admin"},{question:"     ?",answer:`:

 :
1.    "Call"
2.     
3.    ( )
4.    
5.  ""

:

 :
1.    "Call"
2.   
3.    ( )
4.  

 :
    /   
   /  
        

  :
   :
  - 
  -  
  - 
  -  
  - 
  - 
  - 
  -  
  - 
  -  (//)

:
     
       
        ""`,category:"calls"},{question:"     Call?",answer:`  :
   
   
   
   
  PNL  
     

  :
    
 // 
  PNL 
  PNL 
    

:
      
     
   MAX , PNL      
      

:
    
    
    
   `,category:"calls"},{question:"   ?",answer:`     :

 :
      (, , , ,   ..)
   
    (  )

  :
   (  /)
   
     ( )

:
        50    (  15%  )
   ,    
     ,        /remove_message ( reply  )

  :
 /my_stats -     
  ""   -  `,category:"messages"},{question:" ,     ?",answer:`     ,      .     :

 :
1.   /remove_message
2.  (reply)    (    )   ID 
3.        

:
 /remove_message ( reply  ) -   ID
 /remove_message [messageId] -  ID 

 :
     messages
   ratings   1
         

:
       
        
     ,  ID         `,category:"messages"},{question:"  ?",answer:`         :

  :
 :
1.   /add_referral
2.   
3.  ID  (username  )
4.   (,  "-"  )
5.   ()

 :
1.    Rating
2.  " "
3.  

 :
 5%     
  30% (6 )
     30 

 :
 /my_referrals -   
 /edit_referral [ID] -  
 /delete_referral [ID] -  

        Rating.`,category:"referrals"},{question:"    ?",answer:`:

  (  ):
 /delete_slot [ID] -  
 /delete_dayoff [ID] -  
 /delete_sick [ID] -  
 /delete_vacation [ID] -  
 /delete_earning [ID] -  
 /delete_referral [ID] -  

  :
 /bulk_delete_slots -  :
  -    (      )
  -   (    )
  -    (   )

 :
    
   
    ( )
  

:

 :
     
    /edit_slot [ID],   
      ,     

 :
    
   
    ( )
    

  :
  : , , , 
 : , 
 : , , , 
  :    
 : , , 

:
    /   
      
        `,category:"edit"},{question:"      ?",answer:`   MANAGEMENT:

 :
 "" -      
 "" -     
 "" -   

  :
     
 "  " -  
     (  )

:
 "" -      
 "" -     
      

   CALL:
      
  :
  -   (: PEPE)
  -   (: PEPE/USDT)
  -  (: Solana)
     
    

 :
1.   
2.   
3.     
4.    ""    `,category:"interface"},{question:"    ?",answer:` MANAGEMENT:

 :
     
    ( )
    ( )
     

  :
   
    
     

 EARNINGS:

 :
   
    
   
    

 RATING:

 :
    
    :
  -  (10%)
  -  (10%)
  -  (10%)
  -   ( 25%)
  -  ( 30%)
  -  ( 30%)
  -  (15%)

  :
    
     :
  - : 70%+
  - : 50-70%
  - :  50%

 CALL:

 :
   
 //
  PNL 
    
    

:
   
     
        `,category:"interface"},{question:"    ?",answer:` :

  ( ):
 Call -   
  -    :
  -  (Management)
  -  (Earnings)
  -  (Tasks)
  -  (Rating)
   -   
 FAQ -   
  -  
  -   

  ( ):
       
   ,    
  ""    
      

 :

CALL:
   
 , ,  
     
    

:

 (Management):
   
  , , 
   
  :   
     

 (Earnings):
  
    
   (/)
   

 (Tasks):
     
 Kanban   drag & drop
  
   
   ,   
      

 (Rating):
   
    
   
  

 :
    ApeVault
    
    
  

FAQ:
    
     
    

 ( ):
  : , , 
   
  
 
   

 (  ):
    
  
      `,category:"interface"},{question:"    ()?",answer:`  -        :

 :
  -    
  -    
  -   (  /  )

:
   ( 100%)
    :
  -  (10%)
  -  (10%)
  -  (10%)
  -   ( 25%)
  -  ( 30%)
  -  ( 30%)
  -  (15%)
  :
  - : 70%+
  - : 50-70%
  - :  50%

 :
   :
  -  
  -  
  - 
  -  
    

:
   
   
    

  :
  "  "  
  :
  -    (  )
  -    
  -    

 :
  ""   
     /profile

:
    
      
       `,category:"interface"},{question:"   Tasks ()?",answer:`  -      :

 :

 :
1.   " "
2.  :
      ()
     ()
    : , ,  , ,  ,    
    : , , 
      ()
     (   )
3.  " "

 :

1.  :
          
         
          
            " "

2.  :
      
       ""   

3. :
     
        ,     
        

4. :
      
        

:
  : , ,  , ,  ,    
  :  ,  , , 
  :      

:
        
     (  )  
        
      
  "  "   

:
     
   
    

:
   (   )
   (   )
   
 / `,category:"tasks"},{question:"     ?",answer:` :

1.    ""
2.   " "
3.  :

 :
   -   
  -      

 :
  -   
  -   :
   
   
    
   
    
      
  - ,   
   -   ()

 :
      
    
  " "   
  " "  

:
    " "
      " "
     

:
       
        
         " "`,category:"tasks"},{question:"    ?",answer:` :

  :
       " "
      
    ,     " "

 :
1.     " "
2.    ,   ""  ""
3.  ""
4.    
5.  ""  

 :
1.   ""
2.      
3.  ""

   :
   
    (: ": 2/3")
    ,      " "
  " "     

 :
      
 ,   ,    
     ,   

:
    
         
      ,    `,category:"tasks"},{question:"    ?",answer:` :

  :

1.   :
        
    : "  [] .   ."
        

2.   :
        ,    
       " ": " []     []"
       "": " []   []"

3.   :
        ,   
    : " [] .  ."
       

:
     
      
      

 :
  "  "    
    
       

:
        
     ,   
      `,category:"tasks"},{question:"  ?",answer:` :

  :
  -    
  
  
   
  
   
     

  :
  -    
   - ,  
   -  
  -  
  -   

  :
  -    
   -  ,   

 :
1.       
2.   
3.    
4.     
5.  ""    

:
        
      
     `,category:"tasks"}],X3=()=>{const{theme:t}=Be(),[e,r]=P.useState("all"),[n,s]=P.useState(new Set),i=t==="dark"?"text-white":"text-gray-900",o=t==="dark"?"text-gray-400":"text-gray-600",l=t==="dark"?"text-gray-300":"text-gray-700",u=t==="dark"?"bg-gray-800":"bg-white",d=t==="dark"?"border-gray-700":"border-gray-200",h=t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",g=e==="all"?hc:hc.filter(v=>v.category===e),m=ph.find(v=>v.id===e),b=v=>{const C=new Set(n),E=hc.indexOf(v);C.has(E)?C.delete(E):C.add(E),s(C)},k=v=>v.split(`
`).map((E,y)=>{const N=E.trim();return N.match(/^[-\s]+:$/)||N.match(/^\d+\.\s+[-]/)?a.jsx("h4",{className:`font-bold text-base mt-4 mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:N},y):N.startsWith("")||N.startsWith("")?a.jsxs("div",{className:`flex items-start gap-2 my-2 ${N.startsWith("")?t==="dark"?"text-green-400":"text-green-600":t==="dark"?"text-red-400":"text-red-600"}`,children:[a.jsx("span",{className:"text-xl",children:N.startsWith("")?"":""}),a.jsx("span",{className:"flex-1",children:N.substring(2).trim()})]},y):N.startsWith("")?a.jsxs("div",{className:"flex items-start gap-2 my-1.5 ml-4",children:[a.jsx("span",{className:`${t==="dark"?"text-blue-400":"text-blue-600"} mt-1`,children:""}),a.jsx("span",{className:"flex-1",children:N.substring(1).trim()})]},y):N.match(/^[]\s+[-]/)?a.jsx("div",{className:`font-semibold text-base mt-3 mb-1 ${t==="dark"?"text-gray-200":"text-gray-800"}`,children:N},y):N?a.jsx("p",{className:"my-2 leading-relaxed",children:N},y):a.jsx("br",{},y)});return a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${u} shadow-xl border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-blue-200 bg-gradient-to-br from-white via-blue-50/30 to-white"} relative overflow-hidden mb-4 sm:mb-6`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),a.jsxs("div",{className:"relative z-10 text-center space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:a.jsx(Km,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${i} flex flex-wrap items-center justify-center gap-2 sm:gap-3`,children:[a.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text",children:"  "}),a.jsx(pr,{className:`hidden sm:inline-flex w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]})})]}),a.jsx("p",{className:`text-sm sm:text-base font-medium ${o}`,children:"       "})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:ph.map(v=>a.jsxs("button",{onClick:()=>{r(v.id),s(new Set)},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${e===v.id?t==="dark"?"bg-blue-600 text-white shadow-lg shadow-blue-500/50 scale-105":"bg-blue-600 text-white shadow-lg scale-105":t==="dark"?"bg-gray-800 text-gray-300 border border-gray-700 hover:bg-gray-700 hover:border-gray-600":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:[a.jsx("span",{className:e===v.id?"text-white":t==="dark"?v.darkColor:v.color,children:v.icon}),a.jsx("span",{children:v.name})]},v.id))})}),m&&e!=="all"&&a.jsx("div",{className:`${u} rounded-xl p-4 border-2 ${t==="dark"?"border-blue-500/30 bg-blue-500/5":"border-blue-200 bg-blue-50"} mb-6`,children:a.jsxs("div",{className:`flex items-center gap-3 ${t==="dark"?m.darkColor:m.color}`,children:[m.icon,a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:m.name}),a.jsxs("p",{className:`text-sm ${l}`,children:[g.length," ",g.length===1?"":g.length<5?"":""]})]})]})}),a.jsx("div",{className:"space-y-4",children:g.length===0?a.jsx("div",{className:`${u} rounded-xl p-8 text-center border ${d}`,children:a.jsx("p",{className:l,children:"     "})}):g.map(v=>{const C=hc.indexOf(v),E=n.has(C),y=ph.find(R=>R.id===v.category),N=y?t==="dark"?y.darkColor:y.color:t==="dark"?"text-gray-300":"text-gray-600";return a.jsxs("div",{className:`${u} rounded-xl shadow-lg border-2 ${E?t==="dark"?"border-blue-500/50 shadow-blue-500/10 ring-2 ring-blue-500/50":"border-blue-300 shadow-blue-200/50 ring-2 ring-blue-300/50":d} overflow-hidden transition-all duration-300`,children:[a.jsxs("button",{onClick:()=>b(v),className:`w-full p-5 sm:p-6 flex flex-col gap-3 text-left ${h} transition-colors group`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-[11px] font-semibold border ${t==="dark"?"bg-gray-800/80 border-gray-700":"bg-gray-100 border-gray-200"} ${N}`,children:[y&&a.jsx("span",{className:"flex items-center gap-1 text-sm",children:y.icon}),a.jsx("span",{className:"uppercase tracking-wide",children:y?y.name:""})]}),a.jsx("div",{className:`flex-shrink-0 p-2 rounded-lg transition-all ${E?t==="dark"?"bg-blue-500/20 text-blue-400 rotate-180":"bg-blue-100 text-blue-600 rotate-180":t==="dark"?"text-gray-400 group-hover:text-gray-300":"text-gray-400 group-hover:text-gray-600"}`,children:a.jsx(pf,{className:"w-5 h-5"})})]}),a.jsx("h3",{className:`text-lg sm:text-xl font-bold ${i} group-hover:${t==="dark"?"text-blue-400":"text-blue-600"} transition-colors`,children:v.question})]}),E&&a.jsx("div",{className:`px-5 sm:px-6 pb-5 sm:pb-6 border-t ${d} pt-4 animate-fade-in`,children:a.jsx("div",{className:`rounded-lg p-4 text-sm leading-relaxed ${t==="dark"?"bg-gray-800/70 text-gray-200":"bg-blue-50/80 text-gray-800"}`,children:k(v.answer)})})]},C)})}),a.jsxs("div",{className:`${u} rounded-lg shadow-lg p-6 border ${d}`,children:[a.jsx("h2",{className:`text-xl font-semibold mb-4 ${i}`,children:"  ?"}),a.jsx("p",{className:`${l} mb-4`,children:"       ,        ."}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsx("a",{href:"https://telegra.ph/Reglament-provedeniya-torgovyh-sessij-pravila-soobshchestva-ApeVault-dlya-trejderov-i-kollerov-11-20",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:"  "}),a.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-lg ${t==="dark"?"bg-gray-700":"bg-gray-200"}`,children:a.jsxs("span",{className:l,children:[": ",a.jsx("span",{className:"font-semibold",children:"@artyommedoed"})]})})]})]})]})})},J3=()=>{const{theme:t}=Be(),{isAdmin:e}=Yt(),r=t==="dark"?"text-white":"text-gray-900",n=t==="dark"?"text-gray-300":"text-gray-700",s=t==="dark"?"bg-gray-800":"bg-white";return e?a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-2xl p-6 ${s} shadow-lg border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-800/90":"border-purple-200 bg-gradient-to-br from-white to-purple-50/30"}`,children:[a.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[a.jsx("div",{className:`p-3 rounded-xl ${t==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:a.jsx(en,{className:`w-8 h-8 ${t==="dark"?"text-purple-400":"text-purple-600"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h1",{className:`text-3xl font-bold bg-gradient-to-r ${t==="dark"?"from-purple-400 to-pink-400 text-transparent bg-clip-text":"from-purple-600 to-pink-600 text-transparent bg-clip-text"}`,children:" "}),a.jsx(pr,{className:`w-5 h-5 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]}),a.jsxs("p",{className:`${n} text-sm flex items-center gap-2`,children:[a.jsx(ty,{className:"w-4 h-4"}),"    ApeVault"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:a.jsx(en,{className:`w-5 h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})}),a.jsx("h3",{className:`font-semibold ${r}`,children:"  "})]}),a.jsx("p",{className:`text-sm ${n}`,children:"      ,      "})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/20":"bg-green-100"}`,children:a.jsx(Ij,{className:`w-5 h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})}),a.jsx("h3",{className:`font-semibold ${r}`,children:""})]}),a.jsx("p",{className:`text-sm ${n}`,children:"    .      "})]})]}),a.jsx("div",{className:`pt-4 border-t ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:a.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl ${t==="dark"?"bg-green-500/20 border-2 border-green-500/50":"bg-green-50 border-2 border-green-200"}`,children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/30":"bg-green-100"}`,children:a.jsx(en,{className:`w-6 h-6 ${t==="dark"?"text-green-400":"text-green-600"}`})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-semibold mb-1 ${r}`,children:"  "}),a.jsx("p",{className:`text-sm ${n}`,children:"     .    ."})]})]})})]}),a.jsxs("div",{className:`rounded-2xl p-6 ${s} shadow-lg border-2 ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:[a.jsx("h2",{className:`text-xl font-semibold mb-4 ${r}`,children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[a.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:"  "}),a.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[a.jsx("li",{children:"    "}),a.jsx("li",{children:"  "}),a.jsx("li",{children:"   "}),a.jsx("li",{children:"  "})]})]}),a.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[a.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:"  "}),a.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[a.jsx("li",{children:" ,   "}),a.jsx("li",{children:"  "}),a.jsx("li",{children:"   "})]})]}),a.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[a.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:"  "}),a.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[a.jsx("li",{children:"    "}),a.jsx("li",{children:"   "}),a.jsx("li",{children:"   "})]})]}),a.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[a.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:" "}),a.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[a.jsx("li",{children:"   "}),a.jsx("li",{children:"    "}),a.jsx("li",{children:"    "})]})]})]})]})]})}):a.jsx(Wr,{children:a.jsx("div",{className:`rounded-2xl p-8 ${s} shadow-xl border-2 ${t==="dark"?"border-red-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-red-200 bg-gradient-to-br from-white to-red-50/20"} relative overflow-hidden`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`inline-flex p-4 rounded-2xl mb-4 ${t==="dark"?"bg-red-500/20":"bg-red-100"}`,children:a.jsx(ty,{className:`w-12 h-12 ${t==="dark"?"text-red-400":"text-red-600"}`})}),a.jsx("h2",{className:`text-2xl font-bold mb-2 ${r}`,children:" "}),a.jsx("p",{className:n,children:'    .     ""   .'})]})})})},Z3=()=>{const{theme:t}=Be(),{user:e,logout:r}=Nt(),{isAdmin:n,deactivateAdmin:s}=Yt(),i=al(),[o,l]=P.useState(!1),[u,d]=P.useState(!1),[h,g]=P.useState([]),[m,b]=P.useState(null),[k,v]=P.useState(null),[C,E]=P.useState(!0),y=t==="dark"?"text-white":"text-gray-900",N=t==="dark"?"bg-gray-800":"bg-white",R=t==="dark"?"border-gray-600":"border-gray-300";P.useEffect(()=>{(e||n)&&L()},[e,n]);const L=async()=>{if(!(!e&&!n)){E(!0);try{const A=(e==null?void 0:e.id)||"admin",x=await C1({assignedTo:A});if(g(x),e){const H=bl(),U=oe(H.start,"yyyy-MM-dd"),B=oe(H.end,"yyyy-MM-dd"),q=F1(30),F=oe(q.start,"yyyy-MM-dd"),V=oe(q.end,"yyyy-MM-dd"),D=q.start.toISOString(),W=q.end.toISOString(),te=(await Zo(A,U,B)).reduce((je,Re)=>{const kr=Re.participants&&Re.participants.length>0?Re.participants.length:1;return je+Re.amount/kr},0),ue=await Zo(A,F,V),le=ue.reduce((je,Re)=>{const kr=Re.participants&&Re.participants.length>0?Re.participants.length:1;return je+Re.amount/kr},0),fe=ue.reduce((je,Re)=>{const kr=Re.participants&&Re.participants.length>0?Re.participants.length:1;return je+Re.poolAmount/kr},0),X=(await jn(A)).filter(je=>{const Re=je.date,kr=je.endDate||je.date;return Re<=V&&kr>=F}),G=X.filter(je=>je.type==="dayoff").reduce((je,Re)=>je+Ji(Re.date,Re.endDate,F,V),0),K=X.filter(je=>je.type==="sick").reduce((je,Re)=>je+Ji(Re.date,Re.endDate,F,V),0),Ne=X.filter(je=>je.type==="vacation").reduce((je,Re)=>je+Ji(Re.date,Re.endDate,F,V),0),pe=(await On(A)).filter(je=>je.date>=U&&je.date<=B).reduce((je,Re)=>je+ud(Re.slots),0),Pe=await T1(A,U,B),Ee=(await S1(A))[0]||{userId:A,earnings:0,messages:0,initiatives:0,signals:0,profitableSignals:0,referrals:0,daysOff:0,sickDays:0,vacationDays:0,poolAmount:0,rating:0,lastUpdated:new Date().toISOString()},Xt=(await I1(void 0,D,W)).filter(je=>je.ownerId===A).length,at={userId:A,earnings:le,messages:Ee.messages||0,initiatives:Ee.initiatives||0,signals:Ee.signals||0,profitableSignals:Ee.profitableSignals||0,referrals:Xt,daysOff:G,sickDays:K,vacationDays:Ne,poolAmount:fe,lastUpdated:new Date().toISOString()},pt=z1(at,pe,te,Pe),Et=W1(at,pe,te,Pe);b({...at,rating:pt}),v(Et)}}catch(A){console.error("Error loading profile data:",A)}finally{E(!1)}}},M=()=>{n&&s(),r(),i("/login")},I=()=>{e!=null&&e.password&&(navigator.clipboard.writeText(e.password),d(!0),setTimeout(()=>d(!1),2e3))},_=e||(n?{name:"",login:"admin",password:"admin"}:null),w=h.filter(A=>A.status==="pending").length,j=h.filter(A=>A.status==="in_progress").length,S=h.filter(A=>A.status==="completed").length;return _?a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${N} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white`,children:a.jsx(la,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${y} flex items-center gap-2`,children:[" ",a.jsx(pr,{className:`w-5 h-5 sm:w-6 sm:h-6 ${t==="dark"?"text-yellow-400":"text-yellow-600"}`})]}),a.jsx("p",{className:`text-sm sm:text-base ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"   "})]})]}),n&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-purple-600 text-white rounded-lg",children:[a.jsx(en,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:""})]})]})})]}),C?a.jsx("div",{className:`${N} rounded-xl p-8 text-center ${y}`,children:a.jsx("div",{className:"animate-pulse",children:"..."})}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:`${N} rounded-xl border-2 ${R} p-5 sm:p-6 shadow-lg hover:shadow-xl transition-all relative overflow-hidden ${t==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-50"}`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-2xl -mr-12 -mt-12"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h2",{className:`text-xl font-bold ${y} mb-5 flex items-center gap-2`,children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-blue-500/20":"bg-blue-50"}`,children:a.jsx(la,{className:`w-5 h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})})," "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`text-sm font-semibold ${t==="dark"?"text-gray-300":"text-gray-700"} block mb-2`,children:""}),a.jsx("div",{className:`px-4 py-3 rounded-lg border-2 ${R} ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-white border-gray-200"} ${y} font-medium`,children:_.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:`text-sm font-semibold ${t==="dark"?"text-gray-300":"text-gray-700"} block mb-2`,children:""}),a.jsx("div",{className:`px-4 py-3 rounded-lg border-2 ${R} ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-white border-gray-200"} ${y} font-medium`,children:_.login})]}),a.jsxs("div",{children:[a.jsx("label",{className:`text-sm font-semibold ${t==="dark"?"text-gray-300":"text-gray-700"} block mb-2`,children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`flex-1 px-4 py-3 rounded-lg border-2 ${R} ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-white border-gray-200"} ${y} font-mono text-sm`,children:o?_.password:"".repeat(_.password.length)}),a.jsx("button",{onClick:()=>l(!o),className:`p-3 rounded-lg border-2 ${R} ${t==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 border-gray-600 hover:border-gray-500":"bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300"} transition-all`,title:o?" ":" ",children:o?a.jsx(Tj,{className:"w-5 h-5"}):a.jsx(cw,{className:"w-5 h-5"})}),a.jsx("button",{onClick:I,className:`p-3 rounded-lg border-2 transition-all ${u?"bg-green-500 text-white border-green-500":t==="dark"?"bg-gray-700/50 hover:bg-gray-600/50 border-gray-600 hover:border-gray-500":"bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300"}`,title:" ",children:u?a.jsx(Bo,{className:"w-5 h-5"}):a.jsx(lw,{className:"w-5 h-5"})})]})]})]})]})]}),m&&k&&a.jsxs("div",{className:`${N} rounded-xl border-2 ${R} p-4 sm:p-6 shadow-lg lg:col-span-2`,children:[a.jsxs("h2",{className:`text-xl font-bold ${y} mb-6 flex items-center gap-2`,children:[a.jsx(di,{className:"w-5 h-5"})," "]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-6 sm:p-8 rounded-xl border-2 ${m.rating>=70?t==="dark"?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/50":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":m.rating>=50?t==="dark"?"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border-yellow-500/50":"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200":t==="dark"?"bg-gradient-to-br from-blue-500/20 to-indigo-500/20 border-blue-500/50":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full blur-2xl -mr-16 -mt-16"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-5xl sm:text-6xl md:text-7xl font-extrabold mb-2 ${m.rating>=70?t==="dark"?"text-green-400":"text-green-700":m.rating>=50?t==="dark"?"text-yellow-400":"text-yellow-700":t==="dark"?"text-blue-400":"text-blue-700"}`,children:[m.rating.toFixed(1),"%"]}),a.jsx("div",{className:`text-lg sm:text-xl font-semibold ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),a.jsx("div",{className:`text-sm mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:m.rating>=70?" ! ":m.rating>=50?" ! ":"    "})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${y}`,children:[k.daysOffPoints.toFixed(1),"%"]}),a.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.daysOff," "]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"}`,children:m.daysOff===0||m.daysOff<=2?" 0-2  = 10%":"  2  = 0%"})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${y}`,children:[k.sickDaysPoints.toFixed(1),"%"]}),a.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.sickDays," "]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"}`,children:m.sickDays<=7?" 7  = 10%":"  7  = 0%"})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${y}`,children:[k.vacationDaysPoints.toFixed(1),"%"]}),a.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.vacationDays," "]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"}`,children:m.vacationDays<=7?" 7  = 10%":"  7  = 0%"})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-blue-300":"text-blue-700"}`,children:" "}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-blue-400":"text-blue-700"}`,children:[k.weeklyHoursPoints.toFixed(1),"%"]}),a.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-blue-400/70":"text-blue-600"}`,children:[k.weeklyHours.toFixed(1)," /"]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-blue-500/30 text-blue-300":"border-blue-200 text-blue-600"}`,children:k.weeklyHours>=30?" 30  = 25%":k.weeklyHours>=20?" 20  = 15%":" <20  = 0%"})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-green-300":"text-green-700"}`,children:""}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-green-400":"text-green-700"}`,children:[k.weeklyEarningsPoints.toFixed(1),"%"]}),a.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-green-400/70":"text-green-600"}`,children:[k.weeklyEarnings.toFixed(0)," /"]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-green-500/30 text-green-300":"border-green-200 text-green-600"}`,children:k.weeklyEarnings>=6e3?" 6000 = 30%":k.weeklyEarnings>=3e3?" 3000 = 15%":" <3000 = 0%"})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-purple-300":"text-purple-700"}`,children:""}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-purple-400":"text-purple-700"}`,children:[k.referralsPoints.toFixed(1),"%"]}),a.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-purple-400/70":"text-purple-600"}`,children:[m.referrals," "]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-purple-500/30 text-purple-300":"border-purple-200 text-purple-600"}`,children:k.referralsPoints>=30?"  6  = 30%":` ${m.referrals}  5% = ${k.referralsPoints.toFixed(0)}%`})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-orange-500/10 border-orange-500/30":"bg-orange-50 border-orange-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-orange-300":"text-orange-700"}`,children:""}),a.jsx("span",{className:"text-lg",children:""})]}),a.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-orange-400":"text-orange-700"}`,children:[k.weeklyMessagesPoints.toFixed(1),"%"]}),a.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-orange-400/70":"text-orange-600"}`,children:[k.weeklyMessages," /"]}),a.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-orange-500/30 text-orange-300":"border-orange-200 text-orange-600"}`,children:k.weeklyMessages>50?" >50  = 15%":" 50  = 0%"})]})]}),a.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[a.jsxs("h3",{className:`text-sm font-bold ${y} mb-3 flex items-center gap-2`,children:[a.jsx(Ur,{className:"w-4 h-4"}),"  ?"]}),a.jsxs("div",{className:`text-xs space-y-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:" :"}),a.jsx("span",{children:"0-2    = 10%,  2  = 0%"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:" :"}),a.jsx("span",{children:"7    = 10%,  7  = 0%"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:" :"}),a.jsx("span",{children:"7    = 10%,  7  = 0%"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:"  :"}),a.jsx("span",{children:"30 / = 25%, 20 / = 15%,  20 / = 0%"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:" :"}),a.jsx("span",{children:"6000/ = 30%, 3000/ = 15%,  3000/ = 0%"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:" :"}),a.jsx("span",{children:"5%  ,  30% (6 )"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold",children:" :"}),a.jsx("span",{children:" 50 / = 15%,  = 0%"})]}),a.jsx("div",{className:`mt-3 pt-3 border-t ${t==="dark"?"border-gray-600":"border-gray-300"}`,children:a.jsx("span",{className:"font-semibold",children:" : 100%"})})]})]})]})]}),a.jsxs("div",{className:`${N} rounded-xl border-2 ${R} p-5 sm:p-6 shadow-lg hover:shadow-xl transition-all relative overflow-hidden ${t==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-50"}`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-2xl -mr-12 -mt-12"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h2",{className:`text-xl font-bold ${y} mb-5 flex items-center gap-2`,children:[a.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/20":"bg-green-50"}`,children:a.jsx(Zs,{className:`w-5 h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})})," "]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[a.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all hover:scale-105 ${t==="dark"?"bg-yellow-500/10 border-yellow-500/30 hover:border-yellow-500/50":"bg-yellow-50 border-yellow-200 hover:border-yellow-300"}`,children:[a.jsx("div",{className:`text-xs font-semibold mb-2 ${t==="dark"?"text-yellow-400":"text-yellow-700"}`,children:" "}),a.jsx("div",{className:`text-3xl font-extrabold ${y}`,children:w})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all hover:scale-105 ${t==="dark"?"bg-blue-500/10 border-blue-500/30 hover:border-blue-500/50":"bg-blue-50 border-blue-200 hover:border-blue-300"}`,children:[a.jsx("div",{className:`text-xs font-semibold mb-2 ${t==="dark"?"text-blue-400":"text-blue-700"}`,children:" "}),a.jsx("div",{className:`text-3xl font-extrabold ${y}`,children:j})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all hover:scale-105 ${t==="dark"?"bg-green-500/10 border-green-500/30 hover:border-green-500/50":"bg-green-50 border-green-200 hover:border-green-300"}`,children:[a.jsx("div",{className:`text-xs font-semibold mb-2 ${t==="dark"?"text-green-400":"text-green-700"}`,children:""}),a.jsx("div",{className:`text-3xl font-extrabold ${y}`,children:S})]}),a.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all hover:scale-105 ${t==="dark"?"bg-gray-500/10 border-gray-500/30 hover:border-gray-500/50":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:[a.jsx("div",{className:`text-xs font-semibold mb-2 ${t==="dark"?"text-gray-400":"text-gray-700"}`,children:""}),a.jsx("div",{className:`text-3xl font-extrabold ${y}`,children:h.length})]})]}),a.jsxs("button",{onClick:()=>i("/tasks"),className:`w-full px-4 py-3 rounded-lg font-semibold transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2 ${t==="dark"?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 hover:from-green-500/30 hover:to-emerald-500/30 text-green-400 border-2 border-green-500/50 hover:border-green-500":"bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 text-green-700 border-2 border-green-200 hover:border-green-300"}`,children:[a.jsx(Zs,{className:"w-4 h-4"}),"  "]})]})]}),a.jsxs("div",{className:`lg:col-span-2 ${N} rounded-xl border-2 ${R} p-5 sm:p-6 shadow-lg hover:shadow-xl transition-all relative overflow-hidden ${t==="dark"?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-white to-gray-50"}`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-red-500/10 to-pink-500/10 rounded-full blur-2xl -mr-12 -mt-12"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("button",{onClick:M,className:`w-full px-6 py-3.5 rounded-lg font-semibold transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2 ${t==="dark"?"bg-gradient-to-r from-red-500/20 to-pink-500/20 hover:from-red-500/30 hover:to-pink-500/30 text-red-400 border-2 border-red-500/50 hover:border-red-500":"bg-gradient-to-r from-red-50 to-pink-50 hover:from-red-100 hover:to-pink-100 text-red-700 border-2 border-red-200 hover:border-red-300"}`,children:[a.jsx(Rj,{className:"w-5 h-5"}),"  "]})})]})]})]})}):a.jsx(Wr,{children:a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:y,children:" "})})})},eD=()=>{const{theme:t}=Be(),e=t==="dark"?"text-white":"text-gray-900",r=t==="dark"?"text-gray-400":"text-gray-600",n=t==="dark"?"bg-gray-800":"bg-white";return a.jsx(Wr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-blue-200 bg-gradient-to-br from-white via-blue-50/30 to-white"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-green-500/10 to-yellow-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:a.jsx(Ur,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${e} flex items-center gap-2 sm:gap-3`,children:[a.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text",children:"  ApeVault"}),a.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:""})]})})]}),a.jsx("p",{className:`text-sm sm:text-base font-medium ${r}`,children:"    "})]})]}),a.jsxs("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-cyan-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-cyan-200 bg-gradient-to-br from-white to-cyan-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),a.jsxs("div",{className:"relative z-10 space-y-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6 items-start",children:[a.jsx("div",{className:`p-3 sm:p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-cyan-600 to-blue-600":"bg-gradient-to-br from-cyan-500 to-blue-500"} text-white flex-shrink-0`,children:a.jsx(Ur,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsx("h2",{className:`text-2xl sm:text-3xl font-extrabold ${e}`,children:a.jsx("span",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-transparent bg-clip-text",children:"  ApeVault?"})}),a.jsx("p",{className:`text-sm sm:text-base leading-relaxed ${r}`,children:"ApeVault       .   ,     ,          ."}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[" "," "," "].map(s=>a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t==="dark"?"bg-cyan-500/10 text-cyan-200 border border-cyan-500/30":"bg-cyan-50 text-cyan-700 border border-cyan-200"}`,children:s},s))})]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"",value:"50+"},{label:"",value:"100+"},{label:"  ",value:"10+"},{label:" ",value:"3"}].map(s=>a.jsxs("div",{className:`p-3 rounded-xl border ${t==="dark"?"border-cyan-500/20 bg-white/5 text-white":"border-cyan-200 bg-white text-gray-900"}`,children:[a.jsx("p",{className:"text-xs uppercase tracking-wide opacity-70",children:s.label}),a.jsx("p",{className:"text-xl font-bold",children:s.value})]},s.label))})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white to-green-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-xl -mr-16 -mt-16"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:`p-3 rounded-xl shadow-lg mb-4 inline-block ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white`,children:a.jsx(tn,{className:"w-6 h-6"})}),a.jsx("h3",{className:`text-xl font-extrabold mb-3 ${e}`,children:" "}),a.jsx("p",{className:`${r} leading-relaxed`,children:"   ,         ."})]})]}),a.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-xl border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-purple-200 bg-gradient-to-br from-white to-purple-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full blur-xl -mr-16 -mt-16"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:`p-3 rounded-xl shadow-lg mb-4 inline-block ${t==="dark"?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-purple-500 to-pink-500"} text-white`,children:a.jsx(yf,{className:"w-6 h-6"})}),a.jsx("h3",{className:`text-xl font-extrabold mb-3 ${e}`,children:""}),a.jsx("p",{className:`${r} leading-relaxed`,children:"  ,        ."})]})]}),a.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-xl border-2 ${t==="dark"?"border-yellow-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-yellow-200 bg-gradient-to-br from-white to-yellow-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-full blur-xl -mr-16 -mt-16"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:`p-3 rounded-xl shadow-lg mb-4 inline-block ${t==="dark"?"bg-gradient-to-br from-yellow-600 to-orange-600":"bg-gradient-to-br from-yellow-500 to-orange-500"} text-white`,children:a.jsx(ow,{className:"w-6 h-6"})}),a.jsx("h3",{className:`text-xl font-extrabold mb-3 ${e}`,children:"  "}),a.jsx("p",{className:`${r} leading-relaxed`,children:" ,           ."})]})]})]}),a.jsxs("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-indigo-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-indigo-200 bg-gradient-to-br from-white to-indigo-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-indigo-600 to-purple-600":"bg-gradient-to-br from-indigo-500 to-purple-500"} text-white flex-shrink-0`,children:a.jsx(Zp,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`text-2xl font-extrabold mb-2 ${e} flex items-center gap-2`,children:a.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:" "})}),a.jsx("p",{className:`${r} mb-6 font-medium`,children:"              ."}),a.jsxs("a",{href:"https://telegra.ph/Reglament-provedeniya-torgovyh-sessij-pravila-soobshchestva-ApeVault-dlya-trejderov-i-kollerov-11-20",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-200 font-semibold shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx(Zp,{className:"w-5 h-5"}),a.jsx("span",{children:"  "})]})]})]})})]}),a.jsxs("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-pink-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-pink-200 bg-gradient-to-br from-white to-pink-50/20"} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-pink-500/10 to-rose-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-pink-600 to-rose-600":"bg-gradient-to-br from-pink-500 to-rose-500"} text-white flex-shrink-0`,children:a.jsx(Dj,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`text-2xl font-extrabold mb-2 ${e} flex items-center gap-2`,children:a.jsx("span",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-transparent bg-clip-text",children:""})}),a.jsxs("p",{className:`${r} font-medium`,children:["        :"," ",a.jsx("span",{className:`font-extrabold ${e}`,children:"@artyommedoed"})]})]})]})})]})]})})},yn=({children:t})=>{const{isAuthenticated:e}=Nt(),{isAdmin:r}=Yt();return!e&&!r?a.jsx(hf,{to:"/login",replace:!0}):a.jsx(a.Fragment,{children:t})};function tD(){const{isAuthenticated:t}=Nt(),{isAdmin:e}=Yt(),{theme:r}=Be();return P.useEffect(()=>{document.body.classList.toggle("dark",r==="dark")},[r]),P.useEffect(()=>{nP().catch(n=>console.error("Cleanup failed",n))},[]),a.jsx(UE,{children:a.jsxs(RE,{children:[a.jsx(Er,{path:"/login",element:!t&&!e?a.jsx(zj,{}):a.jsx(hf,{to:"/management",replace:!0})}),a.jsx(Er,{path:"/call",element:a.jsx(yn,{children:a.jsx(bP,{})})}),a.jsx(Er,{path:"/management",element:a.jsx(yn,{children:a.jsx(R3,{})})}),a.jsx(Er,{path:"/earnings",element:a.jsx(yn,{children:a.jsx(O3,{})})}),a.jsx(Er,{path:"/rating",element:a.jsx(yn,{children:a.jsx(U3,{})})}),a.jsx(Er,{path:"/tasks",element:a.jsx(yn,{children:a.jsx(Y3,{})})}),a.jsx(Er,{path:"/about",element:a.jsx(yn,{children:a.jsx(eD,{})})}),a.jsx(Er,{path:"/faq",element:a.jsx(yn,{children:a.jsx(X3,{})})}),a.jsx(Er,{path:"/admin",element:a.jsx(yn,{children:a.jsx(J3,{})})}),a.jsx(Er,{path:"/profile",element:a.jsx(yn,{children:a.jsx(Z3,{})})}),a.jsx(Er,{path:"/",element:a.jsx(hf,{to:t||e?"/management":"/login",replace:!0})})]})})}yh.createRoot(document.getElementById("root")).render(a.jsx(Gf.StrictMode,{children:a.jsx(tD,{})}));
