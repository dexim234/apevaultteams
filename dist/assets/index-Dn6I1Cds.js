function g1(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function $x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mx={exports:{}},Iu={},Ox={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),p1=Symbol.for("react.portal"),y1=Symbol.for("react.fragment"),x1=Symbol.for("react.strict_mode"),v1=Symbol.for("react.profiler"),b1=Symbol.for("react.provider"),w1=Symbol.for("react.context"),_1=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),N1=Symbol.for("react.memo"),E1=Symbol.for("react.lazy"),D0=Symbol.iterator;function j1(t){return t===null||typeof t!="object"?null:(t=D0&&t[D0]||t["@@iterator"],typeof t=="function"?t:null)}var Lx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vx=Object.assign,Fx={};function xi(t,e,r){this.props=t,this.context=e,this.refs=Fx,this.updater=r||Lx}xi.prototype.isReactComponent={};xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ux(){}Ux.prototype=xi.prototype;function Hf(t,e,r){this.props=t,this.context=e,this.refs=Fx,this.updater=r||Lx}var qf=Hf.prototype=new Ux;qf.constructor=Hf;Vx(qf,xi.prototype);qf.isPureReactComponent=!0;var $0=Array.isArray,Bx=Object.prototype.hasOwnProperty,Gf={current:null},zx={key:!0,ref:!0,__self:!0,__source:!0};function Wx(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Bx.call(e,n)&&!zx.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:nl,type:t,key:a,ref:o,props:s,_owner:Gf.current}}function S1(t,e){return{$$typeof:nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kf(t){return typeof t=="object"&&t!==null&&t.$$typeof===nl}function T1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var M0=/\/+/g;function Cd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T1(""+t.key):e.toString(36)}function gc(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nl:case p1:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Cd(o,0):n,$0(s)?(r="",t!=null&&(r=t.replace(M0,"$&/")+"/"),gc(s,e,r,"",function(d){return d})):s!=null&&(Kf(s)&&(s=S1(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(M0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",$0(t))for(var l=0;l<t.length;l++){a=t[l];var u=n+Cd(a,l);o+=gc(a,e,r,u,s)}else if(u=j1(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=n+Cd(a,l++),o+=gc(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(t,e,r){if(t==null)return t;var n=[],s=0;return gc(t,n,"","",function(a){return e.call(r,a,s++)}),n}function I1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nr={current:null},pc={transition:null},C1={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:pc,ReactCurrentOwner:Gf};function Hx(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Ul,forEach:function(t,e,r){Ul(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ul(t,function(){e++}),e},toArray:function(t){return Ul(t,function(e){return e})||[]},only:function(t){if(!Kf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=xi;Se.Fragment=y1;Se.Profiler=v1;Se.PureComponent=Hf;Se.StrictMode=x1;Se.Suspense=k1;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C1;Se.act=Hx;Se.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Vx({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Bx.call(e,u)&&!zx.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:nl,type:t.type,key:s,ref:a,props:n,_owner:o}};Se.createContext=function(t){return t={$$typeof:w1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b1,_context:t},t.Consumer=t};Se.createElement=Wx;Se.createFactory=function(t){var e=Wx.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:_1,render:t}};Se.isValidElement=Kf;Se.lazy=function(t){return{$$typeof:E1,_payload:{_status:-1,_result:t},_init:I1}};Se.memo=function(t,e){return{$$typeof:N1,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=pc.transition;pc.transition={};try{t()}finally{pc.transition=e}};Se.unstable_act=Hx;Se.useCallback=function(t,e){return nr.current.useCallback(t,e)};Se.useContext=function(t){return nr.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return nr.current.useDeferredValue(t)};Se.useEffect=function(t,e){return nr.current.useEffect(t,e)};Se.useId=function(){return nr.current.useId()};Se.useImperativeHandle=function(t,e,r){return nr.current.useImperativeHandle(t,e,r)};Se.useInsertionEffect=function(t,e){return nr.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return nr.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return nr.current.useMemo(t,e)};Se.useReducer=function(t,e,r){return nr.current.useReducer(t,e,r)};Se.useRef=function(t){return nr.current.useRef(t)};Se.useState=function(t){return nr.current.useState(t)};Se.useSyncExternalStore=function(t,e,r){return nr.current.useSyncExternalStore(t,e,r)};Se.useTransition=function(){return nr.current.useTransition()};Se.version="18.3.1";Ox.exports=Se;var P=Ox.exports;const Qf=$x(P),A1=g1({__proto__:null,default:Qf},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=P,R1=Symbol.for("react.element"),D1=Symbol.for("react.fragment"),$1=Object.prototype.hasOwnProperty,M1=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O1={key:!0,ref:!0,__self:!0,__source:!0};function qx(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)$1.call(e,n)&&!O1.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:R1,type:t,key:a,ref:o,props:s,_owner:M1.current}}Iu.Fragment=D1;Iu.jsx=qx;Iu.jsxs=qx;Mx.exports=Iu;var i=Mx.exports,bh={},Gx={exports:{}},_r={},Kx={exports:{}},Qx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var D=F.length;F.push(V);e:for(;0<D;){var H=D-1>>>1,$=F[H];if(0<s($,V))F[H]=V,F[D]=$,D=H;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var V=F[0],D=F.pop();if(D!==V){F[0]=D;e:for(var H=0,$=F.length,te=$>>>1;H<te;){var ue=2*(H+1)-1,le=F[ue],fe=ue+1,J=F[fe];if(0>s(le,D))fe<$&&0>s(J,le)?(F[H]=J,F[fe]=D,H=fe):(F[H]=le,F[ue]=D,H=ue);else if(fe<$&&0>s(J,D))F[H]=J,F[fe]=D,H=fe;else break e}}return V}function s(F,V){var D=F.sortIndex-V.sortIndex;return D!==0?D:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,g=null,m=3,b=!1,k=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(F){for(var V=r(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=F)n(d),V.sortIndex=V.expirationTime,e(u,V);else break;V=r(d)}}function R(F){if(v=!1,N(F),!k)if(r(u)!==null)k=!0,B(L);else{var V=r(d);V!==null&&W(R,V.startTime-F)}}function L(F,V){k=!1,v&&(v=!1,E(_),_=-1),b=!0;var D=m;try{for(N(V),g=r(u);g!==null&&(!(g.expirationTime>V)||F&&!S());){var H=g.callback;if(typeof H=="function"){g.callback=null,m=g.priorityLevel;var $=H(g.expirationTime<=V);V=t.unstable_now(),typeof $=="function"?g.callback=$:g===r(u)&&n(u),N(V)}else n(u);g=r(u)}if(g!==null)var te=!0;else{var ue=r(d);ue!==null&&W(R,ue.startTime-V),te=!1}return te}finally{g=null,m=D,b=!1}}var M=!1,I=null,_=-1,w=5,j=-1;function S(){return!(t.unstable_now()-j<w)}function A(){if(I!==null){var F=t.unstable_now();j=F;var V=!0;try{V=I(!0,F)}finally{V?x():(M=!1,I=null)}}else M=!1}var x;if(typeof y=="function")x=function(){y(A)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,U=q.port2;q.port1.onmessage=A,x=function(){U.postMessage(null)}}else x=function(){C(A,0)};function B(F){I=F,M||(M=!0,x())}function W(F,V){_=C(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,B(L))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var D=m;m=V;try{return F()}finally{m=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var D=m;m=F;try{return V()}finally{m=D}},t.unstable_scheduleCallback=function(F,V,D){var H=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?H+D:H):D=H,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=D+$,F={id:h++,callback:V,priorityLevel:F,startTime:D,expirationTime:$,sortIndex:-1},D>H?(F.sortIndex=D,e(d,F),r(u)===null&&F===r(d)&&(v?(E(_),_=-1):v=!0,W(R,D-H))):(F.sortIndex=$,e(u,F),k||b||(k=!0,B(L))),F},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(F){var V=m;return function(){var D=m;m=V;try{return F.apply(this,arguments)}finally{m=D}}}})(Qx);Kx.exports=Qx;var L1=Kx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=P,br=L1;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yx=new Set,ko={};function ia(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(ko[t]=e,t=0;t<e.length;t++)Yx.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,F1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O0={},L0={};function U1(t){return wh.call(L0,t)?!0:wh.call(O0,t)?!1:F1.test(t)?L0[t]=!0:(O0[t]=!0,!1)}function B1(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z1(t,e,r,n){if(e===null||typeof e>"u"||B1(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yf=/[\-:]([a-z])/g;function Xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yf,Xf);Dt[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yf,Xf);Dt[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yf,Xf);Dt[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jf(t,e,r,n){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(z1(e,r,s,n)&&(r=null),n||s===null?U1(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var On=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bl=Symbol.for("react.element"),ja=Symbol.for("react.portal"),Sa=Symbol.for("react.fragment"),Zf=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),Jx=Symbol.for("react.context"),em=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Nh=Symbol.for("react.suspense_list"),tm=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Zx=Symbol.for("react.offscreen"),V0=Symbol.iterator;function Bi(t){return t===null||typeof t!="object"?null:(t=V0&&t[V0]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Ad;function Zi(t){if(Ad===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ad=e&&e[1]||""}return`
`+Ad+t}var Pd=!1;function Rd(t,e){if(!t||Pd)return"";Pd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Pd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Zi(t):""}function W1(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=Rd(t.type,!1),t;case 11:return t=Rd(t.type.render,!1),t;case 1:return t=Rd(t.type,!0),t;default:return""}}function Eh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sa:return"Fragment";case ja:return"Portal";case _h:return"Profiler";case Zf:return"StrictMode";case kh:return"Suspense";case Nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jx:return(t.displayName||"Context")+".Consumer";case Xx:return(t._context.displayName||"Context")+".Provider";case em:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tm:return e=t.displayName||null,e!==null?e:Eh(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return Eh(t(e))}catch{}}return null}function H1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eh(e);case 8:return e===Zf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ev(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q1(t){var e=ev(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zl(t){t._valueTracker||(t._valueTracker=q1(t))}function tv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ev(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jh(t,e){var r=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function F0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ys(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rv(t,e){e=e.checked,e!=null&&Jf(t,"checked",e,!1)}function Sh(t,e){rv(t,e);var r=ys(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Th(t,e.type,r):e.hasOwnProperty("defaultValue")&&Th(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function U0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Th(t,e,r){(e!=="number"||Mc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var eo=Array.isArray;function Va(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ys(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ih(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ee(92));if(eo(r)){if(1<r.length)throw Error(ee(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ys(r)}}function nv(t,e){var r=ys(e.value),n=ys(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function z0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wl,av=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G1=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(t){G1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),io[e]=io[t]})});function iv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||io.hasOwnProperty(t)&&io[t]?(""+e).trim():e+"px"}function ov(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=iv(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var K1=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(K1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=null;function rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dh=null,Fa=null,Ua=null;function W0(t){if(t=il(t)){if(typeof Dh!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Du(e),Dh(t.stateNode,t.type,e))}}function lv(t){Fa?Ua?Ua.push(t):Ua=[t]:Fa=t}function cv(){if(Fa){var t=Fa,e=Ua;if(Ua=Fa=null,W0(t),e)for(t=0;t<e.length;t++)W0(e[t])}}function uv(t,e){return t(e)}function dv(){}var Dd=!1;function hv(t,e,r){if(Dd)return t(e,r);Dd=!0;try{return uv(t,e,r)}finally{Dd=!1,(Fa!==null||Ua!==null)&&(dv(),cv())}}function Eo(t,e){var r=t.stateNode;if(r===null)return null;var n=Du(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ee(231,e,typeof r));return r}var $h=!1;if(Sn)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){$h=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{$h=!1}function Q1(t,e,r,n,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var oo=!1,Oc=null,Lc=!1,Mh=null,Y1={onError:function(t){oo=!0,Oc=t}};function X1(t,e,r,n,s,a,o,l,u){oo=!1,Oc=null,Q1.apply(Y1,arguments)}function J1(t,e,r,n,s,a,o,l,u){if(X1.apply(this,arguments),oo){if(oo){var d=Oc;oo=!1,Oc=null}else throw Error(ee(198));Lc||(Lc=!0,Mh=d)}}function oa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function fv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function H0(t){if(oa(t)!==t)throw Error(ee(188))}function Z1(t){var e=t.alternate;if(!e){if(e=oa(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return H0(s),t;if(a===n)return H0(s),e;a=a.sibling}throw Error(ee(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?t:e}function mv(t){return t=Z1(t),t!==null?gv(t):null}function gv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gv(t);if(e!==null)return e;t=t.sibling}return null}var pv=br.unstable_scheduleCallback,q0=br.unstable_cancelCallback,ek=br.unstable_shouldYield,tk=br.unstable_requestPaint,st=br.unstable_now,rk=br.unstable_getCurrentPriorityLevel,nm=br.unstable_ImmediatePriority,yv=br.unstable_UserBlockingPriority,Vc=br.unstable_NormalPriority,nk=br.unstable_LowPriority,xv=br.unstable_IdlePriority,Cu=null,Xr=null;function sk(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Cu,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:ok,ak=Math.log,ik=Math.LN2;function ok(t){return t>>>=0,t===0?32:31-(ak(t)/ik|0)|0}var Hl=64,ql=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=to(l):(a&=o,a!==0&&(n=to(a)))}else o=r&~s,o!==0?n=to(o):a!==0&&(n=to(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Fr(e),s=1<<r,n|=t[r],e&=~s;return n}function lk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ck(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Fr(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&n)&&(s[o]=lk(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vv(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function $d(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=r}function uk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Fr(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function sm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Fr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Oe=0;function bv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wv,am,_v,kv,Nv,Lh=!1,Gl=[],ss=null,as=null,is=null,jo=new Map,So=new Map,qn=[],dk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(t,e){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(e.pointerId)}}function Wi(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=il(e),e!==null&&am(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hk(t,e,r,n,s){switch(e){case"focusin":return ss=Wi(ss,t,e,r,n,s),!0;case"dragenter":return as=Wi(as,t,e,r,n,s),!0;case"mouseover":return is=Wi(is,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return jo.set(a,Wi(jo.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,So.set(a,Wi(So.get(a)||null,t,e,r,n,s)),!0}return!1}function Ev(t){var e=Ls(t.target);if(e!==null){var r=oa(e);if(r!==null){if(e=r.tag,e===13){if(e=fv(r),e!==null){t.blockedOn=e,Nv(t.priority,function(){_v(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Rh=n,r.target.dispatchEvent(n),Rh=null}else return e=il(r),e!==null&&am(e),t.blockedOn=r,!1;e.shift()}return!0}function K0(t,e,r){yc(t)&&r.delete(e)}function fk(){Lh=!1,ss!==null&&yc(ss)&&(ss=null),as!==null&&yc(as)&&(as=null),is!==null&&yc(is)&&(is=null),jo.forEach(K0),So.forEach(K0)}function Hi(t,e){t.blockedOn===e&&(t.blockedOn=null,Lh||(Lh=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,fk)))}function To(t){function e(s){return Hi(s,t)}if(0<Gl.length){Hi(Gl[0],t);for(var r=1;r<Gl.length;r++){var n=Gl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ss!==null&&Hi(ss,t),as!==null&&Hi(as,t),is!==null&&Hi(is,t),jo.forEach(e),So.forEach(e),r=0;r<qn.length;r++)n=qn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<qn.length&&(r=qn[0],r.blockedOn===null);)Ev(r),r.blockedOn===null&&qn.shift()}var Ba=On.ReactCurrentBatchConfig,Uc=!0;function mk(t,e,r,n){var s=Oe,a=Ba.transition;Ba.transition=null;try{Oe=1,im(t,e,r,n)}finally{Oe=s,Ba.transition=a}}function gk(t,e,r,n){var s=Oe,a=Ba.transition;Ba.transition=null;try{Oe=4,im(t,e,r,n)}finally{Oe=s,Ba.transition=a}}function im(t,e,r,n){if(Uc){var s=Vh(t,e,r,n);if(s===null)Hd(t,e,n,Bc,r),G0(t,n);else if(hk(s,t,e,r,n))n.stopPropagation();else if(G0(t,n),e&4&&-1<dk.indexOf(t)){for(;s!==null;){var a=il(s);if(a!==null&&wv(a),a=Vh(t,e,r,n),a===null&&Hd(t,e,n,Bc,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Hd(t,e,n,null,r)}}var Bc=null;function Vh(t,e,r,n){if(Bc=null,t=rm(n),t=Ls(t),t!==null)if(e=oa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=fv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bc=t,null}function jv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rk()){case nm:return 1;case yv:return 4;case Vc:case nk:return 16;case xv:return 536870912;default:return 16}default:return 16}}var Jn=null,om=null,xc=null;function Sv(){if(xc)return xc;var t,e=om,r=e.length,n,s="value"in Jn?Jn.value:Jn.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return xc=s.slice(t,1<n?1-n:void 0)}function vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kl(){return!0}function Q0(){return!1}function kr(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Kl:Q0,this.isPropagationStopped=Q0,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lm=kr(vi),al=Xe({},vi,{view:0,detail:0}),pk=kr(al),Md,Od,qi,Au=Xe({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(Md=t.screenX-qi.screenX,Od=t.screenY-qi.screenY):Od=Md=0,qi=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:Od}}),Y0=kr(Au),yk=Xe({},Au,{dataTransfer:0}),xk=kr(yk),vk=Xe({},al,{relatedTarget:0}),Ld=kr(vk),bk=Xe({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),wk=kr(bk),_k=Xe({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kk=kr(_k),Nk=Xe({},vi,{data:0}),X0=kr(Nk),Ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sk[t])?!!e[t]:!1}function cm(){return Tk}var Ik=Xe({},al,{key:function(t){if(t.key){var e=Ek[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(t){return t.type==="keypress"?vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ck=kr(Ik),Ak=Xe({},Au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J0=kr(Ak),Pk=Xe({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),Rk=kr(Pk),Dk=Xe({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),$k=kr(Dk),Mk=Xe({},Au,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ok=kr(Mk),Lk=[9,13,27,32],um=Sn&&"CompositionEvent"in window,lo=null;Sn&&"documentMode"in document&&(lo=document.documentMode);var Vk=Sn&&"TextEvent"in window&&!lo,Tv=Sn&&(!um||lo&&8<lo&&11>=lo),Z0=" ",ep=!1;function Iv(t,e){switch(t){case"keyup":return Lk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function Fk(t,e){switch(t){case"compositionend":return Cv(e);case"keypress":return e.which!==32?null:(ep=!0,Z0);case"textInput":return t=e.data,t===Z0&&ep?null:t;default:return null}}function Uk(t,e){if(Ta)return t==="compositionend"||!um&&Iv(t,e)?(t=Sv(),xc=om=Jn=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tv&&e.locale!=="ko"?null:e.data;default:return null}}var Bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bk[t.type]:e==="textarea"}function Av(t,e,r,n){lv(n),e=zc(e,"onChange"),0<e.length&&(r=new lm("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var co=null,Io=null;function zk(t){Bv(t,0)}function Pu(t){var e=Aa(t);if(tv(e))return t}function Wk(t,e){if(t==="change")return e}var Pv=!1;if(Sn){var Vd;if(Sn){var Fd="oninput"in document;if(!Fd){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),Fd=typeof rp.oninput=="function"}Vd=Fd}else Vd=!1;Pv=Vd&&(!document.documentMode||9<document.documentMode)}function np(){co&&(co.detachEvent("onpropertychange",Rv),Io=co=null)}function Rv(t){if(t.propertyName==="value"&&Pu(Io)){var e=[];Av(e,Io,t,rm(t)),hv(zk,e)}}function Hk(t,e,r){t==="focusin"?(np(),co=e,Io=r,co.attachEvent("onpropertychange",Rv)):t==="focusout"&&np()}function qk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pu(Io)}function Gk(t,e){if(t==="click")return Pu(e)}function Kk(t,e){if(t==="input"||t==="change")return Pu(e)}function Qk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zr=typeof Object.is=="function"?Object.is:Qk;function Co(t,e){if(zr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!wh.call(e,s)||!zr(t[s],e[s]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ap(t,e){var r=sp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sp(r)}}function Dv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $v(){for(var t=window,e=Mc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Mc(t.document)}return e}function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yk(t){var e=$v(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Dv(r.ownerDocument.documentElement,r)){if(n!==null&&dm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=ap(r,a);var o=ap(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xk=Sn&&"documentMode"in document&&11>=document.documentMode,Ia=null,Fh=null,uo=null,Uh=!1;function ip(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uh||Ia==null||Ia!==Mc(n)||(n=Ia,"selectionStart"in n&&dm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),uo&&Co(uo,n)||(uo=n,n=zc(Fh,"onSelect"),0<n.length&&(e=new lm("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ia)))}function Ql(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ca={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},Ud={},Mv={};Sn&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Ru(t){if(Ud[t])return Ud[t];if(!Ca[t])return t;var e=Ca[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Mv)return Ud[t]=e[r];return t}var Ov=Ru("animationend"),Lv=Ru("animationiteration"),Vv=Ru("animationstart"),Fv=Ru("transitionend"),Uv=new Map,op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){Uv.set(t,e),ia(e,[t])}for(var Bd=0;Bd<op.length;Bd++){var zd=op[Bd],Jk=zd.toLowerCase(),Zk=zd[0].toUpperCase()+zd.slice(1);ks(Jk,"on"+Zk)}ks(Ov,"onAnimationEnd");ks(Lv,"onAnimationIteration");ks(Vv,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(Fv,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function lp(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,J1(n,e,void 0,t),t.currentTarget=null}function Bv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;lp(s,l,d),a=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;lp(s,l,d),a=u}}}if(Lc)throw t=Mh,Lc=!1,Mh=null,t}function We(t,e){var r=e[qh];r===void 0&&(r=e[qh]=new Set);var n=t+"__bubble";r.has(n)||(zv(e,t,2,!1),r.add(n))}function Wd(t,e,r){var n=0;e&&(n|=4),zv(r,t,n,e)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Yl]){t[Yl]=!0,Yx.forEach(function(r){r!=="selectionchange"&&(eN.has(r)||Wd(r,!1,t),Wd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yl]||(e[Yl]=!0,Wd("selectionchange",!1,e))}}function zv(t,e,r,n){switch(jv(e)){case 1:var s=mk;break;case 4:s=gk;break;default:s=im}r=s.bind(null,e,r,t),s=void 0,!$h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Hd(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ls(l),o===null)return;if(u=o.tag,u===5||u===6){n=a=o;continue e}l=l.parentNode}}n=n.return}hv(function(){var d=a,h=rm(r),g=[];e:{var m=Uv.get(t);if(m!==void 0){var b=lm,k=t;switch(t){case"keypress":if(vc(r)===0)break e;case"keydown":case"keyup":b=Ck;break;case"focusin":k="focus",b=Ld;break;case"focusout":k="blur",b=Ld;break;case"beforeblur":case"afterblur":b=Ld;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=xk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Rk;break;case Ov:case Lv:case Vv:b=wk;break;case Fv:b=$k;break;case"scroll":b=pk;break;case"wheel":b=Ok;break;case"copy":case"cut":case"paste":b=kk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=J0}var v=(e&4)!==0,C=!v&&t==="scroll",E=v?m!==null?m+"Capture":null:m;v=[];for(var y=d,N;y!==null;){N=y;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,E!==null&&(R=Eo(y,E),R!=null&&v.push(Po(y,R,N)))),C)break;y=y.return}0<v.length&&(m=new b(m,k,null,r,h),g.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",m&&r!==Rh&&(k=r.relatedTarget||r.fromElement)&&(Ls(k)||k[Tn]))break e;if((b||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,b?(k=r.relatedTarget||r.toElement,b=d,k=k?Ls(k):null,k!==null&&(C=oa(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=d),b!==k)){if(v=Y0,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=J0,R="onPointerLeave",E="onPointerEnter",y="pointer"),C=b==null?m:Aa(b),N=k==null?m:Aa(k),m=new v(R,y+"leave",b,r,h),m.target=C,m.relatedTarget=N,R=null,Ls(h)===d&&(v=new v(E,y+"enter",k,r,h),v.target=N,v.relatedTarget=C,R=v),C=R,b&&k)t:{for(v=b,E=k,y=0,N=v;N;N=wa(N))y++;for(N=0,R=E;R;R=wa(R))N++;for(;0<y-N;)v=wa(v),y--;for(;0<N-y;)E=wa(E),N--;for(;y--;){if(v===E||E!==null&&v===E.alternate)break t;v=wa(v),E=wa(E)}v=null}else v=null;b!==null&&cp(g,m,b,v,!1),k!==null&&C!==null&&cp(g,C,k,v,!0)}}e:{if(m=d?Aa(d):window,b=m.nodeName&&m.nodeName.toLowerCase(),b==="select"||b==="input"&&m.type==="file")var L=Wk;else if(tp(m))if(Pv)L=Kk;else{L=qk;var M=Hk}else(b=m.nodeName)&&b.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=Gk);if(L&&(L=L(t,d))){Av(g,L,r,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Th(m,"number",m.value)}switch(M=d?Aa(d):window,t){case"focusin":(tp(M)||M.contentEditable==="true")&&(Ia=M,Fh=d,uo=null);break;case"focusout":uo=Fh=Ia=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,ip(g,r,h);break;case"selectionchange":if(Xk)break;case"keydown":case"keyup":ip(g,r,h)}var I;if(um)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ta?Iv(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Tv&&r.locale!=="ko"&&(Ta||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ta&&(I=Sv()):(Jn=h,om="value"in Jn?Jn.value:Jn.textContent,Ta=!0)),M=zc(d,_),0<M.length&&(_=new X0(_,t,null,r,h),g.push({event:_,listeners:M}),I?_.data=I:(I=Cv(r),I!==null&&(_.data=I)))),(I=Vk?Fk(t,r):Uk(t,r))&&(d=zc(d,"onBeforeInput"),0<d.length&&(h=new X0("onBeforeInput","beforeinput",null,r,h),g.push({event:h,listeners:d}),h.data=I))}Bv(g,e)})}function Po(t,e,r){return{instance:t,listener:e,currentTarget:r}}function zc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Eo(t,r),a!=null&&n.unshift(Po(t,a,s)),a=Eo(t,e),a!=null&&n.push(Po(t,a,s))),t=t.return}return n}function wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cp(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&d!==null&&(l=d,s?(u=Eo(r,a),u!=null&&o.unshift(Po(r,u,l))):s||(u=Eo(r,a),u!=null&&o.push(Po(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var tN=/\r\n?/g,rN=/\u0000|\uFFFD/g;function up(t){return(typeof t=="string"?t:""+t).replace(tN,`
`).replace(rN,"")}function Xl(t,e,r){if(e=up(e),up(t)!==e&&r)throw Error(ee(425))}function Wc(){}var Bh=null,zh=null;function Wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,nN=typeof clearTimeout=="function"?clearTimeout:void 0,dp=typeof Promise=="function"?Promise:void 0,sN=typeof queueMicrotask=="function"?queueMicrotask:typeof dp<"u"?function(t){return dp.resolve(null).then(t).catch(aN)}:Hh;function aN(t){setTimeout(function(){throw t})}function qd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),To(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);To(e)}function os(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Kr="__reactFiber$"+bi,Ro="__reactProps$"+bi,Tn="__reactContainer$"+bi,qh="__reactEvents$"+bi,iN="__reactListeners$"+bi,oN="__reactHandles$"+bi;function Ls(t){var e=t[Kr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Tn]||r[Kr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=hp(t);t!==null;){if(r=t[Kr])return r;t=hp(t)}return e}t=r,r=t.parentNode}return null}function il(t){return t=t[Kr]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Du(t){return t[Ro]||null}var Gh=[],Pa=-1;function Ns(t){return{current:t}}function qe(t){0>Pa||(t.current=Gh[Pa],Gh[Pa]=null,Pa--)}function Be(t,e){Pa++,Gh[Pa]=t.current,t.current=e}var xs={},qt=Ns(xs),lr=Ns(!1),Gs=xs;function Za(t,e){var r=t.type.contextTypes;if(!r)return xs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cr(t){return t=t.childContextTypes,t!=null}function Hc(){qe(lr),qe(qt)}function fp(t,e,r){if(qt.current!==xs)throw Error(ee(168));Be(qt,e),Be(lr,r)}function Wv(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ee(108,H1(t)||"Unknown",s));return Xe({},r,n)}function qc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xs,Gs=qt.current,Be(qt,t),Be(lr,lr.current),!0}function mp(t,e,r){var n=t.stateNode;if(!n)throw Error(ee(169));r?(t=Wv(t,e,Gs),n.__reactInternalMemoizedMergedChildContext=t,qe(lr),qe(qt),Be(qt,t)):qe(lr),Be(lr,r)}var vn=null,$u=!1,Gd=!1;function Hv(t){vn===null?vn=[t]:vn.push(t)}function lN(t){$u=!0,Hv(t)}function Es(){if(!Gd&&vn!==null){Gd=!0;var t=0,e=Oe;try{var r=vn;for(Oe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}vn=null,$u=!1}catch(s){throw vn!==null&&(vn=vn.slice(t+1)),pv(nm,Es),s}finally{Oe=e,Gd=!1}}return null}var Ra=[],Da=0,Gc=null,Kc=0,jr=[],Sr=0,Ks=null,bn=1,wn="";function Ds(t,e){Ra[Da++]=Kc,Ra[Da++]=Gc,Gc=t,Kc=e}function qv(t,e,r){jr[Sr++]=bn,jr[Sr++]=wn,jr[Sr++]=Ks,Ks=t;var n=bn;t=wn;var s=32-Fr(n)-1;n&=~(1<<s),r+=1;var a=32-Fr(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,bn=1<<32-Fr(e)+s|r<<s|n,wn=a+t}else bn=1<<a|r<<s|n,wn=t}function hm(t){t.return!==null&&(Ds(t,1),qv(t,1,0))}function fm(t){for(;t===Gc;)Gc=Ra[--Da],Ra[Da]=null,Kc=Ra[--Da],Ra[Da]=null;for(;t===Ks;)Ks=jr[--Sr],jr[Sr]=null,wn=jr[--Sr],jr[Sr]=null,bn=jr[--Sr],jr[Sr]=null}var pr=null,mr=null,Ke=!1,Lr=null;function Gv(t,e){var r=Tr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function gp(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pr=t,mr=os(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pr=t,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ks!==null?{id:bn,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Tr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,pr=t,mr=null,!0):!1;default:return!1}}function Kh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qh(t){if(Ke){var e=mr;if(e){var r=e;if(!gp(t,e)){if(Kh(t))throw Error(ee(418));e=os(r.nextSibling);var n=pr;e&&gp(t,e)?Gv(n,r):(t.flags=t.flags&-4097|2,Ke=!1,pr=t)}}else{if(Kh(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Ke=!1,pr=t}}}function pp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pr=t}function Jl(t){if(t!==pr)return!1;if(!Ke)return pp(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wh(t.type,t.memoizedProps)),e&&(e=mr)){if(Kh(t))throw Kv(),Error(ee(418));for(;e;)Gv(t,e),e=os(e.nextSibling)}if(pp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){mr=os(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}mr=null}}else mr=pr?os(t.stateNode.nextSibling):null;return!0}function Kv(){for(var t=mr;t;)t=os(t.nextSibling)}function ei(){mr=pr=null,Ke=!1}function mm(t){Lr===null?Lr=[t]:Lr.push(t)}var cN=On.ReactCurrentBatchConfig;function Gi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,t))}return t}function Zl(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yp(t){var e=t._init;return e(t._payload)}function Qv(t){function e(E,y){if(t){var N=E.deletions;N===null?(E.deletions=[y],E.flags|=16):N.push(y)}}function r(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function n(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=ds(E,y),E.index=0,E.sibling=null,E}function a(E,y,N){return E.index=N,t?(N=E.alternate,N!==null?(N=N.index,N<y?(E.flags|=2,y):N):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,y,N,R){return y===null||y.tag!==6?(y=eh(N,E.mode,R),y.return=E,y):(y=s(y,N),y.return=E,y)}function u(E,y,N,R){var L=N.type;return L===Sa?h(E,y,N.props.children,R,N.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Wn&&yp(L)===y.type)?(R=s(y,N.props),R.ref=Gi(E,y,N),R.return=E,R):(R=jc(N.type,N.key,N.props,null,E.mode,R),R.ref=Gi(E,y,N),R.return=E,R)}function d(E,y,N,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=th(N,E.mode,R),y.return=E,y):(y=s(y,N.children||[]),y.return=E,y)}function h(E,y,N,R,L){return y===null||y.tag!==7?(y=Ws(N,E.mode,R,L),y.return=E,y):(y=s(y,N),y.return=E,y)}function g(E,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=eh(""+y,E.mode,N),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:return N=jc(y.type,y.key,y.props,null,E.mode,N),N.ref=Gi(E,null,y),N.return=E,N;case ja:return y=th(y,E.mode,N),y.return=E,y;case Wn:var R=y._init;return g(E,R(y._payload),N)}if(eo(y)||Bi(y))return y=Ws(y,E.mode,N,null),y.return=E,y;Zl(E,y)}return null}function m(E,y,N,R){var L=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:l(E,y,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bl:return N.key===L?u(E,y,N,R):null;case ja:return N.key===L?d(E,y,N,R):null;case Wn:return L=N._init,m(E,y,L(N._payload),R)}if(eo(N)||Bi(N))return L!==null?null:h(E,y,N,R,null);Zl(E,N)}return null}function b(E,y,N,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(N)||null,l(y,E,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Bl:return E=E.get(R.key===null?N:R.key)||null,u(y,E,R,L);case ja:return E=E.get(R.key===null?N:R.key)||null,d(y,E,R,L);case Wn:var M=R._init;return b(E,y,N,M(R._payload),L)}if(eo(R)||Bi(R))return E=E.get(N)||null,h(y,E,R,L,null);Zl(y,R)}return null}function k(E,y,N,R){for(var L=null,M=null,I=y,_=y=0,w=null;I!==null&&_<N.length;_++){I.index>_?(w=I,I=null):w=I.sibling;var j=m(E,I,N[_],R);if(j===null){I===null&&(I=w);break}t&&I&&j.alternate===null&&e(E,I),y=a(j,y,_),M===null?L=j:M.sibling=j,M=j,I=w}if(_===N.length)return r(E,I),Ke&&Ds(E,_),L;if(I===null){for(;_<N.length;_++)I=g(E,N[_],R),I!==null&&(y=a(I,y,_),M===null?L=I:M.sibling=I,M=I);return Ke&&Ds(E,_),L}for(I=n(E,I);_<N.length;_++)w=b(I,E,_,N[_],R),w!==null&&(t&&w.alternate!==null&&I.delete(w.key===null?_:w.key),y=a(w,y,_),M===null?L=w:M.sibling=w,M=w);return t&&I.forEach(function(S){return e(E,S)}),Ke&&Ds(E,_),L}function v(E,y,N,R){var L=Bi(N);if(typeof L!="function")throw Error(ee(150));if(N=L.call(N),N==null)throw Error(ee(151));for(var M=L=null,I=y,_=y=0,w=null,j=N.next();I!==null&&!j.done;_++,j=N.next()){I.index>_?(w=I,I=null):w=I.sibling;var S=m(E,I,j.value,R);if(S===null){I===null&&(I=w);break}t&&I&&S.alternate===null&&e(E,I),y=a(S,y,_),M===null?L=S:M.sibling=S,M=S,I=w}if(j.done)return r(E,I),Ke&&Ds(E,_),L;if(I===null){for(;!j.done;_++,j=N.next())j=g(E,j.value,R),j!==null&&(y=a(j,y,_),M===null?L=j:M.sibling=j,M=j);return Ke&&Ds(E,_),L}for(I=n(E,I);!j.done;_++,j=N.next())j=b(I,E,_,j.value,R),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?_:j.key),y=a(j,y,_),M===null?L=j:M.sibling=j,M=j);return t&&I.forEach(function(A){return e(E,A)}),Ke&&Ds(E,_),L}function C(E,y,N,R){if(typeof N=="object"&&N!==null&&N.type===Sa&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Bl:e:{for(var L=N.key,M=y;M!==null;){if(M.key===L){if(L=N.type,L===Sa){if(M.tag===7){r(E,M.sibling),y=s(M,N.props.children),y.return=E,E=y;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Wn&&yp(L)===M.type){r(E,M.sibling),y=s(M,N.props),y.ref=Gi(E,M,N),y.return=E,E=y;break e}r(E,M);break}else e(E,M);M=M.sibling}N.type===Sa?(y=Ws(N.props.children,E.mode,R,N.key),y.return=E,E=y):(R=jc(N.type,N.key,N.props,null,E.mode,R),R.ref=Gi(E,y,N),R.return=E,E=R)}return o(E);case ja:e:{for(M=N.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){r(E,y.sibling),y=s(y,N.children||[]),y.return=E,E=y;break e}else{r(E,y);break}else e(E,y);y=y.sibling}y=th(N,E.mode,R),y.return=E,E=y}return o(E);case Wn:return M=N._init,C(E,y,M(N._payload),R)}if(eo(N))return k(E,y,N,R);if(Bi(N))return v(E,y,N,R);Zl(E,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(r(E,y.sibling),y=s(y,N),y.return=E,E=y):(r(E,y),y=eh(N,E.mode,R),y.return=E,E=y),o(E)):r(E,y)}return C}var ti=Qv(!0),Yv=Qv(!1),Qc=Ns(null),Yc=null,$a=null,gm=null;function pm(){gm=$a=Yc=null}function ym(t){var e=Qc.current;qe(Qc),t._currentValue=e}function Yh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function za(t,e){Yc=t,gm=$a=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(or=!0),t.firstContext=null)}function Pr(t){var e=t._currentValue;if(gm!==t)if(t={context:t,memoizedValue:e,next:null},$a===null){if(Yc===null)throw Error(ee(308));$a=t,Yc.dependencies={lanes:0,firstContext:t}}else $a=$a.next=t;return e}var Vs=null;function xm(t){Vs===null?Vs=[t]:Vs.push(t)}function Xv(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,xm(e)):(r.next=s.next,s.next=r),e.interleaved=r,In(t,n)}function In(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Hn=!1;function vm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Pe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,In(t,r)}return s=n.interleaved,s===null?(e.next=e,xm(n)):(e.next=s.next,s.next=e),n.interleaved=e,In(t,r)}function bc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,sm(t,r)}}function xp(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Xc(t,e,r,n){var s=t.updateQueue;Hn=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var g=s.baseState;o=0,h=d=u=null,l=a;do{var m=l.lane,b=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,v=l;switch(m=e,b=r,v.tag){case 1:if(k=v.payload,typeof k=="function"){g=k.call(b,g,m);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=v.payload,m=typeof k=="function"?k.call(b,g,m):k,m==null)break e;g=Xe({},g,m);break e;case 2:Hn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else b={eventTime:b,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=b,u=g):h=h.next=b,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Ys|=o,t.lanes=o,t.memoizedState=g}}function vp(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ee(191,s));s.call(n)}}}var ol={},Jr=Ns(ol),Do=Ns(ol),$o=Ns(ol);function Fs(t){if(t===ol)throw Error(ee(174));return t}function bm(t,e){switch(Be($o,e),Be(Do,t),Be(Jr,ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ch(e,t)}qe(Jr),Be(Jr,e)}function ri(){qe(Jr),qe(Do),qe($o)}function Zv(t){Fs($o.current);var e=Fs(Jr.current),r=Ch(e,t.type);e!==r&&(Be(Do,t),Be(Jr,r))}function wm(t){Do.current===t&&(qe(Jr),qe(Do))}var Qe=Ns(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kd=[];function _m(){for(var t=0;t<Kd.length;t++)Kd[t]._workInProgressVersionPrimary=null;Kd.length=0}var wc=On.ReactCurrentDispatcher,Qd=On.ReactCurrentBatchConfig,Qs=0,Ye=null,ht=null,wt=null,Zc=!1,ho=!1,Mo=0,uN=0;function Ft(){throw Error(ee(321))}function km(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!zr(t[r],e[r]))return!1;return!0}function Nm(t,e,r,n,s,a){if(Qs=a,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wc.current=t===null||t.memoizedState===null?mN:gN,t=r(n,s),ho){a=0;do{if(ho=!1,Mo=0,25<=a)throw Error(ee(301));a+=1,wt=ht=null,e.updateQueue=null,wc.current=pN,t=r(n,s)}while(ho)}if(wc.current=eu,e=ht!==null&&ht.next!==null,Qs=0,wt=ht=Ye=null,Zc=!1,e)throw Error(ee(300));return t}function Em(){var t=Mo!==0;return Mo=0,t}function Gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ye.memoizedState=wt=t:wt=wt.next=t,wt}function Rr(){if(ht===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=wt===null?Ye.memoizedState:wt.next;if(e!==null)wt=e,ht=t;else{if(t===null)throw Error(ee(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},wt===null?Ye.memoizedState=wt=t:wt=wt.next=t}return wt}function Oo(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=Rr(),r=e.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=t;var n=ht,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((Qs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=g,o=n):u=u.next=g,Ye.lanes|=h,Ys|=h}d=d.next}while(d!==null&&d!==a);u===null?o=n:u.next=l,zr(n,e.memoizedState)||(or=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,Ye.lanes|=a,Ys|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Xd(t){var e=Rr(),r=e.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);zr(a,e.memoizedState)||(or=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function eb(){}function tb(t,e){var r=Ye,n=Rr(),s=e(),a=!zr(n.memoizedState,s);if(a&&(n.memoizedState=s,or=!0),n=n.queue,jm(sb.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,Lo(9,nb.bind(null,r,n,s,e),void 0,null),_t===null)throw Error(ee(349));Qs&30||rb(r,e,s)}return s}function rb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function nb(t,e,r,n){e.value=r,e.getSnapshot=n,ab(e)&&ib(t)}function sb(t,e,r){return r(function(){ab(e)&&ib(t)})}function ab(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!zr(t,r)}catch{return!0}}function ib(t){var e=In(t,1);e!==null&&Ur(e,t,1,-1)}function bp(t){var e=Gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=fN.bind(null,Ye,t),[e.memoizedState,t]}function Lo(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ob(){return Rr().memoizedState}function _c(t,e,r,n){var s=Gr();Ye.flags|=t,s.memoizedState=Lo(1|e,r,void 0,n===void 0?null:n)}function Mu(t,e,r,n){var s=Rr();n=n===void 0?null:n;var a=void 0;if(ht!==null){var o=ht.memoizedState;if(a=o.destroy,n!==null&&km(n,o.deps)){s.memoizedState=Lo(e,r,a,n);return}}Ye.flags|=t,s.memoizedState=Lo(1|e,r,a,n)}function wp(t,e){return _c(8390656,8,t,e)}function jm(t,e){return Mu(2048,8,t,e)}function lb(t,e){return Mu(4,2,t,e)}function cb(t,e){return Mu(4,4,t,e)}function ub(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function db(t,e,r){return r=r!=null?r.concat([t]):null,Mu(4,4,ub.bind(null,e,t),r)}function Sm(){}function hb(t,e){var r=Rr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&km(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function fb(t,e){var r=Rr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&km(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function mb(t,e,r){return Qs&21?(zr(r,e)||(r=vv(),Ye.lanes|=r,Ys|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,or=!0),t.memoizedState=r)}function dN(t,e){var r=Oe;Oe=r!==0&&4>r?r:4,t(!0);var n=Qd.transition;Qd.transition={};try{t(!1),e()}finally{Oe=r,Qd.transition=n}}function gb(){return Rr().memoizedState}function hN(t,e,r){var n=us(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pb(t))yb(e,r);else if(r=Xv(t,e,r,n),r!==null){var s=rr();Ur(r,t,n,s),xb(r,e,n)}}function fN(t,e,r){var n=us(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pb(t))yb(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,zr(l,o)){var u=e.interleaved;u===null?(s.next=s,xm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=Xv(t,e,s,n),r!==null&&(s=rr(),Ur(r,t,n,s),xb(r,e,n))}}function pb(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function yb(t,e){ho=Zc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function xb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,sm(t,r)}}var eu={readContext:Pr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},mN={readContext:Pr,useCallback:function(t,e){return Gr().memoizedState=[t,e===void 0?null:e],t},useContext:Pr,useEffect:wp,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,_c(4194308,4,ub.bind(null,e,t),r)},useLayoutEffect:function(t,e){return _c(4194308,4,t,e)},useInsertionEffect:function(t,e){return _c(4,2,t,e)},useMemo:function(t,e){var r=Gr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Gr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=hN.bind(null,Ye,t),[n.memoizedState,t]},useRef:function(t){var e=Gr();return t={current:t},e.memoizedState=t},useState:bp,useDebugValue:Sm,useDeferredValue:function(t){return Gr().memoizedState=t},useTransition:function(){var t=bp(!1),e=t[0];return t=dN.bind(null,t[1]),Gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ye,s=Gr();if(Ke){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=e(),_t===null)throw Error(ee(349));Qs&30||rb(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,wp(sb.bind(null,n,a,t),[t]),n.flags|=2048,Lo(9,nb.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Gr(),e=_t.identifierPrefix;if(Ke){var r=wn,n=bn;r=(n&~(1<<32-Fr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Mo++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=uN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gN={readContext:Pr,useCallback:hb,useContext:Pr,useEffect:jm,useImperativeHandle:db,useInsertionEffect:lb,useLayoutEffect:cb,useMemo:fb,useReducer:Yd,useRef:ob,useState:function(){return Yd(Oo)},useDebugValue:Sm,useDeferredValue:function(t){var e=Rr();return mb(e,ht.memoizedState,t)},useTransition:function(){var t=Yd(Oo)[0],e=Rr().memoizedState;return[t,e]},useMutableSource:eb,useSyncExternalStore:tb,useId:gb,unstable_isNewReconciler:!1},pN={readContext:Pr,useCallback:hb,useContext:Pr,useEffect:jm,useImperativeHandle:db,useInsertionEffect:lb,useLayoutEffect:cb,useMemo:fb,useReducer:Xd,useRef:ob,useState:function(){return Xd(Oo)},useDebugValue:Sm,useDeferredValue:function(t){var e=Rr();return ht===null?e.memoizedState=t:mb(e,ht.memoizedState,t)},useTransition:function(){var t=Xd(Oo)[0],e=Rr().memoizedState;return[t,e]},useMutableSource:eb,useSyncExternalStore:tb,useId:gb,unstable_isNewReconciler:!1};function Mr(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Xh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Xe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ou={isMounted:function(t){return(t=t._reactInternals)?oa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=rr(),s=us(t),a=jn(n,s);a.payload=e,r!=null&&(a.callback=r),e=ls(t,a,s),e!==null&&(Ur(e,t,s,n),bc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=rr(),s=us(t),a=jn(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ls(t,a,s),e!==null&&(Ur(e,t,s,n),bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rr(),n=us(t),s=jn(r,n);s.tag=2,e!=null&&(s.callback=e),e=ls(t,s,n),e!==null&&(Ur(e,t,n,r),bc(e,t,n))}};function _p(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Co(r,n)||!Co(s,a):!0}function vb(t,e,r){var n=!1,s=xs,a=e.contextType;return typeof a=="object"&&a!==null?a=Pr(a):(s=cr(e)?Gs:qt.current,n=e.contextTypes,a=(n=n!=null)?Za(t,s):xs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ou,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function kp(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ou.enqueueReplaceState(e,e.state,null)}function Jh(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},vm(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Pr(a):(a=cr(e)?Gs:qt.current,s.context=Za(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Xh(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ou.enqueueReplaceState(s,s.state,null),Xc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var r="",n=e;do r+=W1(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Jd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Zh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var yN=typeof WeakMap=="function"?WeakMap:Map;function bb(t,e,r){r=jn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ru||(ru=!0,uf=n),Zh(t,e)},r}function wb(t,e,r){r=jn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Zh(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Zh(t,e),typeof n!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Np(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new yN;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=AN.bind(null,t,e,r),e.then(t,t))}function Ep(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jp(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=jn(-1,1),e.tag=2,ls(r,e,1))),r.lanes|=1),t)}var xN=On.ReactCurrentOwner,or=!1;function Zt(t,e,r,n){e.child=t===null?Yv(e,null,r,n):ti(e,t.child,r,n)}function Sp(t,e,r,n,s){r=r.render;var a=e.ref;return za(e,s),n=Nm(t,e,r,n,a,s),r=Em(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(Ke&&r&&hm(e),e.flags|=1,Zt(t,e,n,s),e.child)}function Tp(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!$m(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,_b(t,e,a,n,s)):(t=jc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Co,r(o,n)&&t.ref===e.ref)return Cn(t,e,s)}return e.flags|=1,t=ds(a,n),t.ref=e.ref,t.return=e,e.child=t}function _b(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Co(a,n)&&t.ref===e.ref)if(or=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(or=!0);else return e.lanes=t.lanes,Cn(t,e,s)}return ef(t,e,r,n,s)}function kb(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Oa,fr),fr|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(Oa,fr),fr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Be(Oa,fr),fr|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Be(Oa,fr),fr|=n;return Zt(t,e,s,r),e.child}function Nb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ef(t,e,r,n,s){var a=cr(r)?Gs:qt.current;return a=Za(e,a),za(e,s),r=Nm(t,e,r,n,a,s),n=Em(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(Ke&&n&&hm(e),e.flags|=1,Zt(t,e,r,s),e.child)}function Ip(t,e,r,n,s){if(cr(r)){var a=!0;qc(e)}else a=!1;if(za(e,s),e.stateNode===null)kc(t,e),vb(e,r,n),Jh(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Pr(d):(d=cr(r)?Gs:qt.current,d=Za(e,d));var h=r.getDerivedStateFromProps,g=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==d)&&kp(e,o,n,d),Hn=!1;var m=e.memoizedState;o.state=m,Xc(e,n,o,s),u=e.memoizedState,l!==n||m!==u||lr.current||Hn?(typeof h=="function"&&(Xh(e,r,h,n),u=e.memoizedState),(l=Hn||_p(e,r,l,n,m,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Jv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Mr(e.type,l),o.props=d,g=e.pendingProps,m=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Pr(u):(u=cr(r)?Gs:qt.current,u=Za(e,u));var b=r.getDerivedStateFromProps;(h=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==u)&&kp(e,o,n,u),Hn=!1,m=e.memoizedState,o.state=m,Xc(e,n,o,s);var k=e.memoizedState;l!==g||m!==k||lr.current||Hn?(typeof b=="function"&&(Xh(e,r,b,n),k=e.memoizedState),(d=Hn||_p(e,r,d,n,m,k,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=k),o.props=n,o.state=k,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return tf(t,e,r,n,a,s)}function tf(t,e,r,n,s,a){Nb(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&mp(e,r,!1),Cn(t,e,a);n=e.stateNode,xN.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ti(e,t.child,null,a),e.child=ti(e,null,l,a)):Zt(t,e,l,a),e.memoizedState=n.state,s&&mp(e,r,!0),e.child}function Eb(t){var e=t.stateNode;e.pendingContext?fp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fp(t,e.context,!1),bm(t,e.containerInfo)}function Cp(t,e,r,n,s){return ei(),mm(s),e.flags|=256,Zt(t,e,r,n),e.child}var rf={dehydrated:null,treeContext:null,retryLane:0};function nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function jb(t,e,r){var n=e.pendingProps,s=Qe.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Qe,s&1),t===null)return Qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Fu(o,n,0,null),t=Ws(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=nf(r),e.memoizedState=rf,t):Tm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vN(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ds(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ds(l,a):(a=Ws(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?nf(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=rf,n}return a=t.child,t=a.sibling,n=ds(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Tm(t,e){return e=Fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ec(t,e,r,n){return n!==null&&mm(n),ti(e,t.child,null,r),t=Tm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vN(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Jd(Error(ee(422))),ec(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=Fu({mode:"visible",children:n.children},s,0,null),a=Ws(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&ti(e,t.child,null,o),e.child.memoizedState=nf(o),e.memoizedState=rf,a);if(!(e.mode&1))return ec(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ee(419)),n=Jd(a,n,void 0),ec(t,e,o,n)}if(l=(o&t.childLanes)!==0,or||l){if(n=_t,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,In(t,s),Ur(n,t,s,-1))}return Dm(),n=Jd(Error(ee(421))),ec(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PN.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,mr=os(s.nextSibling),pr=e,Ke=!0,Lr=null,t!==null&&(jr[Sr++]=bn,jr[Sr++]=wn,jr[Sr++]=Ks,bn=t.id,wn=t.overflow,Ks=e),e=Tm(e,n.children),e.flags|=4096,e)}function Ap(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Yh(t.return,e,r)}function Zd(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Sb(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Zt(t,e,n.children,r),n=Qe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,r,e);else if(t.tag===19)Ap(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Be(Qe,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Jc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Zd(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Zd(e,!0,r,null,a);break;case"together":Zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,r=ds(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ds(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function bN(t,e,r){switch(e.tag){case 3:Eb(e),ei();break;case 5:Zv(e);break;case 1:cr(e.type)&&qc(e);break;case 4:bm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Be(Qc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Be(Qe,Qe.current&1),e.flags|=128,null):r&e.child.childLanes?jb(t,e,r):(Be(Qe,Qe.current&1),t=Cn(t,e,r),t!==null?t.sibling:null);Be(Qe,Qe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Sb(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Qe,Qe.current),n)break;return null;case 22:case 23:return e.lanes=0,kb(t,e,r)}return Cn(t,e,r)}var Tb,sf,Ib,Cb;Tb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};sf=function(){};Ib=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Fs(Jr.current);var a=null;switch(r){case"input":s=jh(t,s),n=jh(t,n),a=[];break;case"select":s=Xe({},s,{value:void 0}),n=Xe({},n,{value:void 0}),a=[];break;case"textarea":s=Ih(t,s),n=Ih(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Wc)}Ah(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ko.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var u=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ko.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&We("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Cb=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ki(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function wN(t,e,r){var n=e.pendingProps;switch(fm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return cr(e.type)&&Hc(),Ut(e),null;case 3:return n=e.stateNode,ri(),qe(lr),qe(qt),_m(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(ff(Lr),Lr=null))),sf(t,e),Ut(e),null;case 5:wm(e);var s=Fs($o.current);if(r=e.type,t!==null&&e.stateNode!=null)Ib(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ee(166));return Ut(e),null}if(t=Fs(Jr.current),Jl(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Kr]=e,n[Ro]=a,t=(e.mode&1)!==0,r){case"dialog":We("cancel",n),We("close",n);break;case"iframe":case"object":case"embed":We("load",n);break;case"video":case"audio":for(s=0;s<ro.length;s++)We(ro[s],n);break;case"source":We("error",n);break;case"img":case"image":case"link":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"input":F0(n,a),We("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},We("invalid",n);break;case"textarea":B0(n,a),We("invalid",n)}Ah(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xl(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xl(n.textContent,l,t),s=["children",""+l]):ko.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&We("scroll",n)}switch(r){case"input":zl(n),U0(n,a,!0);break;case"textarea":zl(n),z0(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Wc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Kr]=e,t[Ro]=n,Tb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ph(r,n),r){case"dialog":We("cancel",t),We("close",t),s=n;break;case"iframe":case"object":case"embed":We("load",t),s=n;break;case"video":case"audio":for(s=0;s<ro.length;s++)We(ro[s],t);s=n;break;case"source":We("error",t),s=n;break;case"img":case"image":case"link":We("error",t),We("load",t),s=n;break;case"details":We("toggle",t),s=n;break;case"input":F0(t,n),s=jh(t,n),We("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Xe({},n,{value:void 0}),We("invalid",t);break;case"textarea":B0(t,n),s=Ih(t,n),We("invalid",t);break;default:s=n}Ah(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?ov(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&av(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&No(t,u):typeof u=="number"&&No(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ko.hasOwnProperty(a)?u!=null&&a==="onScroll"&&We("scroll",t):u!=null&&Jf(t,a,u,o))}switch(r){case"input":zl(t),U0(t,n,!1);break;case"textarea":zl(t),z0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ys(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Va(t,!!n.multiple,a,!1):n.defaultValue!=null&&Va(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)Cb(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ee(166));if(r=Fs($o.current),Fs(Jr.current),Jl(e)){if(n=e.stateNode,r=e.memoizedProps,n[Kr]=e,(a=n.nodeValue!==r)&&(t=pr,t!==null))switch(t.tag){case 3:Xl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xl(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kr]=e,e.stateNode=n}return Ut(e),null;case 13:if(qe(Qe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&mr!==null&&e.mode&1&&!(e.flags&128))Kv(),ei(),e.flags|=98560,a=!1;else if(a=Jl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ee(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[Kr]=e}else ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),a=!1}else Lr!==null&&(ff(Lr),Lr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?ft===0&&(ft=3):Dm())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return ri(),sf(t,e),t===null&&Ao(e.stateNode.containerInfo),Ut(e),null;case 10:return ym(e.type._context),Ut(e),null;case 17:return cr(e.type)&&Hc(),Ut(e),null;case 19:if(qe(Qe),a=e.memoizedState,a===null)return Ut(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Ki(a,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jc(t),o!==null){for(e.flags|=128,Ki(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Be(Qe,Qe.current&1|2),e.child}t=t.sibling}a.tail!==null&&st()>si&&(e.flags|=128,n=!0,Ki(a,!1),e.lanes=4194304)}else{if(!n)if(t=Jc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ki(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ke)return Ut(e),null}else 2*st()-a.renderingStartTime>si&&r!==1073741824&&(e.flags|=128,n=!0,Ki(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=st(),e.sibling=null,r=Qe.current,Be(Qe,n?r&1|2:r&1),e):(Ut(e),null);case 22:case 23:return Rm(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?fr&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function _N(t,e){switch(fm(e),e.tag){case 1:return cr(e.type)&&Hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),qe(lr),qe(qt),_m(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wm(e),null;case 13:if(qe(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Qe),null;case 4:return ri(),null;case 10:return ym(e.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var tc=!1,Wt=!1,kN=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ma(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rt(t,e,n)}else r.current=null}function af(t,e,r){try{r()}catch(n){rt(t,e,n)}}var Pp=!1;function NN(t,e){if(Bh=Uc,t=$v(),dm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,d=0,h=0,g=t,m=null;t:for(;;){for(var b;g!==r||s!==0&&g.nodeType!==3||(l=o+s),g!==a||n!==0&&g.nodeType!==3||(u=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(b=g.firstChild)!==null;)m=g,g=b;for(;;){if(g===t)break t;if(m===r&&++d===s&&(l=o),m===a&&++h===n&&(u=o),(b=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=b}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(zh={focusedElem:t,selectionRange:r},Uc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var v=k.memoizedProps,C=k.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:Mr(e.type,v),C);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(R){rt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return k=Pp,Pp=!1,k}function fo(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&af(e,r,a)}s=s.next}while(s!==n)}}function Lu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function of(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ab(t){var e=t.alternate;e!==null&&(t.alternate=null,Ab(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kr],delete e[Ro],delete e[qh],delete e[iN],delete e[oN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pb(t){return t.tag===5||t.tag===3||t.tag===4}function Rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Wc));else if(n!==4&&(t=t.child,t!==null))for(lf(t,e,r),t=t.sibling;t!==null;)lf(t,e,r),t=t.sibling}function cf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(cf(t,e,r),t=t.sibling;t!==null;)cf(t,e,r),t=t.sibling}var It=null,Or=!1;function Un(t,e,r){for(r=r.child;r!==null;)Rb(t,e,r),r=r.sibling}function Rb(t,e,r){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Cu,r)}catch{}switch(r.tag){case 5:Wt||Ma(r,e);case 6:var n=It,s=Or;It=null,Un(t,e,r),It=n,Or=s,It!==null&&(Or?(t=It,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):It.removeChild(r.stateNode));break;case 18:It!==null&&(Or?(t=It,r=r.stateNode,t.nodeType===8?qd(t.parentNode,r):t.nodeType===1&&qd(t,r),To(t)):qd(It,r.stateNode));break;case 4:n=It,s=Or,It=r.stateNode.containerInfo,Or=!0,Un(t,e,r),It=n,Or=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&af(r,e,o),s=s.next}while(s!==n)}Un(t,e,r);break;case 1:if(!Wt&&(Ma(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){rt(r,e,l)}Un(t,e,r);break;case 21:Un(t,e,r);break;case 22:r.mode&1?(Wt=(n=Wt)||r.memoizedState!==null,Un(t,e,r),Wt=n):Un(t,e,r);break;default:Un(t,e,r)}}function Dp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new kN),e.forEach(function(n){var s=RN.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function $r(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Or=!1;break e;case 3:It=l.stateNode.containerInfo,Or=!0;break e;case 4:It=l.stateNode.containerInfo,Or=!0;break e}l=l.return}if(It===null)throw Error(ee(160));Rb(a,o,s),It=null,Or=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){rt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Db(e,t),e=e.sibling}function Db(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),qr(t),n&4){try{fo(3,t,t.return),Lu(3,t)}catch(v){rt(t,t.return,v)}try{fo(5,t,t.return)}catch(v){rt(t,t.return,v)}}break;case 1:$r(e,t),qr(t),n&512&&r!==null&&Ma(r,r.return);break;case 5:if($r(e,t),qr(t),n&512&&r!==null&&Ma(r,r.return),t.flags&32){var s=t.stateNode;try{No(s,"")}catch(v){rt(t,t.return,v)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&rv(s,a),Ph(l,o);var d=Ph(l,a);for(o=0;o<u.length;o+=2){var h=u[o],g=u[o+1];h==="style"?ov(s,g):h==="dangerouslySetInnerHTML"?av(s,g):h==="children"?No(s,g):Jf(s,h,g,d)}switch(l){case"input":Sh(s,a);break;case"textarea":nv(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Va(s,!!a.multiple,b,!1):m!==!!a.multiple&&(a.defaultValue!=null?Va(s,!!a.multiple,a.defaultValue,!0):Va(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ro]=a}catch(v){rt(t,t.return,v)}}break;case 6:if($r(e,t),qr(t),n&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(v){rt(t,t.return,v)}}break;case 3:if($r(e,t),qr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(v){rt(t,t.return,v)}break;case 4:$r(e,t),qr(t);break;case 13:$r(e,t),qr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Am=st())),n&4&&Dp(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Wt=(d=Wt)||h,$r(e,t),Wt=d):$r(e,t),qr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(g=ae=h;ae!==null;){switch(m=ae,b=m.child,m.tag){case 0:case 11:case 14:case 15:fo(4,m,m.return);break;case 1:Ma(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(v){rt(n,r,v)}}break;case 5:Ma(m,m.return);break;case 22:if(m.memoizedState!==null){Mp(g);continue}}b!==null?(b.return=m,ae=b):Mp(g)}h=h.sibling}e:for(h=null,g=t;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=iv("display",o))}catch(v){rt(t,t.return,v)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(v){rt(t,t.return,v)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:$r(e,t),qr(t),n&4&&Dp(t);break;case 21:break;default:$r(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Pb(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(No(s,""),n.flags&=-33);var a=Rp(t);cf(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Rp(t);lf(t,l,o);break;default:throw Error(ee(161))}}catch(u){rt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function EN(t,e,r){ae=t,$b(t)}function $b(t,e,r){for(var n=(t.mode&1)!==0;ae!==null;){var s=ae,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||tc;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Wt;l=tc;var d=Wt;if(tc=o,(Wt=u)&&!d)for(ae=s;ae!==null;)o=ae,u=o.child,o.tag===22&&o.memoizedState!==null?Op(s):u!==null?(u.return=o,ae=u):Op(s);for(;a!==null;)ae=a,$b(a),a=a.sibling;ae=s,tc=l,Wt=d}$p(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ae=a):$p(t)}}function $p(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||Lu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Wt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Mr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&vp(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}vp(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&To(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Wt||e.flags&512&&of(e)}catch(m){rt(e,e.return,m)}}if(e===t){ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,ae=r;break}ae=e.return}}function Mp(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ae=r;break}ae=e.return}}function Op(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Lu(4,e)}catch(u){rt(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){rt(e,s,u)}}var a=e.return;try{of(e)}catch(u){rt(e,a,u)}break;case 5:var o=e.return;try{of(e)}catch(u){rt(e,o,u)}}}catch(u){rt(e,e.return,u)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var jN=Math.ceil,tu=On.ReactCurrentDispatcher,Im=On.ReactCurrentOwner,Cr=On.ReactCurrentBatchConfig,Pe=0,_t=null,ct=null,Pt=0,fr=0,Oa=Ns(0),ft=0,Vo=null,Ys=0,Vu=0,Cm=0,mo=null,ar=null,Am=0,si=1/0,xn=null,ru=!1,uf=null,cs=null,rc=!1,Zn=null,nu=0,go=0,df=null,Nc=-1,Ec=0;function rr(){return Pe&6?st():Nc!==-1?Nc:Nc=st()}function us(t){return t.mode&1?Pe&2&&Pt!==0?Pt&-Pt:cN.transition!==null?(Ec===0&&(Ec=vv()),Ec):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:jv(t.type)),t):1}function Ur(t,e,r,n){if(50<go)throw go=0,df=null,Error(ee(185));sl(t,r,n),(!(Pe&2)||t!==_t)&&(t===_t&&(!(Pe&2)&&(Vu|=r),ft===4&&Gn(t,Pt)),ur(t,n),r===1&&Pe===0&&!(e.mode&1)&&(si=st()+500,$u&&Es()))}function ur(t,e){var r=t.callbackNode;ck(t,e);var n=Fc(t,t===_t?Pt:0);if(n===0)r!==null&&q0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&q0(r),e===1)t.tag===0?lN(Lp.bind(null,t)):Hv(Lp.bind(null,t)),sN(function(){!(Pe&6)&&Es()}),r=null;else{switch(bv(n)){case 1:r=nm;break;case 4:r=yv;break;case 16:r=Vc;break;case 536870912:r=xv;break;default:r=Vc}r=zb(r,Mb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Mb(t,e){if(Nc=-1,Ec=0,Pe&6)throw Error(ee(327));var r=t.callbackNode;if(Wa()&&t.callbackNode!==r)return null;var n=Fc(t,t===_t?Pt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=su(t,n);else{e=n;var s=Pe;Pe|=2;var a=Lb();(_t!==t||Pt!==e)&&(xn=null,si=st()+500,zs(t,e));do try{IN();break}catch(l){Ob(t,l)}while(!0);pm(),tu.current=a,Pe=s,ct!==null?e=0:(_t=null,Pt=0,e=ft)}if(e!==0){if(e===2&&(s=Oh(t),s!==0&&(n=s,e=hf(t,s))),e===1)throw r=Vo,zs(t,0),Gn(t,n),ur(t,st()),r;if(e===6)Gn(t,n);else{if(s=t.current.alternate,!(n&30)&&!SN(s)&&(e=su(t,n),e===2&&(a=Oh(t),a!==0&&(n=a,e=hf(t,a))),e===1))throw r=Vo,zs(t,0),Gn(t,n),ur(t,st()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ee(345));case 2:$s(t,ar,xn);break;case 3:if(Gn(t,n),(n&130023424)===n&&(e=Am+500-st(),10<e)){if(Fc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){rr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Hh($s.bind(null,t,ar,xn),e);break}$s(t,ar,xn);break;case 4:if(Gn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Fr(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=st()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jN(n/1960))-n,10<n){t.timeoutHandle=Hh($s.bind(null,t,ar,xn),n);break}$s(t,ar,xn);break;case 5:$s(t,ar,xn);break;default:throw Error(ee(329))}}}return ur(t,st()),t.callbackNode===r?Mb.bind(null,t):null}function hf(t,e){var r=mo;return t.current.memoizedState.isDehydrated&&(zs(t,e).flags|=256),t=su(t,e),t!==2&&(e=ar,ar=r,e!==null&&ff(e)),t}function ff(t){ar===null?ar=t:ar.push.apply(ar,t)}function SN(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!zr(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gn(t,e){for(e&=~Cm,e&=~Vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Fr(e),n=1<<r;t[r]=-1,e&=~n}}function Lp(t){if(Pe&6)throw Error(ee(327));Wa();var e=Fc(t,0);if(!(e&1))return ur(t,st()),null;var r=su(t,e);if(t.tag!==0&&r===2){var n=Oh(t);n!==0&&(e=n,r=hf(t,n))}if(r===1)throw r=Vo,zs(t,0),Gn(t,e),ur(t,st()),r;if(r===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,ar,xn),ur(t,st()),null}function Pm(t,e){var r=Pe;Pe|=1;try{return t(e)}finally{Pe=r,Pe===0&&(si=st()+500,$u&&Es())}}function Xs(t){Zn!==null&&Zn.tag===0&&!(Pe&6)&&Wa();var e=Pe;Pe|=1;var r=Cr.transition,n=Oe;try{if(Cr.transition=null,Oe=1,t)return t()}finally{Oe=n,Cr.transition=r,Pe=e,!(Pe&6)&&Es()}}function Rm(){fr=Oa.current,qe(Oa)}function zs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,nN(r)),ct!==null)for(r=ct.return;r!==null;){var n=r;switch(fm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hc();break;case 3:ri(),qe(lr),qe(qt),_m();break;case 5:wm(n);break;case 4:ri();break;case 13:qe(Qe);break;case 19:qe(Qe);break;case 10:ym(n.type._context);break;case 22:case 23:Rm()}r=r.return}if(_t=t,ct=t=ds(t.current,null),Pt=fr=e,ft=0,Vo=null,Cm=Vu=Ys=0,ar=mo=null,Vs!==null){for(e=0;e<Vs.length;e++)if(r=Vs[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}Vs=null}return t}function Ob(t,e){do{var r=ct;try{if(pm(),wc.current=eu,Zc){for(var n=Ye.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Zc=!1}if(Qs=0,wt=ht=Ye=null,ho=!1,Mo=0,Im.current=null,r===null||r.return===null){ft=1,Vo=e,ct=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Pt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=Ep(o);if(b!==null){b.flags&=-257,jp(b,o,l,a,e),b.mode&1&&Np(a,d,e),e=b,u=d;var k=e.updateQueue;if(k===null){var v=new Set;v.add(u),e.updateQueue=v}else k.add(u);break e}else{if(!(e&1)){Np(a,d,e),Dm();break e}u=Error(ee(426))}}else if(Ke&&l.mode&1){var C=Ep(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),jp(C,o,l,a,e),mm(ni(u,l));break e}}a=u=ni(u,l),ft!==4&&(ft=2),mo===null?mo=[a]:mo.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var E=bb(a,u,e);xp(a,E);break e;case 1:l=u;var y=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(cs===null||!cs.has(N)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=wb(a,l,e);xp(a,R);break e}}a=a.return}while(a!==null)}Fb(r)}catch(L){e=L,ct===r&&r!==null&&(ct=r=r.return);continue}break}while(!0)}function Lb(){var t=tu.current;return tu.current=eu,t===null?eu:t}function Dm(){(ft===0||ft===3||ft===2)&&(ft=4),_t===null||!(Ys&268435455)&&!(Vu&268435455)||Gn(_t,Pt)}function su(t,e){var r=Pe;Pe|=2;var n=Lb();(_t!==t||Pt!==e)&&(xn=null,zs(t,e));do try{TN();break}catch(s){Ob(t,s)}while(!0);if(pm(),Pe=r,tu.current=n,ct!==null)throw Error(ee(261));return _t=null,Pt=0,ft}function TN(){for(;ct!==null;)Vb(ct)}function IN(){for(;ct!==null&&!ek();)Vb(ct)}function Vb(t){var e=Bb(t.alternate,t,fr);t.memoizedProps=t.pendingProps,e===null?Fb(t):ct=e,Im.current=null}function Fb(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=_N(r,e),r!==null){r.flags&=32767,ct=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ct=null;return}}else if(r=wN(r,e,fr),r!==null){ct=r;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);ft===0&&(ft=5)}function $s(t,e,r){var n=Oe,s=Cr.transition;try{Cr.transition=null,Oe=1,CN(t,e,r,n)}finally{Cr.transition=s,Oe=n}return null}function CN(t,e,r,n){do Wa();while(Zn!==null);if(Pe&6)throw Error(ee(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(uk(t,a),t===_t&&(ct=_t=null,Pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||rc||(rc=!0,zb(Vc,function(){return Wa(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Cr.transition,Cr.transition=null;var o=Oe;Oe=1;var l=Pe;Pe|=4,Im.current=null,NN(t,r),Db(r,t),Yk(zh),Uc=!!Bh,zh=Bh=null,t.current=r,EN(r),tk(),Pe=l,Oe=o,Cr.transition=a}else t.current=r;if(rc&&(rc=!1,Zn=t,nu=s),a=t.pendingLanes,a===0&&(cs=null),sk(r.stateNode),ur(t,st()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ru)throw ru=!1,t=uf,uf=null,t;return nu&1&&t.tag!==0&&Wa(),a=t.pendingLanes,a&1?t===df?go++:(go=0,df=t):go=0,Es(),null}function Wa(){if(Zn!==null){var t=bv(nu),e=Cr.transition,r=Oe;try{if(Cr.transition=null,Oe=16>t?16:t,Zn===null)var n=!1;else{if(t=Zn,Zn=null,nu=0,Pe&6)throw Error(ee(331));var s=Pe;for(Pe|=4,ae=t.current;ae!==null;){var a=ae,o=a.child;if(ae.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:fo(8,h,a)}var g=h.child;if(g!==null)g.return=h,ae=g;else for(;ae!==null;){h=ae;var m=h.sibling,b=h.return;if(Ab(h),h===d){ae=null;break}if(m!==null){m.return=b,ae=m;break}ae=b}}}var k=a.alternate;if(k!==null){var v=k.child;if(v!==null){k.child=null;do{var C=v.sibling;v.sibling=null,v=C}while(v!==null)}}ae=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ae=o;else e:for(;ae!==null;){if(a=ae,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fo(9,a,a.return)}var E=a.sibling;if(E!==null){E.return=a.return,ae=E;break e}ae=a.return}}var y=t.current;for(ae=y;ae!==null;){o=ae;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,ae=N;else e:for(o=y;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lu(9,l)}}catch(L){rt(l,l.return,L)}if(l===o){ae=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ae=R;break e}ae=l.return}}if(Pe=s,Es(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Cu,t)}catch{}n=!0}return n}finally{Oe=r,Cr.transition=e}}return!1}function Vp(t,e,r){e=ni(r,e),e=bb(t,e,1),t=ls(t,e,1),e=rr(),t!==null&&(sl(t,1,e),ur(t,e))}function rt(t,e,r){if(t.tag===3)Vp(t,t,r);else for(;e!==null;){if(e.tag===3){Vp(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cs===null||!cs.has(n))){t=ni(r,t),t=wb(e,t,1),e=ls(e,t,1),t=rr(),e!==null&&(sl(e,1,t),ur(e,t));break}}e=e.return}}function AN(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&r,_t===t&&(Pt&r)===r&&(ft===4||ft===3&&(Pt&130023424)===Pt&&500>st()-Am?zs(t,0):Cm|=r),ur(t,e)}function Ub(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var r=rr();t=In(t,e),t!==null&&(sl(t,e,r),ur(t,r))}function PN(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Ub(t,r)}function RN(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(e),Ub(t,r)}var Bb;Bb=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||lr.current)or=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return or=!1,bN(t,e,r);or=!!(t.flags&131072)}else or=!1,Ke&&e.flags&1048576&&qv(e,Kc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;kc(t,e),t=e.pendingProps;var s=Za(e,qt.current);za(e,r),s=Nm(null,e,n,t,s,r);var a=Em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cr(n)?(a=!0,qc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vm(e),s.updater=Ou,e.stateNode=s,s._reactInternals=e,Jh(e,n,t,r),e=tf(null,e,n,!0,a,r)):(e.tag=0,Ke&&a&&hm(e),Zt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=$N(n),t=Mr(n,t),s){case 0:e=ef(null,e,n,t,r);break e;case 1:e=Ip(null,e,n,t,r);break e;case 11:e=Sp(null,e,n,t,r);break e;case 14:e=Tp(null,e,n,Mr(n.type,t),r);break e}throw Error(ee(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mr(n,s),ef(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mr(n,s),Ip(t,e,n,s,r);case 3:e:{if(Eb(e),t===null)throw Error(ee(387));n=e.pendingProps,a=e.memoizedState,s=a.element,Jv(t,e),Xc(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=ni(Error(ee(423)),e),e=Cp(t,e,n,r,s);break e}else if(n!==s){s=ni(Error(ee(424)),e),e=Cp(t,e,n,r,s);break e}else for(mr=os(e.stateNode.containerInfo.firstChild),pr=e,Ke=!0,Lr=null,r=Yv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ei(),n===s){e=Cn(t,e,r);break e}Zt(t,e,n,r)}e=e.child}return e;case 5:return Zv(e),t===null&&Qh(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Wh(n,s)?o=null:a!==null&&Wh(n,a)&&(e.flags|=32),Nb(t,e),Zt(t,e,o,r),e.child;case 6:return t===null&&Qh(e),null;case 13:return jb(t,e,r);case 4:return bm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ti(e,null,n,r):Zt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mr(n,s),Sp(t,e,n,s,r);case 7:return Zt(t,e,e.pendingProps,r),e.child;case 8:return Zt(t,e,e.pendingProps.children,r),e.child;case 12:return Zt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Be(Qc,n._currentValue),n._currentValue=o,a!==null)if(zr(a.value,o)){if(a.children===s.children&&!lr.current){e=Cn(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=jn(-1,r&-r),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),Yh(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ee(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Yh(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Zt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,za(e,r),s=Pr(s),n=n(s),e.flags|=1,Zt(t,e,n,r),e.child;case 14:return n=e.type,s=Mr(n,e.pendingProps),s=Mr(n.type,s),Tp(t,e,n,s,r);case 15:return _b(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mr(n,s),kc(t,e),e.tag=1,cr(n)?(t=!0,qc(e)):t=!1,za(e,r),vb(e,n,s),Jh(e,n,s,r),tf(null,e,n,!0,t,r);case 19:return Sb(t,e,r);case 22:return kb(t,e,r)}throw Error(ee(156,e.tag))};function zb(t,e){return pv(t,e)}function DN(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,r,n){return new DN(t,e,r,n)}function $m(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $N(t){if(typeof t=="function")return $m(t)?1:0;if(t!=null){if(t=t.$$typeof,t===em)return 11;if(t===tm)return 14}return 2}function ds(t,e){var r=t.alternate;return r===null?(r=Tr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function jc(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")$m(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sa:return Ws(r.children,s,a,e);case Zf:o=8,s|=8;break;case _h:return t=Tr(12,r,e,s|2),t.elementType=_h,t.lanes=a,t;case kh:return t=Tr(13,r,e,s),t.elementType=kh,t.lanes=a,t;case Nh:return t=Tr(19,r,e,s),t.elementType=Nh,t.lanes=a,t;case Zx:return Fu(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xx:o=10;break e;case Jx:o=9;break e;case em:o=11;break e;case tm:o=14;break e;case Wn:o=16,n=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Tr(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Ws(t,e,r,n){return t=Tr(7,t,n,e),t.lanes=r,t}function Fu(t,e,r,n){return t=Tr(22,t,n,e),t.elementType=Zx,t.lanes=r,t.stateNode={isHidden:!1},t}function eh(t,e,r){return t=Tr(6,t,null,e),t.lanes=r,t}function th(t,e,r){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MN(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mm(t,e,r,n,s,a,o,l,u){return t=new MN(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Tr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vm(a),t}function ON(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Wb(t){if(!t)return xs;t=t._reactInternals;e:{if(oa(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var r=t.type;if(cr(r))return Wv(t,r,e)}return e}function Hb(t,e,r,n,s,a,o,l,u){return t=Mm(r,n,!0,t,s,a,o,l,u),t.context=Wb(null),r=t.current,n=rr(),s=us(r),a=jn(n,s),a.callback=e??null,ls(r,a,s),t.current.lanes=s,sl(t,s,n),ur(t,n),t}function Uu(t,e,r,n){var s=e.current,a=rr(),o=us(s);return r=Wb(r),e.context===null?e.context=r:e.pendingContext=r,e=jn(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ls(s,e,o),t!==null&&(Ur(t,s,o,a),bc(t,s,o)),o}function au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Om(t,e){Fp(t,e),(t=t.alternate)&&Fp(t,e)}function LN(){return null}var qb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lm(t){this._internalRoot=t}Bu.prototype.render=Lm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Uu(t,e,null,null)};Bu.prototype.unmount=Lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xs(function(){Uu(null,t,null,null)}),e[Tn]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=kv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<qn.length&&e!==0&&e<qn[r].priority;r++);qn.splice(r,0,t),r===0&&Ev(t)}};function Vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Up(){}function VN(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=au(o);a.call(d)}}var o=Hb(e,n,t,0,null,!1,!1,"",Up);return t._reactRootContainer=o,t[Tn]=o.current,Ao(t.nodeType===8?t.parentNode:t),Xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=au(u);l.call(d)}}var u=Mm(t,0,!1,null,null,!1,!1,"",Up);return t._reactRootContainer=u,t[Tn]=u.current,Ao(t.nodeType===8?t.parentNode:t),Xs(function(){Uu(e,u,r,n)}),u}function Wu(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=au(o);l.call(u)}}Uu(e,o,t,s)}else o=VN(r,e,t,s,n);return au(o)}wv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=to(e.pendingLanes);r!==0&&(sm(e,r|1),ur(e,st()),!(Pe&6)&&(si=st()+500,Es()))}break;case 13:Xs(function(){var n=In(t,1);if(n!==null){var s=rr();Ur(n,t,1,s)}}),Om(t,1)}};am=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var r=rr();Ur(e,t,134217728,r)}Om(t,134217728)}};_v=function(t){if(t.tag===13){var e=us(t),r=In(t,e);if(r!==null){var n=rr();Ur(r,t,e,n)}Om(t,e)}};kv=function(){return Oe};Nv=function(t,e){var r=Oe;try{return Oe=t,e()}finally{Oe=r}};Dh=function(t,e,r){switch(e){case"input":if(Sh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Du(n);if(!s)throw Error(ee(90));tv(n),Sh(n,s)}}}break;case"textarea":nv(t,r);break;case"select":e=r.value,e!=null&&Va(t,!!r.multiple,e,!1)}};uv=Pm;dv=Xs;var FN={usingClientEntryPoint:!1,Events:[il,Aa,Du,lv,cv,Pm]},Qi={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UN={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mv(t),t===null?null:t.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||LN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{Cu=nc.inject(UN),Xr=nc}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FN;_r.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(e))throw Error(ee(200));return ON(t,e,null,r)};_r.createRoot=function(t,e){if(!Vm(t))throw Error(ee(299));var r=!1,n="",s=qb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mm(t,1,!1,null,null,r,!1,n,s),t[Tn]=e.current,Ao(t.nodeType===8?t.parentNode:t),new Lm(e)};_r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=mv(e),t=t===null?null:t.stateNode,t};_r.flushSync=function(t){return Xs(t)};_r.hydrate=function(t,e,r){if(!zu(e))throw Error(ee(200));return Wu(null,t,e,!0,r)};_r.hydrateRoot=function(t,e,r){if(!Vm(t))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=qb;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Hb(e,null,t,1,r??null,s,!1,a,o),t[Tn]=e.current,Ao(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Bu(e)};_r.render=function(t,e,r){if(!zu(e))throw Error(ee(200));return Wu(null,t,e,!1,r)};_r.unmountComponentAtNode=function(t){if(!zu(t))throw Error(ee(40));return t._reactRootContainer?(Xs(function(){Wu(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};_r.unstable_batchedUpdates=Pm;_r.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!zu(r))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Wu(t,e,r,!1,n)};_r.version="18.3.1-next-f1338f8080-20240426";function Gb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gb)}catch(t){console.error(t)}}Gb(),Gx.exports=_r;var BN=Gx.exports,Bp=BN;bh.createRoot=Bp.createRoot,bh.hydrateRoot=Bp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fo.apply(this,arguments)}var es;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(es||(es={}));const zp="popstate";function zN(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:o,hash:l}=n.location;return mf("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:iu(s)}return HN(e,r,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WN(){return Math.random().toString(36).substr(2,8)}function Wp(t,e){return{usr:t.state,key:t.key,idx:e}}function mf(t,e,r,n){return r===void 0&&(r=null),Fo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wi(e):e,{state:r,key:e&&e.key||n||WN()})}function iu(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function HN(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=es.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Fo({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function g(){l=es.Pop;let C=h(),E=C==null?null:C-d;d=C,u&&u({action:l,location:v.location,delta:E})}function m(C,E){l=es.Push;let y=mf(v.location,C,E);d=h()+1;let N=Wp(y,d),R=v.createHref(y);try{o.pushState(N,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}a&&u&&u({action:l,location:v.location,delta:1})}function b(C,E){l=es.Replace;let y=mf(v.location,C,E);d=h();let N=Wp(y,d),R=v.createHref(y);o.replaceState(N,"",R),a&&u&&u({action:l,location:v.location,delta:0})}function k(C){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof C=="string"?C:iu(C);return y=y.replace(/ $/,"%20"),at(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let v={get action(){return l},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(zp,g),u=C,()=>{s.removeEventListener(zp,g),u=null}},createHref(C){return e(s,C)},createURL:k,encodeLocation(C){let E=k(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:b,go(C){return o.go(C)}};return v}var Hp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hp||(Hp={}));function qN(t,e,r){return r===void 0&&(r="/"),GN(t,e,r)}function GN(t,e,r,n){let s=typeof e=="string"?wi(e):e,a=Um(s.pathname||"/",r);if(a==null)return null;let o=Kb(t);KN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=iE(a);l=nE(o[u],d)}return l}function Kb(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(at(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=hs([n,u.relativePath]),h=r.concat(u);a.children&&a.children.length>0&&(at(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Kb(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:tE(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of Qb(a.path))s(a,o,u)}),e}function Qb(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=Qb(n.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function KN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:rE(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const QN=/^:[\w-]+$/,YN=3,XN=2,JN=1,ZN=10,eE=-2,qp=t=>t==="*";function tE(t,e){let r=t.split("/"),n=r.length;return r.some(qp)&&(n+=eE),e&&(n+=XN),r.filter(s=>!qp(s)).reduce((s,a)=>s+(QN.test(a)?YN:a===""?JN:ZN),n)}function rE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function nE(t,e,r){let{routesMeta:n}=t,s={},a="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=sE({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:hs([a,g.pathname]),pathnameBase:dE(hs([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=hs([a,g.pathnameBase]))}return o}function sE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=aE(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,h,g)=>{let{paramName:m,isOptional:b}=h;if(m==="*"){let v=l[g]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const k=l[g];return b&&!k?d[m]=void 0:d[m]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function aE(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Fm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function iE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Um(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const oE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lE=t=>oE.test(t);function cE(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?wi(t):t,a;if(r)if(lE(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Fm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=Gp(r.substring(1),"/"):a=Gp(r,e)}else a=e;return{pathname:a,search:hE(n),hash:fE(s)}}function Gp(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function rh(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uE(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Bm(t,e){let r=uE(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zm(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=wi(t):(s=Fo({},t),at(!s.pathname||!s.pathname.includes("?"),rh("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),rh("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),rh("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let g=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}l=g>=0?e[g]:"/"}let u=cE(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const hs=t=>t.join("/").replace(/\/\/+/g,"/"),dE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yb=["post","put","patch","delete"];new Set(Yb);const gE=["get",...Yb];new Set(gE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uo.apply(this,arguments)}const Wm=P.createContext(null),pE=P.createContext(null),js=P.createContext(null),Hu=P.createContext(null),Ss=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Xb=P.createContext(null);function yE(t,e){let{relative:r}=e===void 0?{}:e;_i()||at(!1);let{basename:n,navigator:s}=P.useContext(js),{hash:a,pathname:o,search:l}=Zb(t,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:hs([n,o])),s.createHref({pathname:u,search:l,hash:a})}function _i(){return P.useContext(Hu)!=null}function la(){return _i()||at(!1),P.useContext(Hu).location}function Jb(t){P.useContext(js).static||P.useLayoutEffect(t)}function ll(){let{isDataRoute:t}=P.useContext(Ss);return t?CE():xE()}function xE(){_i()||at(!1);let t=P.useContext(Wm),{basename:e,future:r,navigator:n}=P.useContext(js),{matches:s}=P.useContext(Ss),{pathname:a}=la(),o=JSON.stringify(Bm(s,r.v7_relativeSplatPath)),l=P.useRef(!1);return Jb(()=>{l.current=!0}),P.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=zm(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:hs([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,o,a,t])}function Zb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=P.useContext(js),{matches:s}=P.useContext(Ss),{pathname:a}=la(),o=JSON.stringify(Bm(s,n.v7_relativeSplatPath));return P.useMemo(()=>zm(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function vE(t,e){return bE(t,e)}function bE(t,e,r,n){_i()||at(!1);let{navigator:s}=P.useContext(js),{matches:a}=P.useContext(Ss),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=la(),h;if(e){var g;let C=typeof e=="string"?wi(e):e;u==="/"||(g=C.pathname)!=null&&g.startsWith(u)||at(!1),h=C}else h=d;let m=h.pathname||"/",b=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=qN(t,{pathname:b}),v=EE(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:hs([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:hs([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,r,n);return e&&v?P.createElement(Hu.Provider,{value:{location:Uo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:es.Pop}},v):v}function wE(){let t=IE(),e=mE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),r?P.createElement("pre",{style:s},r):null,null)}const _E=P.createElement(wE,null);class kE extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?P.createElement(Ss.Provider,{value:this.props.routeContext},P.createElement(Xb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NE(t){let{routeContext:e,match:r,children:n}=t,s=P.useContext(Wm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(Ss.Provider,{value:e},n)}function EE(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);h>=0||at(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:m,errors:b}=r,k=g.route.loader&&m[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,g,m)=>{let b,k=!1,v=null,C=null;r&&(b=l&&g.route.id?l[g.route.id]:void 0,v=g.route.errorElement||_E,u&&(d<0&&m===0?(AE("route-fallback"),k=!0,C=null):d===m&&(k=!0,C=g.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),y=()=>{let N;return b?N=v:k?N=C:g.route.Component?N=P.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,P.createElement(NE,{match:g,routeContext:{outlet:h,matches:E,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?P.createElement(kE,{location:r.location,revalidation:r.revalidation,component:v,error:b,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var ew=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ew||{}),tw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tw||{});function jE(t){let e=P.useContext(Wm);return e||at(!1),e}function SE(t){let e=P.useContext(pE);return e||at(!1),e}function TE(t){let e=P.useContext(Ss);return e||at(!1),e}function rw(t){let e=TE(),r=e.matches[e.matches.length-1];return r.route.id||at(!1),r.route.id}function IE(){var t;let e=P.useContext(Xb),r=SE(),n=rw();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function CE(){let{router:t}=jE(ew.UseNavigateStable),e=rw(tw.UseNavigateStable),r=P.useRef(!1);return Jb(()=>{r.current=!0}),P.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uo({fromRouteId:e},a)))},[t,e])}const Kp={};function AE(t,e,r){Kp[t]||(Kp[t]=!0)}function PE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gf(t){let{to:e,replace:r,state:n,relative:s}=t;_i()||at(!1);let{future:a,static:o}=P.useContext(js),{matches:l}=P.useContext(Ss),{pathname:u}=la(),d=ll(),h=zm(e,Bm(l,a.v7_relativeSplatPath),u,s==="path"),g=JSON.stringify(h);return P.useEffect(()=>d(JSON.parse(g),{replace:r,state:n,relative:s}),[d,g,s,r,n]),null}function Er(t){at(!1)}function RE(t){let{basename:e="/",children:r=null,location:n,navigationType:s=es.Pop,navigator:a,static:o=!1,future:l}=t;_i()&&at(!1);let u=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:a,static:o,future:Uo({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof n=="string"&&(n=wi(n));let{pathname:h="/",search:g="",hash:m="",state:b=null,key:k="default"}=n,v=P.useMemo(()=>{let C=Um(h,u);return C==null?null:{location:{pathname:C,search:g,hash:m,state:b,key:k},navigationType:s}},[u,h,g,m,b,k,s]);return v==null?null:P.createElement(js.Provider,{value:d},P.createElement(Hu.Provider,{children:r,value:v}))}function DE(t){let{children:e,location:r}=t;return vE(pf(e),r)}new Promise(()=>{});function pf(t,e){e===void 0&&(e=[]);let r=[];return P.Children.forEach(t,(n,s)=>{if(!P.isValidElement(n))return;let a=[...e,s];if(n.type===P.Fragment){r.push.apply(r,pf(n.props.children,a));return}n.type!==Er&&at(!1),!n.props.index||!n.props.children||at(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=pf(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yf(){return yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yf.apply(this,arguments)}function $E(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function ME(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OE(t,e){return t.button===0&&(!e||e==="_self")&&!ME(t)}function xf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function LE(t,e){let r=xf(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}const VE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FE="6";try{window.__reactRouterVersion=FE}catch{}const UE="startTransition",Qp=A1[UE];function BE(t){let{basename:e,children:r,future:n,window:s}=t,a=P.useRef();a.current==null&&(a.current=zN({window:s,v5Compat:!0}));let o=a.current,[l,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=P.useCallback(g=>{d&&Qp?Qp(()=>u(g)):u(g)},[u,d]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.useEffect(()=>PE(n),[n]),P.createElement(RE,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const zE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gn=P.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:g}=e,m=$E(e,VE),{basename:b}=P.useContext(js),k,v=!1;if(typeof d=="string"&&WE.test(d)&&(k=d,zE))try{let N=new URL(window.location.href),R=d.startsWith("//")?new URL(N.protocol+d):new URL(d),L=Um(R.pathname,b);R.origin===N.origin&&L!=null?d=L+R.search+R.hash:v=!0}catch{}let C=yE(d,{relative:s}),E=HE(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:g});function y(N){n&&n(N),N.defaultPrevented||E(N)}return P.createElement("a",yf({},m,{href:k||C,onClick:v||a?n:y,ref:r,target:u}))});var Yp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yp||(Yp={}));var Xp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xp||(Xp={}));function HE(t,e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=ll(),d=la(),h=Zb(t,{relative:o});return P.useCallback(g=>{if(OE(g,r)){g.preventDefault();let m=n!==void 0?n:iu(d)===iu(h);u(t,{replace:m,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,n,s,r,t,a,o,l])}function qE(t){let e=P.useRef(xf(t)),r=P.useRef(!1),n=la(),s=P.useMemo(()=>LE(n.search,r.current?null:e.current),[n.search]),a=ll(),o=P.useCallback((l,u)=>{const d=xf(typeof l=="function"?l(s):l);r.current=!0,a("?"+d,u)},[a,s]);return[s,o]}const GE={},Jp=t=>{let e;const r=new Set,n=(h,g)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const b=e;e=g??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(k=>k(e,b))}},s=()=>e,u={setState:n,getState:s,getInitialState:()=>d,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{(GE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=e=t(n,s,u);return u},KE=t=>t?Jp(t):Jp;var nw={exports:{}},sw={},aw={exports:{}},iw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ai=P;function QE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var YE=typeof Object.is=="function"?Object.is:QE,XE=ai.useState,JE=ai.useEffect,ZE=ai.useLayoutEffect,ej=ai.useDebugValue;function tj(t,e){var r=e(),n=XE({inst:{value:r,getSnapshot:e}}),s=n[0].inst,a=n[1];return ZE(function(){s.value=r,s.getSnapshot=e,nh(s)&&a({inst:s})},[t,r,e]),JE(function(){return nh(s)&&a({inst:s}),t(function(){nh(s)&&a({inst:s})})},[t]),ej(r),r}function nh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!YE(t,r)}catch{return!0}}function rj(t,e){return e()}var nj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rj:tj;iw.useSyncExternalStore=ai.useSyncExternalStore!==void 0?ai.useSyncExternalStore:nj;aw.exports=iw;var sj=aw.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=P,aj=sj;function ij(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oj=typeof Object.is=="function"?Object.is:ij,lj=aj.useSyncExternalStore,cj=qu.useRef,uj=qu.useEffect,dj=qu.useMemo,hj=qu.useDebugValue;sw.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var a=cj(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=dj(function(){function u(b){if(!d){if(d=!0,h=b,b=n(b),s!==void 0&&o.hasValue){var k=o.value;if(s(k,b))return g=k}return g=b}if(k=g,oj(h,b))return k;var v=n(b);return s!==void 0&&s(k,v)?(h=b,k):(h=b,g=v)}var d=!1,h,g,m=r===void 0?null:r;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,r,n,s]);var l=lj(t,a[0],a[1]);return uj(function(){o.hasValue=!0,o.value=l},[l]),hj(l),l};nw.exports=sw;var fj=nw.exports;const mj=$x(fj),ow={},{useDebugValue:gj}=Qf,{useSyncExternalStoreWithSelector:pj}=mj;let Zp=!1;const yj=t=>t;function xj(t,e=yj,r){(ow?"production":void 0)!=="production"&&r&&!Zp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Zp=!0);const n=pj(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return gj(n),n}const vj=t=>{(ow?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?KE(t):t,r=(n,s)=>xj(e,n,s);return Object.assign(r,e),r},Hm=t=>vj,bj={};function wj(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=r.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>r.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>r.removeItem(s)}}const Bo=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Bo(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Bo(n)(r)}}}},_j=(t,e)=>(r,n,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,E)=>({...E,...C}),...e},o=!1;const l=new Set,u=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...C)},n,s);const h=Bo(a.serialize),g=()=>{const C=a.partialize({...n()});let E;const y=h({state:C,version:a.version}).then(N=>d.setItem(a.name,N)).catch(N=>{E=N});if(E)throw E;return y},m=s.setState;s.setState=(C,E)=>{m(C,E),g()};const b=t((...C)=>{r(...C),g()},n,s);let k;const v=()=>{var C;if(!d)return;o=!1,l.forEach(y=>y(n()));const E=((C=a.onRehydrateStorage)==null?void 0:C.call(a,n()))||void 0;return Bo(d.getItem.bind(d))(a.name).then(y=>{if(y)return a.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return a.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var N;return k=a.merge(y,(N=n())!=null?N:b),r(k,!0),g()}).then(()=>{E==null||E(k,void 0),o=!0,u.forEach(y=>y(k))}).catch(y=>{E==null||E(void 0,y)})};return s.persist={setOptions:C=>{a={...a,...C},C.getStorage&&(d=C.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:C=>(l.add(C),()=>{l.delete(C)}),onFinishHydration:C=>(u.add(C),()=>{u.delete(C)})},v(),k||b},kj=(t,e)=>(r,n,s)=>{let a={storage:wj(()=>localStorage),partialize:v=>v,version:0,merge:(v,C)=>({...C,...v}),...e},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...v)},n,s);const h=()=>{const v=a.partialize({...n()});return d.setItem(a.name,{state:v,version:a.version})},g=s.setState;s.setState=(v,C)=>{g(v,C),h()};const m=t((...v)=>{r(...v),h()},n,s);s.getInitialState=()=>m;let b;const k=()=>{var v,C;if(!d)return;o=!1,l.forEach(y=>{var N;return y((N=n())!=null?N:m)});const E=((C=a.onRehydrateStorage)==null?void 0:C.call(a,(v=n())!=null?v:m))||void 0;return Bo(d.getItem.bind(d))(a.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return[!0,a.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var N;const[R,L]=y;if(b=a.merge(L,(N=n())!=null?N:m),r(b,!0),R)return h()}).then(()=>{E==null||E(b,void 0),b=n(),o=!0,u.forEach(y=>y(b))}).catch(y=>{E==null||E(void 0,y)})};return s.persist={setOptions:v=>{a={...a,...v},v.storage&&(d=v.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(u.add(v),()=>{u.delete(v)})},a.skipHydration||k(),b||m},Nj=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((bj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),_j(t,e)):kj(t,e),qm=Nj,we=[{id:"1",name:"",login:"artyom03",password:"248artdex",avatar:"/avatars/artyom.jpg"},{id:"2",name:"",login:"adel05",password:"058adeldex",avatar:"/avatars/adel.jpg"},{id:"3",name:"",login:"ksen03",password:"907ksendex",avatar:"/avatars/kseniya.jpg"},{id:"4",name:"",login:"olga04",password:"638olgadex",avatar:"/avatars/olga.jpg"},{id:"5",name:"",login:"anastasia05",password:"638anastadex",avatar:"/avatars/anastasia.jpg"}],Gm={trading:{label:"",icon:"",color:"green"},learning:{label:"",icon:"",color:"blue"},technical:{label:" ",icon:"",color:"purple"},stream:{label:"",icon:"",color:"red"},research:{label:" ",icon:"",color:"yellow"},organization:{label:"   ",icon:"",color:"indigo"}},ou={pending:{label:" ",color:"yellow"},in_progress:{label:" ",color:"blue"},completed:{label:"",color:"green"},closed:{label:"",color:"gray"},rejected:{label:"",color:"red"}},Nt=Hm()(qm(t=>({user:null,isAuthenticated:!1,login:(e,r)=>{const n=we.find(s=>s.login===e&&s.password===r);return n?(t({user:n,isAuthenticated:!0}),!0):!1},logout:()=>t({user:null,isAuthenticated:!1})}),{name:"apevault-auth"})),Ej="9119ApeVault",Yt=Hm()(qm(t=>({isAdmin:!1,activateAdmin:e=>e===Ej?(t({isAdmin:!0}),!0):!1,deactivateAdmin:()=>t({isAdmin:!1})}),{name:"apevault-admin"})),Ue=Hm()(qm(t=>({theme:"light",toggleTheme:()=>t(e=>{const r=e.theme==="light"?"dark":"light";return document.body.classList.toggle("dark",r==="dark"),{theme:r}}),setTheme:e=>t(()=>(document.body.classList.toggle("dark",e==="dark"),{theme:e}))}),{name:"apevault-theme"}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const r=P.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>P.createElement("svg",{ref:h,...jj,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Sj(t)}`,l].join(" "),...d},[...e.map(([g,m])=>P.createElement(g,m)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=he("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=he("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=he("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=he("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=he("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=he("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=he("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=he("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=he("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=he("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=he("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=he("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=he("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),gw="/assets/logo-DoMo9ObD.png",zj=()=>{const[t,e]=P.useState("member"),[r,n]=P.useState(""),[s,a]=P.useState(""),[o,l]=P.useState(""),{login:u,user:d,isAuthenticated:h}=Nt(),{theme:g,toggleTheme:m}=Ue(),{activateAdmin:b}=Yt(),k=ll(),[v]=qE();P.useEffect(()=>{document.body.classList.toggle("dark",g==="dark")},[g]),P.useEffect(()=>{var y,N,R;if(h&&d){k("/management");return}if((y=window.Telegram)!=null&&y.WebApp){window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand();const M=v.get("tgWebAppData")||window.Telegram.WebApp.initData,I=v.get("login"),_=v.get("password");if(I&&_&&u(I,_)){k("/management");return}if(M)try{const S=new URLSearchParams(M).get("user");if(S){const x=JSON.parse(decodeURIComponent(S)).id;sessionStorage.setItem("telegram_user_id",String(x));const q=localStorage.getItem("apevault-auth");if(q)try{const U=JSON.parse(q);if((N=U.state)!=null&&N.user){const B=U.state.user;if(u(B.login,B.password)){k("/management");return}}}catch(U){console.error("Error parsing saved auth:",U)}console.log("Telegram Mini App detected, user ID:",x)}}catch(j){console.error("Error parsing Telegram initData:",j)}const w=(R=window.Telegram.WebApp.initDataUnsafe)==null?void 0:R.user;w&&(sessionStorage.setItem("telegram_user_id",String(w.id)),console.log("Telegram user detected:",w.first_name))}},[v,h,d,k,u]);const C=y=>{if(y.preventDefault(),l(""),!s){l(",  ");return}if(t==="admin")b(s)?k("/management"):l("  ");else{if(!r){l(",  ");return}u(r,s)?k("/management"):l("   ")}},E=()=>{m()};return i.jsxs("div",{className:`min-h-screen flex items-center justify-center relative overflow-hidden ${g==="dark"?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100"}`,children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:`absolute top-20 left-10 w-72 h-72 rounded-full blur-3xl opacity-20 ${g==="dark"?"bg-green-500":"bg-green-400"}`}),i.jsx("div",{className:`absolute bottom-20 right-10 w-96 h-96 rounded-full blur-3xl opacity-20 ${g==="dark"?"bg-blue-500":"bg-blue-400"}`}),i.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full blur-3xl opacity-10 ${g==="dark"?"bg-purple-500":"bg-purple-400"}`})]}),i.jsx("button",{onClick:E,className:`absolute top-6 right-6 p-3 rounded-full transition-all duration-300 shadow-lg hover:scale-110 z-10 ${g==="dark"?"bg-gray-800 hover:bg-gray-700 text-yellow-400 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-700 border border-gray-200"}`,"aria-label":"Toggle theme",children:g==="dark"?i.jsx(mw,{className:"w-6 h-6"}):i.jsx(fw,{className:"w-6 h-6"})}),i.jsxs("div",{className:`w-full max-w-md p-8 rounded-2xl shadow-2xl backdrop-blur-sm border relative z-10 ${g==="dark"?"bg-gray-800/90 border-gray-700":"bg-white/90 border-gray-200"}`,children:[i.jsxs("div",{className:"text-center mb-8 relative",children:[i.jsx("div",{className:"absolute -top-4 -left-4 animate-pulse",children:i.jsx(xr,{className:`w-6 h-6 ${g==="dark"?"text-green-400":"text-green-500"} opacity-60`})}),i.jsx("div",{className:"absolute -top-4 -right-4 animate-pulse delay-300",children:i.jsx(xr,{className:`w-6 h-6 ${g==="dark"?"text-blue-400":"text-blue-500"} opacity-60`})}),i.jsx("div",{className:"mx-auto mb-6 flex justify-center relative",children:i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${g==="dark"?"bg-gray-700":"bg-gradient-to-br from-green-50 to-blue-50"}`,children:i.jsx("img",{src:gw,alt:"ApeVault Logo",className:"w-24 h-24 object-contain"})})}),i.jsx("h1",{className:`text-4xl font-bold mb-3 bg-gradient-to-r ${g==="dark"?"from-green-400 to-blue-400 text-transparent bg-clip-text":"from-green-600 to-blue-600 text-transparent bg-clip-text"}`,children:"ApeVault"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[i.jsx(en,{className:`w-5 h-5 ${g==="dark"?"text-green-400":"text-green-600"}`}),i.jsx("p",{className:`text-lg font-medium ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "})]}),i.jsx("p",{className:`text-sm ${g==="dark"?"text-gray-400":"text-gray-500"}`,children:"    "})]}),i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-semibold mb-3 ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsxs("div",{className:`grid grid-cols-2 gap-3 p-1 rounded-xl ${g==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[i.jsxs("button",{type:"button",onClick:()=>{e("member"),n(""),a(""),l("")},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${t==="member"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg":g==="dark"?"text-gray-400 hover:text-white hover:bg-gray-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[i.jsx(Ar,{className:"w-5 h-5"}),i.jsx("span",{children:""})]}),i.jsxs("button",{type:"button",onClick:()=>{e("admin"),n(""),a(""),l("")},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${t==="admin"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg":g==="dark"?"text-gray-400 hover:text-white hover:bg-gray-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[i.jsx(en,{className:"w-5 h-5"}),i.jsx("span",{children:""})]})]})]}),t==="member"&&i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"login",className:`block text-sm font-semibold mb-2 ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:[i.jsx(li,{className:"w-4 h-4 inline mr-2"}),""]}),i.jsx("div",{className:"relative",children:i.jsx("input",{id:"login",type:"text",value:r,onChange:y=>n(y.target.value),className:`w-full px-4 py-3 rounded-xl border-2 transition-all ${g==="dark"?"bg-gray-700/50 border-gray-600 text-white placeholder-gray-500 focus:border-green-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-green-500"} focus:outline-none focus:ring-4 focus:ring-green-500/20`,placeholder:"  ",autoComplete:"username"})})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"password",className:`block text-sm font-semibold mb-2 ${g==="dark"?"text-gray-300":"text-gray-700"}`,children:[i.jsx(en,{className:"w-4 h-4 inline mr-2"}),""]}),i.jsx("div",{className:"relative",children:i.jsx("input",{id:"password",type:"password",value:s,onChange:y=>a(y.target.value),className:`w-full px-4 py-3 rounded-xl border-2 transition-all ${g==="dark"?"bg-gray-700/50 border-gray-600 text-white placeholder-gray-500 focus:border-green-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-green-500"} focus:outline-none focus:ring-4 focus:ring-green-500/20`,placeholder:t==="admin"?"  ":"  ",autoComplete:t==="admin"?"off":"current-password"})}),t==="admin"&&i.jsx("p",{className:`mt-2 text-xs ${g==="dark"?"text-gray-400":"text-gray-500"}`,children:"       "})]}),o&&i.jsx("div",{className:`p-4 rounded-xl border-2 ${g==="dark"?"bg-red-500/20 border-red-500 text-red-400":"bg-red-50 border-red-300 text-red-700"} text-sm font-medium animate-shake`,children:o}),i.jsx("button",{type:"submit",className:"w-full py-3 px-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",children:"  "})]}),i.jsx("div",{className:`mt-6 pt-6 border-t ${g==="dark"?"border-gray-700":"border-gray-200"} text-center`,children:i.jsx("p",{className:`text-xs ${g==="dark"?"text-gray-400":"text-gray-500"}`,children:"    ApeVault"})})]})]})},Wr=({children:t})=>{const{theme:e,toggleTheme:r}=Ue(),{isAdmin:n}=Yt(),s=la(),[a,o]=P.useState(!1),[l,u]=P.useState(!1),d=[{path:"/management",label:"",icon:Zr},{path:"/earnings",label:"",icon:Gu},{path:"/tasks",label:"",icon:ii},{path:"/rating",label:"",icon:ca}],h=[{path:"/about",label:" ",icon:yr},{path:"/faq",label:"FAQ",icon:Ym}],g=d.some(v=>s.pathname===v.path),m=v=>s.pathname===v,b=h.some(v=>s.pathname===v.path),k=v=>s.pathname===v;return P.useEffect(()=>{o(!1),u(!1)},[s.pathname]),i.jsxs("div",{className:`min-h-screen ${e==="dark"?"bg-gray-900":"bg-gray-50"} pb-20 lg:pb-0`,children:[i.jsx("header",{className:`${e==="dark"?"bg-gray-800":"bg-white"} shadow-md sticky top-0 z-50 hidden lg:block`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-shrink-0",children:[i.jsx("img",{src:gw,alt:"ApeVault Logo",className:"w-10 h-10 object-contain flex-shrink-0"}),i.jsx("h1",{className:`text-xl font-bold truncate ${e==="dark"?"text-white":"text-gray-900"}`,children:"ApeVault"})]}),i.jsxs("nav",{className:"flex items-center space-x-1 flex-wrap",children:[i.jsxs(gn,{to:"/call",className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${s.pathname==="/call"?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[i.jsx(Ha,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:"Call"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!a),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${g?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[i.jsx(ay,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:""}),i.jsx(vf,{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`})]}),a&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),i.jsx("div",{className:`absolute top-full left-0 mt-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:d.map(v=>i.jsxs(gn,{to:v.path,onClick:()=>o(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${m(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${v.path===d[0].path?"rounded-t-lg":""} ${v.path===d[d.length-1].path?"rounded-b-lg":""}`,children:[i.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:v.label})]},v.path))})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>u(!l),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${b?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[i.jsx(yr,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:" "}),i.jsx(vf,{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`})]}),l&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),i.jsx("div",{className:`absolute top-full left-0 mt-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:h.map((v,C)=>i.jsxs(gn,{to:v.path,onClick:()=>u(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${k(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${C===0?"rounded-t-lg":""} ${C===h.length-1?"rounded-b-lg":""}`,children:[i.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:v.label})]},v.path))})]})]}),i.jsxs(gn,{to:"/profile",className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${s.pathname==="/profile"?"bg-green-500 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[i.jsx(li,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:""})]}),n&&i.jsxs(gn,{to:"/admin",className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 text-base ${s.pathname==="/admin"?"bg-purple-600 text-white":e==="dark"?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[i.jsx(en,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:""})]})]}),i.jsxs("div",{className:"flex items-center space-x-4 ml-4",children:[n&&i.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-purple-600 text-white rounded-lg",children:[i.jsx(en,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{className:"text-sm whitespace-nowrap",children:""})]}),i.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors flex-shrink-0 ${e==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Toggle theme",children:e==="dark"?i.jsx(mw,{className:"w-5 h-5 text-yellow-400"}):i.jsx(fw,{className:"w-5 h-5 text-gray-700"})})]})]})})}),i.jsx("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:t}),i.jsx("nav",{className:`lg:hidden fixed bottom-0 left-0 right-0 ${e==="dark"?"bg-gray-800":"bg-white"} border-t-2 ${e==="dark"?"border-gray-700":"border-gray-200"} shadow-2xl z-50`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-2",children:i.jsxs("div",{className:"flex items-center justify-around h-16",children:[i.jsxs(gn,{to:"/call",className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${s.pathname==="/call"?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[i.jsx(Ha,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-medium",children:"Call"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!a),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${g?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[i.jsx(ay,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-medium",children:""})]}),a&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:()=>o(!1)}),i.jsx("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:d.map(v=>i.jsxs(gn,{to:v.path,onClick:()=>o(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${m(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${v.path===d[0].path?"rounded-t-lg":""} ${v.path===d[d.length-1].path?"rounded-b-lg":""}`,children:[i.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:v.label})]},v.path))})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>u(!l),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${b?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[i.jsx(yr,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-medium",children:" "})]}),l&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:()=>u(!1)}),i.jsx("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 ${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-xl border-2 ${e==="dark"?"border-gray-600":"border-gray-300"} min-w-[200px] z-50`,children:h.map((v,C)=>i.jsxs(gn,{to:v.path,onClick:()=>u(!1),className:`flex items-center gap-3 px-4 py-3 transition-colors ${k(v.path)?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-700"} ${C===0?"rounded-t-lg":""} ${C===h.length-1?"rounded-b-lg":""}`,children:[i.jsx(v.icon,{className:"w-4 h-4 flex-shrink-0"}),i.jsx("span",{children:v.label})]},v.path))})]})]}),i.jsxs(gn,{to:"/profile",className:`flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-colors touch-manipulation ${s.pathname==="/profile"?e==="dark"?"bg-green-500/20 text-green-400":"bg-green-50 text-green-700":e==="dark"?"text-gray-400":"text-gray-600"}`,children:[i.jsx(li,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-medium",children:""})]})]})})})]})};var oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},Wj=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},yw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,g=(a&3)<<4|l>>4;let m=(l&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),n.push(r[h],r[g],r[m],r[b])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const g=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||g==null)throw new Hj;const m=a<<2|l>>4;if(n.push(m),d!==64){const b=l<<4&240|d>>2;if(n.push(b),g!==64){const k=d<<6&192|g;n.push(k)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qj=function(t){const e=pw(t);return yw.encodeByteArray(e,!0)},cu=function(t){return qj(t).replace(/\./g,"")},xw=function(t){try{return yw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=()=>Gj().__FIREBASE_DEFAULTS__,Qj=()=>{if(typeof process>"u"||typeof oy>"u")return;const t=oy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xw(t[1]);return e&&JSON.parse(e)},Ku=()=>{try{return Kj()||Qj()||Yj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vw=t=>{var e,r;return(r=(e=Ku())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},bw=t=>{const e=vw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},ww=()=>{var t;return(t=Ku())===null||t===void 0?void 0:t.config},_w=t=>{var e;return(e=Ku())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cu(JSON.stringify(r)),cu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function Zj(){var t;const e=(t=Ku())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nS(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sS(){return!Zj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aS(){try{return typeof indexedDB=="object"}catch{return!1}}function iS(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="FirebaseError";class dn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=oS,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?lS(a,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new dn(s,l,n)}}function lS(t,e){return t.replace(cS,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const cS=/\{\$([^}]+)}/g;function uS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uu(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],o=e[s];if(ly(a)&&ly(o)){if(!uu(a,o))return!1}else if(a!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function dS(t,e){const r=new hS(t,e);return r.subscribe.bind(r)}class hS{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");fS(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=sh),s.error===void 0&&(s.error=sh),s.complete===void 0&&(s.complete=sh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fS(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function sh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){return t&&t._delegate?t._delegate:t}class vs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Xj;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pS(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:gS(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gS(t){return t===Ms?void 0:t}function pS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new mS(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const xS={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},vS=Ce.INFO,bS={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},wS=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=bS[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=vS,this._logHandler=wS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const _S=(t,e)=>e.some(r=>t instanceof r);let cy,uy;function kS(){return cy||(cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NS(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nw=new WeakMap,bf=new WeakMap,Ew=new WeakMap,ah=new WeakMap,Jm=new WeakMap;function ES(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(fs(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Nw.set(r,t)}).catch(()=>{}),Jm.set(e,t),e}function jS(t){if(bf.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});bf.set(t,e)}let wf={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return bf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ew.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SS(t){wf=t(wf)}function TS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(ih(this),e,...r);return Ew.set(n,e.sort?e.sort():[e]),fs(n)}:NS().includes(t)?function(...e){return t.apply(ih(this),e),fs(Nw.get(this))}:function(...e){return fs(t.apply(ih(this),e))}}function IS(t){return typeof t=="function"?TS(t):(t instanceof IDBTransaction&&jS(t),_S(t,kS())?new Proxy(t,wf):t)}function fs(t){if(t instanceof IDBRequest)return ES(t);if(ah.has(t))return ah.get(t);const e=IS(t);return e!==t&&(ah.set(t,e),Jm.set(e,t)),e}const ih=t=>Jm.get(t);function CS(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=fs(o);return n&&o.addEventListener("upgradeneeded",u=>{n(fs(o.result),u.oldVersion,u.newVersion,fs(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const AS=["get","getKey","getAll","getAllKeys","count"],PS=["put","add","delete","clear"],oh=new Map;function dy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oh.get(e))return oh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=PS.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||AS.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&u.done]))[0]};return oh.set(e,a),a}SS(t=>({...t,get:(e,r,n)=>dy(e,r)||t.get(e,r,n),has:(e,r)=>!!dy(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(DS(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function DS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _f="@firebase/app",hy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new Xm("@firebase/app"),$S="@firebase/app-compat",MS="@firebase/analytics-compat",OS="@firebase/analytics",LS="@firebase/app-check-compat",VS="@firebase/app-check",FS="@firebase/auth",US="@firebase/auth-compat",BS="@firebase/database",zS="@firebase/data-connect",WS="@firebase/database-compat",HS="@firebase/functions",qS="@firebase/functions-compat",GS="@firebase/installations",KS="@firebase/installations-compat",QS="@firebase/messaging",YS="@firebase/messaging-compat",XS="@firebase/performance",JS="@firebase/performance-compat",ZS="@firebase/remote-config",eT="@firebase/remote-config-compat",tT="@firebase/storage",rT="@firebase/storage-compat",nT="@firebase/firestore",sT="@firebase/vertexai-preview",aT="@firebase/firestore-compat",iT="firebase",oT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",lT={[_f]:"fire-core",[$S]:"fire-core-compat",[OS]:"fire-analytics",[MS]:"fire-analytics-compat",[VS]:"fire-app-check",[LS]:"fire-app-check-compat",[FS]:"fire-auth",[US]:"fire-auth-compat",[BS]:"fire-rtdb",[zS]:"fire-data-connect",[WS]:"fire-rtdb-compat",[HS]:"fire-fn",[qS]:"fire-fn-compat",[GS]:"fire-iid",[KS]:"fire-iid-compat",[QS]:"fire-fcm",[YS]:"fire-fcm-compat",[XS]:"fire-perf",[JS]:"fire-perf-compat",[ZS]:"fire-rc",[eT]:"fire-rc-compat",[tT]:"fire-gcs",[rT]:"fire-gcs-compat",[nT]:"fire-fst",[aT]:"fire-fst-compat",[sT]:"fire-vertex","fire-js":"fire-js",[iT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Map,cT=new Map,Nf=new Map;function fy(t,e){try{t.container.addComponent(e)}catch(r){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Zs(t){const e=t.name;if(Nf.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;Nf.set(e,t);for(const r of du.values())fy(r,t);for(const r of cT.values())fy(r,t);return!0}function Qu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ts(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new cl("app","Firebase",uT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=oT;function jw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:kf,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(r||(r=ww()),!r)throw ms.create("no-options");const a=du.get(s);if(a){if(uu(r,a.options)&&uu(n,a.config))return a;throw ms.create("duplicate-app",{appName:s})}const o=new yS(s);for(const u of Nf.values())o.addComponent(u);const l=new dT(r,n,o);return du.set(s,l),l}function Zm(t=kf){const e=du.get(t);if(!e&&t===kf&&ww())return jw();if(!e)throw ms.create("no-app",{appName:t});return e}function tn(t,e,r){var n;let s=(n=lT[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(l.join(" "));return}Zs(new vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebase-heartbeat-database",fT=1,Ho="firebase-heartbeat-store";let lh=null;function Sw(){return lh||(lh=CS(hT,fT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ho)}catch(r){console.warn(r)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),lh}async function mT(t){try{const r=(await Sw()).transaction(Ho),n=await r.objectStore(Ho).get(Tw(t));return await r.done,n}catch(e){if(e instanceof dn)An.warn(e.message);else{const r=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(r.message)}}}async function my(t,e){try{const n=(await Sw()).transaction(Ho,"readwrite");await n.objectStore(Ho).put(e,Tw(t)),await n.done}catch(r){if(r instanceof dn)An.warn(r.message);else{const n=ms.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});An.warn(n.message)}}}function Tw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,pT=30*24*60*60*1e3;class yT{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new vT(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=gy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=pT}),this._storage.overwrite(this._heartbeatsCache))}catch(n){An.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=gy(),{heartbeatsToSend:n,unsentEntries:s}=xT(this._heartbeatsCache.heartbeats),a=cu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return An.warn(r),""}}}function gy(){return new Date().toISOString().substring(0,10)}function xT(t,e=gT){const r=[];let n=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),py(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),py(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class vT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aS()?iS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await mT(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return my(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return my(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function py(t){return cu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){Zs(new vs("platform-logger",e=>new RS(e),"PRIVATE")),Zs(new vs("heartbeat",e=>new yT(e),"PRIVATE")),tn(_f,hy,t),tn(_f,hy,"esm2017"),tn("fire-js","")}bT("");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,Iw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function w(){}w.prototype=_.prototype,I.D=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(j,S,A){for(var x=Array(arguments.length-2),q=2;q<arguments.length;q++)x[q-2]=arguments[q];return _.prototype[S].apply(j,x)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,w){w||(w=0);var j=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)j[S]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(S=0;16>S;++S)j[S]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],S=I.g[2];var A=I.g[3],x=_+(A^w&(S^A))+j[0]+3614090360&4294967295;_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[1]+3905402710&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[2]+606105819&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[3]+3250441966&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(A^w&(S^A))+j[4]+4118548399&4294967295,_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[5]+1200080426&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[6]+2821735955&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[7]+4249261313&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(A^w&(S^A))+j[8]+1770035416&4294967295,_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[9]+2336552879&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[10]+4294925233&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[11]+2304563134&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(A^w&(S^A))+j[12]+1804603682&4294967295,_=w+(x<<7&4294967295|x>>>25),x=A+(S^_&(w^S))+j[13]+4254626195&4294967295,A=_+(x<<12&4294967295|x>>>20),x=S+(w^A&(_^w))+j[14]+2792965006&4294967295,S=A+(x<<17&4294967295|x>>>15),x=w+(_^S&(A^_))+j[15]+1236535329&4294967295,w=S+(x<<22&4294967295|x>>>10),x=_+(S^A&(w^S))+j[1]+4129170786&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[6]+3225465664&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[11]+643717713&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[0]+3921069994&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(S^A&(w^S))+j[5]+3593408605&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[10]+38016083&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[15]+3634488961&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[4]+3889429448&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(S^A&(w^S))+j[9]+568446438&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[14]+3275163606&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[3]+4107603335&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[8]+1163531501&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(S^A&(w^S))+j[13]+2850285829&4294967295,_=w+(x<<5&4294967295|x>>>27),x=A+(w^S&(_^w))+j[2]+4243563512&4294967295,A=_+(x<<9&4294967295|x>>>23),x=S+(_^w&(A^_))+j[7]+1735328473&4294967295,S=A+(x<<14&4294967295|x>>>18),x=w+(A^_&(S^A))+j[12]+2368359562&4294967295,w=S+(x<<20&4294967295|x>>>12),x=_+(w^S^A)+j[5]+4294588738&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[8]+2272392833&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[11]+1839030562&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[14]+4259657740&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(w^S^A)+j[1]+2763975236&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[4]+1272893353&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[7]+4139469664&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[10]+3200236656&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(w^S^A)+j[13]+681279174&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[0]+3936430074&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[3]+3572445317&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[6]+76029189&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(w^S^A)+j[9]+3654602809&4294967295,_=w+(x<<4&4294967295|x>>>28),x=A+(_^w^S)+j[12]+3873151461&4294967295,A=_+(x<<11&4294967295|x>>>21),x=S+(A^_^w)+j[15]+530742520&4294967295,S=A+(x<<16&4294967295|x>>>16),x=w+(S^A^_)+j[2]+3299628645&4294967295,w=S+(x<<23&4294967295|x>>>9),x=_+(S^(w|~A))+j[0]+4096336452&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[7]+1126891415&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[14]+2878612391&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[5]+4237533241&4294967295,w=S+(x<<21&4294967295|x>>>11),x=_+(S^(w|~A))+j[12]+1700485571&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[3]+2399980690&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[10]+4293915773&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[1]+2240044497&4294967295,w=S+(x<<21&4294967295|x>>>11),x=_+(S^(w|~A))+j[8]+1873313359&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[15]+4264355552&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[6]+2734768916&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[13]+1309151649&4294967295,w=S+(x<<21&4294967295|x>>>11),x=_+(S^(w|~A))+j[4]+4149444226&4294967295,_=w+(x<<6&4294967295|x>>>26),x=A+(w^(_|~S))+j[11]+3174756917&4294967295,A=_+(x<<10&4294967295|x>>>22),x=S+(_^(A|~w))+j[2]+718787259&4294967295,S=A+(x<<15&4294967295|x>>>17),x=w+(A^(S|~_))+j[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(S+(x<<21&4294967295|x>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+A&4294967295}n.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var w=_-this.blockSize,j=this.B,S=this.h,A=0;A<_;){if(S==0)for(;A<=w;)s(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(j[S++]=I.charCodeAt(A++),S==this.blockSize){s(this,j),S=0;break}}else for(;A<_;)if(j[S++]=I[A++],S==this.blockSize){s(this,j),S=0;break}}this.h=S,this.o+=_},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var w=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=w&255,w/=256;for(this.u(I),I=Array(16),_=w=0;4>_;++_)for(var j=0;32>j;j+=8)I[w++]=this.g[_]>>>j&255;return I};function a(I,_){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function o(I,_){this.h=_;for(var w=[],j=!0,S=I.length-1;0<=S;S--){var A=I[S]|0;j&&A==_||(w[S]=A,j=!1)}this.g=w}var l={};function u(I){return-128<=I&&128>I?a(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return C(d(-I));for(var _=[],w=1,j=0;I>=w;j++)_[j]=I/w|0,w*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(_,8)),j=g,S=0;S<I.length;S+=8){var A=Math.min(8,I.length-S),x=parseInt(I.substring(S,S+A),_);8>A?(A=d(Math.pow(_,A)),j=j.j(A).add(d(x))):(j=j.j(w),j=j.add(d(x)))}return j}var g=u(0),m=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(v(this))return-C(this).m();for(var I=0,_=1,w=0;w<this.g.length;w++){var j=this.i(w);I+=(0<=j?j:4294967296+j)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(v(this))return"-"+C(this).toString(I);for(var _=d(Math.pow(I,6)),w=this,j="";;){var S=R(w,_).g;w=E(w,S.j(_));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=S,k(w))return A+j;for(;6>A.length;)A="0"+A;j=A+j}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=E(this,I),v(I)?-1:k(I)?0:1};function C(I){for(var _=I.g.length,w=[],j=0;j<_;j++)w[j]=~I.g[j];return new o(w,~I.h).add(m)}t.abs=function(){return v(this)?C(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0,S=0;S<=_;S++){var A=j+(this.i(S)&65535)+(I.i(S)&65535),x=(A>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);j=x>>>16,A&=65535,x&=65535,w[S]=x<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(I,_){return I.add(C(_))}t.j=function(I){if(k(this)||k(I))return g;if(v(this))return v(I)?C(this).j(C(I)):C(C(this).j(I));if(v(I))return C(this.j(C(I)));if(0>this.l(b)&&0>I.l(b))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,w=[],j=0;j<2*_;j++)w[j]=0;for(j=0;j<this.g.length;j++)for(var S=0;S<I.g.length;S++){var A=this.i(j)>>>16,x=this.i(j)&65535,q=I.i(S)>>>16,U=I.i(S)&65535;w[2*j+2*S]+=x*U,y(w,2*j+2*S),w[2*j+2*S+1]+=A*U,y(w,2*j+2*S+1),w[2*j+2*S+1]+=x*q,y(w,2*j+2*S+1),w[2*j+2*S+2]+=A*q,y(w,2*j+2*S+2)}for(j=0;j<_;j++)w[j]=w[2*j+1]<<16|w[2*j];for(j=_;j<2*_;j++)w[j]=0;return new o(w,0)};function y(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function N(I,_){this.g=I,this.h=_}function R(I,_){if(k(_))throw Error("division by zero");if(k(I))return new N(g,g);if(v(I))return _=R(C(I),_),new N(C(_.g),C(_.h));if(v(_))return _=R(I,C(_)),new N(C(_.g),_.h);if(30<I.g.length){if(v(I)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,j=_;0>=j.l(I);)w=L(w),j=L(j);var S=M(w,1),A=M(j,1);for(j=M(j,2),w=M(w,2);!k(j);){var x=A.add(j);0>=x.l(I)&&(S=S.add(w),A=x),j=M(j,1),w=M(w,1)}return _=E(I,S.j(_)),new N(S,_)}for(S=g;0<=I.l(_);){for(w=Math.max(1,Math.floor(I.m()/_.m())),j=Math.ceil(Math.log(w)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),A=d(w),x=A.j(_);v(x)||0<x.l(I);)w-=j,A=d(w),x=A.j(_);k(A)&&(A=m),S=S.add(A),I=E(I,x)}return new N(S,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0;j<_;j++)w[j]=this.i(j)&I.i(j);return new o(w,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0;j<_;j++)w[j]=this.i(j)|I.i(j);return new o(w,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],j=0;j<_;j++)w[j]=this.i(j)^I.i(j);return new o(w,this.h^I.h)};function L(I){for(var _=I.g.length+1,w=[],j=0;j<_;j++)w[j]=I.i(j)<<1|I.i(j-1)>>>31;return new o(w,I.h)}function M(I,_){var w=_>>5;_%=32;for(var j=I.g.length-w,S=[],A=0;A<j;A++)S[A]=0<_?I.i(A+w)>>>_|I.i(A+w+1)<<32-_:I.i(A+w);return new o(S,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Iw=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Hs=o}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cw,no,Aw,Sc,Ef,Pw,Rw,Dw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,p){return c==Array.prototype||c==Object.prototype||(c[f]=p.value),c};function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var f=0;f<c.length;++f){var p=c[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(c,f){if(f)e:{var p=n;c=c.split(".");for(var T=0;T<c.length-1;T++){var O=c[T];if(!(O in p))break e;p=p[O]}c=c[c.length-1],T=p[c],f=f(T),f!=T&&f!=null&&e(p,c,{configurable:!0,writable:!0,value:f})}}function a(c,f){c instanceof String&&(c+="");var p=0,T=!1,O={next:function(){if(!T&&p<c.length){var z=p++;return{value:f(z,c[z]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return a(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,p){return c.call.apply(c.bind,arguments)}function g(c,f,p){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function m(c,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,m.apply(null,arguments)}function b(c,f){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function k(c,f){function p(){}p.prototype=f.prototype,c.aa=f.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(T,O,z){for(var re=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)re[Fe-2]=arguments[Fe];return f.prototype[O].apply(T,re)}}function v(c){const f=c.length;if(0<f){const p=Array(f);for(let T=0;T<f;T++)p[T]=c[T];return p}return[]}function C(c,f){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(u(T)){const O=c.length||0,z=T.length||0;c.length=O+z;for(let re=0;re<z;re++)c[O+re]=T[re]}else c.push(T)}}class E{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var L=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function M(c,f,p){for(const T in c)f.call(p,c[T],T,c)}function I(c,f){for(const p in c)f.call(void 0,c[p],p,c)}function _(c){const f={};for(const p in c)f[p]=c[p];return f}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,f){let p,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(p in T)c[p]=T[p];for(let z=0;z<w.length;z++)p=w[z],Object.prototype.hasOwnProperty.call(T,p)&&(c[p]=T[p])}}function S(c){var f=1;c=c.split(":");const p=[];for(;0<f&&c.length;)p.push(c.shift()),f--;return c.length&&p.push(c.join(":")),p}function A(c){l.setTimeout(()=>{throw c},0)}function x(){var c=V;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class q{constructor(){this.h=this.g=null}add(f,p){const T=U.get();T.set(f,p),this.h?this.h.next=T:this.g=T,this.h=T}}var U=new E(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let W,F=!1,V=new q,D=()=>{const c=l.Promise.resolve(void 0);W=()=>{c.then(H)}};var H=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(p){A(p)}var f=U;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}F=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return c}();function le(c,f){if(te.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(L){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else p=="mouseover"?f=c.fromElement:p=="mouseout"&&(f=c.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&le.aa.h.call(this)}}k(le,te);var fe={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),X=0;function G(c,f,p,T,O){this.listener=c,this.proxy=null,this.src=f,this.type=p,this.capture=!!T,this.ha=O,this.key=++X,this.da=this.fa=!1}function K(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ke(c){this.src=c,this.g={},this.h=0}ke.prototype.add=function(c,f,p,T,O){var z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);var re=se(c,f,T,O);return-1<re?(f=c[re],p||(f.fa=!1)):(f=new G(f,this.src,z,!!T,O),f.fa=p,c.push(f)),f};function _e(c,f){var p=f.type;if(p in c.g){var T=c.g[p],O=Array.prototype.indexOf.call(T,f,void 0),z;(z=0<=O)&&Array.prototype.splice.call(T,O,1),z&&(K(f),c.g[p].length==0&&(delete c.g[p],c.h--))}}function se(c,f,p,T){for(var O=0;O<c.length;++O){var z=c[O];if(!z.da&&z.listener==f&&z.capture==!!p&&z.ha==T)return O}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),Ve={};function gt(c,f,p,T,O){if(Array.isArray(f)){for(var z=0;z<f.length;z++)gt(c,f[z],p,T,O);return null}return p=ga(p),c&&c[J]?c.K(f,p,d(T)?!!T.capture:!1,O):Ne(c,f,p,!1,T,O)}function Ne(c,f,p,T,O,z){if(!f)throw Error("Invalid event type");var re=d(O)?!!O.capture:!!O,Fe=je(c);if(Fe||(c[Ee]=Fe=new ke(c)),p=Fe.add(f,p,T,re,z),p.proxy)return p;if(T=xe(),p.proxy=T,T.src=c,T.listener=p,c.addEventListener)ue||(O=re),O===void 0&&(O=!1),c.addEventListener(f.toString(),T,O);else if(c.attachEvent)c.attachEvent(pt(f.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function xe(){function c(p){return f.call(c.src,c.listener,p)}const f=Et;return c}function Xt(c,f,p,T,O){if(Array.isArray(f))for(var z=0;z<f.length;z++)Xt(c,f[z],p,T,O);else T=d(T)?!!T.capture:!!T,p=ga(p),c&&c[J]?(c=c.i,f=String(f).toString(),f in c.g&&(z=c.g[f],p=se(z,p,T,O),-1<p&&(K(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete c.g[f],c.h--)))):c&&(c=je(c))&&(f=c.g[f.toString()],c=-1,f&&(c=se(f,p,T,O)),(p=-1<c?f[c]:null)&&it(p))}function it(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[J])_e(f.i,c);else{var p=c.type,T=c.proxy;f.removeEventListener?f.removeEventListener(p,T,c.capture):f.detachEvent?f.detachEvent(pt(p),T):f.addListener&&f.removeListener&&f.removeListener(T),(p=je(f))?(_e(p,c),p.h==0&&(p.src=null,f[Ee]=null)):K(c)}}}function pt(c){return c in Ve?Ve[c]:Ve[c]="on"+c}function Et(c,f){if(c.da)c=!0;else{f=new le(f,this);var p=c.listener,T=c.ha||c.src;c.fa&&it(c),c=p.call(T,f)}return c}function je(c){return c=c[Ee],c instanceof ke?c:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(c){return typeof c=="function"?c:(c[Ge]||(c[Ge]=function(f){return c.handleEvent(f)}),c[Ge])}function yt(){$.call(this),this.i=new ke(this),this.M=this,this.F=null}k(yt,$),yt.prototype[J]=!0,yt.prototype.removeEventListener=function(c,f,p,T){Xt(this,c,f,p,T)};function jt(c,f){var p,T=c.F;if(T)for(p=[];T;T=T.F)p.push(T);if(c=c.M,T=f.type||f,typeof f=="string")f=new te(f,c);else if(f instanceof te)f.target=f.target||c;else{var O=f;f=new te(T,c),j(f,O)}if(O=!0,p)for(var z=p.length-1;0<=z;z--){var re=f.g=p[z];O=pa(re,T,!0,f)&&O}if(re=f.g=c,O=pa(re,T,!0,f)&&O,O=pa(re,T,!1,f)&&O,p)for(z=0;z<p.length;z++)re=f.g=p[z],O=pa(re,T,!1,f)&&O}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var p=c.g[f],T=0;T<p.length;T++)K(p[T]);delete c.g[f],c.h--}}this.F=null},yt.prototype.K=function(c,f,p,T){return this.i.add(String(c),f,!1,p,T)},yt.prototype.L=function(c,f,p,T){return this.i.add(String(c),f,!0,p,T)};function pa(c,f,p,T){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,z=0;z<f.length;++z){var re=f[z];if(re&&!re.da&&re.capture==p){var Fe=re.listener,Tt=re.ha||re.src;re.fa&&_e(c.i,re),O=Fe.call(Tt,T)!==!1&&O}}return O&&!T.defaultPrevented}function kl(c,f,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function Nl(c){c.g=kl(()=>{c.g=null,c.i&&(c.i=!1,Nl(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class md extends ${constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Nl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(c){$.call(this),this.h=c,this.g={}}k(Is,$);var El=[];function jl(c){M(c.g,function(f,p){this.g.hasOwnProperty(p)&&it(f)},c),c.g={}}Is.prototype.N=function(){Is.aa.N.call(this),jl(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ai=l.JSON.stringify,gd=l.JSON.parse,pd=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Pi(){}Pi.prototype.h=null;function Ri(c){return c.h||(c.h=c.i())}function Q(){}var ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){te.call(this,"d")}k(me,te);function ge(){te.call(this,"c")}k(ge,te);var Te={},ot=null;function Mt(){return ot=ot||new yt}Te.La="serverreachability";function St(c){te.call(this,Te.La,c)}k(St,te);function xt(c){const f=Mt();jt(f,new St(f))}Te.STAT_EVENT="statevent";function Nr(c,f){te.call(this,Te.STAT_EVENT,c),this.stat=f}k(Nr,te);function et(c){const f=Mt();jt(f,new Nr(f,c))}Te.Ma="timingevent";function Ot(c,f){te.call(this,Te.Ma,c),this.size=f}k(Ot,te);function vt(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function yd(c,f,p,T,O,z){c.info(function(){if(c.g)if(z)for(var re="",Fe=z.split("&"),Tt=0;Tt<Fe.length;Tt++){var Re=Fe[Tt].split("=");if(1<Re.length){var Lt=Re[0];Re=Re[1];var Vt=Lt.split("_");re=2<=Vt.length&&Vt[1]=="type"?re+(Lt+"="+Re+"&"):re+(Lt+"=redacted&")}}else re=null;else re=z;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+p+`
`+re})}function G2(c,f,p,T,O,z,re){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+p+`
`+z+" "+re})}function ya(c,f,p,T){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+Q2(c,p)+(T?" "+T:"")})}function K2(c,f){c.info(function(){return"TIMEOUT: "+f})}Cs.prototype.info=function(){};function Q2(c,f){if(!c.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var T=p[c];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var re=1;re<O.length;re++)O[re]=""}}}}return Ai(p)}catch{return f}}var Sl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xd;function Tl(){}k(Tl,Pi),Tl.prototype.g=function(){return new XMLHttpRequest},Tl.prototype.i=function(){return{}},xd=new Tl;function Ln(c,f,p,T){this.j=c,this.i=f,this.l=p,this.R=T||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var Xg={},vd={};function bd(c,f,p){c.L=1,c.v=Pl(fn(f)),c.m=p,c.P=!0,Jg(c,null)}function Jg(c,f){c.F=Date.now(),Il(c),c.A=fn(c.v);var p=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),h0(p.i,"t",T),c.C=0,p=c.j.J,c.h=new Yg,c.g=C0(c.j,p?f:null,!c.m),0<c.O&&(c.M=new md(m(c.Y,c,c.g),c.O)),f=c.U,p=c.g,T=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(El[0]=O.toString()),O=El);for(var z=0;z<O.length;z++){var re=gt(p,O[z],T||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),xt(),yd(c.i,c.u,c.A,c.l,c.R,c.m)}Ln.prototype.ca=function(c){c=c.target;const f=this.M;f&&mn(c)==3?f.j():this.Y(c)},Ln.prototype.Y=function(c){try{if(c==this.g)e:{const Vt=mn(this.g);var f=this.g.Ba();const ba=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||v0(this.g)))){this.J||Vt!=4||f==7||(f==8||0>=ba?xt(3):xt(2)),wd(this);var p=this.g.Z();this.X=p;t:if(Zg(this)){var T=v0(this.g);c="";var O=T.length,z=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),Di(this);var re="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(T[f],{stream:!(z&&f==O-1)});T.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=p==200,G2(this.i,this.u,this.A,this.l,this.R,Vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Tt=this.g;if((Fe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Fe)){var Re=Fe;break t}}Re=null}if(p=Re)ya(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_d(this,p);else{this.o=!1,this.s=3,et(12),As(this),Di(this);break e}}if(this.P){p=!0;let Dr;for(;!this.J&&this.C<re.length;)if(Dr=Y2(this,re),Dr==vd){Vt==4&&(this.s=4,et(14),p=!1),ya(this.i,this.l,null,"[Incomplete Response]");break}else if(Dr==Xg){this.s=4,et(15),ya(this.i,this.l,re,"[Invalid Chunk]"),p=!1;break}else ya(this.i,this.l,Dr,null),_d(this,Dr);if(Zg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||re.length!=0||this.h.h||(this.s=1,et(16),p=!1),this.o=this.o&&p,!p)ya(this.i,this.l,re,"[Invalid Chunked Response]"),As(this),Di(this);else if(0<re.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Td(Lt),Lt.M=!0,et(11))}}else ya(this.i,this.l,re,null),_d(this,re);Vt==4&&As(this),this.o&&!this.J&&(Vt==4?j0(this.j,this):(this.o=!1,Il(this)))}else f1(this.g),p==400&&0<re.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),As(this),Di(this)}}}catch{}finally{}};function Zg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Y2(c,f){var p=c.C,T=f.indexOf(`
`,p);return T==-1?vd:(p=Number(f.substring(p,T)),isNaN(p)?Xg:(T+=1,T+p>f.length?vd:(f=f.slice(T,T+p),c.C=T+p,f)))}Ln.prototype.cancel=function(){this.J=!0,As(this)};function Il(c){c.S=Date.now()+c.I,e0(c,c.I)}function e0(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=vt(m(c.ba,c),f)}function wd(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Ln.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(K2(this.i,this.A),this.L!=2&&(xt(),et(17)),As(this),this.s=2,Di(this)):e0(this,this.S-c)};function Di(c){c.j.G==0||c.J||j0(c.j,c)}function As(c){wd(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,jl(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function _d(c,f){try{var p=c.j;if(p.G!=0&&(p.g==c||kd(p.h,c))){if(!c.K&&kd(p.h,c)&&p.G==3){try{var T=p.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Ll(p),Ml(p);else break e;Sd(p),et(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=vt(m(p.Za,p),6e3));if(1>=n0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Rs(p,11)}else if((c.K||p.g==c)&&Ll(p),!y(f))for(O=p.Da.g.parse(f),f=0;f<O.length;f++){let Re=O[f];if(p.T=Re[0],Re=Re[1],p.G==2)if(Re[0]=="c"){p.K=Re[1],p.ia=Re[2];const Lt=Re[3];Lt!=null&&(p.la=Lt,p.j.info("VER="+p.la));const Vt=Re[4];Vt!=null&&(p.Aa=Vt,p.j.info("SVER="+p.Aa));const ba=Re[5];ba!=null&&typeof ba=="number"&&0<ba&&(T=1.5*ba,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Dr=c.g;if(Dr){const Fl=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fl){var z=T.h;z.g||Fl.indexOf("spdy")==-1&&Fl.indexOf("quic")==-1&&Fl.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Nd(z,z.h),z.h=null))}if(T.D){const Id=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(T.ya=Id,ze(T.I,T.D,Id))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var re=c;if(T.qa=I0(T,T.J?T.ia:null,T.W),re.K){s0(T.h,re);var Fe=re,Tt=T.L;Tt&&(Fe.I=Tt),Fe.B&&(wd(Fe),Il(Fe)),T.g=re}else N0(T);0<p.i.length&&Ol(p)}else Re[0]!="stop"&&Re[0]!="close"||Rs(p,7);else p.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Rs(p,7):jd(p):Re[0]!="noop"&&p.l&&p.l.ta(Re),p.v=0)}}xt(4)}catch{}}var X2=class{constructor(c,f){this.g=c,this.map=f}};function t0(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function r0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function n0(c){return c.h?1:c.g?c.g.size:0}function kd(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Nd(c,f){c.g?c.g.add(f):c.h=f}function s0(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}t0.prototype.cancel=function(){if(this.i=a0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function a0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const p of c.g.values())f=f.concat(p.D);return f}return v(c.i)}function J2(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],p=c.length,T=0;T<p;T++)f.push(c[T]);return f}f=[],p=0;for(T in c)f[p++]=c[T];return f}function Z2(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var p=0;p<c;p++)f.push(p);return f}f=[],p=0;for(const T in c)f[p++]=T;return f}}}function i0(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var p=Z2(c),T=J2(c),O=T.length,z=0;z<O;z++)f.call(void 0,T[z],p&&p[z],c)}var o0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e1(c,f){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var T=c[p].indexOf("="),O=null;if(0<=T){var z=c[p].substring(0,T);O=c[p].substring(T+1)}else z=c[p];f(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Ps(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ps){this.h=c.h,Cl(this,c.j),this.o=c.o,this.g=c.g,Al(this,c.s),this.l=c.l;var f=c.i,p=new Oi;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),l0(this,p),this.m=c.m}else c&&(f=String(c).match(o0))?(this.h=!1,Cl(this,f[1]||"",!0),this.o=$i(f[2]||""),this.g=$i(f[3]||"",!0),Al(this,f[4]),this.l=$i(f[5]||"",!0),l0(this,f[6]||"",!0),this.m=$i(f[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}Ps.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Mi(f,c0,!0),":");var p=this.g;return(p||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Mi(f,c0,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Mi(p,p.charAt(0)=="/"?n1:r1,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Mi(p,a1)),c.join("")};function fn(c){return new Ps(c)}function Cl(c,f,p){c.j=p?$i(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Al(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function l0(c,f,p){f instanceof Oi?(c.i=f,i1(c.i,c.h)):(p||(f=Mi(f,s1)),c.i=new Oi(f,c.h))}function ze(c,f,p){c.i.set(f,p)}function Pl(c){return ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $i(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Mi(c,f,p){return typeof c=="string"?(c=encodeURI(c).replace(f,t1),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function t1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var c0=/[#\/\?@]/g,r1=/[#\?:]/g,n1=/[#\?]/g,s1=/[#\?@]/g,a1=/#/g;function Oi(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Vn(c){c.g||(c.g=new Map,c.h=0,c.i&&e1(c.i,function(f,p){c.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Oi.prototype,t.add=function(c,f){Vn(this),this.i=null,c=xa(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(f),this.h+=1,this};function u0(c,f){Vn(c),f=xa(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function d0(c,f){return Vn(c),f=xa(c,f),c.g.has(f)}t.forEach=function(c,f){Vn(this),this.g.forEach(function(p,T){p.forEach(function(O){c.call(f,O,T,this)},this)},this)},t.na=function(){Vn(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let T=0;T<f.length;T++){const O=c[T];for(let z=0;z<O.length;z++)p.push(f[T])}return p},t.V=function(c){Vn(this);let f=[];if(typeof c=="string")d0(this,c)&&(f=f.concat(this.g.get(xa(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)f=f.concat(c[p])}return f},t.set=function(c,f){return Vn(this),this.i=null,c=xa(this,c),d0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function h0(c,f,p){u0(c,f),0<p.length&&(c.i=null,c.g.set(xa(c,f),v(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var T=f[p];const z=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var O=z;re[T]!==""&&(O+="="+encodeURIComponent(String(re[T]))),c.push(O)}}return this.i=c.join("&")};function xa(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function i1(c,f){f&&!c.j&&(Vn(c),c.i=null,c.g.forEach(function(p,T){var O=T.toLowerCase();T!=O&&(u0(this,T),h0(this,O,p))},c)),c.j=f}function o1(c,f){const p=new Cs;if(l.Image){const T=new Image;T.onload=b(Fn,p,"TestLoadImage: loaded",!0,f,T),T.onerror=b(Fn,p,"TestLoadImage: error",!1,f,T),T.onabort=b(Fn,p,"TestLoadImage: abort",!1,f,T),T.ontimeout=b(Fn,p,"TestLoadImage: timeout",!1,f,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else f(!1)}function l1(c,f){const p=new Cs,T=new AbortController,O=setTimeout(()=>{T.abort(),Fn(p,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:T.signal}).then(z=>{clearTimeout(O),z.ok?Fn(p,"TestPingServer: ok",!0,f):Fn(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Fn(p,"TestPingServer: error",!1,f)})}function Fn(c,f,p,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(p)}catch{}}function c1(){this.g=new pd}function u1(c,f,p){const T=p||"";try{i0(c,function(O,z){let re=O;d(O)&&(re=Ai(O)),f.push(T+z+"="+encodeURIComponent(re))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function Rl(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Rl,Pi),Rl.prototype.g=function(){return new Dl(this.l,this.j)},Rl.prototype.i=function(c){return function(){return c}}({});function Dl(c,f){yt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Dl,yt),t=Dl.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Vi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function f0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Li(this):Vi(this),this.readyState==3&&f0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Li(this))},t.Qa=function(c){this.g&&(this.response=c,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Vi(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=f.next();return c.join(`\r
`)};function Vi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function m0(c){let f="";return M(c,function(p,T){f+=T,f+=":",f+=p,f+=`\r
`}),f}function Ed(c,f,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=m0(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):ze(c,f,p))}function tt(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(tt,yt);var d1=/^https?$/i,h1=["POST","PUT"];t=tt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xd.g(),this.v=this.o?Ri(this.o):Ri(xd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(z){g0(this,z);return}if(c=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)p.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())p.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(h1,f,void 0))||T||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of p)this.g.setRequestHeader(z,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{x0(this),this.u=!0,this.g.send(c),this.u=!1}catch(z){g0(this,z)}};function g0(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,p0(c),$l(c)}function p0(c){c.A||(c.A=!0,jt(c,"complete"),jt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,jt(this,"complete"),jt(this,"abort"),$l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$l(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?y0(this):this.bb())},t.bb=function(){y0(this)};function y0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||mn(c)!=4||c.Z()!=2)){if(c.u&&mn(c)==4)kl(c.Ea,0,c);else if(jt(c,"readystatechange"),mn(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var T;if(T=re===0){var O=String(c.D).match(o0)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),T=!d1.test(O?O.toLowerCase():"")}p=T}if(p)jt(c,"complete"),jt(c,"success");else{c.m=6;try{var z=2<mn(c)?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.Z()+"]",p0(c)}}finally{$l(c)}}}}function $l(c,f){if(c.g){x0(c);const p=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||jt(c,"ready");try{p.onreadystatechange=T}catch{}}}function x0(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),gd(f)}};function v0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function f1(c){const f={};c=(c.g&&2<=mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(y(c[T]))continue;var p=S(c[T]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=f[O]||[];f[O]=z,z.push(p)}I(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(c,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||f}function b0(c){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fi("baseRetryDelayMs",5e3,c),this.cb=Fi("retryDelaySeedMs",1e4,c),this.Wa=Fi("forwardChannelMaxRetries",2,c),this.wa=Fi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new t0(c&&c.concurrentRequestLimit),this.Da=new c1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=b0.prototype,t.la=8,t.G=1,t.connect=function(c,f,p,T){et(0),this.W=c,this.H=f||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=I0(this,null,this.W),Ol(this)};function jd(c){if(w0(c),c.G==3){var f=c.U++,p=fn(c.I);if(ze(p,"SID",c.K),ze(p,"RID",f),ze(p,"TYPE","terminate"),Ui(c,p),f=new Ln(c,c.j,f),f.L=2,f.v=Pl(fn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=C0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Il(f)}T0(c)}function Ml(c){c.g&&(Td(c),c.g.cancel(),c.g=null)}function w0(c){Ml(c),c.u&&(l.clearTimeout(c.u),c.u=null),Ll(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Ol(c){if(!r0(c.h)&&!c.s){c.s=!0;var f=c.Ga;W||D(),F||(W(),F=!0),V.add(f,c),c.B=0}}function m1(c,f){return n0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=vt(m(c.Ga,c,f),S0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new Ln(this,this.j,c);let z=this.o;if(this.S&&(z?(z=_(z),j(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=k0(this,O,f),p=fn(this.I),ze(p,"RID",c),ze(p,"CVER",22),this.D&&ze(p,"X-HTTP-Session-Id",this.D),Ui(this,p),z&&(this.O?f="headers="+encodeURIComponent(String(m0(z)))+"&"+f:this.m&&Ed(p,this.m,z)),Nd(this.h,O),this.Ua&&ze(p,"TYPE","init"),this.P?(ze(p,"$req",f),ze(p,"SID","null"),O.T=!0,bd(O,p,null)):bd(O,p,f),this.G=2}}else this.G==3&&(c?_0(this,c):this.i.length==0||r0(this.h)||_0(this))};function _0(c,f){var p;f?p=f.l:p=c.U++;const T=fn(c.I);ze(T,"SID",c.K),ze(T,"RID",p),ze(T,"AID",c.T),Ui(c,T),c.m&&c.o&&Ed(T,c.m,c.o),p=new Ln(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),f&&(c.i=f.D.concat(c.i)),f=k0(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Nd(c.h,p),bd(p,T,f)}function Ui(c,f){c.H&&M(c.H,function(p,T){ze(f,T,p)}),c.l&&i0({},function(p,T){ze(f,T,p)})}function k0(c,f,p){p=Math.min(c.i.length,p);var T=c.l?m(c.l.Na,c.l,c):null;e:{var O=c.i;let z=-1;for(;;){const re=["count="+p];z==-1?0<p?(z=O[0].g,re.push("ofs="+z)):z=0:re.push("ofs="+z);let Fe=!0;for(let Tt=0;Tt<p;Tt++){let Re=O[Tt].g;const Lt=O[Tt].map;if(Re-=z,0>Re)z=Math.max(0,O[Tt].g-100),Fe=!1;else try{u1(Lt,re,"req"+Re+"_")}catch{T&&T(Lt)}}if(Fe){T=re.join("&");break e}}}return c=c.i.splice(0,p),f.D=c,T}function N0(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;W||D(),F||(W(),F=!0),V.add(f,c),c.v=0}}function Sd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=vt(m(c.Fa,c),S0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,E0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=vt(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Ml(this),E0(this))};function Td(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function E0(c){c.g=new Ln(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=fn(c.qa);ze(f,"RID","rpc"),ze(f,"SID",c.K),ze(f,"AID",c.T),ze(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ze(f,"TO",c.ja),ze(f,"TYPE","xmlhttp"),Ui(c,f),c.m&&c.o&&Ed(f,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Pl(fn(f)),p.m=null,p.P=!0,Jg(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Ml(this),Sd(this),et(19))};function Ll(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function j0(c,f){var p=null;if(c.g==f){Ll(c),Td(c),c.g=null;var T=2}else if(kd(c.h,f))p=f.D,s0(c.h,f),T=1;else return;if(c.G!=0){if(f.o)if(T==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;T=Mt(),jt(T,new Ot(T,p)),Ol(c)}else N0(c);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&m1(c,f)||T==2&&Sd(c)))switch(p&&0<p.length&&(f=c.h,f.i=f.i.concat(p)),O){case 1:Rs(c,5);break;case 4:Rs(c,10);break;case 3:Rs(c,6);break;default:Rs(c,2)}}}function S0(c,f){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*f}function Rs(c,f){if(c.j.info("Error code "+f),f==2){var p=m(c.fb,c),T=c.Xa;const O=!T;T=new Ps(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cl(T,"https"),Pl(T),O?o1(T.toString(),p):l1(T.toString(),p)}else et(2);c.G=0,c.l&&c.l.sa(f),T0(c),w0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function T0(c){if(c.G=0,c.ka=[],c.l){const f=a0(c.h);(f.length!=0||c.i.length!=0)&&(C(c.ka,f),C(c.ka,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.ra()}}function I0(c,f,p){var T=p instanceof Ps?fn(p):new Ps(p);if(T.g!="")f&&(T.g=f+"."+T.g),Al(T,T.s);else{var O=l.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var z=new Ps(null);T&&Cl(z,T),f&&(z.g=f),O&&Al(z,O),p&&(z.l=p),T=z}return p=c.D,f=c.ya,p&&f&&ze(T,p,f),ze(T,"VER",c.la),Ui(c,T),T}function C0(c,f,p){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new tt(new Rl({eb:p})):new tt(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function A0(){}t=A0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vl(){}Vl.prototype.g=function(c,f){return new hr(c,f)};function hr(c,f){yt.call(this),this.g=new b0(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new va(this)}k(hr,yt),hr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hr.prototype.close=function(){jd(this.g)},hr.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Ai(c),c=p);f.i.push(new X2(f.Ya++,c)),f.G==3&&Ol(f)},hr.prototype.N=function(){this.g.l=null,delete this.j,jd(this.g),delete this.g,hr.aa.N.call(this)};function P0(c){me.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const p in f){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}k(P0,me);function R0(){ge.call(this),this.status=1}k(R0,ge);function va(c){this.g=c}k(va,A0),va.prototype.ua=function(){jt(this.g,"a")},va.prototype.ta=function(c){jt(this.g,new P0(c))},va.prototype.sa=function(c){jt(this.g,new R0)},va.prototype.ra=function(){jt(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,hr.prototype.send=hr.prototype.o,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,Dw=function(){return new Vl},Rw=function(){return Mt()},Pw=Te,Ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sl.NO_ERROR=0,Sl.TIMEOUT=8,Sl.HTTP_ERROR=6,Sc=Sl,Qg.COMPLETE="complete",Aw=Qg,Q.EventType=ne,ne.OPEN="a",ne.CLOSE="b",ne.ERROR="c",ne.MESSAGE="d",yt.prototype.listen=yt.prototype.K,no=Q,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Cw=tt}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Xm("@firebase/firestore");function Yi(){return ea.logLevel}function ce(t,...e){if(ea.logLevel<=Ce.DEBUG){const r=e.map(eg);ea.debug(`Firestore (${ki}): ${t}`,...r)}}function Pn(t,...e){if(ea.logLevel<=Ce.ERROR){const r=e.map(eg);ea.error(`Firestore (${ki}): ${t}`,...r)}}function ci(t,...e){if(ea.logLevel<=Ce.WARN){const r=e.map(eg);ea.warn(`Firestore (${ki}): ${t}`,...r)}}function eg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t="Unexpected state"){const e=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: `+t;throw Pn(e),new Error(e)}function Le(t,e){t||ye()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends dn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(zt.UNAUTHENTICATED))}shutdown(){}}class _T{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kT{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Le(this.o===void 0);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let a=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gs)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Le(typeof n.accessToken=="string"),new $w(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new zt(e)}}class NT{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ET{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new NT(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ST{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Le(this.o===void 0);const n=a=>{a.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Le(typeof r.token=="string"),this.R=r.token,new jT(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=TT(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%e.length))}return n}}function De(t,e){return t<e?-1:t>e?1:0}function ui(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new mt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new mt(0,0))}static max(){return new ve(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,r,n){r===void 0?r=0:r>e.length&&ye(),n===void 0?n=e.length-r:n>e.length-r&&ye(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return qo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof qo?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=e.get(s),o=r.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class He extends qo{construct(e,r,n){return new He(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new He(r)}static emptyPath(){return new He([])}}const IT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends qo{construct(e,r,n){return new At(e,r,n)}static isValidIdentifier(e){return IT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ie(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(a(),s++)}if(a(),o)throw new ie(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(r)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(He.fromString(e))}static fromName(e){return new de(He.fromString(e).popFirst(5))}static empty(){return new de(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return He.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new He(e.slice()))}}function CT(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(n===1e9?new mt(r+1,0):new mt(r,n));return new bs(s,de.empty(),e)}function AT(t){return new bs(t.readTime,t.key,-1)}class bs{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new bs(ve.min(),de.empty(),-1)}static max(){return new bs(ve.max(),de.empty(),-1)}}function PT(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=de.comparator(t.documentKey,e.documentKey),r!==0?r:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==RT)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Z((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Z?r:Z.resolve(r)}catch(r){return Z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.reject(r)}static resolve(e){return new Z((r,n)=>{r(e)})}static reject(e){return new Z((r,n)=>{n(e)})}static waitFor(e){return new Z((r,n)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>n(u))}),o=!0,a===s&&r()})}static or(e){let r=Z.resolve(!1);for(const n of e)r=r.next(s=>s?Z.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new Z((n,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;r(e[d]).next(h=>{o[d]=h,++l,l===a&&n(o)},h=>s(h))}})}static doWhile(e,r){return new Z((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function $T(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tg.oe=-1;function Yu(t){return t==null}function hu(t){return t===0&&1/t==-1/0}function MT(t){return typeof t=="number"&&Number.isInteger(t)&&!hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function da(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Ow(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,r){this.comparator=e,this.root=r||Ct.EMPTY}insert(e,r){return new Je(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??Ct.RED,this.left=s??Ct.EMPTY,this.right=a??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new Ct(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,r,n,s,a){return this}insert(e,r,n){return new Ct(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new by(this.data.getIterator())}getIteratorFrom(e){return new by(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Rt(this.comparator);return r.data=e,r}}class by{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new gr([])}unionWith(e){let r=new Rt(At.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new gr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ui(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Lw("Invalid base64 string: "+a):a}}(e);return new $t(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new $t(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const OT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(Le(!!t),typeof t=="string"){let e=0;const r=OT.exec(t);if(Le(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function ng(t){const e=t.mapValue.fields.__previous_value__;return rg(e)?ng(e):e}function Go(t){const e=ws(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,r,n,s,a,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Ko{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ko("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc={mapValue:{}};function ra(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rg(t)?4:FT(t)?9007199254740991:VT(t)?10:11:ye()}function on(t,e){if(t===e)return!0;const r=ra(t);if(r!==ra(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Go(t).isEqual(Go(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=ws(s.timestampValue),l=ws(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return ta(s.bytesValue).isEqual(ta(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return nt(s.geoPointValue.latitude)===nt(a.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return nt(s.integerValue)===nt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=nt(s.doubleValue),l=nt(a.doubleValue);return o===l?hu(o)===hu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ui(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(vy(o)!==vy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!on(o[u],l[u])))return!1;return!0}(t,e);default:return ye()}}function Qo(t,e){return(t.values||[]).find(r=>on(r,e))!==void 0}function di(t,e){if(t===e)return 0;const r=ra(t),n=ra(e);if(r!==n)return De(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=nt(a.integerValue||a.doubleValue),u=nt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return wy(t.timestampValue,e.timestampValue);case 4:return wy(Go(t),Go(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ta(a),u=ta(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=De(l[d],u[d]);if(h!==0)return h}return De(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=De(nt(a.latitude),nt(o.latitude));return l!==0?l:De(nt(a.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _y(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const g=a.fields||{},m=o.fields||{},b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=(u=m.value)===null||u===void 0?void 0:u.arrayValue,v=De(((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0,((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:_y(b,k)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===oc.mapValue&&o===oc.mapValue)return 0;if(a===oc.mapValue)return 1;if(o===oc.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=De(u[g],h[g]);if(m!==0)return m;const b=di(l[u[g]],d[h[g]]);if(b!==0)return b}return De(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ye()}}function wy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const r=ws(t),n=ws(e),s=De(r.seconds,n.seconds);return s!==0?s:De(r.nanos,n.nanos)}function _y(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=di(r[s],n[s]);if(a)return a}return De(r.length,n.length)}function hi(t){return jf(t)}function jf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ws(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ta(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return de.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=jf(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of n)a?a=!1:s+=",",s+=`${o}:${jf(r.fields[o])}`;return s+"}"}(t.mapValue):ye()}function ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sf(t){return!!t&&"integerValue"in t}function sg(t){return!!t&&"arrayValue"in t}function Ny(t){return!!t&&"nullValue"in t}function Ey(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}function VT(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=xo(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=xo(t.arrayValue.values[r]);return e}return Object.assign({},t)}function FT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Tc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(r)}setAll(e){let r=At.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=xo(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());Tc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Tc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){da(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new ir(xo(this.value))}}function Vw(t){const e=[];return da(t.fields,(r,n)=>{const s=new At([r]);if(Tc(n)){const a=Vw(n.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,r,n,s,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,ve.min(),ve.min(),ve.min(),ir.empty(),0)}static newFoundDocument(e,r,n,s){return new Ht(e,1,r,ve.min(),n,s,0)}static newNoDocument(e,r){return new Ht(e,2,r,ve.min(),ve.min(),ir.empty(),0)}static newUnknownDocument(e,r){return new Ht(e,3,r,ve.min(),ve.min(),ir.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,r){this.position=e,this.inclusive=r}}function jy(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?n=de.comparator(de.fromName(o.referenceValue),r.key):n=di(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Sy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!on(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,r="asc"){this.field=e,this.dir=r}}function UT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{}class ut extends Fw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new zT(e,r,n):r==="array-contains"?new qT(e,n):r==="in"?new GT(e,n):r==="not-in"?new KT(e,n):r==="array-contains-any"?new QT(e,n):new ut(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new WT(e,n):new HT(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(di(r,this.value)):r!==null&&ra(this.value)===ra(r)&&this.matchesComparison(di(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends Fw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Hr(e,r)}matches(e){return Uw(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Uw(t){return t.op==="and"}function Bw(t){return BT(t)&&Uw(t)}function BT(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function Tf(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(Bw(t))return t.filters.map(e=>Tf(e)).join(",");{const e=t.filters.map(r=>Tf(r)).join(",");return`${t.op}(${e})`}}function zw(t,e){return t instanceof ut?function(n,s){return s instanceof ut&&n.op===s.op&&n.field.isEqual(s.field)&&on(n.value,s.value)}(t,e):t instanceof Hr?function(n,s){return s instanceof Hr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,o,l)=>a&&zw(o,s.filters[l]),!0):!1}(t,e):void ye()}function Ww(t){return t instanceof ut?function(r){return`${r.field.canonicalString()} ${r.op} ${hi(r.value)}`}(t):t instanceof Hr?function(r){return r.op.toString()+" {"+r.getFilters().map(Ww).join(" ,")+"}"}(t):"Filter"}class zT extends ut{constructor(e,r,n){super(e,r,n),this.key=de.fromName(n.referenceValue)}matches(e){const r=de.comparator(e.key,this.key);return this.matchesComparison(r)}}class WT extends ut{constructor(e,r){super(e,"in",r),this.keys=Hw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class HT extends ut{constructor(e,r){super(e,"not-in",r),this.keys=Hw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Hw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>de.fromName(n.referenceValue))}class qT extends ut{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return sg(r)&&Qo(r.arrayValue,this.value)}}class GT extends ut{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Qo(this.value.arrayValue,r)}}class KT extends ut{constructor(e,r){super(e,"not-in",r)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Qo(this.value.arrayValue,r)}}class QT extends ut{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!sg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Qo(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,r=null,n=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function Ty(t,e=null,r=[],n=[],s=null,a=null,o=null){return new YT(t,e,r,n,s,a,o)}function ag(t){const e=be(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Tf(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Yu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>hi(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>hi(n)).join(",")),e.ue=r}return e.ue}function ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!UT(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!zw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sy(t.startAt,e.startAt)&&Sy(t.endAt,e.endAt)}function If(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r=null,n=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function XT(t,e,r,n,s,a,o,l){return new Ni(t,e,r,n,s,a,o,l)}function qw(t){return new Ni(t)}function Iy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Gw(t){return t.collectionGroup!==null}function vo(t){const e=be(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Rt(At.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Yo(a,n))}),r.has(At.keyField().canonicalString())||e.ce.push(new Yo(At.keyField(),n))}return e.ce}function rn(t){const e=be(t);return e.le||(e.le=JT(e,vo(t))),e.le}function JT(t,e){if(t.limitType==="F")return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Yo(s.field,a)});const r=t.endAt?new fu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new fu(t.startAt.position,t.startAt.inclusive):null;return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Cf(t,e){const r=t.filters.concat([e]);return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Af(t,e,r){return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Xu(t,e){return ig(rn(t),rn(e))&&t.limitType===e.limitType}function Kw(t){return`${ag(rn(t))}|lt:${t.limitType}`}function ka(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>Ww(s)).join(", ")}]`),Yu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>hi(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>hi(s)).join(",")),`Target(${n})`}(rn(t))}; limitType=${t.limitType})`}function Ju(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):de.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of vo(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,u){const d=jy(o,l,u);return o.inclusive?d<=0:d<0}(n.startAt,vo(n),s)||n.endAt&&!function(o,l,u){const d=jy(o,l,u);return o.inclusive?d>=0:d>0}(n.endAt,vo(n),s))}(t,e)}function ZT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Qw(t){return(e,r)=>{let n=!1;for(const s of vo(t)){const a=eI(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function eI(t,e,r){const n=t.field.isKeyField()?de.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?di(u,d):ye()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return Ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Je(de.comparator);function Rn(){return tI}const Yw=new Je(de.comparator);function so(...t){let e=Yw;for(const r of t)e=e.insert(r.key,r);return e}function Xw(t){let e=Yw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Us(){return bo()}function Jw(){return bo()}function bo(){return new Ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const rI=new Je(de.comparator),nI=new Rt(de.comparator);function Ie(...t){let e=nI;for(const r of t)e=e.add(r);return e}const sI=new Rt(De);function aI(){return sI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function Zw(t){return{integerValue:""+t}}function iI(t,e){return MT(e)?Zw(e):og(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this._=void 0}}function oI(t,e,r){return t instanceof mu?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&rg(a)&&(a=ng(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof Xo?t_(t,e):t instanceof Jo?r_(t,e):function(s,a){const o=e_(s,a),l=Cy(o)+Cy(s.Pe);return Sf(o)&&Sf(s.Pe)?Zw(l):og(s.serializer,l)}(t,e)}function lI(t,e,r){return t instanceof Xo?t_(t,e):t instanceof Jo?r_(t,e):r}function e_(t,e){return t instanceof gu?function(n){return Sf(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class mu extends Zu{}class Xo extends Zu{constructor(e){super(),this.elements=e}}function t_(t,e){const r=n_(e);for(const n of t.elements)r.some(s=>on(s,n))||r.push(n);return{arrayValue:{values:r}}}class Jo extends Zu{constructor(e){super(),this.elements=e}}function r_(t,e){let r=n_(e);for(const n of t.elements)r=r.filter(s=>!on(s,n));return{arrayValue:{values:r}}}class gu extends Zu{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Cy(t){return nt(t.integerValue||t.doubleValue)}function n_(t){return sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cI(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Xo&&s instanceof Xo||n instanceof Jo&&s instanceof Jo?ui(n.elements,s.elements,on):n instanceof gu&&s instanceof gu?on(n.Pe,s.Pe):n instanceof mu&&s instanceof mu}(t.transform,e.transform)}class uI{constructor(e,r){this.version=e,this.transformResults=r}}class Br{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ed{}function s_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lg(t.key,Br.none()):new fl(t.key,t.data,Br.none());{const r=t.data,n=ir.empty();let s=new Rt(At.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),s=s.add(a)}return new Ts(t.key,n,new gr(s.toArray()),Br.none())}}function dI(t,e,r){t instanceof fl?function(s,a,o){const l=s.value.clone(),u=Py(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ts?function(s,a,o){if(!Ic(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Py(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(a_(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function wo(t,e,r,n){return t instanceof fl?function(a,o,l,u){if(!Ic(a.precondition,o))return l;const d=a.value.clone(),h=Ry(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ts?function(a,o,l,u){if(!Ic(a.precondition,o))return l;const d=Ry(a.fieldTransforms,u,o),h=o.data;return h.setAll(a_(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(t,e,r,n):function(a,o,l){return Ic(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function hI(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=e_(n.transform,s||null);a!=null&&(r===null&&(r=ir.empty()),r.set(n.field,a))}return r||null}function Ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ui(n,s,(a,o)=>cI(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fl extends ed{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends ed{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function a_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Py(t,e,r){const n=new Map;Le(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);n.set(a.field,lI(o,l,r[s]))}return n}function Ry(t,e,r){const n=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);n.set(s.field,oI(a,o,e))}return n}class lg extends ed{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends ed{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&dI(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=wo(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=wo(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Jw();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=s_(o,l);u!==null&&n.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ui(this.mutations,e.mutations,(r,n)=>Ay(r,n))&&ui(this.baseMutations,e.baseMutations,(r,n)=>Ay(r,n))}}class cg{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Le(e.mutations.length===n.length);let s=function(){return rI}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,n[o].version);return new cg(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ae;function yI(t){switch(t){default:return ye();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function i_(t){if(t===void 0)return Pn("GRPC error has no .code"),Y.UNKNOWN;switch(t){case lt.OK:return Y.OK;case lt.CANCELLED:return Y.CANCELLED;case lt.UNKNOWN:return Y.UNKNOWN;case lt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case lt.INTERNAL:return Y.INTERNAL;case lt.UNAVAILABLE:return Y.UNAVAILABLE;case lt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case lt.NOT_FOUND:return Y.NOT_FOUND;case lt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case lt.ABORTED:return Y.ABORTED;case lt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case lt.DATA_LOSS:return Y.DATA_LOSS;default:return ye()}}(Ae=lt||(lt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Hs([4294967295,4294967295],0);function Dy(t){const e=xI().encode(t),r=new Iw;return r.update(e),new Uint8Array(r.digest())}function $y(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hs([r,n],0),new Hs([s,a],0)]}class ug{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ao(`Invalid padding: ${r}`);if(n<0)throw new ao(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ao(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Hs.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Hs.fromNumber(n)));return s.compare(vI)===1&&(s=new Hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Dy(e),[n,s]=$y(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,s,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new ug(a,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=Dy(e),[n,s]=$y(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,s,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new td(ve.min(),s,new Je(De),Rn(),Ie())}}class ml{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ml(n,r,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class o_{constructor(e,r){this.targetId=e,this.me=r}}class l_{constructor(e,r,n=$t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class My{constructor(){this.fe=0,this.ge=Ly(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),r=Ie(),n=Ie();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ye()}}),new ml(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Ly()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=Oy(),this.Qe=new Je(De)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const a=s.target;if(If(a))if(n===0){const o=new de(a.path);this.Ue(r,o,Ht.newNoDocument(o,ve.min()))}else Le(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,d)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=ta(n).toUint8Array()}catch(u){if(u instanceof Lw)return ci("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ug(o,s,a)}catch(u){return ci(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&If(l.target)){const u=new de(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ht.newNoDocument(u,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=Ie();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new td(e,r,this.Qe,this.ke,n);return this.ke=Rn(),this.qe=Oy(),this.Qe=new Je(De),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new My,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Rt(De),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ce("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new My),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Oy(){return new Je(de.comparator)}function Ly(){return new Je(de.comparator)}const wI={asc:"ASCENDING",desc:"DESCENDING"},_I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kI={and:"AND",or:"OR"};class NI{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Pf(t,e){return t.useProto3Json||Yu(e)?e:{value:e}}function pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EI(t,e){return pu(t,e.toTimestamp())}function nn(t){return Le(!!t),ve.fromTimestamp(function(r){const n=ws(r);return new mt(n.seconds,n.nanos)}(t))}function dg(t,e){return Rf(t,e).canonicalString()}function Rf(t,e){const r=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function u_(t){const e=He.fromString(t);return Le(g_(e)),e}function Df(t,e){return dg(t.databaseId,e.path)}function ch(t,e){const r=u_(e);if(r.get(1)!==t.databaseId.projectId)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new de(h_(r))}function d_(t,e){return dg(t.databaseId,e)}function jI(t){const e=u_(t);return e.length===4?He.emptyPath():h_(e)}function $f(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function h_(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vy(t,e,r){return{name:Df(t,e),fields:r.value.mapValue.fields}}function SI(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Le(h===void 0||typeof h=="string"),$t.fromBase64String(h||"")):(Le(h===void 0||h instanceof Buffer||h instanceof Uint8Array),$t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?Y.UNKNOWN:i_(d.code);return new ie(h,d.message||"")}(o);r=new l_(n,s,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=ch(t,n.document.name),a=nn(n.document.updateTime),o=n.document.createTime?nn(n.document.createTime):ve.min(),l=new ir({mapValue:{fields:n.document.fields}}),u=Ht.newFoundDocument(s,a,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new Cc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=ch(t,n.document),a=n.readTime?nn(n.readTime):ve.min(),o=Ht.newNoDocument(s,a),l=n.removedTargetIds||[];r=new Cc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=ch(t,n.document),a=n.removedTargetIds||[];r=new Cc([],a,s,null)}else{if(!("filter"in e))return ye();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,o=new pI(s,a),l=n.targetId;r=new o_(l,o)}}return r}function TI(t,e){let r;if(e instanceof fl)r={update:Vy(t,e.key,e.value)};else if(e instanceof lg)r={delete:Df(t,e.key)};else if(e instanceof Ts)r={update:Vy(t,e.key,e.data),updateMask:OI(e.fieldMask)};else{if(!(e instanceof fI))return ye();r={verify:Df(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof mu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ye()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:EI(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ye()}(t,e.precondition)),r}function II(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?nn(s.updateTime):nn(a);return o.isEqual(ve.min())&&(o=nn(a)),new uI(o,s.transformResults||[])}(r,e))):[]}function CI(t,e){return{documents:[d_(t,e.path)]}}function AI(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=d_(t,s);const a=function(d){if(d.length!==0)return m_(Hr.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Na(m.field),direction:DI(m.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Pf(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:r,parent:s}}function PI(t){let e=jI(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Le(n===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(g){const m=f_(g);return m instanceof Hr&&Bw(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(g){return g.map(m=>function(k){return new Yo(Ea(k.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Yu(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(g){const m=!!g.before,b=g.values||[];return new fu(b,m)}(r.startAt));let d=null;return r.endAt&&(d=function(g){const m=!g.before,b=g.values||[];return new fu(b,m)}(r.endAt)),XT(e,s,o,a,l,"F",u,d)}function RI(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function f_(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ea(r.unaryFilter.field);return ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ea(r.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ea(r.unaryFilter.field);return ut.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ea(r.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):t.fieldFilter!==void 0?function(r){return ut.create(Ea(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Hr.create(r.compositeFilter.filters.map(n=>f_(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye()}}(r.compositeFilter.op))}(t):ye()}function DI(t){return wI[t]}function $I(t){return _I[t]}function MI(t){return kI[t]}function Na(t){return{fieldPath:t.canonicalString()}}function Ea(t){return At.fromServerFormat(t.fieldPath)}function m_(t){return t instanceof ut?function(r){if(r.op==="=="){if(Ey(r.value))return{unaryFilter:{field:Na(r.field),op:"IS_NAN"}};if(Ny(r.value))return{unaryFilter:{field:Na(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ey(r.value))return{unaryFilter:{field:Na(r.field),op:"IS_NOT_NAN"}};if(Ny(r.value))return{unaryFilter:{field:Na(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(r.field),op:$I(r.op),value:r.value}}}(t):t instanceof Hr?function(r){const n=r.getFilters().map(s=>m_(s));return n.length===1?n[0]:{compositeFilter:{op:MI(r.op),filters:n}}}(t):ye()}function OI(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function g_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,r,n,s,a=ve.min(),o=ve.min(),l=$t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.ct=e}}function VI(t){const e=PI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.un=new UI}addToCollectionParentIndex(e,r){return this.un.add(r),Z.resolve()}getCollectionParents(e,r){return Z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Z.resolve()}deleteFieldIndex(e,r){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,r){return Z.resolve()}getDocumentsMatchingTarget(e,r){return Z.resolve(null)}getIndexType(e,r){return Z.resolve(0)}getFieldIndexes(e,r){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,r){return Z.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,r){return Z.resolve(bs.min())}updateCollectionGroup(e,r,n){return Z.resolve()}updateIndexEntries(e,r){return Z.resolve()}}class UI{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Rt(He.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Rt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fi(0)}static kn(){return new fi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.changes=new Ei(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&wo(n.mutation,s,gr.empty(),mt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ie()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ie()){const s=Us();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let o=so();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Us();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ie()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let a=Rn();const o=bo(),l=function(){return bo()}();return r.forEach((u,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ts)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),wo(h.mutation,d,h.mutation.getFieldMask(),mt.now())):o.set(d.key,gr.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>{var g;return l.set(d,new zI(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,r){const n=bo();let s=new Je((o,l)=>o-l),a=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let h=n.get(u)||gr.empty();h=l.applyToLocalView(d,h),n.set(u,h);const g=(s.get(l.batchId)||Ie()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,g=Jw();h.forEach(m=>{if(!a.has(m)){const b=s_(r.get(m),n.get(m));b!==null&&g.set(m,b),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return Z.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Gw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):Z.resolve(Us());let l=-1,u=a;return o.next(d=>Z.forEach(d,(h,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Ie())).next(h=>({batchId:l,changes:Xw(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new de(r)).next(n=>{let s=so();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let o=so();return this.indexManager.getCollectionParents(e,a).next(l=>Z.forEach(l,u=>{const d=function(g,m){return new Ni(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ht.newInvalidDocument(h)))});let l=so();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&wo(h.mutation,d,gr.empty(),mt.now()),Ju(r,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:nn(s.createTime)}}(r)),Z.resolve()}getNamedQuery(e,r){return Z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:VI(s.bundledQuery),readTime:nn(s.readTime)}}(r)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.overlays=new Je(de.comparator),this.Ir=new Map}getOverlay(e,r){return Z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Us();return Z.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.ht(e,r,a)}),Z.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),Z.resolve()}getOverlaysForCollection(e,r,n){const s=Us(),a=r.length+1,o=new de(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>n&&s.set(u.getKey(),u)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new Je((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=a.get(d.largestBatchId);h===null&&(h=Us(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Us(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return Z.resolve(l)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new gI(r,n));let a=this.Ir.get(r);a===void 0&&(a=Ie(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Tr=new Rt(bt.Er),this.dr=new Rt(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new bt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new bt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new de(new He([])),n=new bt(r,e),s=new bt(r,e+1),a=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new de(new He([])),n=new bt(r,e),s=new bt(r,e+1);let a=Ie();return this.dr.forEachInRange([n,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new bt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class bt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return de.comparator(e.key,r.key)||De(e.wr,r.wr)}static Ar(e,r){return De(e.wr,r.wr)||de.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Rt(bt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mI(a,r,n,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new bt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,r){return Z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new bt(r,0),s=new bt(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,s],o=>{const l=this.Dr(o.wr);a.push(l)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Rt(De);return r.forEach(s=>{const a=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),Z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;de.isDocumentKey(a)||(a=a.child(""));const o=new bt(new de(a),0);let l=new Rt(De);return this.br.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),Z.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Le(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Z.forEach(r.mutations,s=>{const a=new bt(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new bt(r,0),s=this.br.firstAfterOrEqual(n);return Z.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.Mr=e,this.docs=function(){return new Je(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Z.resolve(n?n.document.mutableCopy():Ht.newInvalidDocument(r))}getEntries(e,r){let n=Rn();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Ht.newInvalidDocument(s))}),Z.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=Rn();const o=r.path,l=new de(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||PT(AT(h),n)<=0||(s.has(h.key)||Ju(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,r,n,s){ye()}Or(e,r){return Z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new YI(this)}getSize(e){return Z.resolve(this.size)}}class YI extends BI{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.persistence=e,this.Nr=new Ei(r=>ag(r),ig),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hg,this.targetCount=0,this.kr=fi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new fi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Z.resolve()}updateTargetData(e,r){return this.Kn(r),Z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Z.waitFor(a).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Z.resolve(n)}containsKey(e,r){return Z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,r){this.qr={},this.overlays={},this.Qr=new tg(0),this.Kr=!1,this.Kr=!0,this.$r=new GI,this.referenceDelegate=e(this),this.Ur=new XI(this),this.indexManager=new FI,this.remoteDocumentCache=function(s){return new QI(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new LI(r),this.Gr=new HI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new qI,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new KI(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ce("MemoryPersistence","Starting transaction:",e);const s=new ZI(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,r){return Z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class ZI extends DT{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Jr=new hg,this.Yr=null}static Zr(e){return new fg(e)}get Xr(){if(this.Yr)return this.Yr;throw ye()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,n=>{const s=de.fromPath(n);return this.ei(e,s).next(a=>{a||r.removeEntry(s,ve.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Z.or([()=>Z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Ie(),s=Ie();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new mg(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sS()?8:$T(Gt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,s,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new e5;return this.Xi(e,r,o).next(l=>{if(a.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>a.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Yi()<=Ce.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",ka(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Yi()<=Ce.DEBUG&&ce("QueryEngine","Query:",ka(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Yi()<=Ce.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",ka(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rn(r))):Z.resolve())}Yi(e,r){if(Iy(r))return Z.resolve(null);let n=rn(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Af(r,null,"F"),n=rn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=Ie(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.ts(r,l);return this.ns(r,d,o,u.readTime)?this.Yi(e,Af(r,null,"F")):this.rs(e,d,r,u)}))})))}Zi(e,r,n,s){return Iy(r)||s.isEqual(ve.min())?Z.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,s)?Z.resolve(null):(Yi()<=Ce.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ka(r)),this.rs(e,o,r,CT(s,-1)).next(l=>l))})}ts(e,r){let n=new Rt(Qw(e));return r.forEach((s,a)=>{Ju(e,a)&&(n=n.add(a))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,r,n){return Yi()<=Ce.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",ka(r)),this.Ji.getDocumentsMatchingQuery(e,r,bs.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Je(De),this._s=new Ei(a=>ag(a),ig),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function n5(t,e,r,n){return new r5(t,e,r,n)}async function p_(t,e){const r=be(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let u=Ie();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function s5(t,e){const r=be(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const g=d.batch,m=g.keys();let b=Z.resolve();return m.forEach(k=>{b=b.next(()=>h.getEntry(u,k)).next(v=>{const C=d.docVersions.get(k);Le(C!==null),v.version.compareTo(C)<0&&(g.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function y_(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function a5(t,e){const r=be(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const l=[];e.targetChanges.forEach((h,g)=>{const m=s.get(g);if(!m)return;l.push(r.Ur.removeMatchingKeys(a,h.removedDocuments,g).next(()=>r.Ur.addMatchingKeys(a,h.addedDocuments,g)));let b=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken($t.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,n)),s=s.insert(g,b),function(v,C,E){return v.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,b,h)&&l.push(r.Ur.updateTargetData(a,b))});let u=Rn(),d=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(i5(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!n.isEqual(ve.min())){const h=r.Ur.getLastRemoteSnapshotVersion(a).next(g=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(h)}return Z.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(r.os=s,a))}function i5(t,e,r){let n=Ie(),s=Ie();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=Rn();return r.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ve.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ce("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function o5(t,e){const r=be(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function l5(t,e){const r=be(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(a=>a?(s=a,Z.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new rs(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Mf(t,e,r){const n=be(t),s=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!hl(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Fy(t,e,r){const n=be(t);let s=ve.min(),a=Ie();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const g=be(u),m=g._s.get(h);return m!==void 0?Z.resolve(g.os.get(m)):g.Ur.getTargetData(d,h)}(n,o,rn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:ve.min(),r?a:Ie())).next(l=>(c5(n,ZT(e),l),{documents:l,Ts:a})))}function c5(t,e,r){let n=t.us.get(e)||ve.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class Uy{constructor(){this.activeTargetIds=aI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u5{constructor(){this.so=new Uy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Uy,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function uh(){return lc===null?lc=function(){return 268435456+Math.round(2147483648*Math.random())}():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class m5 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(r,n,s,a,o){const l=uh(),u=this.xo(r,n.toUriEncodedString());ce("RestConnection",`Sending RPC '${r}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(r,u,d,s).then(h=>(ce("RestConnection",`Received RPC '${r}' ${l}: `,h),h),h=>{throw ci("RestConnection",`RPC '${r}' ${l} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(r,n,s,a,o,l){return this.Mo(r,n,s,a,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ki}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),s&&s.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const s=h5[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const a=uh();return new Promise((o,l)=>{const u=new Cw;u.setWithCredentials(!0),u.listenOnce(Aw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Sc.NO_ERROR:const h=u.getResponseJson();ce(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Sc.TIMEOUT:ce(Bt,`RPC '${e}' ${a} timed out`),l(new ie(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Sc.HTTP_ERROR:const g=u.getStatus();if(ce(Bt,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const k=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(E)>=0?E:Y.UNKNOWN}(b.status);l(new ie(k,b.message))}else l(new ie(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ie(Y.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ce(Bt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);ce(Bt,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",d,n,15)})}Bo(e,r,n){const s=uh(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Dw(),l=Rw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=a.join("");ce(Bt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,b=!1;const k=new f5({Io:C=>{b?ce(Bt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(ce(Bt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),ce(Bt,`RPC '${e}' stream ${s} sending:`,C),g.send(C))},To:()=>g.close()}),v=(C,E,y)=>{C.listen(E,N=>{try{y(N)}catch(R){setTimeout(()=>{throw R},0)}})};return v(g,no.EventType.OPEN,()=>{b||(ce(Bt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),v(g,no.EventType.CLOSE,()=>{b||(b=!0,ce(Bt,`RPC '${e}' stream ${s} transport closed`),k.So())}),v(g,no.EventType.ERROR,C=>{b||(b=!0,ci(Bt,`RPC '${e}' stream ${s} transport errored:`,C),k.So(new ie(Y.UNAVAILABLE,"The operation could not be completed")))}),v(g,no.EventType.MESSAGE,C=>{var E;if(!b){const y=C.data[0];Le(!!y);const N=y,R=N.error||((E=N[0])===null||E===void 0?void 0:E.error);if(R){ce(Bt,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let M=function(w){const j=lt[w];if(j!==void 0)return i_(j)}(L),I=R.message;M===void 0&&(M=Y.INTERNAL,I="Unknown error status: "+L+" with message "+R.message),b=!0,k.So(new ie(M,I)),g.close()}else ce(Bt,`RPC '${e}' stream ${s} received:`,y),k.bo(y)}}),v(l,Pw.STAT_EVENT,C=>{C.stat===Ef.PROXY?ce(Bt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Ef.NOPROXY&&ce(Bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){return new NI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,r,n=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,r,n,s,a,o,l,u){this.ui=e,this.Ho=n,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new x_(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Y.RESOURCE_EXHAUSTED?(Pn(r.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ie(Y.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g5 extends v_{constructor(e,r,n,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=SI(this.serializer,e),n=function(a){if(!("targetChange"in a))return ve.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?nn(o.readTime):ve.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=$f(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=If(u)?{documents:CI(a,u)}:{query:AI(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=c_(a,o.resumeToken);const d=Pf(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=pu(a,o.snapshotVersion.toTimestamp());const d=Pf(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=RI(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=$f(this.serializer),r.removeTarget=e,this.a_(r)}}class p5 extends v_{constructor(e,r,n,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=II(e.writeResults,e.commitTime),n=nn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=$f(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>TI(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Rf(r,n),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(Y.UNKNOWN,a.toString())})}Lo(e,r,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Rf(r,n),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class x5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pn(r),this.D_=!1):ce("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{ha(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=be(u);d.L_.add(4),await gl(d),d.q_.set("Unknown"),d.L_.delete(4),await nd(d)}(this))})}),this.q_=new x5(n,s)}}async function nd(t){if(ha(t))for(const e of t.B_)await e(!0)}async function gl(t){for(const e of t.B_)await e(!1)}function b_(t,e){const r=be(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),xg(r)?yg(r):ji(r).r_()&&pg(r,e))}function gg(t,e){const r=be(t),n=ji(r);r.N_.delete(e),n.r_()&&w_(r,e),r.N_.size===0&&(n.r_()?n.o_():ha(r)&&r.q_.set("Unknown"))}function pg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ji(t).A_(e)}function w_(t,e){t.Q_.xe(e),ji(t).R_(e)}function yg(t){t.Q_=new bI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ji(t).start(),t.q_.v_()}function xg(t){return ha(t)&&!ji(t).n_()&&t.N_.size>0}function ha(t){return be(t).L_.size===0}function __(t){t.Q_=void 0}async function b5(t){t.q_.set("Online")}async function w5(t){t.N_.forEach((e,r)=>{pg(t,e)})}async function _5(t,e){__(t),xg(t)?(t.q_.M_(e),yg(t)):t.q_.set("Unknown")}async function k5(t,e,r){if(t.q_.set("Online"),e instanceof l_&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(n){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await yu(t,n)}else if(e instanceof Cc?t.Q_.Ke(e):e instanceof o_?t.Q_.He(e):t.Q_.We(e),!r.isEqual(ve.min()))try{const n=await y_(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken($t.EMPTY_BYTE_STRING,h.snapshotVersion)),w_(a,u);const g=new rs(h.target,u,d,h.sequenceNumber);pg(a,g)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){ce("RemoteStore","Failed to raise snapshot:",n),await yu(t,n)}}async function yu(t,e,r){if(!hl(e))throw e;t.L_.add(1),await gl(t),t.q_.set("Offline"),r||(r=()=>y_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await nd(t)})}function k_(t,e){return e().catch(r=>yu(t,r,e))}async function sd(t){const e=be(t),r=_s(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;N5(e);)try{const s=await o5(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,E5(e,s)}catch(s){await yu(e,s)}N_(e)&&E_(e)}function N5(t){return ha(t)&&t.O_.length<10}function E5(t,e){t.O_.push(e);const r=_s(t);r.r_()&&r.V_&&r.m_(e.mutations)}function N_(t){return ha(t)&&!_s(t).n_()&&t.O_.length>0}function E_(t){_s(t).start()}async function j5(t){_s(t).p_()}async function S5(t){const e=_s(t);for(const r of t.O_)e.m_(r.mutations)}async function T5(t,e,r){const n=t.O_.shift(),s=cg.from(n,e,r);await k_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sd(t)}async function I5(t,e){e&&_s(t).V_&&await async function(n,s){if(function(o){return yI(o)&&o!==Y.ABORTED}(s.code)){const a=n.O_.shift();_s(n).s_(),await k_(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await sd(n)}}(t,e),N_(t)&&E_(t)}async function zy(t,e){const r=be(t);r.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const n=ha(r);r.L_.add(3),await gl(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await nd(r)}async function C5(t,e){const r=be(t);e?(r.L_.delete(2),await nd(r)):e||(r.L_.add(2),await gl(r),r.q_.set("Unknown"))}function ji(t){return t.K_||(t.K_=function(r,n,s){const a=be(r);return a.w_(),new g5(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:b5.bind(null,t),Ro:w5.bind(null,t),mo:_5.bind(null,t),d_:k5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xg(t)?yg(t):t.q_.set("Unknown")):(await t.K_.stop(),__(t))})),t.K_}function _s(t){return t.U_||(t.U_=function(r,n,s){const a=be(r);return a.w_(),new p5(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j5.bind(null,t),mo:I5.bind(null,t),f_:S5.bind(null,t),g_:T5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await sd(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const o=Date.now()+n,l=new vg(e,r,o,s,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bg(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),hl(t))return new ie(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.comparator=e?(r,n)=>e(r,n)||de.comparator(r.key,n.key):(r,n)=>de.comparator(r.key,n.key),this.keyedMap=so(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new qa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new qa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.W_=new Je(de.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ye():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class mi{constructor(e,r,n,s,a,o,l,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new mi(e,r,qa.emptySet(r),o,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class P5{constructor(){this.queries=Hy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=be(r),a=s.queries;s.queries=Hy(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(n)})})(this,new ie(Y.ABORTED,"Firestore shutting down"))}}function Hy(){return new Ei(t=>Kw(t),Xu)}async function R5(t,e){const r=be(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.H_()&&e.J_()&&(n=2):(a=new A5,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(s,!0);break;case 1:a.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=bg(o,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&wg(r)}async function D5(t,e){const r=be(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function $5(t,e){const r=be(t);let n=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(n=!0);o.z_=s}}n&&wg(r)}function M5(t,e,r){const n=be(t),s=n.queries.get(e);if(s)for(const a of s.j_)a.onError(r);n.queries.delete(e)}function wg(t){t.Y_.forEach(e=>{e.next()})}var Of,qy;(qy=Of||(Of={})).ea="default",qy.Cache="cache";class O5{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new mi(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.key=e}}class S_{constructor(e){this.key=e}}class L5{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=Qw(e),this.Ra=new qa(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Wy,s=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,g)=>{const m=s.get(h),b=Ju(this.query,g)?g:null,k=!!m&&this.mutatedKeys.has(m.key),v=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let C=!1;m&&b?m.data.isEqual(b.data)?k!==v&&(n.track({type:3,doc:b}),C=!0):this.ga(m,b)||(n.track({type:2,doc:b}),C=!0,(u&&this.Aa(b,u)>0||d&&this.Aa(b,d)<0)&&(l=!0)):!m&&b?(n.track({type:0,doc:b}),C=!0):m&&!b&&(n.track({type:1,doc:m}),C=!0,(u||d)&&(l=!0)),C&&(b?(o=o.add(b),a=v?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(b,k){const v=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return v(b)-v(k)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(n),s=s!=null&&s;const l=r&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new mi(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new S_(n))}),this.da.forEach(n=>{e.has(n)||r.push(new j_(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ie();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return mi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class V5{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class F5{constructor(e){this.key=e,this.va=!1}}class U5{constructor(e,r,n,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ei(l=>Kw(l),Xu),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(de.comparator),this.Na=new Map,this.La=new hg,this.Ba={},this.ka=new Map,this.qa=fi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function B5(t,e,r=!0){const n=R_(t);let s;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await T_(n,e,r,!0),s}async function z5(t,e){const r=R_(t);await T_(r,e,!0,!1)}async function T_(t,e,r,n){const s=await l5(t.localStore,rn(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await W5(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&b_(t.remoteStore,s),l}async function W5(t,e,r,n,s){t.Ka=(g,m,b)=>async function(v,C,E,y){let N=C.view.ma(E);N.ns&&(N=await Fy(v.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,N)));const R=y&&y.targetChanges.get(C.targetId),L=y&&y.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(N,v.isPrimaryClient,R,L);return Ky(v,C.targetId,M.wa),M.snapshot}(t,g,m,b);const a=await Fy(t.localStore,e,!0),o=new L5(e,a.Ts),l=o.ma(a.documents),u=ml.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Ky(t,r,d.wa);const h=new V5(e,r,o);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),d.snapshot}async function H5(t,e,r){const n=be(t),s=n.Fa.get(e),a=n.Ma.get(s.targetId);if(a.length>1)return n.Ma.set(s.targetId,a.filter(o=>!Xu(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Mf(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&gg(n.remoteStore,s.targetId),Lf(n,s.targetId)}).catch(dl)):(Lf(n,s.targetId),await Mf(n.localStore,s.targetId,!0))}async function q5(t,e){const r=be(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),gg(r.remoteStore,n.targetId))}async function G5(t,e,r){const n=eC(t);try{const s=await function(o,l){const u=be(o),d=mt.now(),h=l.reduce((b,k)=>b.add(k.key),Ie());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Rn(),v=Ie();return u.cs.getEntries(b,h).next(C=>{k=C,k.forEach((E,y)=>{y.isValidDocument()||(v=v.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,k)).next(C=>{g=C;const E=[];for(const y of l){const N=hI(y,g.get(y.key).overlayedDocument);N!=null&&E.push(new Ts(y.key,N,Vw(N.value.mapValue),Br.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,E,l)}).next(C=>{m=C;const E=C.applyToLocalDocumentSet(g,v);return u.documentOverlayCache.saveOverlays(b,C.batchId,E)})}).then(()=>({batchId:m.batchId,changes:Xw(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Je(De)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(n,s.batchId,r),await pl(n,s.changes),await sd(n.remoteStore)}catch(s){const a=bg(s,"Failed to persist write");r.reject(a)}}async function I_(t,e){const r=be(t);try{const n=await a5(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Na.get(a);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Le(o.va):s.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),await pl(r,n,e)}catch(n){await dl(n)}}function Gy(t,e,r){const n=be(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=be(o);u.onlineState=l;let d=!1;u.queries.forEach((h,g)=>{for(const m of g.j_)m.Z_(l)&&(d=!0)}),d&&wg(u)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function K5(t,e,r){const n=be(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),a=s&&s.key;if(a){let o=new Je(de.comparator);o=o.insert(a,Ht.newNoDocument(a,ve.min()));const l=Ie().add(a),u=new td(ve.min(),new Map,new Je(De),o,l);await I_(n,u),n.Oa=n.Oa.remove(a),n.Na.delete(e),_g(n)}else await Mf(n.localStore,e,!1).then(()=>Lf(n,e,r)).catch(dl)}async function Q5(t,e){const r=be(t),n=e.batch.batchId;try{const s=await s5(r.localStore,e);A_(r,n,null),C_(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await pl(r,s)}catch(s){await dl(s)}}async function Y5(t,e,r){const n=be(t);try{const s=await function(o,l){const u=be(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(g=>(Le(g!==null),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);A_(n,e,r),C_(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await pl(n,s)}catch(s){await dl(s)}}function C_(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function A_(t,e,r){const n=be(t);let s=n.Ba[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Lf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||P_(t,n)})}function P_(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(gg(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),_g(t))}function Ky(t,e,r){for(const n of r)n instanceof j_?(t.La.addReference(n.key,e),X5(t,n)):n instanceof S_?(ce("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||P_(t,n.key)):ye()}function X5(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ce("SyncEngine","New document in limbo: "+r),t.xa.add(n),_g(t))}function _g(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new de(He.fromString(e)),n=t.qa.next();t.Na.set(n,new F5(r)),t.Oa=t.Oa.insert(r,n),b_(t.remoteStore,new rs(rn(qw(r.path)),n,"TargetPurposeLimboResolution",tg.oe))}}async function pl(t,e,r){const n=be(t),s=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,u)=>{o.push(n.Ka(u,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const g=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){s.push(d);const g=mg.Wi(u.targetId,d);a.push(g)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(u,d){const h=be(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Z.forEach(d,m=>Z.forEach(m.$i,b=>h.persistence.referenceDelegate.addReference(g,m.targetId,b)).next(()=>Z.forEach(m.Ui,b=>h.persistence.referenceDelegate.removeReference(g,m.targetId,b)))))}catch(g){if(!hl(g))throw g;ce("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const b=h.os.get(m),k=b.snapshotVersion,v=b.withLastLimboFreeSnapshotVersion(k);h.os=h.os.insert(m,v)}}}(n.localStore,a))}async function J5(t,e){const r=be(t);if(!r.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const n=await p_(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new ie(Y.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await pl(r,n.hs)}}function Z5(t,e){const r=be(t),n=r.Na.get(e);if(n&&n.va)return Ie().add(n.key);{let s=Ie();const a=r.Ma.get(e);if(!a)return s;for(const o of a){const l=r.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function R_(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=I_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K5.bind(null,e),e.Ca.d_=$5.bind(null,e.eventManager),e.Ca.$a=M5.bind(null,e.eventManager),e}function eC(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y5.bind(null,e),e}class xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return n5(this.persistence,new t5,e.initialUser,this.serializer)}Ga(e){return new JI(fg.Zr,this.serializer)}Wa(e){return new u5}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xu.provider={build:()=>new xu};class Vf{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Gy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=J5.bind(null,this.syncEngine),await C5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P5}()}createDatastore(e){const r=rd(e.databaseInfo.databaseId),n=function(a){return new m5(a)}(e.databaseInfo);return function(a,o,l,u){return new y5(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,o,l){return new v5(n,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>Gy(this.syncEngine,r,0),function(){return By.D()?new By:new d5}())}createSyncEngine(e,r){return function(s,a,o,l,u,d,h){const g=new U5(s,a,o,l,u,d);return h&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=be(s);ce("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await gl(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Vf.provider={build:()=>new Vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=Mw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=bg(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hh(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await p_(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qy(t,e){t.asyncQueue.verifyOperationInProgress();const r=await nC(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>zy(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>zy(e.remoteStore,s)),t._onlineComponents=e}async function nC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;ci("Error using user provided cache. Falling back to memory cache: "+r),await hh(t,new xu)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await hh(t,new xu);return t._offlineComponents}async function D_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await Qy(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await Qy(t,new Vf))),t._onlineComponents}function sC(t){return D_(t).then(e=>e.syncEngine)}async function aC(t){const e=await D_(t),r=e.eventManager;return r.onListen=B5.bind(null,e.syncEngine),r.onUnlisten=H5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=z5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=q5.bind(null,e.syncEngine),r}function iC(t,e,r={}){const n=new gs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new tC({next:m=>{h.Za(),o.enqueueAndForget(()=>D5(a,g)),m.fromCache&&u.source==="server"?d.reject(new ie(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new O5(l,h,{includeMetadataChanges:!0,_a:!0});return R5(a,g)}(await aC(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e,r){if(!r)throw new ie(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oC(t,e,r,n){if(e===!0&&n===!0)throw new ie(Y.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Xy(t){if(!de.isDocumentKey(t))throw new ie(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jy(t){if(de.isDocumentKey(t))throw new ie(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ad(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye()}function na(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ad(t);throw new ie(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$_((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zy(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new wT;switch(n.type){case"firstParty":return new ET(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ie(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Yy.get(r);n&&(ce("ComponentProvider","Removing Datastore"),Yy.delete(r),n.terminate())}(this),Promise.resolve()}}function lC(t,e,r,n={}){var s;const a=(t=na(t,id))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=zt.MOCK_USER;else{l=kw(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new ie(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new zt(d)}t._authCredentials=new _T(new $w(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class vr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class ps extends fa{constructor(e,r,n){super(e,r,qw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new de(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Qt(t,e,...r){if(t=Kt(t),M_("collection","path",e),t instanceof id){const n=He.fromString(e,...r);return Jy(n),new ps(t,null,n)}{if(!(t instanceof vr||t instanceof ps))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(He.fromString(e,...r));return Jy(n),new ps(t.firestore,null,n)}}function dr(t,e,...r){if(t=Kt(t),arguments.length===1&&(e=Mw.newId()),M_("doc","path",e),t instanceof id){const n=He.fromString(e,...r);return Xy(n),new vr(t,null,new de(n))}{if(!(t instanceof vr||t instanceof ps))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(He.fromString(e,...r));return Xy(n),new vr(t.firestore,t instanceof ps?t.converter:null,new de(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new x_(this,"async_queue_retry"),this.Vu=()=>{const n=dh();n&&ce("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=dh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=dh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new gs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!hl(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Pn("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=vg.createAndSchedule(this,e,r,n,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&ye()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class yl extends id{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new ex,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ex(e),this._firestoreClient=void 0,await e}}}function cC(t,e){const r=typeof t=="object"?t:Zm(),n=typeof t=="string"?t:"(default)",s=Qu(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=bw("firestore");a&&lC(s,...a)}return s}function O_(t){if(t._terminated)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uC(t),t._firestoreClient}function uC(t){var e,r,n;const s=t._freezeSettings(),a=function(l,u,d,h){return new LT(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$_(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rC(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gi($t.fromBase64String(e))}catch(r){throw new ie(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new gi($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ie(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ie(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ie(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=/^__.*__$/;class hC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,r,this.fieldTransforms):new fl(e,this.data,r,this.fieldTransforms)}}class L_{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ts(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function V_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class jg{constructor(e,r,n,s,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(V_(this.Cu)&&dC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fC{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||rd(e)}Qu(e,r,n,s=!1){return new jg({Cu:e,methodName:r,qu:n,path:At.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sg(t){const e=t._freezeSettings(),r=rd(t._databaseId);return new fC(t._databaseId,!!e.ignoreUndefinedProperties,r)}function mC(t,e,r,n,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,r,s);Tg("Data must be an object, but it was:",o,n);const l=F_(n,o);let u,d;if(a.merge)u=new gr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=Ff(e,g,r);if(!o.contains(m))throw new ie(Y.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);B_(h,m)||h.push(m)}u=new gr(h),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new hC(new ir(l),u,d)}class ld extends kg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function gC(t,e,r,n){const s=t.Qu(1,e,r);Tg("Data must be an object, but it was:",s,n);const a=[],o=ir.empty();da(n,(u,d)=>{const h=Ig(e,u,r);d=Kt(d);const g=s.Nu(h);if(d instanceof ld)a.push(h);else{const m=xl(d,g);m!=null&&(a.push(h),o.set(h,m))}});const l=new gr(a);return new L_(o,l,s.fieldTransforms)}function pC(t,e,r,n,s,a){const o=t.Qu(1,e,r),l=[Ff(e,n,r)],u=[s];if(a.length%2!=0)throw new ie(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Ff(e,a[m])),u.push(a[m+1]);const d=[],h=ir.empty();for(let m=l.length-1;m>=0;--m)if(!B_(d,l[m])){const b=l[m];let k=u[m];k=Kt(k);const v=o.Nu(b);if(k instanceof ld)d.push(b);else{const C=xl(k,v);C!=null&&(d.push(b),h.set(b,C))}}const g=new gr(d);return new L_(h,g,o.fieldTransforms)}function yC(t,e,r,n=!1){return xl(r,t.Qu(n?4:3,e))}function xl(t,e){if(U_(t=Kt(t)))return Tg("Unsupported field value:",e,t),F_(t,e);if(t instanceof kg)return function(n,s){if(!V_(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const a=[];let o=0;for(const l of n){let u=xl(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=Kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return iI(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=mt.fromDate(n);return{timestampValue:pu(s.serializer,a)}}if(n instanceof mt){const a=new mt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:pu(s.serializer,a)}}if(n instanceof Ng)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gi)return{bytesValue:c_(s.serializer,n._byteString)};if(n instanceof vr){const a=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:dg(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Eg)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return og(l.serializer,u)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${ad(n)}`)}(t,e)}function F_(t,e){const r={};return Ow(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(n,s)=>{const a=xl(s,e.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function U_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Ng||t instanceof gi||t instanceof vr||t instanceof kg||t instanceof Eg)}function Tg(t,e,r){if(!U_(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=ad(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Ff(t,e,r){if((e=Kt(e))instanceof od)return e._internalPath;if(typeof e=="string")return Ig(t,e);throw vu("Field path arguments must be of type string or ",t,!1,void 0,r)}const xC=new RegExp("[~\\*/\\[\\]]");function Ig(t,e,r){if(e.search(xC)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new od(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function vu(t,e,r,n,s){const a=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${n}`),o&&(u+=` in document ${s}`),u+=")"),new ie(Y.INVALID_ARGUMENT,l+t+u)}function B_(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class vC extends z_{data(){return super.data()}}function cd(t,e){return typeof e=="string"?Ig(t,e):e instanceof od?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cg{}class W_ extends Cg{}function dt(t,e,...r){let n=[];e instanceof Cg&&n.push(e),n=n.concat(r),function(a){const o=a.filter(u=>u instanceof Ag).length,l=a.filter(u=>u instanceof ud).length;if(o>1||o>0&&l>0)throw new ie(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class ud extends W_{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new ud(e,r,n)}_apply(e){const r=this._parse(e);return H_(e._query,r),new fa(e.firestore,e.converter,Cf(e._query,r))}_parse(e){const r=Sg(e.firestore);return function(a,o,l,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){rx(g,h);const b=[];for(const k of g)b.push(tx(u,a,k));m={arrayValue:{values:b}}}else m=tx(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||rx(g,h),m=yC(l,o,g,h==="in"||h==="not-in");return ut.create(d,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function tr(t,e,r){const n=e,s=cd("where",t);return ud._create(s,n,r)}class Ag extends Cg{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Ag(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Hr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)H_(o,u),o=Cf(o,u)}(e._query,r),new fa(e.firestore,e.converter,Cf(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pg extends W_{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Pg(e,r)}_apply(e){const r=function(s,a,o){if(s.startAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yo(a,o)}(e._query,this._field,this._direction);return new fa(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Ni(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Zo(t,e="asc"){const r=e,n=cd("orderBy",t);return Pg._create(n,r)}function tx(t,e,r){if(typeof(r=Kt(r))=="string"){if(r==="")throw new ie(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&r.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(He.fromString(r));if(!de.isDocumentKey(n))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ky(t,new de(n))}if(r instanceof vr)return ky(t,r._key);throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(r)}.`)}function rx(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H_(t,e){const r=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class wC{convertValue(e,r="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return da(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,s;const a=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>nt(o.doubleValue));return new Eg(a)}convertGeoPoint(e){return new Ng(nt(e.latitude),nt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=ng(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Go(e));default:return null}}convertTimestamp(e){const r=ws(e);return new mt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=He.fromString(e);Le(g_(n));const s=new Ko(n.get(1),n.get(3)),a=new de(n.popFirst(5));return s.isEqual(r)||Pn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kC extends z_{constructor(e,r,n,s,a,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(cd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ac extends kC{data(e={}){return super.data(e)}}class NC{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new cc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ac(this._firestore,this._userDataWriter,n.key,n,new cc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ie(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new cc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new cc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:EC(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function EC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}class jC extends wC{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,r)}}function ln(t){t=na(t,fa);const e=na(t.firestore,yl),r=O_(e),n=new jC(e);return bC(t._query),iC(r,t._query).then(s=>new NC(e,n,t,s))}function Si(t,e,r,...n){t=na(t,vr);const s=na(t.firestore,yl),a=Sg(s);let o;return o=typeof(e=Kt(e))=="string"||e instanceof od?pC(a,"updateDoc",t._key,e,r,n):gC(a,"updateDoc",t._key,e),Rg(s,[o.toMutation(t._key,Br.exists(!0))])}function ma(t){return Rg(na(t.firestore,yl),[new lg(t._key,Br.none())])}function Ti(t,e){const r=na(t.firestore,yl),n=dr(t),s=_C(t.converter,e);return Rg(r,[mC(Sg(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Br.exists(!1))]).then(()=>n)}function Rg(t,e){return function(n,s){const a=new gs;return n.asyncQueue.enqueueAndForget(async()=>G5(await sC(n),s,a)),a.promise}(O_(t),e)}(function(e,r=!0){(function(s){ki=s})(ua),Zs(new vs("firestore",(n,{instanceIdentifier:s,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new yl(new kT(n.getProvider("auth-internal")),new ST(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ie(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(d.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),tn(xy,"4.7.3",e),tn(xy,"4.7.3","esm2017")})();var SC="firebase",TC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn(SC,TC,"app");function Dg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IC=q_,G_=new cl("auth","Firebase",q_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Xm("@firebase/auth");function CC(t,...e){bu.logLevel<=Ce.WARN&&bu.warn(`Auth (${ua}): ${t}`,...e)}function Pc(t,...e){bu.logLevel<=Ce.ERROR&&bu.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw $g(t,...e)}function sn(t,...e){return $g(t,...e)}function K_(t,e,r){const n=Object.assign(Object.assign({},IC()),{[e]:r});return new cl("auth","Firebase",n).create(e,{appName:t.name})}function qs(t){return K_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $g(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return G_.create(t,...e)}function pe(t,e,...r){if(!t)throw $g(e,...r)}function _n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pc(e),new Error(e)}function $n(t,e){t||_n(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AC(){return nx()==="http:"||nx()==="https:"}function nx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AC()||tS()||"connection"in navigator)?navigator.onLine:!0}function RC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,r){this.shortDelay=e,this.longDelay=r,$n(r>e,"Short delay should be less than long delay!"),this.isMobile=Jj()||rS()}get(){return PC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){$n(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new vl(3e4,6e4);function Og(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ii(t,e,r,n,s={}){return Y_(t,s,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=ul(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return eS()||(d.referrerPolicy="no-referrer"),Q_.fetch()(X_(t,t.config.apiHost,r,l),d)})}async function Y_(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},DC),e);try{const s=new OC(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw uc(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw uc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw uc(t,"user-disabled",o);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw K_(t,h,d);Dn(t,h)}}catch(s){if(s instanceof dn)throw s;Dn(t,"network-request-failed",{message:String(s)})}}async function MC(t,e,r,n,s={}){const a=await Ii(t,e,r,n,s);return"mfaPendingCredential"in a&&Dn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function X_(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Mg(t.config,s):`${t.config.apiScheme}://${s}`}class OC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(sn(this.auth,"network-request-failed")),$C.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uc(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=sn(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function J_(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VC(t,e=!1){const r=Kt(t),n=await r.getIdToken(e),s=Lg(n);pe(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:_o(fh(s.auth_time)),issuedAtTime:_o(fh(s.iat)),expirationTime:_o(fh(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function fh(t){return Number(t)*1e3}function Lg(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{const s=xw(r);return s?JSON.parse(s):(Pc("Failed to decode base64 JWT payload"),null)}catch(s){return Pc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sx(t){const e=Lg(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof dn&&FC(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function FC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=_o(this.lastLoginAt),this.creationTime=_o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t){var e;const r=t.auth,n=await t.getIdToken(),s=await el(t,J_(r,{idToken:n}));pe(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Z_(a.providerUserInfo):[],l=zC(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Bf(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,g)}async function BC(t){const e=Kt(t);await wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zC(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Z_(t){return t.map(e=>{var{providerId:r}=e,n=Dg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(t,e){const r=await Y_(t,{},async()=>{const n=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=X_(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Q_.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function HC(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",Og(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const r=sx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await WC(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,o=new Ga;return n&&(pe(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(pe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return _n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,a=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await el(this,this.stsTokenManager.getToken(this.auth,e));return pe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return VC(this,e)}reload(){return BC(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await wu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ts(this.auth.app))return Promise.reject(qs(this.auth));const e=await this.getIdToken();return await el(this,LC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,a,o,l,u,d,h;const g=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,b=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,k=(o=r.photoURL)!==null&&o!==void 0?o:void 0,v=(l=r.tenantId)!==null&&l!==void 0?l:void 0,C=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=r.createdAt)!==null&&d!==void 0?d:void 0,y=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:R,isAnonymous:L,providerData:M,stsTokenManager:I}=r;pe(N&&I,e,"internal-error");const _=Ga.fromJSON(this.name,I);pe(typeof N=="string",e,"internal-error"),Bn(g,e.name),Bn(m,e.name),pe(typeof R=="boolean",e,"internal-error"),pe(typeof L=="boolean",e,"internal-error"),Bn(b,e.name),Bn(k,e.name),Bn(v,e.name),Bn(C,e.name),Bn(E,e.name),Bn(y,e.name);const w=new kn({uid:N,auth:e,email:m,emailVerified:R,displayName:g,isAnonymous:L,photoURL:k,phoneNumber:b,tenantId:v,stsTokenManager:_,createdAt:E,lastLoginAt:y});return M&&Array.isArray(M)&&(w.providerData=M.map(j=>Object.assign({},j))),C&&(w._redirectEventId=C),w}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ga;s.updateFromServerResponse(r);const a=new kn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await wu(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];pe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Z_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Ga;l.updateFromIdToken(n);const u=new kn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Bf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Map;function Nn(t){$n(t instanceof Function,"Expected a class definition");let e=ax.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ax.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}e2.type="NONE";const ix=e2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t,e,r){return`firebase:${t}:${e}:${r}`}class Ka{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=Rc(this.userKey,s.apiKey,a),this.fullPersistenceKey=Rc("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ka(Nn(ix),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Nn(ix);const o=Rc(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){const g=kn._fromJSON(e,h);d!==a&&(l=g),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ka(a,e,n):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ka(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i2(e))return"Blackberry";if(o2(e))return"Webos";if(r2(e))return"Safari";if((e.includes("chrome/")||n2(e))&&!e.includes("edge/"))return"Chrome";if(a2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function t2(t=Gt()){return/firefox\//i.test(t)}function r2(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n2(t=Gt()){return/crios\//i.test(t)}function s2(t=Gt()){return/iemobile/i.test(t)}function a2(t=Gt()){return/android/i.test(t)}function i2(t=Gt()){return/blackberry/i.test(t)}function o2(t=Gt()){return/webos/i.test(t)}function Vg(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qC(t=Gt()){var e;return Vg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GC(){return nS()&&document.documentMode===10}function l2(t=Gt()){return Vg(t)||a2(t)||o2(t)||i2(t)||/windows phone/i.test(t)||s2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e=[]){let r;switch(t){case"Browser":r=ox(Gt());break;case"Worker":r=`${ox(Gt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ua}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",Og(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=6;class XC{constructor(e){var r,n,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:YC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lx(this),this.idTokenSubscription=new lx(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Nn(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await J_(this,{idToken:e}),n=await kn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ts(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await wu(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ts(this.app))return Promise.reject(qs(this));const r=e?Kt(e):null;return r&&pe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ts(this.app)?Promise.reject(qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ts(this.app)?Promise.reject(qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QC(this),r=new XC(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await HC(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Nn(e)||this._popupRedirectResolver;pe(r,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Nn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&CC(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Fg(t){return Kt(t)}class lx{constructor(e){this.auth=e,this.observer=null,this.addObserver=dS(r=>this.observer=r)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZC(t){Ug=t}function e4(t){return Ug.loadJS(t)}function t4(){return Ug.gapiScript}function r4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t,e){const r=Qu(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(uu(a,e??{}))return s;Dn(s,"already-initialized")}return r.initialize({options:e})}function s4(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function a4(t,e,r){const n=Fg(t);pe(n._canInitEmulator,n,"emulator-config-failed"),pe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=u2(e),{host:o,port:l}=i4(e),u=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),o4()}function u2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i4(t){const e=u2(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:cx(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:cx(o)}}}function cx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o4(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return _n("not implemented")}_getIdTokenResponse(e){return _n("not implemented")}_linkToIdToken(e,r){return _n("not implemented")}_getReauthenticationResolver(e){return _n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t,e){return MC(t,"POST","/v1/accounts:signInWithIdp",Og(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="http://localhost";class sa extends d2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Dn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,a=Dg(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new sa(n,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Qa(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Qa(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Qa(e,r)}buildRequest(){const e={requestUri:l4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ul(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends h2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends bl{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return sa._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Qn.credential(r,n)}catch{return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com";Qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends bl{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yn.credential(e.oauthAccessToken)}catch{return null}}}Yn.GITHUB_SIGN_IN_METHOD="github.com";Yn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends bl{constructor(){super("twitter.com")}static credential(e,r){return sa._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Xn.credential(r,n)}catch{return null}}}Xn.TWITTER_SIGN_IN_METHOD="twitter.com";Xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await kn._fromIdTokenResponse(e,n,s),o=ux(n);return new pi({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=ux(n);return new pi({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function ux(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends dn{constructor(e,r,n,s){var a;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,_u.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new _u(e,r,n,s)}}function f2(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_u._fromErrorAndOperation(t,a,e,n):a})}async function c4(t,e,r=!1){const n=await el(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return pi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e,r=!1){const{auth:n}=t;if(ts(n.app))return Promise.reject(qs(n));const s="reauthenticate";try{const a=await el(t,f2(n,s,e,t),r);pe(a.idToken,n,"internal-error");const o=Lg(a.idToken);pe(o,n,"internal-error");const{sub:l}=o;return pe(t.uid===l,n,"user-mismatch"),pi._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Dn(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e,r=!1){if(ts(t.app))return Promise.reject(qs(t));const n="signIn",s=await f2(t,n,e),a=await pi._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}function h4(t,e,r,n){return Kt(t).onIdTokenChanged(e,r,n)}function f4(t,e,r){return Kt(t).beforeAuthStateChanged(e,r)}const ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=1e3,g4=10;class g2 extends m2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);GC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,g4):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},m4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}g2.type="LOCAL";const p4=g2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends m2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}p2.type="SESSION";const y2=p2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new dd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async d=>d(r.origin,a)),u=await y4(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Bg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function v4(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function b4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _4(){return x2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="firebaseLocalStorageDb",k4=1,Nu="firebaseLocalStorage",b2="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function hd(t,e){return t.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function N4(){const t=indexedDB.deleteDatabase(v2);return new wl(t).toPromise()}function zf(){const t=indexedDB.open(v2,k4);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Nu,{keyPath:b2})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Nu)?e(n):(n.close(),await N4(),e(await zf()))})})}async function dx(t,e,r){const n=hd(t,!0).put({[b2]:e,value:r});return new wl(n).toPromise()}async function E4(t,e){const r=hd(t,!1).get(e),n=await new wl(r).toPromise();return n===void 0?null:n.value}function hx(t,e){const r=hd(t,!0).delete(e);return new wl(r).toPromise()}const j4=800,S4=3;class w2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zf(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>S4)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(_4()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await b4(),!this.activeServiceWorker)return;this.sender=new x4(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zf();return await dx(e,ku,"1"),await hx(e,ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>dx(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>E4(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>hx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=hd(s,!1).getAll();return new wl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w2.type="LOCAL";const T4=w2;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e){return e?Nn(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends d2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Qa(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function C4(t){return d4(t.auth,new zg(t),t.bypassAuthState)}function A4(t){const{auth:e,user:r}=t;return pe(r,e,"internal-error"),u4(r,new zg(t),t.bypassAuthState)}async function P4(t){const{auth:e,user:r}=t;return pe(r,e,"internal-error"),c4(r,new zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C4;case"linkViaPopup":case"linkViaRedirect":return P4;case"reauthViaPopup":case"reauthViaRedirect":return A4;default:Dn(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new vl(2e3,1e4);class La extends _2{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=Bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R4.get())};e()}}La.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="pendingRedirect",Dc=new Map;class $4 extends _2{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Dc.get(this.auth._key());if(!e){try{const n=await M4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M4(t,e){const r=V4(e),n=L4(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function O4(t,e){Dc.set(t._key(),e)}function L4(t){return Nn(t._redirectPersistence)}function V4(t){return Rc(D4,t.config.apiKey,t.name)}async function F4(t,e,r=!1){if(ts(t.app))return Promise.reject(qs(t));const n=Fg(t),s=I4(n,e),o=await new $4(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=10*60*1e3;class B4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z4(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!k2(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(sn(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U4&&this.cachedEventUids.clear(),this.cachedEventUids.has(fx(e))}saveEventToCache(e){this.cachedEventUids.add(fx(e)),this.lastProcessedEventTime=Date.now()}}function fx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function k2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function z4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q4=/^https?/;async function G4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W4(t);for(const r of e)try{if(K4(r))return}catch{}Dn(t,"unauthorized-domain")}function K4(t){const e=Uf(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!q4.test(r))return!1;if(H4.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new vl(3e4,6e4);function mx(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Y4(t){return new Promise((e,r)=>{var n,s,a;function o(){mx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mx(),r(sn(t,"network-request-failed"))},timeout:Q4.get()})}if(!((s=(n=an().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=an().gapi)===null||a===void 0)&&a.load)o();else{const l=r4("iframefcb");return an()[l]=()=>{gapi.load?o():r(sn(t,"network-request-failed"))},e4(`${t4()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw $c=null,e})}let $c=null;function X4(t){return $c=$c||Y4(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new vl(5e3,15e3),Z4="__/auth/iframe",eA="emulator/auth/iframe",tA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nA(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Mg(e,eA):`https://${t.config.authDomain}/${Z4}`,n={apiKey:e.apiKey,appName:t.name,v:ua},s=rA.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${ul(n).slice(1)}`}async function sA(t){const e=await X4(t),r=an().gapi;return pe(r,t,"internal-error"),e.open({where:document.body,url:nA(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tA,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const o=sn(t,"network-request-failed"),l=an().setTimeout(()=>{a(o)},J4.get());function u(){an().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iA=500,oA=600,lA="_blank",cA="http://localhost";class gx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uA(t,e,r,n=iA,s=oA){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},aA),{width:n.toString(),height:s.toString(),top:a,left:o}),d=Gt().toLowerCase();r&&(l=n2(d)?lA:r),t2(d)&&(e=e||cA,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,k])=>`${m}${b}=${k},`,"");if(qC(d)&&l!=="_self")return dA(e||"",l),new gx(null);const g=window.open(e||"",l,h);pe(g,t,"popup-blocked");try{g.focus()}catch{}return new gx(g)}function dA(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="__/auth/handler",fA="emulator/auth/handler",mA=encodeURIComponent("fac");async function px(t,e,r,n,s,a){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:ua,eventId:s};if(e instanceof h2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof bl){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${mA}=${encodeURIComponent(u)}`:"";return`${gA(t)}?${ul(l).slice(1)}${d}`}function gA({config:t}){return t.emulator?Mg(t,fA):`https://${t.authDomain}/${hA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="webStorageSupport";class pA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y2,this._completeRedirectFn=F4,this._overrideRedirectResult=O4}async _openPopup(e,r,n,s){var a;$n((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await px(e,r,n,Uf(),s);return uA(e,o,Bg())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await px(e,r,n,Uf(),s);return v4(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):($n(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await sA(e),n=new B4(e);return r.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(mh,{type:mh},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[mh];o!==void 0&&r(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=G4(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return l2()||r2()||Vg()}}const yA=pA;var yx="@firebase/auth",xx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bA(t){Zs(new vs("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c2(t)},d=new JC(n,s,a,u);return s4(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Zs(new vs("auth-internal",e=>{const r=Fg(e.getProvider("auth").getImmediate());return(n=>new xA(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(yx,xx,vA(t)),tn(yx,xx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=5*60,_A=_w("authIdTokenMaxAge")||wA;let vx=null;const kA=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>_A)return;const s=r==null?void 0:r.token;vx!==s&&(vx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NA(t=Zm()){const e=Qu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=n4(t,{popupRedirectResolver:yA,persistence:[T4,p4,y2]}),n=_w("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=kA(a.toString());f4(r,o,()=>o(r.currentUser)),h4(r,l=>o(l))}}const s=vw("auth");return s&&a4(r,`http://${s}`),r}function EA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZC({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=sn("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",EA().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bA("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebasestorage.googleapis.com",jA="storageBucket",SA=2*60*1e3,TA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends dn{constructor(e,r,n=0){super(gh(e),`Firebase Storage: ${r} (${gh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cn||(cn={}));function gh(t){return"storage/"+t}function IA(){const t="An unknown error occurred, please check the error payload for server response.";return new hn(cn.UNKNOWN,t)}function CA(){return new hn(cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AA(){return new hn(cn.CANCELED,"User canceled the upload/download.")}function PA(t){return new hn(cn.INVALID_URL,"Invalid URL '"+t+"'.")}function RA(t){return new hn(cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bx(t){return new hn(cn.INVALID_ARGUMENT,t)}function E2(){return new hn(cn.APP_DELETED,"The Firebase app was deleted.")}function DA(t){return new hn(cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Vr.makeFromUrl(e,r)}catch{return new Vr(e,"")}if(n.path==="")return n;throw RA(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",g=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${h}/b/${s}/o${m}`,"i"),k={bucket:1,path:3},v=r===N2?"(?:storage.googleapis.com|storage.cloud.google.com)":r,C="([^?#]*)",E=new RegExp(`^https?://${v}/${s}/${C}`,"i"),N=[{regex:l,indices:u,postModify:a},{regex:b,indices:k,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<N.length;R++){const L=N[R],M=L.regex.exec(e);if(M){const I=M[L.indices.bucket];let _=M[L.indices.path];_||(_=""),n=new Vr(I,_),L.postModify(n);break}}if(n==null)throw PA(e);return n}}class $A{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t,e,r){let n=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function g(C){s=setTimeout(()=>{s=null,t(b,u())},C)}function m(){a&&clearTimeout(a)}function b(C,...E){if(d){m();return}if(C){m(),h.call(null,C,...E);return}if(u()||o){m(),h.call(null,C,...E);return}n<64&&(n*=2);let N;l===1?(l=2,N=0):N=(n+Math.random())*1e3,g(N)}let k=!1;function v(C){k||(k=!0,m(),!d&&(s!==null?(C||(l=2),clearTimeout(s),g(0)):C||(l=1)))}return g(0),a=setTimeout(()=>{o=!0,v(!0)},r),v}function OA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return t!==void 0}function wx(t,e,r,n){if(n<e)throw bx(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw bx(`Invalid value for '${t}'. Expected ${r} or less.`)}function VA(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Eu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Eu||(Eu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,r,n,s,a,o,l,u,d,h,g,m=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new dc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Eu.NO_ERROR,u=a.getStatus();if(!l||FA(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Eu.ABORT;n(!1,new dc(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new dc(d,a))})},r=(n,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());LA(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=IA();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?E2():AA();o(u)}else{const u=CA();o(u)}};this.canceled_?r(!1,new dc(!1,null,!0)):this.backoffId_=MA(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dc{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function BA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qA(t,e,r,n,s,a,o=!0){const l=VA(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return WA(d,e),BA(d,r),zA(d,a),HA(d,n),new UA(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,r){this._service=e,r instanceof Vr?this._location=r:this._location=Vr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new ju(e,r)}get root(){const e=new Vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KA(this._location.path)}get storage(){return this._service}get parent(){const e=GA(this._location.path);if(e===null)return null;const r=new Vr(this._location.bucket,e);return new ju(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw DA(e)}}function _x(t,e){const r=e==null?void 0:e[jA];return r==null?null:Vr.makeFromBucketSpec(r,t)}function QA(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:kw(s,t.app.options.projectId))}class YA{constructor(e,r,n,s,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=N2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SA,this._maxUploadRetryTime=TA,this._requests=new Set,s!=null?this._bucket=Vr.makeFromBucketSpec(s,this._host):this._bucket=_x(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,e):this._bucket=_x(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ju(this,e)}_makeRequest(e,r,n,s,a=!0){if(this._deleted)return new $A(E2());{const o=qA(e,this._appId,n,s,r,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const kx="@firebase/storage",Nx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="storage";function XA(t=Zm(),e){t=Kt(t);const n=Qu(t,j2).getImmediate({identifier:e}),s=bw("storage");return s&&JA(n,...s),n}function JA(t,e,r,n={}){QA(t,e,r,n)}function ZA(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new YA(r,n,s,e,ua)}function eP(){Zs(new vs(j2,ZA,"PUBLIC").setMultipleInstances(!0)),tn(kx,Nx,""),tn(kx,Nx,"esm2017")}eP();const yn={apiKey:"your-api-key",authDomain:"your-auth-domain",projectId:"your-project-id",storageBucket:"your-storage-bucket",messagingSenderId:"your-messaging-sender-id",appId:"your-app-id"};console.log("Firebase config check:",{hasApiKey:!!yn.apiKey&&yn.apiKey!=="your-api-key",authDomain:yn.authDomain,projectId:yn.projectId,hasStorageBucket:!!yn.storageBucket&&yn.storageBucket!=="your-storage-bucket",hasAppId:!!yn.appId&&yn.appId!=="your-app-id"});console.log("Raw env values:",{VITE_FIREBASE_API_KEY:void 0,VITE_FIREBASE_AUTH_DOMAIN:void 0,VITE_FIREBASE_PROJECT_ID:void 0,VITE_FIREBASE_STORAGE_BUCKET:void 0});const Wg=jw(yn);NA(Wg);const $e=cC(Wg);XA(Wg);console.log("Firestore db initialized:",!!$e);const tP=30,Ex=t=>t.toString().padStart(2,"0"),rP=()=>{const t=new Date;return t.setDate(t.getDate()-tP),{dateOnly:`${t.getFullYear()}-${Ex(t.getMonth()+1)}-${Ex(t.getDate())}`,iso:t.toISOString()}},hc=async(t,e,r)=>{const n=Qt($e,t),s=dt(n,tr(e,"<",r)),a=await ln(s);await Promise.all(a.docs.map(o=>ma(dr($e,t,o.id))))},nP=async()=>{try{const{dateOnly:t,iso:e}=rP();await Promise.all([hc("workSlots","date",t),hc("dayStatuses","date",t),hc("earnings","date",t),hc("referrals","createdAt",e)])}catch(t){console.error("Failed to cleanup old data",t)}},Mn=async(t,e)=>{const r=Qt($e,"workSlots");let n;t&&e||t?n=dt(r,tr("userId","==",t)):e?n=dt(r,tr("date","==",e)):n=dt(r);let a=(await ln(n)).docs.map(o=>{const l=o.data(),u=((l==null?void 0:l.slots)||[]).map(d=>d.break&&!d.breaks?{...d,breaks:[d.break],break:void 0}:d);return{id:o.id,userId:(l==null?void 0:l.userId)||"",date:(l==null?void 0:l.date)||"",slots:u,participants:(l==null?void 0:l.participants)||[],...(l==null?void 0:l.comment)&&{comment:l.comment}}});return t&&e&&(a=a.filter(o=>o.date===e)),a.sort((o,l)=>o.date.localeCompare(l.date)),a},sP=async t=>{try{console.log("addWorkSlot: Starting, db initialized:",!!$e);const e=Qt($e,"workSlots");console.log("addWorkSlot: Collection reference created");const r=Object.fromEntries(Object.entries(t).filter(([s,a])=>a!==void 0));console.log("addWorkSlot: Clean slot prepared:",r),console.log("addWorkSlot: Calling addDoc...");const n=await Ti(e,r);return console.log("addWorkSlot: Work slot added successfully:",n.id),n}catch(e){throw console.error("addWorkSlot: Error caught:",e),console.error("addWorkSlot: Error code:",e==null?void 0:e.code),console.error("addWorkSlot: Error message:",e==null?void 0:e.message),console.error("addWorkSlot: Full error:",JSON.stringify(e,null,2)),e}},aP=async(t,e)=>{const r=dr($e,"workSlots",t),n=Object.fromEntries(Object.entries(e).filter(([s,a])=>a!==void 0));await Si(r,n)},Hg=async t=>{const e=dr($e,"workSlots",t);await ma(e)},En=async(t,e)=>{const r=Qt($e,"dayStatuses");let n;t?n=dt(r,tr("userId","==",t)):n=dt(r);let a=(await ln(n)).docs.map(o=>{const l=o.data();return{id:o.id,userId:(l==null?void 0:l.userId)||"",date:(l==null?void 0:l.date)||"",type:(l==null?void 0:l.type)||"dayoff",...(l==null?void 0:l.comment)&&{comment:l.comment},...(l==null?void 0:l.endDate)&&{endDate:l.endDate}}});return a.sort((o,l)=>o.date.localeCompare(l.date)),a},iP=async t=>{try{const e=Qt($e,"dayStatuses"),r=Object.fromEntries(Object.entries(t).filter(([s,a])=>a!==void 0));console.log("Adding day status:",r);const n=await Ti(e,r);return console.log("Day status added successfully:",n.id),n}catch(e){throw console.error("Error in addDayStatus:",e),e}},oP=async(t,e)=>{const r=dr($e,"dayStatuses",t),n=Object.fromEntries(Object.entries(e).filter(([s,a])=>a!==void 0));await Si(r,n)},S2=async t=>{const e=dr($e,"dayStatuses",t);await ma(e)},tl=async(t,e,r)=>{const n=Qt($e,"earnings");let s;t&&e&&r||t?s=dt(n,tr("userId","==",t)):e&&r?s=dt(n,tr("date",">=",e),tr("date","<=",r)):s=dt(n);let o=(await ln(s)).docs.map(l=>{const u=l.data();return{id:l.id,userId:(u==null?void 0:u.userId)||"",date:(u==null?void 0:u.date)||"",amount:(u==null?void 0:u.amount)||0,poolAmount:(u==null?void 0:u.poolAmount)||0,slotId:(u==null?void 0:u.slotId)||"",participants:(u==null?void 0:u.participants)||[]}});return t&&e&&r&&(o=o.filter(l=>l.date>=e&&l.date<=r)),o.sort((l,u)=>u.date.localeCompare(l.date)),o},lP=async t=>{try{const e=Qt($e,"earnings"),r=Object.fromEntries(Object.entries(t).filter(([s,a])=>a!==void 0));console.log("Adding earnings:",r);const n=await Ti(e,r);return console.log("Earnings added successfully:",n.id),n}catch(e){throw console.error("Error in addEarnings:",e),e}},cP=async(t,e)=>{const r=dr($e,"earnings",t),n=Object.fromEntries(Object.entries(e).filter(([s,a])=>a!==void 0));await Si(r,n)},uP=async t=>{const e=dr($e,"earnings",t);await ma(e)},T2=async t=>{const e=Qt($e,"ratings");let r=dt(e);return t&&(r=dt(r,tr("userId","==",t))),(await ln(r)).docs.map(s=>{const a=s.data();return{id:s.id,userId:a.userId||"",earnings:a.earnings||0,messages:a.messages||0,initiatives:a.initiatives||0,signals:a.signals||0,profitableSignals:a.profitableSignals||0,referrals:a.referrals||0,daysOff:a.daysOff||0,sickDays:a.sickDays||0,vacationDays:a.vacationDays||0,poolAmount:a.poolAmount||0,rating:a.rating||0,lastUpdated:a.lastUpdated||new Date().toISOString()}})},I2=async(t,e,r)=>{try{const n=Qt($e,"messages"),s=dt(n,tr("userId","==",t));return(await ln(s)).docs.filter(l=>{const d=l.data().date||"";return d>=e&&d<=r}).length}catch(n){console.error("Error getting weekly messages:",n);const s=Qt($e,"ratings"),a=dt(s,tr("userId","==",t)),o=await ln(a);return o.empty?0:o.docs[0].data().messages||0}},dP=async t=>{try{const e=Qt($e,"referrals"),r=Object.fromEntries(Object.entries(t).filter(([s,a])=>a!==void 0));console.log("Adding referral:",r);const n=await Ti(e,r);return console.log("Referral added successfully:",n.id),n}catch(e){throw console.error("Error in addReferral:",e),e}},C2=async(t,e,r)=>{const n=Qt($e,"referrals");let s;s=dt(n,Zo("createdAt","desc"));let o=(await ln(s)).docs.map(l=>{const u=l.data();return{id:l.id,referralId:u.referralId,ownerId:u.ownerId,name:u.name,age:u.age,createdAt:u.createdAt,comment:u.comment}});return e&&r&&(o=o.filter(l=>l.createdAt>=e&&l.createdAt<=r)),o.sort((l,u)=>l.createdAt<u.createdAt?1:-1)},hP=async(t,e)=>{const r=dr($e,"referrals",t),n=Object.fromEntries(Object.entries(e).filter(([s,a])=>a!==void 0));await Si(r,n)},fP=async t=>{const e=dr($e,"referrals",t);await ma(e)},mP=async t=>{const e=Qt($e,"calls");return(await Ti(e,t)).id},gP=async t=>{const e=Qt($e,"calls"),r=[];r.push(Zo("createdAt","desc"));let n;return r.length>0?n=dt(e,...r):n=dt(e,Zo("createdAt","desc")),(await ln(n)).docs.map(o=>{const l=o.data();return{id:o.id,userId:l.userId||"",network:l.network||"",ticker:l.ticker||"",pair:l.pair||"",entryPoint:l.entryPoint||"",target:l.target||"",strategy:l.strategy||"flip",risks:l.risks||"",cancelConditions:l.cancelConditions,comment:l.comment,createdAt:l.createdAt||new Date().toISOString(),status:l.status||"active",maxProfit:l.maxProfit,currentPnL:l.currentPnL,currentMarketCap:l.currentMarketCap,signalMarketCap:l.signalMarketCap,currentPrice:l.currentPrice,entryPrice:l.entryPrice}})},pP=async(t,e)=>{const r=dr($e,"calls",t);await Si(r,e)},yP=async t=>{const e=dr($e,"calls",t);await ma(e)},xP=async t=>{const e=Qt($e,"tasks");return(await Ti(e,t)).id},A2=async t=>{const e=Qt($e,"tasks"),r=[];t!=null&&t.status&&r.push(tr("status","==",t.status)),t!=null&&t.category&&r.push(tr("category","==",t.category)),t!=null&&t.createdBy&&r.push(tr("createdBy","==",t.createdBy)),r.push(Zo("createdAt","desc"));let n;r.length>0?n=dt(e,...r):n=dt(e,Zo("createdAt","desc"));let a=(await ln(n)).docs.map(d=>{const h=d.data(),m=((Array.isArray(h.assignees)?h.assignees:(h.assignedTo||[]).map(k=>({userId:k,priority:"medium"})))||[]).map(k=>({userId:k.userId||"",priority:k.priority==="high"||k.priority==="low"?k.priority:"medium",comment:k.comment})).filter(k=>!!k.userId),b=m.map(k=>k.userId);return{id:d.id,title:h.title||"",description:h.description,category:h.category||"trading",status:h.status||"pending",createdBy:h.createdBy||"",assignedTo:b,assignees:m,approvals:h.approvals||[],createdAt:h.createdAt||new Date().toISOString(),updatedAt:h.updatedAt||new Date().toISOString(),completedAt:h.completedAt,closedAt:h.closedAt,completedBy:h.completedBy,priority:h.priority,dueDate:h.dueDate||new Date().toISOString().split("T")[0],dueTime:h.dueTime||"12:00"}});const o=new Date,l=new Date(o.getTime()-12*60*60*1e3),u=a.filter(d=>d.status==="closed"&&d.closedAt?new Date(d.closedAt)<l:!1);if(u.length>0&&(await Promise.all(u.map(d=>P2(d.id))),a=a.filter(d=>!u.find(h=>h.id===d.id))),t!=null&&t.assignedTo)if(Array.isArray(t.assignedTo)){const d=t.assignedTo;d.length>0&&(a=a.filter(h=>d.some(g=>h.assignedTo.includes(g))))}else a=a.filter(d=>d.assignedTo.includes(t.assignedTo));return a},Bs=async(t,e)=>{const r=dr($e,"tasks",t),n={...e,updatedAt:new Date().toISOString()};await Si(r,n)},P2=async t=>{const e=dr($e,"tasks",t);await ma(e)},vP=({onSuccess:t,onCancel:e,callToEdit:r})=>{const{theme:n}=Ue(),{user:s}=Nt(),[a,o]=P.useState(!1),[l,u]=P.useState(""),[d,h]=P.useState({network:(r==null?void 0:r.network)||"solana",ticker:(r==null?void 0:r.ticker)||"",pair:(r==null?void 0:r.pair)||"",entryPoint:(r==null?void 0:r.entryPoint)||"",target:(r==null?void 0:r.target)||"",strategy:(r==null?void 0:r.strategy)||"flip",risks:(r==null?void 0:r.risks)||"",cancelConditions:(r==null?void 0:r.cancelConditions)||"",comment:(r==null?void 0:r.comment)||""}),g=["solana","bsc","ethereum","base","ton","tron","sui","cex"],m=[{value:"flip",label:" "},{value:"medium",label:" "},{value:"long",label:" "}],b={solana:"Solana",bsc:"BSC",ethereum:"Ethereum",base:"Base",ton:"Ton",tron:"Tron",sui:"SUI",cex:"CEX "},k=async y=>{if(y.preventDefault(),u(""),o(!0),!d.ticker.trim()){u("  "),o(!1);return}if(!d.pair.trim()){u("  "),o(!1);return}if(!d.entryPoint.trim()){u("    "),o(!1);return}if(!d.target.trim()){u(" /  "),o(!1);return}if(!d.risks.trim()){u(" "),o(!1);return}try{if(r){const N={network:d.network,ticker:d.ticker,pair:d.pair,entryPoint:d.entryPoint,target:d.target,strategy:d.strategy,risks:d.risks,cancelConditions:d.cancelConditions||void 0,comment:d.comment||void 0};await pP(r.id,N)}else{if(!s){u("  .       ."),o(!1);return}const N={...d,userId:s.id,createdAt:new Date().toISOString(),status:"active",cancelConditions:d.cancelConditions||void 0,comment:d.comment||void 0};await mP(N)}t==null||t()}catch(N){console.error("Error creating call:",N),u("   .  .")}finally{o(!1)}},v=n==="dark"?"text-white":"text-gray-900",C=n==="dark"?"border-gray-700":"border-gray-200",E=n==="dark"?"bg-gray-700":"bg-gray-50";return i.jsxs("form",{onSubmit:k,className:"space-y-6",children:[l&&i.jsx("div",{className:`p-4 rounded-lg ${n==="dark"?"bg-red-900/30 border border-red-700 text-red-300":"bg-red-50 border border-red-200 text-red-800"}`,children:l}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:" *"}),i.jsx("select",{value:d.network,onChange:y=>h({...d,network:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,required:!0,children:g.map(y=>i.jsx("option",{value:y,children:b[y]},y))})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"  *"}),i.jsx("input",{type:"text",value:d.ticker,onChange:y=>h({...d,ticker:y.target.value.toUpperCase()}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:" ",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"  *"}),i.jsx("input",{type:"text",value:d.pair,onChange:y=>h({...d,pair:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"PEPE/USDT, DOGE/USDT...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"     *"}),i.jsx("input",{type:"text",value:d.entryPoint,onChange:y=>h({...d,entryPoint:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"10M  10M-15M (  )",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"/   *"}),i.jsx("input",{type:"text",value:d.target,onChange:y=>h({...d,target:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"20M, 30M, 50M (  )",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:" *"}),i.jsx("select",{value:d.strategy,onChange:y=>h({...d,strategy:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500`,required:!0,children:m.map(y=>i.jsx("option",{value:y.value,children:y.label},y.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:" *"}),i.jsx("textarea",{value:d.risks,onChange:y=>h({...d,risks:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[100px] resize-y`,placeholder:"   ...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"    "}),i.jsx("textarea",{value:d.cancelConditions,onChange:y=>h({...d,cancelConditions:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[80px] resize-y`,placeholder:"        ..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"  "}),i.jsx("textarea",{value:d.comment,onChange:y=>h({...d,comment:y.target.value}),className:`w-full px-4 py-2 rounded-lg border ${C} ${E} ${v} focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[100px] resize-y`,placeholder:"   ..."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"submit",disabled:a,className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${n==="dark"?"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-700 disabled:text-gray-400":"bg-green-500 hover:bg-green-600 text-white disabled:bg-gray-300 disabled:text-gray-500"}`,children:a?"...":r?" ":" "}),e&&i.jsx("button",{type:"button",onClick:e,className:`px-6 py-3 rounded-lg font-semibold transition-colors ${n==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""})]})]})},bP=()=>{var H;const{theme:t}=Ue(),{user:e}=Nt(),[r,n]=P.useState([]),[s,a]=P.useState(!0),[o,l]=P.useState(!1),[u,d]=P.useState(!1),[h,g]=P.useState(!0),[m,b]=P.useState(null),[k,v]=P.useState(null),[C,E]=P.useState(null),[y,N]=P.useState("");P.useEffect(()=>{R()},[]);const R=async()=>{a(!0);try{const $=await gP();n($),console.log("Loaded calls:",$.length,"User ID:",e==null?void 0:e.id),$.length>0&&console.log("First call userId:",$[0].userId)}catch($){console.error("Error loading calls:",$),n([])}finally{a(!1)}},L=P.useMemo(()=>{const $={};return r.forEach(te=>{const ue=we.find(J=>J.id===te.userId),le=te.userId||"unknown",fe=(ue==null?void 0:ue.name)||"";$[le]||($[le]={name:fe,totalCalls:0,activeCalls:0,completedCalls:0,cancelledCalls:0,avgPnL:0,totalPnL:0,maxProfit:0}),$[le].totalCalls++,te.status==="active"&&$[le].activeCalls++,te.status==="completed"&&$[le].completedCalls++,te.status==="cancelled"&&$[le].cancelledCalls++,te.currentPnL!==void 0&&($[le].totalPnL+=te.currentPnL),te.maxProfit!==void 0&&te.maxProfit>$[le].maxProfit&&($[le].maxProfit=te.maxProfit)}),Object.keys($).forEach(te=>{const ue=$[te];ue.totalCalls>0&&(ue.avgPnL=ue.totalPnL/ue.totalCalls)}),Object.values($).sort((te,ue)=>ue.totalCalls-te.totalCalls)},[r]),M=P.useMemo(()=>{const $=r.length,te=r.filter(X=>X.status==="active").length,ue=r.filter(X=>X.status==="completed").length,le=r.filter(X=>X.status==="cancelled").length,fe=r.length>0?r.reduce((X,G)=>X+(G.currentPnL||0),0)/r.length:0,J=r.reduce((X,G)=>G.maxProfit!==void 0&&(!X||(X.maxProfit||0)<G.maxProfit)?G:X,null);return{total:$,active:te,completed:ue,cancelled:le,avgPnL:fe,bestCall:J}},[r]),I=()=>{l(!1),v(null),R()},_=()=>{l(!1),v(null)},w=$=>{v($),l(!0)},j=$=>{b($),d(!0)},S=async()=>{if(m)try{await yP(m),d(!1),b(null),R()}catch($){console.error("Error deleting call:",$),alert("   ")}},A=async $=>{try{await navigator.clipboard.writeText($),E($),setTimeout(()=>E(null),2e3)}catch(te){console.error("Failed to copy:",te)}},x=t==="dark"?"bg-gray-800":"bg-white",q=t==="dark"?"text-white":"text-gray-900",U=t==="dark"?"text-gray-400":"text-gray-600",B=t==="dark"?"border-gray-700":"border-gray-200",W={solana:{bg:"bg-purple-500/10",text:"text-purple-400",icon:"bg-purple-500"},bsc:{bg:"bg-yellow-500/10",text:"text-yellow-400",icon:"bg-yellow-500"},ethereum:{bg:"bg-blue-500/10",text:"text-blue-400",icon:"bg-blue-500"},base:{bg:"bg-indigo-500/10",text:"text-indigo-400",icon:"bg-indigo-500"},ton:{bg:"bg-cyan-500/10",text:"text-cyan-400",icon:"bg-cyan-500"},tron:{bg:"bg-red-500/10",text:"text-red-400",icon:"bg-red-500"},sui:{bg:"bg-green-500/10",text:"text-green-400",icon:"bg-green-500"},cex:{bg:"bg-orange-500/10",text:"text-orange-400",icon:"bg-orange-500"}},F={flip:{label:"",icon:"",color:"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 border-yellow-500/30"},medium:{label:"",icon:"",color:"bg-blue-500/20 text-blue-600 dark:text-blue-400 border-blue-500/30"},long:{label:"",icon:"",color:"bg-purple-500/20 text-purple-600 dark:text-purple-400 border-purple-500/30"}},V={active:{label:"",color:"bg-green-500/20 text-green-600 dark:text-green-400 border-green-500/30"},completed:{label:"",color:"bg-blue-500/20 text-blue-600 dark:text-blue-400 border-blue-500/30"},cancelled:{label:"",color:"bg-red-500/20 text-red-600 dark:text-red-400 border-red-500/30"},reviewed:{label:" ",color:"bg-gray-500/20 text-gray-600 dark:text-gray-400 border-gray-500/30"}},D=r.filter($=>$.ticker.toLowerCase().includes(y.toLowerCase())||$.pair.toLowerCase().includes(y.toLowerCase())||$.network.toLowerCase().includes(y.toLowerCase()));return i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-2xl p-8 ${x} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-32 -mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-blue-500/10 to-purple-500/10 rounded-full blur-2xl -ml-24 -mb-24"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between mb-6",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white transform transition-transform hover:scale-110`,children:i.jsx(Ha,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:`text-4xl font-extrabold mb-2 ${q} flex items-center gap-3`,children:[i.jsx("span",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-blue-600 text-transparent bg-clip-text",children:"Trading Signals"}),i.jsx(xr,{className:`w-6 h-6 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]}),i.jsxs("p",{className:`text-base font-medium ${U} flex items-center gap-2`,children:[i.jsx("span",{className:"text-green-500",children:""}),"    "]})]})]})}),i.jsxs("button",{onClick:()=>{v(null),l(!0)},className:"w-full lg:w-auto px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-200 flex items-center justify-center gap-2 font-semibold shadow-lg hover:shadow-xl hover:scale-105 transform",children:[i.jsx(oi,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Vj,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 ${U}`}),i.jsx("input",{type:"text",value:y,onChange:$=>N($.target.value),placeholder:"  ,   ...",className:`w-full pl-12 pr-4 py-3 rounded-xl border-2 ${B} ${t==="dark"?"bg-gray-700/50":"bg-gray-50"} ${q} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`})]})]})]}),h&&r.length>0&&i.jsxs("div",{className:`${x} rounded-2xl p-6 shadow-xl border ${B}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:`text-2xl font-bold ${q} flex items-center gap-2`,children:[i.jsx(ey,{className:"w-6 h-6 text-green-500"}),""]}),i.jsx("button",{onClick:()=>g(!h),className:`p-2 rounded-lg ${t==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:i.jsx(wr,{className:`w-5 h-5 ${U}`})})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Tj,{className:"w-5 h-5 text-blue-500"}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" "})]}),i.jsx("p",{className:`text-2xl font-bold ${q}`,children:M.total})]}),i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-green-500/10 border border-green-500/20":"bg-green-50 border border-green-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ha,{className:"w-5 h-5 text-green-500"}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),i.jsx("p",{className:`text-2xl font-bold ${q}`,children:M.active})]}),i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-purple-500/10 border border-purple-500/20":"bg-purple-50 border border-purple-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(zo,{className:"w-5 h-5 text-purple-500"}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),i.jsx("p",{className:`text-2xl font-bold ${q}`,children:M.completed})]}),i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-orange-500/10 border border-orange-500/20":"bg-orange-50 border border-orange-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ca,{className:"w-5 h-5 text-orange-500"}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" PNL"})]}),i.jsxs("p",{className:`text-2xl font-bold ${M.avgPnL>=0?"text-green-500":"text-red-500"}`,children:[M.avgPnL>=0?"+":"",M.avgPnL.toFixed(2),"%"]})]})]}),M.bestCall&&i.jsxs("div",{className:`p-4 rounded-xl mb-6 ${t==="dark"?"bg-gradient-to-r from-green-500/10 to-green-600/10 border border-green-500/20":"bg-gradient-to-r from-green-50 to-green-100 border border-green-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(lu,{className:"w-5 h-5 text-green-500"}),i.jsx("p",{className:`text-sm font-semibold ${q}`,children:" "})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${q}`,children:M.bestCall.pair}),i.jsxs("p",{className:`text-xs ${U}`,children:[": ",M.bestCall.ticker]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-500",children:["+",((H=M.bestCall.maxProfit)==null?void 0:H.toFixed(2))||"0.00","%"]}),i.jsx("p",{className:`text-xs ${U}`,children:"MAX "})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:`text-lg font-bold ${q} mb-4 flex items-center gap-2`,children:[i.jsx(Ar,{className:"w-5 h-5 text-green-500"}),"  "]}),i.jsx("div",{className:"space-y-3",children:L.map($=>i.jsxs("div",{className:`p-4 rounded-xl border ${B} ${t==="dark"?"bg-gray-700/30":"bg-gray-50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center text-white font-bold",children:$.name[0]}),i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${q}`,children:$.name}),i.jsxs("p",{className:`text-xs ${U}`,children:[" : ",$.totalCalls]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`text-lg font-bold ${$.avgPnL>=0?"text-green-500":"text-red-500"}`,children:[$.avgPnL>=0?"+":"",$.avgPnL.toFixed(2),"%"]}),i.jsx("p",{className:`text-xs ${U}`,children:" PNL"})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-green-500/10":"bg-green-50"}`,children:[i.jsx("p",{className:`text-sm font-bold ${q}`,children:$.activeCalls}),i.jsx("p",{className:`text-xs ${U}`,children:""})]}),i.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-blue-500/10":"bg-blue-50"}`,children:[i.jsx("p",{className:`text-sm font-bold ${q}`,children:$.completedCalls}),i.jsx("p",{className:`text-xs ${U}`,children:""})]}),i.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-red-500/10":"bg-red-50"}`,children:[i.jsx("p",{className:`text-sm font-bold ${q}`,children:$.cancelledCalls}),i.jsx("p",{className:`text-xs ${U}`,children:""})]}),i.jsxs("div",{className:`p-2 rounded-lg text-center ${t==="dark"?"bg-purple-500/10":"bg-purple-50"}`,children:[i.jsxs("p",{className:"text-sm font-bold text-purple-500",children:["+",$.maxProfit.toFixed(1),"%"]}),i.jsx("p",{className:`text-xs ${U}`,children:"MAX"})]})]})]},$.name))})]})]}),r.length>0&&!h&&i.jsxs("button",{onClick:()=>g(!0),className:`w-full ${x} rounded-xl p-4 shadow-lg border ${B} hover:shadow-xl transition-all flex items-center justify-center gap-2 ${t==="dark"?"hover:bg-gray-700/50":"hover:bg-gray-50"}`,children:[i.jsx(ey,{className:"w-5 h-5 text-green-500"}),i.jsx("span",{className:`font-semibold ${q}`,children:" "})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:`${x} rounded-2xl p-8 shadow-2xl border ${B} max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom-4 duration-300`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:`text-3xl font-bold ${q}`,children:k?" ":"  "}),i.jsx("button",{onClick:_,className:`p-2 rounded-xl transition-colors ${t==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:i.jsx(wr,{className:`w-6 h-6 ${U}`})})]}),i.jsx(vP,{callToEdit:k,onSuccess:I,onCancel:_})]})}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:`${x} rounded-2xl p-8 shadow-2xl border ${B} max-w-md w-full animate-in slide-in-from-bottom-4 duration-300`,children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:i.jsx(po,{className:"w-8 h-8 text-red-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:`text-2xl font-bold ${q}`,children:" ?"}),i.jsx("p",{className:U,children:"   "})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>{d(!1),b(null)},className:`flex-1 px-6 py-3 rounded-xl font-semibold transition-colors ${t==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i.jsx("button",{onClick:S,className:`flex-1 px-6 py-3 rounded-xl font-semibold transition-colors ${t==="dark"?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:""})]})]})}),!o&&i.jsx(i.Fragment,{children:s?i.jsxs("div",{className:`${x} rounded-2xl p-12 text-center ${B} border shadow-xl`,children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),i.jsx("p",{className:`${U} text-lg`,children:" ..."})]}):r.length===0?i.jsxs("div",{className:`${x} rounded-2xl p-12 text-center ${B} border shadow-xl`,children:[i.jsx(xr,{className:`w-20 h-20 mx-auto mb-6 ${U}`}),i.jsx("h3",{className:`text-2xl font-bold ${q} mb-2`,children:" "}),i.jsx("p",{className:U,children:"     "})]}):D.length===0?i.jsxs("div",{className:`${x} rounded-2xl p-12 text-center ${B} border shadow-xl`,children:[i.jsx(xr,{className:`w-20 h-20 mx-auto mb-6 ${U}`}),i.jsx("h3",{className:`text-2xl font-bold ${q} mb-2`,children:"  "}),i.jsx("p",{className:U,children:"  "}),i.jsxs("p",{className:`${U} text-xs mt-2`,children:[" : ",r.length,", : ",D.length]})]}):i.jsx("div",{className:"grid grid-cols-1 gap-6",children:D.map($=>{const te=we.find(X=>X.id===$.userId),ue=W[$.network]||{bg:"bg-gray-500/10",text:"text-gray-400",icon:"bg-gray-500"},le=F[$.strategy]||F.flip,fe=V[$.status]||V.active,J=C===$.ticker;return i.jsxs("div",{className:`${x} rounded-2xl p-6 shadow-xl border ${B} hover:shadow-2xl transition-all duration-300 group relative overflow-hidden`,children:[i.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-600 ${$.status==="active"?"opacity-100":"opacity-50"}`}),i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("div",{className:`${ue.bg} ${ue.text} px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 border ${B}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${ue.icon}`}),$.network.toUpperCase()]}),i.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-medium border ${fe.color}`,children:fe.label}),te&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center text-white text-xs font-bold",children:te.name[0]}),i.jsx("span",{className:`text-xs ${U}`,children:te.name})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("h2",{className:`text-3xl font-bold ${q} mb-1`,children:$.pair}),i.jsx("p",{className:`text-xs ${U} uppercase tracking-wider`,children:" "})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsxs("span",{className:`font-mono text-sm ${U} bg-gray-100 dark:bg-gray-700/50 px-2 py-1 rounded`,children:[" ",$.ticker]}),i.jsx("button",{onClick:()=>A($.ticker),className:`p-1.5 rounded-lg transition-all ${t==="dark"?"bg-gray-700/50 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,title:" ",children:J?i.jsx(zo,{className:"w-4 h-4 text-green-500"}):i.jsx(lw,{className:`w-4 h-4 ${U}`})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>w($),className:`p-3 rounded-xl transition-all duration-200 ${t==="dark"?"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400":"bg-blue-50 hover:bg-blue-100 text-blue-600"}`,title:"",children:i.jsx(Ir,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>j($.id),className:`p-3 rounded-xl transition-all duration-200 ${t==="dark"?"bg-red-500/10 hover:bg-red-500/20 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,title:"",children:i.jsx(er,{className:"w-5 h-5"})})]})]}),($.maxProfit!==void 0||$.currentPnL!==void 0)&&i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[$.maxProfit!==void 0&&i.jsxs("div",{className:`p-3 rounded-xl ${t==="dark"?"bg-green-500/10 border border-green-500/20":"bg-green-50 border border-green-200"}`,children:[i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U} mb-1`,children:"MAX "}),i.jsxs("p",{className:"text-xl font-bold text-green-500",children:["+",$.maxProfit.toFixed(2),"%"]})]}),$.currentPnL!==void 0&&i.jsxs("div",{className:`p-3 rounded-xl ${t==="dark"?$.currentPnL>=0?"bg-green-500/10 border border-green-500/20":"bg-red-500/10 border border-red-500/20":$.currentPnL>=0?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U} mb-1`,children:" PNL"}),i.jsxs("p",{className:`text-xl font-bold ${$.currentPnL>=0?"text-green-500":"text-red-500"}`,children:[$.currentPnL>=0?"+":"",$.currentPnL.toFixed(2),"%"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-green-50/50"} border ${B}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Wo,{className:`w-4 h-4 ${t==="dark"?"text-green-400":"text-green-600"}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" ()"})]}),i.jsx("p",{className:`${q} font-medium`,children:$.entryPoint})]}),i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-blue-50/50"} border ${B}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Wo,{className:`w-4 h-4 ${t==="dark"?"text-blue-400":"text-blue-600"}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:" ()"})]}),i.jsx("p",{className:`${q} font-medium`,children:$.target})]}),i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-purple-50/50"} border ${B}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ha,{className:`w-4 h-4 ${t==="dark"?"text-purple-400":"text-purple-600"}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),i.jsxs("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-medium border ${le.color}`,children:[le.icon," ",le.label]})]}),i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-gray-50/50"} border ${B}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Js,{className:`w-4 h-4 ${U}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),i.jsx("p",{className:`${q} text-sm`,children:new Date($.createdAt).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-red-500/5 border-red-500/20":"bg-red-50/50 border-red-200/50"} border`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(po,{className:`w-4 h-4 ${t==="dark"?"text-red-400":"text-red-600"}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${t==="dark"?"text-red-400":"text-red-600"}`,children:""})]}),i.jsx("p",{className:`${q} text-sm leading-relaxed`,children:$.risks})]}),$.cancelConditions&&i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-orange-500/5 border-orange-500/20":"bg-orange-50/50 border-orange-200/50"} border`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(po,{className:`w-4 h-4 ${t==="dark"?"text-orange-400":"text-orange-600"}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${t==="dark"?"text-orange-400":"text-orange-600"}`,children:" "})]}),i.jsx("p",{className:`${q} text-sm leading-relaxed`,children:$.cancelConditions})]}),$.comment&&i.jsxs("div",{className:`p-4 rounded-xl ${t==="dark"?"bg-gray-700/30":"bg-gray-50/50"} border ${B}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Qm,{className:`w-4 h-4 ${U}`}),i.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider ${U}`,children:""})]}),i.jsx("p",{className:`${q} text-sm leading-relaxed`,children:$.comment})]})]})]},$.id)})})})]})})};function Su(t){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(t)}function un(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ze(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function kt(t){Ze(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Su(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wP(t,e){Ze(2,arguments);var r=kt(t).getTime(),n=un(e);return new Date(r+n)}var _P={};function Ci(){return _P}function kP(t,e){var r,n,s,a,o,l,u,d;Ze(1,arguments);var h=Ci(),g=un((r=(n=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=kt(t),b=m.getDay(),k=(b<g?7:0)+b-g;return m.setDate(m.getDate()-k),m.setHours(0,0,0,0),m}function NP(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function jx(t){Ze(1,arguments);var e=kt(t);return e.setHours(0,0,0,0),e}var R2=6e4,D2=36e5;function EP(t,e){Ze(2,arguments);var r=jx(t),n=jx(e);return r.getTime()===n.getTime()}function jP(t){return Ze(1,arguments),t instanceof Date||Su(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function SP(t){if(Ze(1,arguments),!jP(t)&&typeof t!="number")return!1;var e=kt(t);return!isNaN(Number(e))}function TP(t,e){var r;Ze(1,arguments);var n=t||{},s=kt(n.start),a=kt(n.end),o=a.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var l=[],u=s;u.setHours(0,0,0,0);var d=Number((r=void 0)!==null&&r!==void 0?r:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=o;)l.push(kt(u)),u.setDate(u.getDate()+d),u.setHours(0,0,0,0);return l}function IP(t,e){var r,n,s,a,o,l,u,d;Ze(1,arguments);var h=Ci(),g=un((r=(n=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=kt(t),b=m.getDay(),k=(b<g?-7:0)+6-(b-g);return m.setDate(m.getDate()+k),m.setHours(23,59,59,999),m}function CP(t,e){Ze(2,arguments);var r=un(e);return wP(t,-r)}var AP=864e5;function PP(t){Ze(1,arguments);var e=kt(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),s=r-n;return Math.floor(s/AP)+1}function Tu(t){Ze(1,arguments);var e=1,r=kt(t),n=r.getUTCDay(),s=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-s),r.setUTCHours(0,0,0,0),r}function $2(t){Ze(1,arguments);var e=kt(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var s=Tu(n),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var o=Tu(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function RP(t){Ze(1,arguments);var e=$2(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=Tu(r);return n}var DP=6048e5;function $P(t){Ze(1,arguments);var e=kt(t),r=Tu(e).getTime()-RP(e).getTime();return Math.round(r/DP)+1}function yi(t,e){var r,n,s,a,o,l,u,d;Ze(1,arguments);var h=Ci(),g=un((r=(n=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=kt(t),b=m.getUTCDay(),k=(b<g?7:0)+b-g;return m.setUTCDate(m.getUTCDate()-k),m.setUTCHours(0,0,0,0),m}function M2(t,e){var r,n,s,a,o,l,u,d;Ze(1,arguments);var h=kt(t),g=h.getUTCFullYear(),m=Ci(),b=un((r=(n=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&n!==void 0?n:(u=m.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=new Date(0);k.setUTCFullYear(g+1,0,b),k.setUTCHours(0,0,0,0);var v=yi(k,e),C=new Date(0);C.setUTCFullYear(g,0,b),C.setUTCHours(0,0,0,0);var E=yi(C,e);return h.getTime()>=v.getTime()?g+1:h.getTime()>=E.getTime()?g:g-1}function MP(t,e){var r,n,s,a,o,l,u,d;Ze(1,arguments);var h=Ci(),g=un((r=(n=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1),m=M2(t,e),b=new Date(0);b.setUTCFullYear(m,0,g),b.setUTCHours(0,0,0,0);var k=yi(b,e);return k}var OP=6048e5;function LP(t,e){Ze(1,arguments);var r=kt(t),n=yi(r,e).getTime()-MP(r,e).getTime();return Math.round(n/OP)+1}function Me(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var zn={y:function(e,r){var n=e.getUTCFullYear(),s=n>0?n:1-n;return Me(r==="yy"?s%100:s,r.length)},M:function(e,r){var n=e.getUTCMonth();return r==="M"?String(n+1):Me(n+1,2)},d:function(e,r){return Me(e.getUTCDate(),r.length)},a:function(e,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,r){return Me(e.getUTCHours()%12||12,r.length)},H:function(e,r){return Me(e.getUTCHours(),r.length)},m:function(e,r){return Me(e.getUTCMinutes(),r.length)},s:function(e,r){return Me(e.getUTCSeconds(),r.length)},S:function(e,r){var n=r.length,s=e.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,n-3));return Me(a,r.length)}},_a={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VP={G:function(e,r,n){var s=e.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){var s=e.getUTCFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return zn.y(e,r)},Y:function(e,r,n,s){var a=M2(e,s),o=a>0?a:1-a;if(r==="YY"){var l=o%100;return Me(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):Me(o,r.length)},R:function(e,r){var n=$2(e);return Me(n,r.length)},u:function(e,r){var n=e.getUTCFullYear();return Me(n,r.length)},Q:function(e,r,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return Me(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,r,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return Me(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,r,n){var s=e.getUTCMonth();switch(r){case"M":case"MM":return zn.M(e,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,r,n){var s=e.getUTCMonth();switch(r){case"L":return String(s+1);case"LL":return Me(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,r,n,s){var a=LP(e,s);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):Me(a,r.length)},I:function(e,r,n){var s=$P(e);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):Me(s,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):zn.d(e,r)},D:function(e,r,n){var s=PP(e);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Me(s,r.length)},E:function(e,r,n){var s=e.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,r,n,s){var a=e.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return Me(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,r,n,s){var a=e.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return Me(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,r,n){var s=e.getUTCDay(),a=s===0?7:s;switch(r){case"i":return String(a);case"ii":return Me(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,r,n){var s=e.getUTCHours(),a=s/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,r,n){var s=e.getUTCHours(),a;switch(s===12?a=_a.noon:s===0?a=_a.midnight:a=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,r,n){var s=e.getUTCHours(),a;switch(s>=17?a=_a.evening:s>=12?a=_a.afternoon:s>=4?a=_a.morning:a=_a.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return zn.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):zn.H(e,r)},K:function(e,r,n){var s=e.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Me(s,r.length)},k:function(e,r,n){var s=e.getUTCHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):Me(s,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):zn.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):zn.s(e,r)},S:function(e,r){return zn.S(e,r)},X:function(e,r,n,s){var a=s._originalDate||e,o=a.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return Tx(o);case"XXXX":case"XX":return Os(o);case"XXXXX":case"XXX":default:return Os(o,":")}},x:function(e,r,n,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(r){case"x":return Tx(o);case"xxxx":case"xx":return Os(o);case"xxxxx":case"xxx":default:return Os(o,":")}},O:function(e,r,n,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Sx(o,":");case"OOOO":default:return"GMT"+Os(o,":")}},z:function(e,r,n,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Sx(o,":");case"zzzz":default:return"GMT"+Os(o,":")}},t:function(e,r,n,s){var a=s._originalDate||e,o=Math.floor(a.getTime()/1e3);return Me(o,r.length)},T:function(e,r,n,s){var a=s._originalDate||e,o=a.getTime();return Me(o,r.length)}};function Sx(t,e){var r=t>0?"-":"+",n=Math.abs(t),s=Math.floor(n/60),a=n%60;if(a===0)return r+String(s);var o=e;return r+String(s)+o+Me(a,2)}function Tx(t,e){if(t%60===0){var r=t>0?"-":"+";return r+Me(Math.abs(t)/60,2)}return Os(t,e)}function Os(t,e){var r=e||"",n=t>0?"-":"+",s=Math.abs(t),a=Me(Math.floor(s/60),2),o=Me(s%60,2);return n+a+r+o}var Ix=function(e,r){switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},O2=function(e,r){switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},FP=function(e,r){var n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return Ix(e,r);var o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",Ix(s,r)).replace("{{time}}",O2(a,r))},UP={p:O2,P:FP},BP=["D","DD"],zP=["YY","YYYY"];function WP(t){return BP.indexOf(t)!==-1}function HP(t){return zP.indexOf(t)!==-1}function Cx(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var qP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GP=function(e,r,n){var s,a=qP[e];return typeof a=="string"?s=a:r===1?s=a.one:s=a.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Ya(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var KP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XP={date:Ya({formats:KP,defaultWidth:"full"}),time:Ya({formats:QP,defaultWidth:"full"}),dateTime:Ya({formats:YP,defaultWidth:"full"})},JP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZP=function(e,r,n,s){return JP[e]};function Qr(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{var l=t.defaultWidth,u=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[u]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var eR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},iR=function(e,r){var n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},oR={ordinalNumber:iR,era:Qr({values:eR,defaultWidth:"wide"}),quarter:Qr({values:tR,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qr({values:rR,defaultWidth:"wide"}),day:Qr({values:nR,defaultWidth:"wide"}),dayPeriod:Qr({values:sR,defaultWidth:"wide",formattingValues:aR,defaultFormattingWidth:"wide"})};function Yr(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;var o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?cR(l,function(g){return g.test(o)}):lR(l,function(g){return g.test(o)}),d;d=t.valueCallback?t.valueCallback(u):u,d=r.valueCallback?r.valueCallback(d):d;var h=e.slice(o.length);return{value:d,rest:h}}}function lR(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function cR(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function L2(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var s=n[0],a=e.match(t.parsePattern);if(!a)return null;var o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;var l=e.slice(s.length);return{value:o,rest:l}}}var uR=/^(\d+)(th|st|nd|rd)?/i,dR=/\d+/i,hR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fR={any:[/^b/i,/^(a|c)/i]},mR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gR={any:[/1/i,/2/i,/3/i,/4/i]},pR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_R={ordinalNumber:L2({matchPattern:uR,parsePattern:dR,valueCallback:function(e){return parseInt(e,10)}}),era:Yr({matchPatterns:hR,defaultMatchWidth:"wide",parsePatterns:fR,defaultParseWidth:"any"}),quarter:Yr({matchPatterns:mR,defaultMatchWidth:"wide",parsePatterns:gR,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yr({matchPatterns:pR,defaultMatchWidth:"wide",parsePatterns:yR,defaultParseWidth:"any"}),day:Yr({matchPatterns:xR,defaultMatchWidth:"wide",parsePatterns:vR,defaultParseWidth:"any"}),dayPeriod:Yr({matchPatterns:bR,defaultMatchWidth:"any",parsePatterns:wR,defaultParseWidth:"any"})},kR={code:"en-US",formatDistance:GP,formatLong:XP,formatRelative:ZP,localize:oR,match:_R,options:{weekStartsOn:0,firstWeekContainsDate:1}},NR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ER=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jR=/^'([^]*?)'?$/,SR=/''/g,TR=/[a-zA-Z]/;function V2(t,e,r){var n,s,a,o,l,u,d,h,g,m,b,k,v,C,E,y,N,R;Ze(2,arguments);var L=String(e),M=Ci(),I=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:M.locale)!==null&&n!==void 0?n:kR,_=un((a=(o=(l=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&l!==void 0?l:M.firstWeekContainsDate)!==null&&o!==void 0?o:(g=M.locale)===null||g===void 0||(m=g.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=un((b=(k=(v=(C=r==null?void 0:r.weekStartsOn)!==null&&C!==void 0?C:r==null||(E=r.locale)===null||E===void 0||(y=E.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&v!==void 0?v:M.weekStartsOn)!==null&&k!==void 0?k:(N=M.locale)===null||N===void 0||(R=N.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&b!==void 0?b:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var j=kt(t);if(!SP(j))throw new RangeError("Invalid time value");var S=NP(j),A=CP(j,S),x={firstWeekContainsDate:_,weekStartsOn:w,locale:I,_originalDate:j},q=L.match(ER).map(function(U){var B=U[0];if(B==="p"||B==="P"){var W=UP[B];return W(U,I.formatLong)}return U}).join("").match(NR).map(function(U){if(U==="''")return"'";var B=U[0];if(B==="'")return IR(U);var W=VP[B];if(W)return!(r!=null&&r.useAdditionalWeekYearTokens)&&HP(U)&&Cx(U,e,String(t)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&WP(U)&&Cx(U,e,String(t)),W(A,U,I.localize,x);if(B.match(TR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return U}).join("");return q}function IR(t){var e=t.match(jR);return e?e[1].replace(SR,"'"):t}function CR(t,e){Ze(2,arguments);var r=kt(t),n=kt(e);return r.getTime()<n.getTime()}function aa(t,e){var r;Ze(1,arguments);var n=un((r=void 0)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=DR(t),a;if(s.date){var o=$R(s.date,n);a=MR(o.restDateString,o.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var l=a.getTime(),u=0,d;if(s.time&&(u=OR(s.time),isNaN(u)))return new Date(NaN);if(s.timezone){if(d=LR(s.timezone),isNaN(d))return new Date(NaN)}else{var h=new Date(l+u),g=new Date(0);return g.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),g.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),g}return new Date(l+u+d)}var fc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},AR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,PR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,RR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function DR(t){var e={},r=t.split(fc.dateTimeDelimiter),n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],fc.timeZoneDelimiter.test(e.date)&&(e.date=t.split(fc.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){var s=fc.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function $R(t,e){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};var s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((n[1]||n[2]).length)}}function MR(t,e){if(e===null)return new Date(NaN);var r=t.match(AR);if(!r)return new Date(NaN);var n=!!r[4],s=Xi(r[1]),a=Xi(r[2])-1,o=Xi(r[3]),l=Xi(r[4]),u=Xi(r[5])-1;if(n)return zR(e,l,u)?VR(e,l,u):new Date(NaN);var d=new Date(0);return!UR(e,a,o)||!BR(e,s)?new Date(NaN):(d.setUTCFullYear(e,a,Math.max(s,o)),d)}function Xi(t){return t?parseInt(t):1}function OR(t){var e=t.match(PR);if(!e)return NaN;var r=ph(e[1]),n=ph(e[2]),s=ph(e[3]);return WR(r,n,s)?r*D2+n*R2+s*1e3:NaN}function ph(t){return t&&parseFloat(t.replace(",","."))||0}function LR(t){if(t==="Z")return 0;var e=t.match(RR);if(!e)return 0;var r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return HR(n,s)?r*(n*D2+s*R2):NaN}function VR(t,e,r){var n=new Date(0);n.setUTCFullYear(t,0,4);var s=n.getUTCDay()||7,a=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+a),n}var FR=[31,null,31,30,31,30,31,31,30,31,30,31];function F2(t){return t%400===0||t%4===0&&t%100!==0}function UR(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(FR[e]||(F2(t)?29:28))}function BR(t,e){return e>=1&&e<=(F2(t)?366:365)}function zR(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function WR(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function HR(t,e){return e>=0&&e<=59}function Ax(t,e,r){Ze(2,arguments);var n=yi(t,r),s=yi(e,r);return n.getTime()===s.getTime()}function Ji(t,e){if(t.one!==void 0&&e===1)return t.one;var r=e%10,n=e%100;return r===1&&n!==11?t.singularNominative.replace("{{count}}",String(e)):r>=2&&r<=4&&(n<10||n>20)?t.singularGenitive.replace("{{count}}",String(e)):t.pluralGenitive.replace("{{count}}",String(e))}function Jt(t){return function(e,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?t.future?Ji(t.future,e):" "+Ji(t.regular,e):t.past?Ji(t.past,e):Ji(t.regular,e)+" ":Ji(t.regular,e)}}var qR={lessThanXSeconds:Jt({regular:{one:" ",singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{one:",   ",singularNominative:",   {{count}} ",singularGenitive:",   {{count}} ",pluralGenitive:",   {{count}} "}}),xSeconds:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "},past:{singularNominative:"{{count}}  ",singularGenitive:"{{count}}  ",pluralGenitive:"{{count}}  "},future:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "}}),halfAMinute:function(e,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?" ":" ":""},lessThanXMinutes:Jt({regular:{one:" ",singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{one:",   ",singularNominative:",   {{count}} ",singularGenitive:",   {{count}} ",pluralGenitive:",   {{count}} "}}),xMinutes:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "},past:{singularNominative:"{{count}}  ",singularGenitive:"{{count}}  ",pluralGenitive:"{{count}}  "},future:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "}}),aboutXHours:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xHours:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),xDays:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),aboutXWeeks:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xWeeks:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),aboutXMonths:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xMonths:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),aboutXYears:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}}),xYears:Jt({regular:{singularNominative:"{{count}} ",singularGenitive:"{{count}} ",pluralGenitive:"{{count}} "}}),overXYears:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:",   {{count}} ",singularGenitive:",   {{count}} ",pluralGenitive:",   {{count}} "}}),almostXYears:Jt({regular:{singularNominative:" {{count}} ",singularGenitive:" {{count}} ",pluralGenitive:" {{count}} "},future:{singularNominative:"  {{count}} ",singularGenitive:"  {{count}} ",pluralGenitive:"  {{count}} "}})},GR=function(e,r,n){return qR[e](r,n)},KR={full:"EEEE, d MMMM y '.'",long:"d MMMM y '.'",medium:"d MMM y '.'",short:"dd.MM.y"},QR={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},YR={any:"{{date}}, {{time}}"},XR={date:Ya({formats:KR,defaultWidth:"full"}),time:Ya({formats:QR,defaultWidth:"full"}),dateTime:Ya({formats:YR,defaultWidth:"any"})},qg=["","","","","","",""];function JR(t){var e=qg[t];switch(t){case 0:return"'  "+e+" ' p";case 1:case 2:case 4:return"'  "+e+" ' p";case 3:case 5:case 6:return"'  "+e+" ' p"}}function Px(t){var e=qg[t];return t===2?"' "+e+" ' p":"' "+e+" ' p"}function ZR(t){var e=qg[t];switch(t){case 0:return"'  "+e+" ' p";case 1:case 2:case 4:return"'  "+e+" ' p";case 3:case 5:case 6:return"'  "+e+" ' p"}}var e3={lastWeek:function(e,r,n){var s=e.getUTCDay();return Ax(e,r,n)?Px(s):JR(s)},yesterday:"' ' p",today:"' ' p",tomorrow:"' ' p",nextWeek:function(e,r,n){var s=e.getUTCDay();return Ax(e,r,n)?Px(s):ZR(s)},other:"P"},t3=function(e,r,n,s){var a=e3[e];return typeof a=="function"?a(r,n,s):a},r3={narrow:[" ..",".."],abbreviated:[" . .",". ."],wide:["  "," "]},n3={narrow:["1","2","3","4"],abbreviated:["1- .","2- .","3- .","4- ."],wide:["1- ","2- ","3- ","4- "]},s3={narrow:["","","","","","","","","","","",""],abbreviated:[".",".","",".","","","",".",".",".",".","."],wide:["","","","","","","","","","","",""]},a3={narrow:["","","","","","","","","","","",""],abbreviated:[".",".",".",".","",".",".",".",".",".",".","."],wide:["","","","","","","","","","","",""]},i3={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},o3={narrow:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},abbreviated:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},l3={narrow:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},abbreviated:{am:"",pm:"",midnight:".",noon:".",morning:"",afternoon:"",evening:".",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},c3=function(e,r){var n=Number(e),s=r==null?void 0:r.unit,a;return s==="date"?a="-":s==="week"||s==="minute"||s==="second"?a="-":a="-",n+a},u3={ordinalNumber:c3,era:Qr({values:r3,defaultWidth:"wide"}),quarter:Qr({values:n3,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qr({values:s3,defaultWidth:"wide",formattingValues:a3,defaultFormattingWidth:"wide"}),day:Qr({values:i3,defaultWidth:"wide"}),dayPeriod:Qr({values:o3,defaultWidth:"any",formattingValues:l3,defaultFormattingWidth:"wide"})},d3=/^(\d+)(-?(||||||||||))?/i,h3=/\d+/i,f3={narrow:/^(( )?\.?\s?\.?)/i,abbreviated:/^(( )?\.?\s?\.?)/i,wide:/^(  | | )/i},m3={any:[/^/i,/^/i]},g3={narrow:/^[1234]/i,abbreviated:/^[1234](-?[]??)? .?/i,wide:/^[1234](-?[]??)? /i},p3={any:[/1/i,/2/i,/3/i,/4/i]},y3={narrow:/^[]/i,abbreviated:/^(||?||[]|[]?|[]?||?||?|)\.?/i,wide:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[]|[])/i},x3={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},v3={narrow:/^[]/i,short:/^(|||||||||||)\.?/i,abbreviated:/^(||||||||||||).?/i,wide:/^([]|?|?|[]|?|[]|[])/i},b3={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^[]/i,/^[]/i,/^/i,/^/i,/^/i,/^[]/i,/^[]/i]},w3={narrow:/^([]|\.?|\.?|[]|||\.?|[])/i,abbreviated:/^([]|\.?|\.?|[]|||\.?|[])/i,wide:/^([]|||[]|||?|[])/i},_3={any:{am:/^/i,pm:/^/i,midnight:/^/i,noon:/^/i,morning:/^/i,afternoon:/^[]/i,evening:/^/i,night:/^/i}},k3={ordinalNumber:L2({matchPattern:d3,parsePattern:h3,valueCallback:function(e){return parseInt(e,10)}}),era:Yr({matchPatterns:f3,defaultMatchWidth:"wide",parsePatterns:m3,defaultParseWidth:"any"}),quarter:Yr({matchPatterns:g3,defaultMatchWidth:"wide",parsePatterns:p3,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yr({matchPatterns:y3,defaultMatchWidth:"wide",parsePatterns:x3,defaultParseWidth:"any"}),day:Yr({matchPatterns:v3,defaultMatchWidth:"wide",parsePatterns:b3,defaultParseWidth:"any"}),dayPeriod:Yr({matchPatterns:w3,defaultMatchWidth:"wide",parsePatterns:_3,defaultParseWidth:"any"})},N3={code:"ru",formatDistance:GR,formatLong:XR,formatRelative:t3,localize:u3,match:k3,options:{weekStartsOn:1,firstWeekContainsDate:1}};const oe=(t,e="dd.MM.yyyy")=>{const r=typeof t=="string"?aa(t):t;return V2(r,e,{locale:N3})},_l=(t=new Date)=>{const e=kP(t,{weekStartsOn:1}),r=IP(t,{weekStartsOn:1});return{start:e,end:r}},Gg=(t=new Date)=>{const{start:e,end:r}=_l(t);return TP({start:e,end:r})},U2=t=>{const e=new Date,r=new Date(e);r.setHours(0,0,0,0),r.setDate(r.getDate()-(t-1));const n=new Date(e);return n.setHours(23,59,59,999),{start:r,end:n}},E3=(t,e)=>{const r=typeof t=="string"?aa(t):t,n=typeof e=="string"?aa(e):e;return EP(r,n)},fd=t=>t.reduce((e,r)=>{const[n,s]=r.start.split(":").map(Number),[a,o]=r.end.split(":").map(Number),l=n*60+s;let d=(a*60+o-l)/60;if((d<0||r.endDate)&&(d+=24),r.breaks&&r.breaks.length>0){const h=r.breaks.reduce((g,m)=>{const[b,k]=m.start.split(":").map(Number),[v,C]=m.end.split(":").map(Number),E=b*60+k;let N=(v*60+C-E)/60;return N<0&&(N+=24),g+N},0);d-=h}return e+d},0),ns=t=>{const[e,r]=t.split(":").map(Number);return e*60+r},B2=(t,e)=>{if(!t||!e)return[];const r=aa(t),n=aa(e);if(CR(n,r))return[];const s=[],a=new Date(r);for(;a<=n;)s.push(oe(a,"yyyy-MM-dd")),a.setDate(a.getDate()+1);return s},z2=t=>{const e=Array.from(new Set(t.filter(Boolean)));return e.sort(),e},j3=(t,e)=>{const r=ns(t.start),n=ns(t.end),s=ns(e.start),a=ns(e.end);return r<a&&n>s},Wf=()=>{const t=new Date,e=3*60,r=t.getTimezoneOffset();return new Date(t.getTime()+(e+r)*60*1e3)},Rx=(t,e=Wf())=>{const r=e.getHours(),n=new Date(`${V2(e,"yyyy-MM-dd")}T${t}:00`);return r>=21||e>n},S3=t=>{const e=Math.floor(t),r=Math.round((t-e)*60);return e===0&&r===0?"0":e===0?`${r}`:r===0?`${e}`:`${e} ${r}`},Xa=(t,e,r,n)=>{const s=t,a=e||t;if(a<r||s>n)return 0;const o=s>r?s:r,l=a<n?a:n,u=aa(o),h=aa(l).getTime()-u.getTime();return Math.floor(h/(1e3*60*60*24))+1},T3=({selectedUserId:t,slotFilter:e,onEditSlot:r,onEditStatus:n})=>{const{theme:s}=Ue(),{user:a}=Nt(),{isAdmin:o}=Yt(),[l,u]=P.useState([]),[d,h]=P.useState([]),[g,m]=P.useState(new Date),[b,k]=P.useState(!0),v=Gg(g),C=t?we.filter(S=>S.id===t):we;P.useEffect(()=>{E()},[t,g]),P.useEffect(()=>{const S=()=>{E()};return window.addEventListener("focus",S),()=>window.removeEventListener("focus",S)},[]);const E=async()=>{k(!0);try{const S=new Date(v[0]);S.setHours(0,0,0,0);const A=new Date(v[6]);A.setHours(23,59,59,999);const x=oe(S,"yyyy-MM-dd"),q=oe(A,"yyyy-MM-dd"),[U,B]=await Promise.all([Mn(),En()]),W=U.filter(H=>H.date>=x&&H.date<=q),F=B.filter(H=>{const $=H.date,te=H.endDate||H.date;return $<=q&&te>=x}),V=t?W.filter(H=>H.userId===t):W,D=t?F.filter(H=>H.userId===t):F;console.log("Loaded slots:",{weekStart:x,weekEnd:q,allSlotsCount:U.length,weekSlotsCount:W.length,filteredSlotsCount:V.length,selectedUserId:t}),u(V),h(D)}catch(S){console.error("Error loading data:",S)}finally{k(!1)}},y=async S=>{var A;if(!o&&(a==null?void 0:a.id)!==((A=l.find(x=>x.id===S))==null?void 0:A.userId)){alert("     ");return}confirm(" ?")&&(await Hg(S),E())},N=async S=>{var A;if(!o&&(a==null?void 0:a.id)!==((A=d.find(x=>x.id===S))==null?void 0:A.userId)){alert("     ");return}confirm(" ?")&&(await S2(S),E())},R=S=>{const A=new Date;A.setHours(0,0,0,0);const x=new Date(S.date);if(x.setHours(0,0,0,0),x>A)return!0;if(x.getTime()===A.getTime()){const U=new Date,B=U.getHours()*60+U.getMinutes();return S.slots.some(W=>{if(W.endDate){const H=new Date(W.endDate);if(H.setHours(0,0,0,0),new Date(A).setHours(23,59,59),H>A)return!0;if(H.getTime()===A.getTime()){const[te,ue]=W.end.split(":").map(Number);return te*60+ue>B}return!1}const[F,V]=W.end.split(":").map(Number);return F*60+V>B})}return S.slots.some(U=>{if(U.endDate){const B=new Date(U.endDate);return B.setHours(0,0,0,0),B>=A}return!1})},L=(S,A)=>{const x=l.find(q=>q.userId===S&&q.date===A)||null;if(x&&e!=="all"){const q=R(x);if(e==="upcoming"&&!q||e==="completed"&&q)return null}return x},M=(S,A)=>d.find(x=>x.userId!==S?!1:x.endDate?x.date<=A&&x.endDate>=A:x.date===A)||null,I=S=>{const x=l.filter(F=>F.userId===S).reduce((F,V)=>F+fd(V.slots),0),q=d.filter(F=>F.userId===S),U=q.filter(F=>F.type==="dayoff").length,B=q.filter(F=>F.type==="sick").length,W=q.filter(F=>F.type==="vacation").length;return{totalHours:x,daysOff:U,sickDays:B,vacationDays:W}},_=S=>{const A=new Date(g);S==="prev"?A.setDate(A.getDate()-7):A.setDate(A.getDate()+7),m(A)};if(b)return i.jsx("div",{className:`rounded-lg p-8 text-center ${s==="dark"?"bg-gray-800":"bg-white"}`,children:i.jsx("p",{className:s==="dark"?"text-gray-400":"text-gray-600",children:"..."})});const w=s==="dark"?"text-white":"text-gray-900",j=s==="dark"?"text-gray-300":"text-gray-600";return i.jsxs("div",{className:`rounded-lg ${s==="dark"?"bg-gray-800":"bg-white"} shadow-md overflow-hidden`,children:[i.jsxs("div",{className:`p-4 border-b ${s==="dark"?"border-gray-700":"border-gray-200"} flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between`,children:[i.jsx("button",{onClick:()=>_("prev"),className:"w-full sm:w-auto px-3 py-2 text-sm sm:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"  "}),i.jsxs("span",{className:`${w} font-semibold text-center text-sm sm:text-base`,children:[oe(v[0],"dd.MM.yyyy")," - ",oe(v[6],"dd.MM.yyyy")]}),i.jsx("button",{onClick:()=>_("next"),className:"w-full sm:w-auto px-3 py-2 text-sm sm:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"  "})]}),i.jsx("div",{className:"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6 lg:-mx-8 px-3 sm:px-4 md:px-6 lg:px-8",children:i.jsx("div",{className:"min-w-full inline-block align-middle",children:i.jsxs("table",{className:"w-full min-w-[640px]",children:[i.jsx("thead",{children:i.jsxs("tr",{className:`${s==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[i.jsx("th",{className:`px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 text-left text-xs sm:text-sm font-semibold ${w} sticky left-0 z-20 ${s==="dark"?"bg-gray-700":"bg-gray-100"}`,children:""}),v.map(S=>i.jsx("th",{className:`px-1.5 sm:px-2 md:px-3 lg:px-4 py-2 sm:py-2.5 md:py-3 text-center text-xs sm:text-sm font-semibold ${w} whitespace-nowrap`,children:i.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[i.jsx("span",{className:"text-[10px] sm:text-xs opacity-70",children:oe(S,"EEE")}),i.jsx("span",{children:oe(S,"dd.MM")})]})},S.toISOString())),i.jsx("th",{className:`px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 text-center text-xs sm:text-sm font-bold ${w} whitespace-nowrap`,children:""})]})}),i.jsx("tbody",{children:C.map((S,A)=>{const x=I(S.id),q=A%2===0;return i.jsxs("tr",{className:`
                    group border-b transition-all duration-300 relative
                    ${s==="dark"?"border-gray-700/30":"border-gray-200/30"}
                    ${q?s==="dark"?"bg-gradient-to-r from-gray-800/40 via-gray-800/20 to-transparent hover:from-gray-800/70 hover:via-gray-800/50 hover:shadow-lg hover:shadow-green-500/10":"bg-gradient-to-r from-gray-50/70 via-gray-50/40 to-transparent hover:from-gray-100/90 hover:via-gray-100/70 hover:shadow-lg hover:shadow-green-500/5":s==="dark"?"bg-gradient-to-r from-gray-800/10 via-gray-800/5 to-transparent hover:from-gray-800/50 hover:via-gray-800/30 hover:shadow-lg hover:shadow-green-500/10":"bg-gradient-to-r from-white via-gray-50/30 to-transparent hover:from-gray-50 hover:via-gray-50/60 hover:shadow-lg hover:shadow-green-500/5"}
                    hover:scale-[1.01] hover:-translate-y-0.5
                  `,children:[i.jsx("td",{className:`px-2 sm:px-3 md:px-4 py-2 sm:py-3 md:py-4 font-semibold text-xs sm:text-sm ${w} sticky left-0 z-10 transition-all duration-300 backdrop-blur-sm min-w-[140px] sm:min-w-[160px] ${q?s==="dark"?"bg-gradient-to-r from-gray-800/40 via-gray-800/20 to-transparent group-hover:from-gray-800/70 group-hover:via-gray-800/50":"bg-gradient-to-r from-gray-50/70 via-gray-50/40 to-transparent group-hover:from-gray-100/90 group-hover:via-gray-100/70":s==="dark"?"bg-gradient-to-r from-gray-800/10 via-gray-800/5 to-transparent group-hover:from-gray-800/50 group-hover:via-gray-800/30":"bg-gradient-to-r from-white via-gray-50/30 to-transparent group-hover:from-gray-50 group-hover:via-gray-50/60"}`,children:i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsxs("div",{className:"relative flex-shrink-0 group/avatar",children:[S.avatar?i.jsx("img",{src:S.avatar,alt:S.name,className:"w-8 h-8 sm:w-10 sm:h-10 md:w-11 md:h-11 rounded-full object-cover border-2 shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-green-500/30 ring-2 ring-transparent group-hover:ring-green-500/50",style:{borderColor:s==="dark"?"rgba(34, 197, 94, 0.6)":"rgba(34, 197, 94, 0.4)"},onError:U=>{const B=U.target;B.style.display="none";const W=B.nextElementSibling;W&&(W.style.display="flex")}}):null,i.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 md:w-11 md:h-11 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all duration-300 shadow-lg ring-2 ring-transparent group-hover/avatar:scale-110 group-hover/avatar:shadow-xl group-hover/avatar:ring-green-500/50 ${s==="dark"?"bg-gradient-to-br from-green-500 via-green-600 to-blue-500 text-white group-hover/avatar:shadow-green-500/40":"bg-gradient-to-br from-green-400 via-green-500 to-blue-400 text-white group-hover/avatar:shadow-green-400/40"} ${S.avatar?"absolute inset-0 hidden":""}`,children:S.name.charAt(0).toUpperCase()}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3.5 md:h-3.5 bg-green-500 rounded-full border border-white sm:border-2 shadow-lg animate-pulse opacity-0 group-hover/avatar:opacity-100 transition-opacity duration-300"})]}),i.jsx("span",{className:"font-semibold group-hover:text-green-500 transition-colors duration-300 truncate hidden sm:inline",children:S.name}),i.jsx("span",{className:"font-semibold group-hover:text-green-500 transition-colors duration-300 sm:hidden",children:(S.name.split(" ")[0]||S.name).substring(0,8)})]})}),v.map(U=>{const B=oe(U,"yyyy-MM-dd"),W=L(S.id,B),F=M(S.id,B);return i.jsx("td",{className:"px-1 sm:px-2 py-2 sm:py-3 text-center border-l border-r border-transparent hover:border-blue-500/20 transition-colors min-w-[80px] sm:min-w-[100px]",children:W?i.jsxs("div",{className:"space-y-2",children:[(()=>{const V=R(W),D=V?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-gray-500 to-gray-600",$=V?Zr:Km;return W.slots.map((te,ue)=>i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:`${D} text-white rounded-md sm:rounded-lg px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs font-semibold shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl ${V?"hover:shadow-blue-500/50 ring-2 ring-blue-400/30":"hover:shadow-gray-500/50 ring-2 ring-gray-400/30"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-0.5 sm:gap-1 flex-wrap",children:[i.jsx($,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 animate-pulse flex-shrink-0"}),i.jsxs("span",{className:"whitespace-nowrap",children:[te.start," - ",te.end]}),te.endDate&&i.jsxs("span",{className:"text-[9px] sm:text-[10px] opacity-90 whitespace-nowrap",children:["( ",oe(new Date(te.endDate),"dd.MM"),")"]})]})}),te.breaks&&te.breaks.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:`text-[10px] ${s==="dark"?"text-gray-400":"text-gray-600"} font-medium`,children:":"}),te.breaks.map((le,fe)=>i.jsx("div",{className:`${s==="dark"?"bg-gray-700/90":"bg-white"} ${s==="dark"?"text-gray-200":"text-gray-900"} border-2 ${s==="dark"?"border-orange-500/50":"border-orange-300"} rounded-md sm:rounded-lg px-1.5 sm:px-2 py-0.5 sm:py-1 text-[9px] sm:text-[10px] font-medium shadow-md transition-all duration-300 hover:scale-105 hover:shadow-lg ${s==="dark"?"hover:border-orange-400/70 hover:shadow-orange-500/20":"hover:border-orange-400 hover:shadow-orange-400/20"}`,children:i.jsxs("span",{className:"flex items-center gap-0.5 sm:gap-1 justify-center flex-wrap",children:[i.jsx("span",{className:"w-0.5 h-0.5 sm:w-1 sm:h-1 rounded-full bg-orange-500 flex-shrink-0"}),i.jsxs("span",{className:"whitespace-nowrap",children:[le.start," - ",le.end]})]})},fe))]})]},ue))})(),W.comment&&i.jsxs("div",{className:"flex items-center justify-center group relative",children:[i.jsx(yr,{className:"w-4 h-4 text-gray-400 cursor-help"}),i.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:W.comment})]}),i.jsx("div",{className:"flex gap-1 justify-center",children:o||(S==null?void 0:S.id)===W.userId?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>r(W),className:"p-1 text-blue-500 hover:bg-blue-500 hover:text-white rounded",children:i.jsx(Ir,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>y(W.id),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded",children:i.jsx(er,{className:"w-3 h-3"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:i.jsx(Ir,{className:"w-3 h-3"})}),i.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:i.jsx(er,{className:"w-3 h-3"})})]})})]}):F?i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:`text-white rounded px-2 py-1 text-xs ${F.type==="dayoff"?"bg-yellow-500":F.type==="sick"?"bg-purple-500":"bg-orange-500"}`,children:F.type==="dayoff"?"":F.type==="sick"?"":""}),F.comment&&i.jsxs("div",{className:"flex items-center justify-center group relative",children:[i.jsx(yr,{className:"w-4 h-4 text-gray-400 cursor-help"}),i.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:F.comment})]}),i.jsx("div",{className:"flex gap-1 justify-center",children:o||(S==null?void 0:S.id)===F.userId?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>n(F),className:"p-1 text-blue-500 hover:bg-blue-500 hover:text-white rounded",children:i.jsx(Ir,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>N(F.id),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded",children:i.jsx(er,{className:"w-3 h-3"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:i.jsx(Ir,{className:"w-3 h-3"})}),i.jsx("button",{disabled:!0,className:"p-1 text-gray-400 cursor-not-allowed rounded",title:"     ",children:i.jsx(er,{className:"w-3 h-3"})})]})})]}):i.jsx("span",{className:`text-sm ${j}`,children:""})},B)}),i.jsx("td",{className:`px-4 py-3 text-sm ${w}`,children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[": ",x.totalHours.toFixed(1)]}),i.jsxs("div",{children:[": ",x.daysOff]}),i.jsxs("div",{children:[": ",x.sickDays]}),i.jsxs("div",{children:[": ",x.vacationDays]})]})})]},S.id)})})]})})})]})},I3=({selectedUserId:t,slotFilter:e,onEditSlot:r,onEditStatus:n})=>{const{theme:s}=Ue(),{user:a}=Nt(),{isAdmin:o}=Yt(),[l,u]=P.useState([]),[d,h]=P.useState([]),[g,m]=P.useState(new Date),[b,k]=P.useState(!0),v=Gg(g);P.useEffect(()=>{C()},[t,g]),P.useEffect(()=>{const w=()=>{C()};return window.addEventListener("focus",w),()=>window.removeEventListener("focus",w)},[]);const C=async()=>{k(!0);try{const w=new Date(v[0]);w.setHours(0,0,0,0);const j=new Date(v[6]);j.setHours(23,59,59,999);const S=oe(w,"yyyy-MM-dd"),A=oe(j,"yyyy-MM-dd"),[x,q]=await Promise.all([Mn(),En()]),U=x.filter(V=>V.date>=S&&V.date<=A),B=q.filter(V=>{const D=V.date,H=V.endDate||V.date;return D<=A&&H>=S}),W=t?U.filter(V=>V.userId===t):U,F=t?B.filter(V=>V.userId===t):B;console.log("Loaded slots (week view):",{weekStart:S,weekEnd:A,allSlotsCount:x.length,weekSlotsCount:U.length,filteredSlotsCount:W.length,selectedUserId:t}),u(W),h(F)}catch(w){console.error("Error loading data:",w)}finally{k(!1)}},E=async w=>{var j;if(!o&&(a==null?void 0:a.id)!==((j=l.find(S=>S.id===w))==null?void 0:j.userId)){alert("     ");return}confirm(" ?")&&(await Hg(w),C())},y=async w=>{var j;if(!o&&(a==null?void 0:a.id)!==((j=d.find(S=>S.id===w))==null?void 0:j.userId)){alert("     ");return}confirm(" ?")&&(await S2(w),C())},N=w=>{const j=new Date;j.setHours(0,0,0,0);const S=new Date(w.date);if(S.setHours(0,0,0,0),S>j)return!0;if(S.getTime()===j.getTime()){const x=new Date,q=x.getHours()*60+x.getMinutes();return w.slots.some(U=>{if(U.endDate){const V=new Date(U.endDate);if(V.setHours(0,0,0,0),new Date(j).setHours(23,59,59),V>j)return!0;if(V.getTime()===j.getTime()){const[H,$]=U.end.split(":").map(Number);return H*60+$>q}return!1}const[B,W]=U.end.split(":").map(Number);return B*60+W>q})}return w.slots.some(x=>{if(x.endDate){const q=new Date(x.endDate);return q.setHours(0,0,0,0),q>=j}return!1})},R=w=>{let j=l.filter(S=>S.date===w);return e!=="all"&&(j=j.filter(S=>{const A=N(S);return e==="upcoming"?A:e==="completed"?!A:!0})),j},L=w=>d.filter(j=>j.endDate?j.date<=w&&j.endDate>=w:j.date===w),M=w=>{const j=new Date(g);w==="prev"?j.setDate(j.getDate()-7):j.setDate(j.getDate()+7),m(j)};if(b)return i.jsx("div",{className:`rounded-lg p-8 text-center ${s==="dark"?"bg-gray-800":"bg-white"}`,children:i.jsx("p",{className:s==="dark"?"text-gray-400":"text-gray-600",children:"..."})});const I=s==="dark"?"text-white":"text-gray-900",_=s==="dark"?"text-gray-400":"text-gray-600";return i.jsxs("div",{className:`rounded-lg ${s==="dark"?"bg-gray-800":"bg-white"} shadow-md overflow-hidden`,children:[i.jsxs("div",{className:`p-3 sm:p-4 border-b ${s==="dark"?"border-gray-700":"border-gray-200"} flex flex-col gap-2 sm:gap-3 sm:flex-row sm:items-center sm:justify-between`,children:[i.jsx("button",{onClick:()=>M("prev"),className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm md:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors touch-manipulation active:scale-95",children:"  "}),i.jsxs("span",{className:`${I} font-semibold text-center text-xs sm:text-sm md:text-base whitespace-nowrap`,children:[oe(v[0],"dd.MM.yyyy")," - ",oe(v[6],"dd.MM.yyyy")]}),i.jsx("button",{onClick:()=>M("next"),className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm md:text-base bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors touch-manipulation active:scale-95",children:"  "})]}),i.jsx("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:v.map(w=>{const j=oe(w,"yyyy-MM-dd"),S=R(j),A=L(j);return i.jsxs("div",{className:`rounded-lg p-4 ${s==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[i.jsx("h3",{className:`text-lg font-semibold mb-3 ${I}`,children:oe(w,"dd.MM.yyyy")}),i.jsxs("div",{className:"space-y-2",children:[A.map(x=>{const U=we.find(W=>W.id===x.userId)||we.find(W=>({artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"})[x.userId]===W.id),B=(U==null?void 0:U.name)||x.userId;return i.jsxs("div",{className:`group relative flex items-center justify-between p-4 rounded-xl shadow-xl border-2 transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl ${x.type==="dayoff"?"bg-gradient-to-r from-yellow-500 to-yellow-600 border-yellow-400/40 ring-2 ring-yellow-500/20 hover:ring-4 hover:ring-yellow-400/30":x.type==="sick"?"bg-gradient-to-r from-purple-500 to-purple-600 border-purple-400/40 ring-2 ring-purple-500/20 hover:ring-4 hover:ring-purple-400/30":"bg-gradient-to-r from-orange-500 to-orange-600 border-orange-400/40 ring-2 ring-orange-500/20 hover:ring-4 hover:ring-orange-400/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-white font-medium",children:B}),i.jsx("span",{className:"text-white text-sm",children:x.type==="dayoff"?"":x.type==="sick"?"":""}),x.comment&&i.jsxs("div",{className:"relative group",children:[i.jsx(yr,{className:"w-4 h-4 text-white cursor-help"}),i.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap",children:x.comment})]})]}),i.jsx("div",{className:"flex gap-2",children:o||(a==null?void 0:a.id)===x.userId?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>n(x),className:"p-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded transition-colors",children:i.jsx(Ir,{className:"w-4 h-4 text-white"})}),i.jsx("button",{onClick:()=>y(x.id),className:"p-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded transition-colors",children:i.jsx(er,{className:"w-4 h-4 text-white"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{disabled:!0,className:"p-1 bg-white bg-opacity-10 cursor-not-allowed rounded",title:"     ",children:i.jsx(Ir,{className:"w-4 h-4 text-white opacity-50"})}),i.jsx("button",{disabled:!0,className:"p-1 bg-white bg-opacity-10 cursor-not-allowed rounded",title:"     ",children:i.jsx(er,{className:"w-4 h-4 text-white opacity-50"})})]})})]},x.id)}),S.map(x=>{const U=we.find(D=>D.id===x.userId)||we.find(D=>({artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"})[x.userId]===D.id),B=(U==null?void 0:U.name)||x.userId,W=N(x),F=W?"bg-gradient-to-r from-blue-500 to-blue-600 border-blue-400/30":"bg-gradient-to-r from-gray-500 to-gray-600 border-gray-400/30",V=W?Zr:Km;return i.jsxs("div",{className:`group relative space-y-2 sm:space-y-3 p-3 sm:p-4 ${F} rounded-lg sm:rounded-xl shadow-xl border-2 transition-all duration-300 hover:shadow-2xl active:scale-[0.98] sm:hover:scale-[1.03] mb-2 sm:mb-3 ${W?"border-blue-400/40 hover:border-blue-300/60 ring-2 ring-blue-500/20 hover:ring-4 hover:ring-blue-400/30":"border-gray-400/30 hover:border-gray-300/50 ring-2 ring-gray-500/10 hover:ring-4 hover:ring-gray-400/20"}`,children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-white/20 pb-2 sm:pb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[i.jsxs("div",{className:"relative flex-shrink-0 group/avatar",children:[U!=null&&U.avatar?i.jsx("img",{src:U.avatar,alt:B,className:`w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 lg:w-11 lg:h-11 rounded-full object-cover border-2 shadow-xl transition-all duration-300 group-hover/avatar:scale-110 group-hover/avatar:shadow-2xl ${W?"border-white/50 ring-2 ring-white/40 ring-offset-2 ring-offset-blue-500/20 group-hover/avatar:ring-4 group-hover/avatar:ring-white/60":"border-white/40 ring-2 ring-white/30 ring-offset-2 ring-offset-gray-500/20 group-hover/avatar:ring-4 group-hover/avatar:ring-white/50"}`,onError:D=>{const H=D.target;H.style.display="none";const $=H.nextElementSibling;$&&($.style.display="flex")}}):null,i.jsx("div",{className:`w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 lg:w-11 lg:h-11 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all duration-300 shadow-xl group-hover/avatar:scale-110 group-hover/avatar:shadow-2xl ${W?"bg-white/25 backdrop-blur-md border-2 border-white/40 ring-2 ring-white/30 group-hover/avatar:ring-4 group-hover/avatar:ring-white/60":"bg-white/15 backdrop-blur-md border-2 border-white/30 ring-2 ring-white/20 group-hover/avatar:ring-4 group-hover/avatar:ring-white/50"} ${U!=null&&U.avatar?"absolute inset-0 hidden":""}`,children:B.charAt(0).toUpperCase()}),i.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3.5 md:h-3.5 rounded-full border border-white sm:border-2 shadow-lg animate-pulse opacity-0 group-hover/avatar:opacity-100 transition-opacity duration-300 ${W?"bg-blue-400":"bg-gray-400"}`})]}),i.jsx("span",{className:"text-white font-bold text-sm sm:text-base group-hover:scale-105 transition-transform duration-300 truncate",children:B})]}),i.jsx("div",{className:"flex gap-2",children:o||(a==null?void 0:a.id)===x.userId?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>r(x),className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:i.jsx(Ir,{className:"w-4 h-4 text-white"})}),i.jsx("button",{onClick:()=>E(x.id),className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:i.jsx(er,{className:"w-4 h-4 text-white"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{disabled:!0,className:"p-1.5 bg-white/10 cursor-not-allowed rounded-lg",title:"     ",children:i.jsx(Ir,{className:"w-4 h-4 text-white/50"})}),i.jsx("button",{disabled:!0,className:"p-1.5 bg-white/10 cursor-not-allowed rounded-lg",title:"     ",children:i.jsx(er,{className:"w-4 h-4 text-white/50"})})]})})]}),i.jsxs("div",{className:"space-y-2",children:[x.slots.map((D,H)=>i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("div",{className:`bg-white/25 backdrop-blur-md rounded-md sm:rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 border-2 transition-all duration-300 hover:scale-105 hover:shadow-xl ${W?"border-white/40 ring-2 ring-white/20 hover:border-white/60 hover:ring-4 hover:ring-white/40":"border-white/30 ring-2 ring-white/10 hover:border-white/50 hover:ring-4 hover:ring-white/30"}`,children:i.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[i.jsx(V,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 text-white flex-shrink-0 ${W?"animate-pulse":""}`}),i.jsxs("span",{className:"text-white font-bold text-xs sm:text-sm whitespace-nowrap",children:[D.start," - ",D.end]}),D.endDate&&i.jsxs("span",{className:"text-white/80 font-medium text-[10px] sm:text-xs whitespace-nowrap",children:["( ",oe(new Date(D.endDate),"dd.MM"),")"]})]})}),D.breaks&&D.breaks.length>0&&i.jsxs("div",{className:"space-y-1 ml-6",children:[i.jsx("div",{className:`text-[10px] ${s==="dark"?"text-gray-300":"text-gray-700"} font-medium`,children:":"}),D.breaks.map(($,te)=>i.jsx("div",{className:`${s==="dark"?"bg-gray-700/95":"bg-white"} ${s==="dark"?"text-gray-200":"text-gray-900"} border-2 ${s==="dark"?"border-orange-500/60":"border-orange-300"} rounded-md sm:rounded-lg px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs font-semibold shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl ${s==="dark"?"hover:border-orange-400/80 hover:shadow-orange-500/30 ring-2 ring-orange-500/20 hover:ring-4 hover:ring-orange-400/40":"hover:border-orange-400 hover:shadow-orange-400/30 ring-2 ring-orange-300/20 hover:ring-4 hover:ring-orange-300/40"}`,children:i.jsxs("span",{className:"flex items-center gap-1 sm:gap-1.5 justify-center flex-wrap",children:[i.jsx("span",{className:`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full ${s==="dark"?"bg-orange-400":"bg-orange-500"} animate-pulse flex-shrink-0`}),i.jsxs("span",{className:"whitespace-nowrap",children:[$.start," - ",$.end]})]})},te))]})]},H)),x.comment&&i.jsxs("div",{className:"relative group flex items-center gap-2 pt-2",children:[i.jsx(yr,{className:"w-4 h-4 text-white cursor-help"}),i.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap",children:x.comment})]})]})]},x.id)}),S.length===0&&A.length===0&&i.jsx("p",{className:`text-sm ${_}`,children:" "})]})]},j)})})]})},C3=({slot:t,onClose:e,onSave:r})=>{var Ri;const{user:n}=Nt(),{theme:s}=Ue(),{isAdmin:a}=Yt(),o=s==="dark"?"text-white":"text-gray-900",l=(t==null?void 0:t.date)||oe(new Date,"yyyy-MM-dd"),[u,d]=P.useState(l),[h,g]=P.useState(t!=null&&t.userId?[t.userId]:n!=null&&n.id?[n.id]:[]),[m,b]=P.useState(((Ri=t==null?void 0:t.slots)==null?void 0:Ri.map(Q=>{const ne=Q;return ne.break&&!ne.breaks?{...Q,breaks:[ne.break]}:Q}))||[]),[k,v]=P.useState(""),[C,E]=P.useState(""),[y,N]=P.useState(!1),[R,L]=P.useState(""),[M,I]=P.useState(""),[_,w]=P.useState(""),[j,S]=P.useState(null),[A,x]=P.useState(null),[q,U]=P.useState(null),[B,W]=P.useState((t==null?void 0:t.comment)||""),[F,V]=P.useState(!1),[D,H]=P.useState([]),[$,te]=P.useState(!1),[ue,le]=P.useState([]),[fe,J]=P.useState("single"),[X,G]=P.useState(l),[K,ke]=P.useState(l),[_e,se]=P.useState(l),[Ee,Ve]=P.useState([]),[gt,Ne]=P.useState(""),[xe,Xt]=P.useState(!1),it=["","","","","","",""],pt=a&&!t;P.useEffect(()=>{console.log("SlotForm mounted, user:",n==null?void 0:n.name,"slots count:",m.length)},[]),P.useEffect(()=>{if(F&&u){const Q=new Date(u),ne=Q.getDay()===0?6:Q.getDay()-1;H([ne])}},[F,u]),P.useEffect(()=>{fe!=="single"&&(V(!1),te(!1),H([]),le([]))},[fe]),P.useEffect(()=>{if(y&&u&&k&&C)if(k>=C){const Q=new Date(u);Q.setDate(Q.getDate()+1),L(oe(Q,"yyyy-MM-dd"))}else L("");else L("")},[y,u,k,C]);const Et=()=>{if(!k||!C){Ne("    ");return}const Q=y&&k>=C;if(!Q&&k>=C){Ne('      .  "  "  ,    .');return}let ne;if(Q&&u)if(R)ne=R;else{const ge=new Date(u);ge.setDate(ge.getDate()+1),ne=oe(ge,"yyyy-MM-dd")}const me={start:k,end:C,...ne&&{endDate:ne},breaks:[]};b([...m,me]),v(""),E(""),N(!1),L(""),I(""),w(""),S(null),Ne("")},je=Q=>{if(!M||!_){Ne("     ");return}const ne=m[Q];if(!ne)return;if(M>=_){Ne("       ");return}const me=ns(M),ge=ns(_),Te=ns(ne.start),ot=ns(ne.end),Mt=ne.endDate||ot<=Te;let St=!1;if(Mt){const vt=me>=Te&&me<1440&&ge>me&&ge<=1440&&ge>me,Cs=me>=0&&me<=ot&&ge>me&&ge<=ot,yd=me>=Te&&me<1440&&ge>0&&ge<=ot&&me>ge;St=vt||Cs||yd}else St=me>=Te&&ge<=ot&&ge>me;if(!St){Ne(`       (${ne.start} - ${ne.end})`);return}const xt=ne.breaks||[];for(let Ot=0;Ot<xt.length;Ot++){if(A===Q&&q===Ot)continue;const vt=xt[Ot];if(M>=vt.start&&M<vt.end||_>vt.start&&_<=vt.end||M<=vt.start&&_>=vt.end){Ne("   ");return}}let Nr;A===Q&&q!==null?(Nr=[...xt],Nr[q]={start:M,end:_},Nr.sort((Ot,vt)=>Ot.start.localeCompare(vt.start))):Nr=[...xt,{start:M,end:_}].sort((Ot,vt)=>Ot.start.localeCompare(vt.start));const et=[...m];et[Q]={...ne,breaks:Nr},b(et),I(""),w(""),S(null),x(null),U(null),Ne("")},Ge=(Q,ne)=>{const me=m[Q];if(!me||!me.breaks||!me.breaks[ne])return;const ge=me.breaks[ne];x(Q),U(ne),S(Q),I(ge.start),w(ge.end),Ne("")},ga=()=>{I(""),w(""),S(null),x(null),U(null),Ne("")},yt=(Q,ne)=>{const me=m[Q];if(!me||!me.breaks)return;const ge=me.breaks.filter((ot,Mt)=>Mt!==ne),Te=[...m];Te[Q]={...me,breaks:ge.length>0?ge:void 0},b(Te)},jt=Q=>{b(m.filter((ne,me)=>me!==Q))},pa=Q=>{D.includes(Q)?H(D.filter(ne=>ne!==Q)):H([...D,Q])},kl=Q=>{ue.includes(Q)?le(ue.filter(ne=>ne!==Q)):le([...ue,Q])},Nl=Q=>{g(ne=>ne.includes(Q)?ne.filter(me=>me!==Q):[...ne,Q])},md=()=>{h.length===we.length?g([]):g(we.map(Q=>Q.id))},Is=()=>{if(!_e)return;const Q=z2([...Ee,_e]);Ve(Q),se("")},El=Q=>{Ve(ne=>ne.filter(me=>me!==Q))},jl=()=>{if(pt){if(fe==="range")return B2(X,K);if(fe==="multiple")return Ee}return[u]},Ai=()=>t?[t.userId]:pt?h:a&&!n?h.length>0?h:[]:n!=null&&n.id?[n.id]:[],gd=Q=>{var ne;return((ne=we.find(me=>me.id===Q))==null?void 0:ne.name)||Q},pd=async(Q,ne)=>{const ge=(await Mn(void 0,Q)).filter(Te=>Te.id!==(t==null?void 0:t.id));for(const Te of ne)for(const ot of ge)if(j3(Te,ot.slots[0])&&ot.participants.length>=3)return` ${Te.start}-${Te.end}      (3)`;return null},Pi=async()=>{if(console.log("handleSave called"),!a&&!n){console.log("No user found"),Ne("  ");return}if(m.length===0){Ne("     ");return}if(t&&!a&&n&&t.userId!==n.id){Ne("     "),Xt(!1);return}const Q=Ai();if(Q.length===0){Ne("    ");return}const ne=jl();if(ne.length===0){Ne(" ");return}const me=async(ge,Te,ot=[ge])=>{const Mt=await pd(Te,m);if(Mt)throw new Error(`[${gd(ge)}  ${oe(new Date(Te),"dd.MM.yyyy")}] ${Mt}`);const St={userId:ge,date:Te,slots:m,...B&&{comment:B},participants:ot};t?await aP(t.id,St):await sP(St)};console.log("Starting save process..."),Ne(""),Xt(!0);try{if(t){await me(t.userId,u,t.participants||[t.userId]),r();return}if(F&&D.length>0){const ge=new Date(u),Te=ge.getMonth(),ot=ge.getFullYear(),Mt=new Date(ot,Te+1,0).getDate();for(let St=1;St<=Mt;St++){const xt=new Date(ot,Te,St),Nr=xt.getDay()===0?6:xt.getDay()-1;if(D.includes(Nr)){const et=oe(xt,"yyyy-MM-dd");for(const Ot of Q)await me(Ot,et)}}}else if($&&ue.length>0){const ge=new Date(u),Te=ge.getMonth(),ot=ge.getFullYear(),Mt=new Date(ot,Te+1,0).getDate();for(let St=1;St<=Mt;St++){const xt=new Date(ot,Te,St),Nr=xt.getDay()===0?6:xt.getDay()-1;if(ue.includes(Nr)){const et=oe(xt,"yyyy-MM-dd");for(const Ot of Q)await me(Ot,et)}}}else if(pt&&fe!=="single")for(const ge of ne)for(const Te of Q)await me(Te,ge);else for(const ge of Q)await me(ge,u);r()}catch(ge){console.error("Error saving slot:",ge);const Te=ge.message||ge.code||"  ";Ne(Te)}finally{Xt(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto touch-manipulation",children:i.jsx("div",{className:`w-full max-w-2xl rounded-lg sm:rounded-xl shadow-xl ${s==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto my-4 sm:my-8`,children:i.jsxs("div",{className:"p-4 sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[i.jsx("h3",{className:`text-lg sm:text-xl font-bold ${o} pr-2`,children:t?" ":" "}),i.jsx("button",{onClick:e,className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${s==="dark"?"hover:bg-gray-700 active:bg-gray-600":"hover:bg-gray-100 active:bg-gray-200"} transition-colors touch-manipulation`,"aria-label":"",children:i.jsx(wr,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[pt&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:we.map(Q=>i.jsxs("label",{className:`px-3 py-1.5 rounded-full border cursor-pointer text-sm flex items-center gap-2 ${h.includes(Q.id)?"bg-green-500 border-green-500 text-white":s==="dark"?"bg-gray-700 border-gray-600 text-gray-200":"bg-gray-100 border-gray-300 text-gray-700"}`,children:[i.jsx("input",{type:"checkbox",checked:h.includes(Q.id),onChange:()=>Nl(Q.id),className:"hidden"}),Q.name]},Q.id))}),i.jsx("button",{type:"button",onClick:md,className:"text-sm text-green-600 hover:text-green-700",children:h.length===we.length?" ":" "})]})]}),pt&&i.jsxs("div",{children:[i.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "}),i.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"single",label:" "},{value:"range",label:" "},{value:"multiple",label:" "}].map(Q=>i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"radio",value:Q.value,checked:fe===Q.value,onChange:ne=>J(ne.target.value)}),i.jsx("span",{className:s==="dark"?"text-gray-200":"text-gray-700",children:Q.label})]},Q.value))})]}),(!pt||fe==="single")&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("input",{type:"date",value:u,onChange:Q=>d(Q.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),pt&&fe==="range"&&i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsx("input",{type:"date",value:X,onChange:Q=>G(Q.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsx("input",{type:"date",value:K,min:X,onChange:Q=>ke(Q.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]})]}),pt&&fe==="multiple"&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"date",value:_e,onChange:Q=>se(Q.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`}),i.jsx("button",{type:"button",onClick:Is,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:""})]}),Ee.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:Ee.map(Q=>i.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(Q,"dd.MM.yyyy"),i.jsx("button",{type:"button",onClick:()=>El(Q),className:"text-red-500 hover:text-red-600",children:"x"})]},Q))}):i.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsxs("div",{className:"space-y-2 mb-2",children:[i.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:i.jsxs("div",{className:"flex gap-2 flex-1",children:[i.jsx("input",{type:"time",value:k,onChange:Q=>v(Q.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""}),i.jsx("span",{className:"mx-1 sm:mx-2 text-gray-500 text-sm sm:text-base flex items-center",children:""}),i.jsx("input",{type:"time",value:C,onChange:Q=>E(Q.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"crossMidnight",checked:y,onChange:Q=>{N(Q.target.checked),Q.target.checked||L("")},className:`w-4 h-4 rounded border-2 ${s==="dark"?"border-gray-600 bg-gray-700 checked:bg-green-500 checked:border-green-500":"border-gray-300 bg-white checked:bg-green-500 checked:border-green-500"} focus:ring-2 focus:ring-green-500 cursor-pointer touch-manipulation`}),i.jsx("label",{htmlFor:"crossMidnight",className:`text-xs sm:text-sm font-medium cursor-pointer ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"   (  )"})]}),y&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-1 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"  (:    )"}),i.jsx("input",{type:"date",value:R,onChange:Q=>L(Q.target.value),min:u,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`}),R&&i.jsxs("p",{className:`mt-1 text-xs ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:[": ",u," ",k,"  ",R," ",C]})]}),i.jsxs("button",{onClick:Et,className:"w-full px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(oi,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-3",children:m.map((Q,ne)=>i.jsxs("div",{className:`flex flex-col gap-2 p-3 rounded-lg ${s==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsxs("span",{className:o,children:[Q.start," - ",Q.end]}),Q.endDate&&i.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${s==="dark"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700 border border-blue-300"}`,children:[" ",oe(new Date(Q.endDate),"dd.MM.yyyy")]})]}),i.jsx("button",{onClick:()=>jt(ne),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors flex-shrink-0",title:" ",children:i.jsx(er,{className:"w-4 h-4"})})]}),Q.breaks&&Q.breaks.length>0&&i.jsxs("div",{className:"ml-4 space-y-1",children:[i.jsx("span",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:":"}),Q.breaks.map((me,ge)=>A===ne&&q===ge?null:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("span",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:[me.start," - ",me.end]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>Ge(ne,ge),className:"p-1 text-blue-400 hover:bg-blue-400 hover:text-white rounded transition-colors",title:" ",children:i.jsx(Ir,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>yt(ne,ge),className:"p-1 text-red-400 hover:bg-red-400 hover:text-white rounded transition-colors",title:" ",children:i.jsx(wr,{className:"w-3 h-3"})})]})]},ge))]}),i.jsx("div",{className:"ml-4 space-y-2 border-t pt-2 border-gray-500 border-opacity-30",children:j===ne?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"time",value:M,onChange:me=>I(me.target.value),className:`flex-1 px-3 py-1.5 text-sm rounded-lg border ${s==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""}),i.jsx("input",{type:"time",value:_,onChange:me=>w(me.target.value),className:`flex-1 px-3 py-1.5 text-sm rounded-lg border ${s==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:""})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>je(ne),className:"flex-1 px-3 py-1.5 text-sm bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:A===ne&&q!==null?"":" "}),i.jsx("button",{onClick:ga,className:"px-3 py-1.5 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors",children:""})]})]}):i.jsxs("button",{onClick:()=>{S(ne),I(""),w(""),x(null),U(null),Ne("")},className:"w-full px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center gap-1",children:[i.jsx(oi,{className:"w-3 h-3"})," "]})})]},ne))}),m.length>0&&i.jsxs("p",{className:`text-sm mt-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[" : ",fd(m).toFixed(1)]})]}),(!pt||fe==="single")&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:F,onChange:Q=>{if(Q.target.checked&&$){Ne("    ");return}V(Q.target.checked),Ne("")},className:"w-4 h-4"}),i.jsx("span",{className:`${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"     "})]}),F&&i.jsxs("div",{className:"ml-6",children:[i.jsx("p",{className:`text-sm mb-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"  :"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:it.map((Q,ne)=>i.jsx("button",{onClick:()=>pa(ne),className:`px-3 py-1 rounded-lg transition-colors ${D.includes(ne)?"bg-green-500 text-white":s==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:Q},ne))})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:$,onChange:Q=>{if(Q.target.checked&&F){Ne("    ");return}te(Q.target.checked),Ne("")},className:"w-4 h-4"}),i.jsx("span",{className:`${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"      "})]}),$&&i.jsxs("div",{className:"ml-6",children:[i.jsx("p",{className:`text-sm mb-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"  :"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:it.map((Q,ne)=>i.jsx("button",{onClick:()=>kl(ne),className:`px-3 py-1 rounded-lg transition-colors ${ue.includes(ne)?"bg-green-500 text-white":s==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:Q},ne))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("textarea",{value:B,onChange:Q=>W(Q.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"  ()"})]}),gt&&i.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:gt}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[i.jsx("button",{onClick:Q=>{console.log("Save button clicked!",{loading:xe,slotsCount:m.length,disabled:xe||m.length===0}),Q.preventDefault(),Pi()},disabled:xe||m.length===0,className:"flex-1 px-4 py-2.5 sm:py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100",children:xe?"...":""}),i.jsx("button",{onClick:e,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${s==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:""})]})]})]})})})},A3=({type:t,status:e,onClose:r,onSave:n})=>{const{user:s}=Nt(),{theme:a}=Ue(),{isAdmin:o}=Yt(),l=a==="dark"?"text-white":"text-gray-900",u=(e==null?void 0:e.date)||oe(new Date,"yyyy-MM-dd"),[d,h]=P.useState(e!=null&&e.userId?[e.userId]:s!=null&&s.id?[s.id]:[]),[g,m]=P.useState(u),[b,k]=P.useState((e==null?void 0:e.endDate)||u),[v,C]=P.useState(!!(e!=null&&e.endDate)),[E,y]=P.useState((e==null?void 0:e.comment)||""),[N,R]=P.useState(""),[L,M]=P.useState(!1),[I,_]=P.useState("single"),[w,j]=P.useState(u),[S,A]=P.useState(u),[x,q]=P.useState(u),[U,B]=P.useState([]),W=o&&!e;P.useEffect(()=>{v||k(g)},[v,g]),P.useEffect(()=>{W&&I!=="single"&&C(!1)},[W,I]);const F=G=>{h(K=>K.includes(G)?K.filter(ke=>ke!==G):[...K,G])},V=()=>{d.length===we.length?h([]):h(we.map(G=>G.id))},D=()=>{if(!x)return;const G=z2([...U,x]);B(G),q("")},H=G=>{B(K=>K.filter(ke=>ke!==G))},$=()=>e?[e.userId]:W?d:o&&!s?d.length>0?d:[]:s!=null&&s.id?[s.id]:[],te=G=>{var K;return((K=we.find(ke=>ke.id===G))==null?void 0:K.name)||G},ue=()=>{if(W){if(I==="range")return t==="dayoff"?B2(w,S).map(K=>({date:K})):w&&S?[{date:w,endDate:S}]:[];if(I==="multiple")return t==="dayoff"?U.map(K=>({date:K})):U.map(K=>({date:K,endDate:K}))}const G={date:g};return t!=="dayoff"&&(v||e!=null&&e.endDate)&&(G.endDate=b),[G]},le=async(G,K,ke)=>{if(!o&&!s)return"  ";const _e=new Date,se=new Date(K),Ee=new Date(ke||K);if(t==="dayoff"&&E3(se,_e))return"    .     .";if(t==="sick"){const Ve=new Date;Ve.setHours(0,0,0,0);const gt=new Date(Ve);gt.setDate(gt.getDate()+2);const Ne=new Date(K);if(Ne.setHours(0,0,0,0),Ne<Ve||Ne>gt)return"        + 2 .   .";const xe=Math.ceil((Ee.getTime()-se.getTime())/(1e3*60*60*24))+1;if(xe<1)return"     1 ";if(xe>14)return"     14    ";const Xt=new Date(se.getFullYear(),se.getMonth(),1),it=new Date(se.getFullYear(),se.getMonth()+1,0);if((await En(G)).filter(je=>je.type==="sick"&&je.date>=oe(Xt,"yyyy-MM-dd")&&je.date<=oe(it,"yyyy-MM-dd")).length+xe>14)return"  14   "}if(t==="vacation"){if(Math.ceil((Ee.getTime()-se.getTime())/864e5)+1>14)return"     14   ";const gt=new Date(se.getFullYear(),0,1),Ne=new Date(se.getFullYear(),11,31);if((await En(G)).filter(it=>it.type==="vacation"&&it.date>=oe(gt,"yyyy-MM-dd")&&it.date<=oe(Ne,"yyyy-MM-dd")).length>=6)return"  6   "}if(t==="dayoff"){const Ve=new Date(se);Ve.setDate(Ve.getDate()-Ve.getDay()+1);const gt=new Date(Ve);gt.setDate(Ve.getDate()+6);let xe=(await En(G)).filter(Et=>Et.type==="dayoff"&&Et.date>=oe(Ve,"yyyy-MM-dd")&&Et.date<=oe(gt,"yyyy-MM-dd"));if(e&&(xe=xe.filter(Et=>Et.id!==e.id)),xe.length>=2)return"     2 ";const it=(await En()).filter(Et=>Et.type==="dayoff"&&Et.date===K),pt=new Set(it.map(Et=>Et.userId));if(e&&e.type==="dayoff"&&e.date===K&&pt.delete(e.userId),pt.size>=3)return"        (3 ).   ."}return null},fe=async()=>{if(console.log("handleSave called (DayStatusForm)"),!o&&!s){console.log("No user found"),R("  ");return}if(e&&!o&&s&&e.userId!==s.id){R("     "),M(!1);return}const G=$();if(G.length===0){R("    ");return}const K=ue();if(K.length===0){R(" ");return}const ke=async(_e,se)=>{const Ee=await le(_e,se.date,se.endDate);if(Ee)throw new Error(`[${te(_e)}  ${oe(se.date,"dd.MM.yyyy")}] ${Ee}`);const Ve={userId:_e,date:se.date,type:t,...se.endDate&&{endDate:se.endDate},...E&&{comment:E}};e?await oP(e.id,Ve):await iP(Ve)};console.log("Starting save process..."),R(""),M(!0);try{if(e){const _e={date:g};t!=="dayoff"&&(v||e.endDate)&&(_e.endDate=b),await ke(e.userId,_e),n();return}for(const _e of G)for(const se of K)await ke(_e,se);n()}catch(_e){console.error("Error saving day status:",_e);const se=_e.message||_e.code||"  ";R(se)}finally{M(!1)}},J={dayoff:"",sick:"",vacation:""},X={dayoff:"bg-yellow-500",sick:"bg-purple-500",vacation:"bg-orange-500"};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto touch-manipulation",children:i.jsx("div",{className:`w-full max-w-md rounded-lg sm:rounded-xl shadow-xl ${a==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto my-4 sm:my-8`,children:i.jsxs("div",{className:"p-4 sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[i.jsxs("h3",{className:`text-lg sm:text-xl font-bold ${l} pr-2`,children:[e?"":""," ",J[t]]}),i.jsx("button",{onClick:r,className:`p-2 rounded-lg ${a==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:i.jsx(wr,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[W&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:we.map(G=>i.jsxs("label",{className:`px-3 py-1.5 rounded-full border cursor-pointer text-sm flex items-center gap-2 ${d.includes(G.id)?"bg-green-500 border-green-500 text-white":a==="dark"?"bg-gray-700 border-gray-600 text-gray-200":"bg-gray-100 border-gray-300 text-gray-700"}`,children:[i.jsx("input",{type:"checkbox",checked:d.includes(G.id),onChange:()=>F(G.id),className:"hidden"}),G.name]},G.id))}),i.jsx("button",{type:"button",onClick:V,className:"text-sm text-green-600 hover:text-green-700",children:d.length===we.length?" ":" "})]})]}),W&&i.jsxs("div",{children:[i.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "}),i.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"single",label:" "},{value:"range",label:t==="dayoff"?" ( )":" "},{value:"multiple",label:" "}].map(G=>i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"radio",value:G.value,checked:I===G.value,onChange:K=>_(K.target.value)}),i.jsx("span",{className:a==="dark"?"text-gray-200":"text-gray-700",children:G.label})]},G.value))})]}),(!W||I==="single")&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsx("input",{type:"date",value:g,onChange:G=>m(G.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),W&&I==="range"&&i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("input",{type:"date",value:w,onChange:G=>j(G.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("input",{type:"date",value:S,min:w,onChange:G=>A(G.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]})]}),W&&I==="multiple"&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"date",value:x,onChange:G=>q(G.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`}),i.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:""})]}),U.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(G=>i.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(G,"dd.MM.yyyy"),i.jsx("button",{type:"button",onClick:()=>H(G),className:"text-red-500 hover:text-red-600",children:"x"})]},G))}):i.jsx("p",{className:"text-sm text-gray-500",children:"     "})]})]}),(t==="sick"||t==="vacation")&&(!W||I==="single")&&i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:G=>C(G.target.checked),className:"w-4 h-4"}),i.jsx("span",{className:`${a==="dark"?"text-gray-300":"text-gray-700"}`,children:" "})]}),v&&i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsx("input",{type:"date",value:b,onChange:G=>k(G.target.value),min:g,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("textarea",{value:E,onChange:G=>y(G.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"  ()"})]}),N&&i.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:N}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[i.jsx("button",{onClick:fe,disabled:L,className:`flex-1 px-4 py-2.5 sm:py-2 ${X[t]} hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100`,children:L?"...":""}),i.jsx("button",{onClick:r,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${a==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:""})]})]})]})})})},P3=({onClose:t,onSave:e})=>{const{user:r}=Nt(),{theme:n}=Ue(),{isAdmin:s}=Yt(),a=n==="dark"?"text-white":"text-gray-900",[o,l]=P.useState(s?[]:r!=null&&r.id?[r.id]:[]),[u,d]=P.useState(!1),[h,g]=P.useState(!1),[m,b]=P.useState(!1),[k,v]=P.useState(null),[C,E]=P.useState([]),[y,N]=P.useState(""),[R,L]=P.useState(""),[M,I]=P.useState(""),[_,w]=P.useState(""),[j,S]=P.useState(!1),A=["","","","","","",""],x=D=>{if(D){if(h||m){w("    ,   ");return}d(!0),w("")}else d(!1),v(null)},q=D=>{if(D){if(u||m){w("    ,   ");return}g(!0),w("")}else g(!1),E([]),N("")},U=D=>{if(D){if(u||h){w("    ,   ");return}b(!0),w("")}else b(!1),L(""),I("")},B=D=>{o.includes(D)?l(o.filter(H=>H!==D)):l([...o,D])},W=()=>{if(!y){w(" ");return}if(C.includes(y)){w("   ");return}E([...C,y].sort()),N(""),w("")},F=D=>{E(C.filter(H=>H!==D))},V=async()=>{var H;if(!s&&!r){w("  ");return}const D=s?o:r?[r.id]:[];if(D.length===0){w("    ");return}if(!u&&!h&&!m){w("   ");return}if(u&&k===null){w("  ");return}if(h&&C.length===0){w("    ");return}if(m){if(!R||!M){w("     ");return}if(R>M){w("     ");return}}w(""),S(!0);try{const $=D.map(X=>Mn(X)),ue=(await Promise.all($)).flat();let le=[];if(u?le=ue.filter(X=>{const G=new Date(X.date+"T00:00:00");return(G.getDay()===0?6:G.getDay()-1)===k}).map(X=>X.id):h?le=ue.filter(X=>C.includes(X.date)).map(X=>X.id):m&&(le=ue.filter(X=>X.date>=R&&X.date<=M).map(X=>X.id)),le.length===0){w("    "),S(!1);return}const fe=D.length>1?`${D.length} `:((H=we.find(X=>X.id===D[0]))==null?void 0:H.name)||"",J=u?`   ${fe}  ${A[k]}? (${le.length} )`:m?`   ${fe}  ${oe(R,"dd.MM.yyyy")}  ${oe(M,"dd.MM.yyyy")}? (${le.length} )`:`  ${fe}   ? (${le.length} )`;if(!confirm(J)){S(!1);return}await Promise.all(le.map(X=>Hg(X))),e()}catch($){console.error("Error deleting slots:",$);const te=$.message||$.code||"   ";w(te)}finally{S(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-4 sm:py-0 overflow-y-auto",children:i.jsx("div",{className:`w-full max-w-2xl rounded-lg shadow-xl ${n==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto`,children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:`text-xl font-bold ${a}`,children:" "}),i.jsx("button",{onClick:t,className:`p-2 rounded-lg ${n==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:i.jsx(wr,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[s&&i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:[" ",o.length>0&&`(${o.length} )`]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:we.map(D=>{const H=o.includes(D.id);return i.jsx("button",{onClick:()=>B(D.id),className:`px-3 py-1.5 rounded-lg transition-colors ${H?"bg-red-500 text-white":n==="dark"?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:D.name},D.id)})})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:u,onChange:D=>x(D.target.checked),className:"w-4 h-4"}),i.jsx("span",{className:`${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"   "})]}),u&&i.jsxs("div",{className:"ml-6",children:[i.jsx("p",{className:`text-sm mb-2 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"  :"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:A.map((D,H)=>i.jsx("button",{onClick:()=>v(H),className:`px-3 py-1 rounded-lg transition-colors ${k===H?"bg-red-500 text-white":n==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:D},H))})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:h,onChange:D=>q(D.target.checked),className:"w-4 h-4"}),i.jsx("span",{className:`${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"   "})]}),h&&i.jsxs("div",{className:"ml-6 space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"date",value:y,onChange:D=>N(D.target.value),className:`flex-1 px-4 py-2 rounded-lg border ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`}),i.jsx("button",{onClick:W,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:""})]}),C.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:["  (",C.length,"):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(D=>i.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ${n==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[i.jsx("span",{className:a,children:oe(D,"dd.MM.yyyy")}),i.jsx("button",{onClick:()=>F(D),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors",children:i.jsx(wr,{className:"w-3 h-3"})})]},D))})]})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:m,onChange:D=>U(D.target.checked),className:"w-4 h-4"}),i.jsx("span",{className:`${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"   "})]}),m&&i.jsxs("div",{className:"ml-6 space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:`block text-xs mb-1 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:" "}),i.jsx("input",{type:"date",value:R,onChange:D=>L(D.target.value),className:`w-full px-4 py-2 rounded-lg border ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:`block text-xs mb-1 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:" "}),i.jsx("input",{type:"date",value:M,onChange:D=>I(D.target.value),min:R,className:`w-full px-4 py-2 rounded-lg border ${n==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`})]})]}),R&&M&&i.jsxs("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:[" :  ",oe(R,"dd.MM.yyyy"),"  ",oe(M,"dd.MM.yyyy")]})]}),_&&i.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:_}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:V,disabled:j||!u&&!h&&!m,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(er,{className:"w-4 h-4"}),j?"...":" "]}),i.jsx("button",{onClick:t,className:`px-4 py-2 rounded-lg transition-colors ${n==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:""})]})]})]})})})},R3=()=>{const{theme:t}=Ue(),[e,r]=P.useState("table"),[n,s]=P.useState("all"),[a,o]=P.useState(!1),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[g,m]=P.useState(null),[b,k]=P.useState(null),[v,C]=P.useState(null),[E,y]=P.useState(null),[N,R]=P.useState({slotsThisWeek:0,activeMembers:0,upcomingSlots:0,completedSlots:0}),[L,M]=P.useState(!1);P.useEffect(()=>{_()},[]),P.useEffect(()=>{const D=window.matchMedia("(max-width: 1023px)"),H=te=>{M(te.matches)};H(D);const $=te=>H(te);return D.addEventListener("change",$),()=>D.removeEventListener("change",$)},[]),P.useEffect(()=>{L&&e==="table"&&r("week")},[L,e]);const I=D=>{const H=new Date;H.setHours(0,0,0,0);const $=new Date(D.date);if($.setHours(0,0,0,0),$>H)return!0;if($.getTime()===H.getTime()){const ue=new Date,le=ue.getHours()*60+ue.getMinutes();return D.slots.some(fe=>{if(fe.endDate){const K=new Date(fe.endDate);if(K.setHours(0,0,0,0),K>H)return!0;if(K.getTime()===H.getTime()){const[ke,_e]=fe.end.split(":").map(Number);return ke*60+_e>le}return!1}const[J,X]=fe.end.split(":").map(Number);return J*60+X>le})}return D.slots.some(ue=>{if(ue.endDate){const le=new Date(ue.endDate);return le.setHours(0,0,0,0),le>=H}return!1})},_=async()=>{try{const D=Gg(new Date),H=oe(D[0],"yyyy-MM-dd"),$=oe(D[6],"yyyy-MM-dd"),[te,ue]=await Promise.all([Mn(),En()]),le=te.filter(G=>G.date>=H&&G.date<=$),fe=new Set([...le.map(G=>G.userId),...ue.map(G=>G.userId)]),J=le.filter(I).length,X=le.length-J;R({slotsThisWeek:le.length,activeMembers:fe.size,upcomingSlots:J,completedSlots:X})}catch(D){console.error("Error loading stats:",D)}},w=()=>{C(null),o(!0)},j=D=>{C(D),o(!0)},S=D=>{m(D),y(null),h(!0)},A=D=>{y(D),m(D.type),h(!0)},x=()=>{u(!0)},q=()=>{o(!1),u(!1),h(!1),m(null),C(null),y(null),setTimeout(()=>{window.location.reload()},500)},U=t==="dark"?"bg-gray-800":"bg-white",B=t==="dark"?"text-white":"text-gray-900",W=t==="dark"?"text-gray-300":"text-gray-700",F=`rounded-xl sm:rounded-2xl p-4 sm:p-5 border ${t==="dark"?"bg-gray-900/40 border-gray-700 shadow-[0_20px_60px_rgba(0,0,0,0.5)]":"bg-white border-gray-200 shadow-[0_20px_60px_rgba(15,23,42,0.08)]"}`,V=D=>{if(D==="table"&&L){alert("     . ,  .");return}r(D)};return i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 ${U} shadow-lg border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 to-gray-800/90":"border-blue-200 bg-gradient-to-br from-white to-blue-50/30"}`,children:[i.jsxs("div",{className:"relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-green-500/10 to-yellow-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4 mb-4 sm:mb-6",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:i.jsx(sc,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-2",children:[i.jsx("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold bg-gradient-to-r ${t==="dark"?"from-blue-400 via-purple-400 to-pink-400 text-transparent bg-clip-text":"from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text"}`,children:" "}),i.jsx(xr,{className:`w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]}),i.jsxs("p",{className:`${W} text-sm sm:text-base font-medium hidden sm:flex flex-wrap items-center gap-2`,children:[i.jsx(uw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0"}),i.jsx("span",{children:"      ApeVault"})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-green-500/20":"bg-green-100"}`,children:i.jsx(Js,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-xs sm:text-sm ${W} truncate`,children:" "}),i.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-green-400":"text-green-600"}`,children:N.slotsThisWeek})]})]})}),i.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:i.jsx(Zr,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-xs sm:text-sm ${W} truncate`,children:""}),i.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:N.upcomingSlots})]})]})}),i.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-gray-500/10 border-gray-500/30":"bg-gray-50 border-gray-200"}`,children:i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-gray-500/20":"bg-gray-100"}`,children:i.jsx(sc,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-gray-400":"text-gray-600"}`})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-xs sm:text-sm ${W} truncate`,children:""}),i.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:N.completedSlots})]})]})}),i.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${t==="dark"?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${t==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:i.jsx(Ar,{className:`w-4 h-4 sm:w-5 sm:h-5 ${t==="dark"?"text-purple-400":"text-purple-600"}`})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-xs sm:text-sm ${W} truncate`,children:" "}),i.jsx("p",{className:`text-xl sm:text-2xl font-bold ${t==="dark"?"text-purple-400":"text-purple-600"}`,children:N.activeMembers})]})]})})]}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[i.jsxs("h2",{className:`text-base sm:text-lg font-bold ${B} flex items-center gap-2`,children:[i.jsx(sc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0"}),i.jsx("span",{children:" :"})]}),i.jsx("div",{className:"flex justify-start",children:i.jsxs("div",{className:`inline-flex flex-col sm:flex-row flex-wrap rounded-lg sm:rounded-xl p-1 sm:p-1.5 shadow-lg gap-1 ${t==="dark"?"bg-gray-700/50 border-2 border-gray-600":"bg-gray-200/50 border-2 border-gray-300"}`,children:[i.jsxs("button",{onClick:()=>s("all"),className:`px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 rounded-lg transition-all duration-300 text-xs sm:text-sm font-semibold flex items-center justify-center gap-1.5 sm:gap-2 relative touch-manipulation active:scale-95 ${n==="all"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white hover:scale-105":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 hover:scale-105"}`,children:[i.jsx(Zr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:""}),n==="all"&&i.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-green-400 rounded-full animate-pulse"})]}),i.jsxs("button",{onClick:()=>s("upcoming"),className:`px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 rounded-lg transition-all duration-300 text-xs sm:text-sm font-semibold flex items-center justify-center gap-1.5 sm:gap-2 relative touch-manipulation active:scale-95 ${n==="upcoming"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white hover:scale-105":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 hover:scale-105"}`,children:[i.jsx(Js,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:""}),n==="upcoming"&&i.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-blue-400 rounded-full animate-pulse"})]}),i.jsxs("button",{onClick:()=>s("completed"),className:`px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 rounded-lg transition-all duration-300 text-xs sm:text-sm font-semibold flex items-center justify-center gap-1.5 sm:gap-2 relative touch-manipulation active:scale-95 ${n==="completed"?"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white hover:scale-105":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 hover:scale-105"}`,children:[i.jsx(sc,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:""}),n==="completed"&&i.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-gray-400 rounded-full animate-pulse"})]})]})})]}),i.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[i.jsx("h2",{className:`text-base sm:text-lg md:text-xl font-semibold ${B}`,children:" "}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-2 sm:gap-3 w-full",children:[i.jsxs("div",{className:`flex rounded-lg sm:rounded-xl p-1 sm:p-1.5 w-full sm:w-auto shadow-inner ${t==="dark"?"bg-gray-700/50 border border-gray-600":"bg-gray-200/50 border border-gray-300"}`,children:[i.jsxs("button",{onClick:()=>V("table"),"aria-disabled":L,className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium touch-manipulation ${e==="table"&&!L?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/50 scale-105":L?"bg-gray-200/60 text-gray-400 cursor-not-allowed":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white active:scale-95":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 active:scale-95"}`,children:[i.jsx(iy,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:""})]}),i.jsxs("button",{onClick:()=>V("week"),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium touch-manipulation active:scale-95 ${e==="week"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/50 scale-105":t==="dark"?"text-gray-300 hover:bg-gray-600/50 hover:text-white":"text-gray-700 hover:bg-gray-300 hover:text-gray-900"}`,children:[i.jsx(Zr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:""})]})]}),i.jsxs("button",{onClick:w,className:"w-full sm:flex-1 sm:w-auto px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium shadow-lg shadow-green-500/30 hover:shadow-green-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation",children:[i.jsx(oi,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:" "})]}),i.jsxs("button",{onClick:x,className:"w-full sm:flex-1 sm:w-auto px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 font-medium shadow-lg shadow-red-500/30 hover:shadow-red-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation",children:[i.jsx(er,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:" "})]}),i.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:flex-1",children:[i.jsx("button",{onClick:()=>S("dayoff"),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 font-medium shadow-lg shadow-yellow-500/30 hover:shadow-yellow-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation whitespace-nowrap",children:""}),i.jsx("button",{onClick:()=>S("sick"),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 font-medium shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation whitespace-nowrap",children:""}),i.jsx("button",{onClick:()=>S("vacation"),className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 font-medium shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 active:scale-95 sm:hover:scale-105 touch-manipulation whitespace-nowrap",children:""})]})]})]})]}),i.jsxs("div",{className:`mt-4 sm:mt-6 pt-4 sm:pt-6 border-t-2 ${t==="dark"?"border-gray-700/50":"border-gray-200/50"}`,children:[i.jsxs("label",{className:`block text-sm sm:text-base font-bold mb-3 sm:mb-4 flex items-center gap-2 ${B}`,children:[i.jsx(Ar,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0"}),i.jsx("span",{children:"  "})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[i.jsxs("button",{onClick:()=>k(null),className:`group relative px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl transition-all duration-300 font-medium text-xs sm:text-sm shadow-lg touch-manipulation active:scale-95 sm:hover:scale-105 ${b===null?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-green-500/50 scale-105":t==="dark"?"bg-gray-700/50 border-2 border-gray-600 text-gray-300 hover:bg-gray-600/70 hover:border-green-500/50 hover:text-white":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-green-500/50 hover:text-green-600"}`,children:[i.jsxs("span",{className:"flex items-center gap-1.5 sm:gap-2",children:[i.jsx(Ar,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:" "})]}),b===null&&i.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-2 h-2 sm:w-3 sm:h-3 bg-green-400 rounded-full border border-white sm:border-2 animate-pulse"})]}),we.map(D=>i.jsxs("button",{onClick:()=>k(D.id),className:`group relative px-3 sm:px-4 md:px-5 py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl transition-all duration-300 font-medium text-xs sm:text-sm shadow-lg flex items-center gap-2 sm:gap-3 touch-manipulation active:scale-95 sm:hover:scale-105 ${b===D.id?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-green-500/50 scale-105 ring-2 ring-green-400/50":t==="dark"?"bg-gray-700/50 border-2 border-gray-600 text-gray-300 hover:bg-gray-600/70 hover:border-green-500/50 hover:text-white":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-green-500/50 hover:text-green-600"}`,children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[D.avatar?i.jsx("img",{src:D.avatar,alt:D.name,className:`w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 rounded-full object-cover border-2 transition-all duration-300 ${b===D.id?"border-white ring-2 ring-white/50 scale-110":t==="dark"?"border-gray-500 group-hover:border-green-400":"border-gray-300 group-hover:border-green-400"}`,onError:H=>{const $=H.target;$.style.display="none";const te=$.nextElementSibling;te&&(te.style.display="flex")}}):null,i.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 rounded-full flex items-center justify-center font-bold text-xs transition-all duration-300 ${b===D.id?"bg-white/20 text-white ring-2 ring-white/50 scale-110":t==="dark"?"bg-gradient-to-br from-green-500/30 to-blue-500/30 text-gray-300 group-hover:from-green-500/50 group-hover:to-blue-500/50":"bg-gradient-to-br from-green-400/30 to-blue-400/30 text-gray-600 group-hover:from-green-400/50 group-hover:to-blue-400/50"} ${D.avatar?"absolute inset-0 hidden":""}`,children:D.name.charAt(0).toUpperCase()})]}),i.jsx("span",{className:"whitespace-nowrap truncate max-w-[100px] sm:max-w-none",children:D.name}),b===D.id&&i.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-2 h-2 sm:w-3 sm:h-3 bg-green-400 rounded-full border border-white sm:border-2 animate-pulse"})]},D.id))]})]})]}),i.jsxs("div",{className:F,children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-sm sm:text-base font-semibold ${B}`,children:" "}),i.jsx("p",{className:`text-xs sm:text-sm ${W}`,children:"         "})]}),L&&i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold text-amber-700 bg-amber-100 dark:text-amber-300 dark:bg-amber-500/10",children:[i.jsx(xr,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:" "})]})]}),e==="table"?L?i.jsx("div",{className:`rounded-lg border-2 border-dashed p-4 text-center ${t==="dark"?"bg-gray-800/60 border-gray-700 text-gray-300":"bg-gray-50 border-gray-200 text-gray-600"}`,children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(iy,{className:`w-8 h-8 ${t==="dark"?"text-gray-400":"text-gray-500"}`}),i.jsx("p",{className:"text-sm font-semibold",children:"     "}),i.jsx("p",{className:"text-xs",children:",  ApeVault Panel    ,    ."})]})}):i.jsx(T3,{selectedUserId:b,slotFilter:n,onEditSlot:j,onEditStatus:A}):i.jsx(I3,{selectedUserId:b,slotFilter:n,onEditSlot:j,onEditStatus:A})]}),a&&i.jsx(C3,{slot:v,onClose:q,onSave:q}),l&&i.jsx(P3,{onClose:q,onSave:q}),d&&g&&i.jsx(A3,{type:g,status:E,onClose:q,onSave:q})]})})},D3=({onClose:t,onSave:e,editingEarning:r})=>{const{user:n}=Nt(),{isAdmin:s}=Yt(),{theme:a}=Ue(),o=a==="dark"?"text-white":"text-gray-900",l=!!r,[u,d]=P.useState((r==null?void 0:r.date)||oe(new Date,"yyyy-MM-dd")),[h,g]=P.useState((r==null?void 0:r.slotId)||""),[m,b]=P.useState((r==null?void 0:r.amount.toString())||""),[k,v]=P.useState((r==null?void 0:r.poolAmount.toString())||""),[C,E]=P.useState(r?r.participants.length>1:!1),[y,N]=P.useState(r?r.participants.filter(x=>x!==r.userId):[]),[R,L]=P.useState([]),[M,I]=P.useState(""),[_,w]=P.useState(!1);P.useEffect(()=>{j()},[u,n,l]);const j=async()=>{if(!(!s&&!n&&!l))try{const x=l||s?await Mn(void 0,u):await Mn(n.id,u),q=Wf(),U=oe(q,"yyyy-MM-dd"),B=l?x:x.filter(W=>{if(u!==U)return s;const F=W.slots[W.slots.length-1];return Rx(F.end,q)||s});L(B)}catch(x){console.error("Error loading slots:",x)}},S=x=>{y.includes(x)?N(y.filter(q=>q!==x)):N([...y,x])},A=async()=>{if(!s&&!n&&!l){I("  ");return}I(""),w(!0);try{if(!h){I(" "),w(!1);return}if(!m||!k){I("  "),w(!1);return}const x=parseFloat(m),q=parseFloat(k);if(isNaN(x)||isNaN(q)||x<0||q<0){I("  "),w(!1);return}const U=R.find(B=>B.id===h);if(!U&&!l){I("   "),w(!1);return}if(!s&&!l){const B=Wf(),W=oe(B,"yyyy-MM-dd");if(u!==W){I("     "),w(!1);return}if(U){const F=U.slots[U.slots.length-1];if(!Rx(F.end,B)){I("      .     21:00     "),w(!1);return}}}if(l&&r)await cP(r.id,{date:u,amount:x,poolAmount:q,slotId:h});else{const B=s&&!n?y.length>0?y:[]:C&&y.length>0?[...y,n.id]:[n.id];if(B.length===0){I("    "),w(!1);return}for(const W of B)await lP({userId:W,date:u,amount:x,poolAmount:q,slotId:h,participants:C?B:[W]})}e()}catch(x){console.error("Error saving earnings:",x);const q=x.message||x.code||"  ";I(q)}finally{w(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto touch-manipulation",children:i.jsx("div",{className:`w-full max-w-md rounded-lg sm:rounded-xl shadow-xl ${a==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto my-4 sm:my-8`,children:i.jsxs("div",{className:"p-4 sm:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[i.jsx("h3",{className:`text-lg sm:text-xl font-bold ${o} pr-2`,children:l?" ":" "}),i.jsx("button",{onClick:t,className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${a==="dark"?"hover:bg-gray-700 active:bg-gray-600":"hover:bg-gray-100 active:bg-gray-200"} transition-colors touch-manipulation`,"aria-label":"",children:i.jsx(wr,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between text-xs sm:text-sm font-medium mb-2 gap-1 sm:gap-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:[i.jsx("span",{children:""}),!s&&!l&&i.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400 whitespace-nowrap",children:"   "})]}),i.jsx("input",{type:"date",value:u,onChange:x=>d(x.target.value),disabled:!s&&!l,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed`}),l&&!s&&i.jsx("p",{className:`mt-1 text-xs ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsxs("select",{value:h,onChange:x=>g(x.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,children:[i.jsx("option",{value:"",children:" "}),R.map(x=>i.jsx("option",{value:x.id,children:x.slots.map(q=>`${q.start}-${q.end}`).join(", ")},x.id)),l&&r&&!R.find(x=>x.id===r.slotId)&&i.jsx("option",{value:r.slotId,disabled:!0,children:"[  -  ]"})]}),l&&r&&!R.find(x=>x.id===r.slotId)&&i.jsx("p",{className:`mt-1 text-xs ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"     .      ."})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"  (.)"}),i.jsx("input",{type:"number",value:m,onChange:x=>b(x.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"0",min:"0",step:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"   (.)"}),i.jsx("input",{type:"number",value:k,onChange:x=>v(x.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"0",min:"0",step:"100"})]}),!l&&i.jsxs(i.Fragment,{children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:C,onChange:x=>E(x.target.checked),className:"w-4 h-4"}),i.jsx("span",{className:`${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"  "})]}),(C||s&&!n)&&i.jsx("div",{className:"ml-6 space-y-2",children:we.filter(x=>!n||x.id!==n.id).map(x=>i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:y.includes(x.id),onChange:()=>S(x.id),className:"w-4 h-4"}),i.jsx("span",{className:a==="dark"?"text-gray-300":"text-gray-700",children:x.name})]},x.id))})]}),M&&i.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:M}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[i.jsx("button",{onClick:A,disabled:_,className:"flex-1 px-4 py-2.5 sm:py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100",children:_?"...":""}),i.jsx("button",{onClick:t,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${a==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:""})]})]})]})})})},$3=({earnings:t})=>{const{theme:e}=Ue(),r=_l(),n=oe(r.start,"yyyy-MM-dd"),s=oe(r.end,"yyyy-MM-dd"),a=oe(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd"),o=oe(new Date(new Date().getFullYear(),new Date().getMonth()+1,0),"yyyy-MM-dd"),l=(m,b,k)=>{const v=t.filter(y=>y.userId===m&&y.date>=b&&y.date<=k),C=v.reduce((y,N)=>y+N.amount,0),E=v.reduce((y,N)=>y+N.poolAmount,0);return{totalEarnings:C,totalPool:E,count:v.length}},u=we.reduce((m,b)=>{const k=l(b.id,n,s);return m+k.totalEarnings},0),d=we.reduce((m,b)=>{const k=l(b.id,n,s);return m+k.totalPool},0),h=we.reduce((m,b)=>{const k=l(b.id,a,o);return m+k.totalEarnings},0),g=we.reduce((m,b)=>{const k=l(b.id,a,o);return m+k.totalPool},0);return i.jsx("div",{className:`rounded-2xl ${e==="dark"?"bg-gray-800":"bg-white"} shadow-lg border-2 ${e==="dark"?"border-gray-700":"border-gray-200"} overflow-hidden`,children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:`p-2 rounded-lg ${e==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:i.jsx(ca,{className:`w-5 h-5 ${e==="dark"?"text-blue-400":"text-blue-600"}`})}),i.jsx("h3",{className:`text-xl font-bold ${e==="dark"?"text-white":"text-gray-900"}`,children:" "})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:`text-lg font-semibold mb-4 px-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),i.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-gray-700/50 dark:border-gray-700",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[i.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""})]})}),i.jsxs("tbody",{children:[we.map(m=>{const b=l(m.id,n,s);return i.jsxs("tr",{className:`border-b border-gray-700/30 dark:border-gray-700 transition-colors ${e==="dark"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[i.jsx("td",{className:`px-4 py-3 font-medium ${e==="dark"?"text-white":"text-gray-900"}`,children:m.name}),i.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-green-400":"text-green-600"}`,children:[b.totalEarnings.toFixed(2)," "]}),i.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[b.totalPool.toFixed(2)," "]})]},m.id)}),i.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/70":"bg-gray-100"} font-bold border-t-2 border-gray-700/50 dark:border-gray-700`,children:[i.jsx("td",{className:`px-4 py-3 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),i.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-green-400":"text-green-600"}`,children:[u.toFixed(2)," "]}),i.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[d.toFixed(2)," "]})]})]})]})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:`text-lg font-semibold mb-4 px-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),i.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-gray-700/50 dark:border-gray-700",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[i.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${e==="dark"?"text-white":"text-gray-900"}`,children:""})]})}),i.jsxs("tbody",{children:[we.map(m=>{const b=l(m.id,a,o);return i.jsxs("tr",{className:`border-b border-gray-700/30 dark:border-gray-700 transition-colors ${e==="dark"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[i.jsx("td",{className:`px-4 py-3 font-medium ${e==="dark"?"text-white":"text-gray-900"}`,children:m.name}),i.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-green-400":"text-green-600"}`,children:[b.totalEarnings.toFixed(2)," "]}),i.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[b.totalPool.toFixed(2)," "]})]},m.id)}),i.jsxs("tr",{className:`${e==="dark"?"bg-gray-700/70":"bg-gray-100"} font-bold border-t-2 border-gray-700/50 dark:border-gray-700`,children:[i.jsx("td",{className:`px-4 py-3 ${e==="dark"?"text-white":"text-gray-900"}`,children:" "}),i.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-green-400":"text-green-600"}`,children:[h.toFixed(2)," "]}),i.jsxs("td",{className:`px-4 py-3 text-right ${e==="dark"?"text-purple-400":"text-purple-600"}`,children:[g.toFixed(2)," "]})]})]})]})})]})]})})},M3=({earnings:t,onEdit:e,onDelete:r})=>{const{theme:n}=Ue(),{user:s}=Nt(),{isAdmin:a}=Yt(),[o,l]=P.useState(null),u=async m=>{if(confirm(" ,       ?")){l(m);try{await uP(m),r()}catch(b){console.error("Error deleting earnings:",b),alert("   ")}finally{l(null)}}},d=m=>{var b;return((b=we.find(k=>k.id===m))==null?void 0:b.name)||m},h=m=>a||m.userId===(s==null?void 0:s.id),g=[...t].sort((m,b)=>b.date.localeCompare(m.date));return g.length===0?i.jsxs("div",{className:`rounded-2xl p-8 text-center border-2 ${n==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-md`,children:[i.jsx("p",{className:`${n==="dark"?"text-gray-400":"text-gray-600"} text-lg`,children:"    "}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"  ,     "})]}):i.jsx("div",{className:`rounded-2xl ${n==="dark"?"bg-gray-800":"bg-white"} shadow-lg border-2 ${n==="dark"?"border-gray-700":"border-gray-200"} overflow-hidden`,children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:`p-2 rounded-lg ${n==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:i.jsx(ny,{className:`w-5 h-5 ${n==="dark"?"text-blue-400":"text-blue-600"}`})}),i.jsx("h3",{className:`text-xl font-bold ${n==="dark"?"text-white":"text-gray-900"}`,children:"   "})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-gray-700/50 dark:border-gray-700",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:`${n==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[i.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""}),i.jsx("th",{className:`px-4 py-3 text-center text-sm font-semibold ${n==="dark"?"text-white":"text-gray-900"}`,children:""})]})}),i.jsx("tbody",{children:g.map(m=>{const b=h(m);return i.jsxs("tr",{className:`border-b border-gray-700/30 dark:border-gray-700 transition-colors ${n==="dark"?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,children:[i.jsx("td",{className:`px-4 py-3 font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:oe(new Date(m.date+"T00:00:00"),"dd.MM.yyyy")}),i.jsx("td",{className:`px-4 py-3 font-medium ${n==="dark"?"text-white":"text-gray-900"}`,children:d(m.userId)}),i.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${n==="dark"?"text-green-400":"text-green-600"}`,children:[m.amount.toFixed(2)," "]}),i.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${n==="dark"?"text-purple-400":"text-purple-600"}`,children:[m.poolAmount.toFixed(2)," "]}),i.jsx("td",{className:"px-4 py-3 text-center",children:b?i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("button",{onClick:()=>e(m),className:`p-2 rounded-lg transition-colors ${n==="dark"?"hover:bg-gray-600 text-blue-400":"hover:bg-gray-200 text-blue-600"}`,title:"",children:i.jsx(ny,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>u(m.id),disabled:o===m.id,className:`p-2 rounded-lg transition-colors ${n==="dark"?"hover:bg-gray-600 text-red-400":"hover:bg-gray-200 text-red-600"} disabled:opacity-50 disabled:cursor-not-allowed`,title:"",children:i.jsx(er,{className:"w-4 h-4"})})]}):i.jsx("span",{className:`text-sm ${n==="dark"?"text-gray-500":"text-gray-400"}`,children:""})})]},m.id)})})]})})]})})},O3=()=>{const{theme:t}=Ue(),[e,r]=P.useState(!1),[n,s]=P.useState(null),[a,o]=P.useState([]),[l,u]=P.useState(!0),[d,h]=P.useState({weekTotal:0,weekPool:0,monthTotal:0,monthPool:0}),g=t==="dark"?"text-white":"text-gray-900",m=t==="dark"?"bg-gray-800":"bg-white",b=()=>{const y=_l(),N=oe(y.start,"yyyy-MM-dd"),R=oe(y.end,"yyyy-MM-dd"),L=oe(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd"),M=oe(new Date(new Date().getFullYear(),new Date().getMonth()+1,0),"yyyy-MM-dd"),I=a.filter(w=>w.date>=N&&w.date<=R),_=a.filter(w=>w.date>=L&&w.date<=M);h({weekTotal:I.reduce((w,j)=>w+j.amount,0),weekPool:I.reduce((w,j)=>w+j.poolAmount,0),monthTotal:_.reduce((w,j)=>w+j.amount,0),monthPool:_.reduce((w,j)=>w+j.poolAmount,0)})};P.useEffect(()=>{k()},[]),P.useEffect(()=>{a.length>0&&b()},[a]);const k=async()=>{u(!0);try{const y=await tl();o(y)}catch(y){console.error("Error loading earnings:",y)}finally{u(!1)}},v=y=>{s(y),r(!0)},C=()=>{r(!1),s(null)},E=()=>{r(!1),s(null),k()};return i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${m} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-start lg:justify-between mb-4 sm:mb-6",children:[i.jsxs("div",{className:"flex-1 min-w-0 space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:i.jsx(Gu,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${g} flex items-center gap-2 sm:gap-3`,children:[i.jsx("span",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-yellow-600 text-transparent bg-clip-text",children:" "}),i.jsx(xr,{className:`w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]})})]}),i.jsx("p",{className:`text-sm sm:text-base font-medium ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"        "})]}),i.jsxs("button",{onClick:()=>r(!0),className:"w-full lg:w-auto px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg sm:rounded-xl transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base font-semibold shadow-lg hover:shadow-xl active:scale-95 sm:hover:scale-105 transform touch-manipulation",children:[i.jsx(oi,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:i.jsx(ca,{className:`w-5 h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:""})]}),i.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-blue-400":"text-blue-600"}`,children:[d.weekTotal.toFixed(2)," "]})]}),i.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:i.jsx(sy,{className:`w-5 h-5 ${t==="dark"?"text-purple-400":"text-purple-600"}`})}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"  "})]}),i.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-purple-400":"text-purple-600"}`,children:[d.weekPool.toFixed(2)," "]})]}),i.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/20":"bg-green-100"}`,children:i.jsx(Uj,{className:`w-5 h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:""})]}),i.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-green-400":"text-green-600"}`,children:[d.monthTotal.toFixed(2)," "]})]}),i.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-orange-500/10 border-orange-500/30":"bg-orange-50 border-orange-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-orange-500/20":"bg-orange-100"}`,children:i.jsx(sy,{className:`w-5 h-5 ${t==="dark"?"text-orange-400":"text-orange-600"}`})}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"  "})]}),i.jsxs("p",{className:`text-2xl font-bold ${t==="dark"?"text-orange-400":"text-orange-600"}`,children:[d.monthPool.toFixed(2)," "]})]})]}),i.jsx("div",{className:"hidden sm:flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-gray-700/50 dark:border-gray-700",children:i.jsx("h2",{className:`text-base sm:text-lg md:text-xl font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:" "})})]}),l?i.jsx("div",{className:`rounded-xl p-8 text-center border-2 ${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-md`,children:i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),i.jsx("p",{className:t==="dark"?"text-gray-400":"text-gray-600",children:" ..."})]})}):i.jsxs(i.Fragment,{children:[i.jsx($3,{earnings:a}),i.jsx(M3,{earnings:a,onEdit:v,onDelete:k})]}),e&&i.jsx(D3,{onClose:C,onSave:E,editingEarning:n})]})})},W2=(t,e=0,r=0,n=0)=>{let s=0;(t.daysOff===0||t.daysOff<=2)&&(s+=10),t.sickDays<=7&&(s+=10),t.vacationDays<=7&&(s+=10),e>=30?s+=25:e>=20&&(s+=15),r>=6e3?s+=30:r>=3e3&&(s+=15);const a=Math.min(t.referrals*5,30);return s+=a,n>50&&(s+=15),Math.min(s,100)},H2=(t,e=0,r=0,n=0)=>{const s=t.daysOff===0||t.daysOff<=2?10:0,a=t.sickDays<=7?10:0,o=t.vacationDays<=7?10:0;let l=0;e>=30?l=25:e>=20&&(l=15);let u=0;r>=6e3?u=30:r>=3e3&&(u=15);const d=Math.min(t.referrals*5,30),h=n>50?15:0,g=Math.min(s+a+o+l+u+d+h,100);return{daysOff:t.daysOff,daysOffPoints:s,sickDays:t.sickDays,sickDaysPoints:a,vacationDays:t.vacationDays,vacationDaysPoints:o,weeklyHours:e,weeklyHoursPoints:l,weeklyEarnings:r,weeklyEarningsPoints:u,referrals:t.referrals,referralsPoints:d,weeklyMessages:n,weeklyMessagesPoints:h,totalRating:g}},L3=t=>t>=1&&t<=10?"#ef4444":t>=11&&t<=30?"#f97316":t>=31&&t<=59?"#eab308":t>=60&&t<=80?"#3b82f6":t>=81&&t<=100?"#10b981":"#6b7280",V3=({rating:t})=>{const{theme:e}=Ue(),[r,n]=P.useState(null),s=we.find(v=>v.id===t.userId),a=L3(t.rating),o=e==="dark"?"text-white":"text-gray-900",l=e==="dark"?"text-gray-400":"text-gray-600",u=e==="dark"?"bg-gray-800":"bg-white",d=e==="dark"?"border-gray-700":"border-gray-200",h=e==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",g=t.rating<=0?"4%":`${Math.min(t.rating,100)}%`,m=v=>v>=81?"":v>=60?"":v>=31?"":v>=11?"":v>=1?"":"",b=t.breakdown?[{icon:i.jsx(Zr,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.daysOff} `,points:t.breakdown.daysOffPoints,maxPoints:10,explanation:"0-2    = 10%  .  2  = 0%.   .",threshold:"0-2 ",color:"bg-yellow-500"},{icon:i.jsx(uw,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.sickDays} `,points:t.breakdown.sickDaysPoints,maxPoints:10,explanation:" 7     = 10%  .  7  = 0%.    30 .",threshold:"7 ",color:"bg-purple-500"},{icon:i.jsx(Mj,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.vacationDays} `,points:t.breakdown.vacationDaysPoints,maxPoints:10,explanation:" 7     = 10%  .  7  = 0%.    30 .",threshold:"7 ",color:"bg-orange-500"},{icon:i.jsx(Js,{className:"w-5 h-5"}),label:" ",value:S3(t.breakdown.weeklyHours),points:t.breakdown.weeklyHoursPoints,maxPoints:25,explanation:"30+    = 25%  . 20-29  = 15%.  20  = 0%.     .",threshold:"30: 25% | 20: 15%",color:"bg-blue-500"},{icon:i.jsx(Gu,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.weeklyEarnings.toFixed(2)} `,points:t.breakdown.weeklyEarningsPoints,maxPoints:30,explanation:"6000+    = 30%  . 3000-5999  = 15%.  3000  = 0%.   .",threshold:"6000: 30% | 3000: 15%",color:"bg-green-500"},{icon:i.jsx(Ar,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.referrals} .`,points:t.breakdown.referralsPoints,maxPoints:30,explanation:"5%     .  30% (6 ).    30 .      .",threshold:"5%   ( 30%)",color:"bg-pink-500"},{icon:i.jsx(hw,{className:"w-5 h-5"}),label:"",value:`${t.breakdown.weeklyMessages} `,points:t.breakdown.weeklyMessagesPoints,maxPoints:15,explanation:" 50      = 15%  .  50 = 0%.     (, ,   ..).    .",threshold:">50 ",color:"bg-indigo-500"}]:[],k=b.reduce((v,C)=>v+C.points,0);return i.jsxs("div",{className:`rounded-xl p-6 ${u} shadow-lg border ${d} transition-all hover:shadow-xl`,children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:`text-2xl font-bold mb-1 ${o}`,children:(s==null?void 0:s.name)||""}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold",style:{color:a},children:[t.rating.toFixed(1),"%"]}),i.jsx("span",{className:"text-2xl",children:m(t.rating)})]})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-8 overflow-hidden shadow-inner",children:i.jsx("div",{className:"h-full transition-all duration-500 flex items-center justify-center text-sm font-bold text-white shadow-md",style:{width:g,backgroundColor:a,minWidth:t.rating<=0?"40px":void 0},children:t.rating>=10&&i.jsxs("span",{children:[t.rating.toFixed(0),"%"]})})}),i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsx("span",{className:`text-xs ${l}`,children:" "}),i.jsxs("span",{className:`text-xs font-semibold ${l}`,children:[k,"/100 "]})]})]})]}),t.breakdown&&i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(ca,{className:`w-5 h-5 ${l}`}),i.jsx("h4",{className:`text-lg font-semibold ${o}`,children:"  "})]}),b.map((v,C)=>{const E=v.maxPoints>0?v.points/v.maxPoints*100:0,y=r===C;return i.jsxs("div",{className:`rounded-lg border ${d} overflow-hidden transition-all ${y?"shadow-md":""}`,children:[i.jsx("button",{onClick:()=>n(y?null:C),className:`w-full p-4 flex items-center justify-between ${h} transition-colors`,children:i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx("div",{className:`p-2 rounded-lg ${v.color} text-white flex-shrink-0`,children:v.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:`font-semibold ${o} truncate`,children:v.label}),i.jsxs("span",{className:`font-bold ml-2 ${v.points>0?"text-green-500":"text-red-500"}`,children:[v.points,"/",v.maxPoints]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-300 ${v.color}`,style:{width:`${E}%`}})}),i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[i.jsx("span",{className:`text-xs ${l} truncate mr-2`,children:v.value}),i.jsx("span",{className:`text-xs ${l} whitespace-nowrap`,children:v.threshold})]})]}),i.jsx(yr,{className:`w-4 h-4 flex-shrink-0 ml-2 ${l} transition-transform ${y?"rotate-180":""}`})]})}),y&&i.jsx("div",{className:`px-4 pb-4 pt-2 border-t ${d} ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:i.jsx("p",{className:`text-sm ${l} leading-relaxed`,children:v.explanation})})]},C)})]}),i.jsxs("div",{className:`pt-4 border-t ${d}`,children:[i.jsx("h4",{className:`text-sm font-semibold mb-3 ${o}`,children:" "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:`p-3 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[i.jsx("div",{className:`text-xs ${l} mb-1`,children:" ()"}),i.jsxs("div",{className:`text-lg font-bold ${o}`,children:[t.earnings.toFixed(0)," "]})]}),i.jsxs("div",{className:`p-3 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[i.jsx("div",{className:`text-xs ${l} mb-1`,children:" "}),i.jsxs("div",{className:`text-lg font-bold ${o}`,children:[t.poolAmount.toFixed(0)," "]})]})]})]})]})},yh=()=>`REF-${Math.random().toString(36).slice(2,8).toUpperCase()}`,F3=({referral:t,onClose:e,onSave:r})=>{const{user:n}=Nt(),{theme:s}=Ue(),[a,o]=P.useState(""),[l,u]=P.useState(""),[d,h]=P.useState(""),[g,m]=P.useState(yh()),[b,k]=P.useState(""),[v,C]=P.useState(!1),[E,y]=P.useState(!1);P.useEffect(()=>{t?(o(t.name),u(String(t.age)),m(t.referralId),h(t.comment||"")):(o(""),u(""),h(""),m(yh()))},[t]);const N=!!t,R=N?" ":" ",L=s==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900",M=s==="dark"?"text-gray-300":"text-gray-700",I=s==="dark"?"text-white":"text-gray-900",_=async()=>{if(!t){if(!n){k("  .       .");return}}if(!a.trim()||!l.trim()){k("   ");return}const j=Number(l);if(Number.isNaN(j)||j<16){k("      16");return}C(!0),k("");const S={referralId:g,ownerId:(t==null?void 0:t.ownerId)||n.id,name:a.trim(),age:j,createdAt:(t==null?void 0:t.createdAt)||new Date().toISOString(),...d.trim()&&{comment:d.trim()}};try{t?await hP(t.id,S):await dP(S),r()}catch(A){console.error("Error saving referral:",A);const x=A.message||A.code||"   ";k(x)}finally{C(!1)}},w=async()=>{if(t&&confirm(`  ${t.name}?`)){y(!0);try{await fP(t.id),r()}catch(j){console.error("Error deleting referral:",j);const S=j.message||j.code||"   ";k(S)}finally{y(!1)}}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-50 p-4 sm:py-0 overflow-y-auto",children:i.jsx("div",{className:`w-full max-w-md rounded-lg shadow-xl ${s==="dark"?"bg-gray-800":"bg-white"} max-h-[90vh] overflow-y-auto`,children:i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:`text-xl font-bold ${I}`,children:R}),i.jsx("button",{onClick:e,className:`p-2 rounded-lg ${L}`,children:i.jsx(wr,{className:"w-5 h-5"})})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:""}),i.jsx("input",{type:"text",value:a,onChange:j=>o(j.target.value),className:`w-full px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:" "})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:""}),i.jsx("input",{type:"number",value:l,onChange:j=>u(j.target.value),className:`w-full px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:"18",min:16})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:""}),i.jsx("textarea",{value:d,onChange:j=>h(j.target.value),rows:3,className:`w-full px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500`,placeholder:",    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${M}`,children:"ID "}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"text",value:g,readOnly:N,onChange:j=>m(j.target.value),className:`flex-1 px-4 py-2 rounded-lg border ${s==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-green-500 ${N?"opacity-80 cursor-not-allowed":""}`}),!N&&i.jsxs("button",{type:"button",onClick:()=>m(yh()),className:"px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center justify-center gap-1 text-sm",children:[i.jsx(Oj,{className:"w-4 h-4"}),""]})]}),i.jsx("p",{className:`text-xs mt-1 ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"ID      ."})]}),b&&i.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:b}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[N&&i.jsxs("button",{onClick:w,disabled:E,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(er,{className:"w-4 h-4"}),E?"...":""]}),i.jsx("button",{onClick:_,disabled:v,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:v?"...":""}),i.jsx("button",{onClick:e,className:`px-4 py-2 rounded-lg transition-colors ${L}`,children:""})]})]})})})},U3=()=>{const{theme:t}=Ue(),[e,r]=P.useState([]),[n,s]=P.useState(!0),[a,o]=P.useState([]),[l,u]=P.useState(!1),[d,h]=P.useState(null);P.useEffect(()=>{g()},[]);const g=async()=>{s(!0);try{const y=_l(),N=oe(y.start,"yyyy-MM-dd"),R=oe(y.end,"yyyy-MM-dd"),L=U2(30),M=oe(L.start,"yyyy-MM-dd"),I=oe(L.end,"yyyy-MM-dd"),_=L.start.toISOString(),w=L.end.toISOString(),j=await C2(void 0,_,w);o(j);const S=[];for(const A of we){const q=(await tl(A.id,N,R)).reduce((se,Ee)=>se+Ee.amount,0),U=await tl(A.id,M,I),B=U.reduce((se,Ee)=>se+Ee.amount,0),W=U.reduce((se,Ee)=>se+Ee.poolAmount,0),V=(await En(A.id)).filter(se=>{const Ee=se.date,Ve=se.endDate||se.date;return Ee<=I&&Ve>=M}),D=V.filter(se=>se.type==="dayoff").reduce((se,Ee)=>se+Xa(Ee.date,Ee.endDate,M,I),0),H=V.filter(se=>se.type==="sick").reduce((se,Ee)=>se+Xa(Ee.date,Ee.endDate,M,I),0),$=V.filter(se=>se.type==="vacation").reduce((se,Ee)=>se+Xa(Ee.date,Ee.endDate,M,I),0),le=(await Mn(A.id)).filter(se=>se.date>=N&&se.date<=R).reduce((se,Ee)=>se+fd(Ee.slots),0),fe=await I2(A.id,N,R),X=(await T2(A.id))[0]||{userId:A.id,earnings:0,messages:0,initiatives:0,signals:0,profitableSignals:0,referrals:0,daysOff:0,sickDays:0,vacationDays:0,poolAmount:0,rating:0,lastUpdated:new Date().toISOString()},G=j.filter(se=>se.ownerId===A.id).length,K={userId:A.id,earnings:B,messages:X.messages||0,initiatives:X.initiatives||0,signals:X.signals||0,profitableSignals:X.profitableSignals||0,referrals:G,daysOff:D,sickDays:H,vacationDays:$,poolAmount:W,lastUpdated:new Date().toISOString()},ke=W2(K,le,q,fe),_e=H2(K,le,q,fe);S.push({...K,rating:ke,breakdown:_e})}S.sort((A,x)=>x.rating-A.rating),r(S)}catch(y){console.error("Error loading ratings:",y)}finally{s(!1)}},m=e.reduce((y,N)=>y+N.rating,0)/(e.length||1),b=t==="dark"?"text-white":"text-gray-900",k=t==="dark"?"text-gray-400":"text-gray-600",v=t==="dark"?"bg-gray-800":"bg-white",C=()=>{h(null),u(!0)},E=y=>{h(y),u(!0)};return i.jsxs(Wr,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-blue-200 bg-gradient-to-br from-white via-blue-50/30 to-white"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-32 -mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-green-500/10 to-yellow-500/10 rounded-full blur-2xl -ml-24 -mb-24"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:i.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl",children:""})}),i.jsx("div",{className:"flex-1",children:i.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${b} flex items-center gap-2 sm:gap-3`,children:[i.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text",children:" "}),i.jsx("span",{className:"text-xl sm:text-2xl",children:""})]})})]}),i.jsx("p",{className:`text-sm sm:text-base font-medium ${k}`,children:"       "}),i.jsx("div",{className:`p-5 rounded-xl border-2 ${t==="dark"?"bg-gray-800/50 border-blue-500/20":"bg-blue-50/50 border-blue-200"} mb-4`,children:i.jsxs("p",{className:`text-sm leading-relaxed ${k}`,children:["    ",i.jsx("strong",{className:b,children:"7 "}),": , ,  ( ),  , ,      ( ).      .",i.jsx("strong",{className:b,children:"   - 100%"}),".      ."]})})]}),i.jsxs("button",{onClick:C,className:"w-full lg:w-auto px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-200 flex items-center justify-center gap-2 font-semibold shadow-lg hover:shadow-xl hover:scale-105 transform",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:" "})]})]})})]}),i.jsxs("div",{className:`rounded-2xl p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white to-green-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-6 mb-6",children:[i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white flex-shrink-0`,children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-2xl font-extrabold mb-2 ${b} flex items-center gap-2`,children:i.jsx("span",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-transparent bg-clip-text",children:"  "})}),i.jsx("p",{className:`text-sm ${k} font-medium`,children:"       "})]}),i.jsxs("div",{className:"text-center sm:text-right",children:[i.jsxs("div",{className:`text-5xl font-extrabold mb-1 ${t==="dark"?"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-400":"text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600"}`,children:[m.toFixed(1),"%"]}),i.jsx("p",{className:`text-xs ${k}`,children:" 100%"})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-12 overflow-hidden shadow-inner border-2 border-gray-300 dark:border-gray-600",children:i.jsx("div",{className:`h-full bg-gradient-to-r ${m>=80?"from-green-500 to-emerald-500":m>=50?"from-yellow-500 to-orange-500":"from-blue-500 to-purple-500"} transition-all duration-500 flex items-center justify-center shadow-lg`,style:{width:`${Math.min(m,100)}%`},children:m>=10&&i.jsxs("span",{className:"text-white text-sm font-bold px-3",children:[m.toFixed(1),"%"]})})})})]})]}),i.jsxs("div",{className:`rounded-2xl p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-pink-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-pink-200 bg-gradient-to-br from-white to-pink-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-pink-500/10 to-rose-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-pink-600 to-rose-600":"bg-gradient-to-br from-pink-500 to-rose-500"} text-white flex-shrink-0`,children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-2xl font-extrabold mb-2 ${b} flex items-center gap-2`,children:i.jsx("span",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-transparent bg-clip-text",children:"  30 "})}),i.jsxs("p",{className:`text-sm ${k} font-medium`,children:[" : ",i.jsx("strong",{className:`text-lg ${b}`,children:a.length})," "]})]})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:we.map(y=>{const N=a.filter(R=>R.ownerId===y.id);return i.jsxs("div",{className:`p-4 rounded-lg border ${t==="dark"?"border-gray-700":"border-gray-200"} ${t==="dark"?"bg-gray-700":"bg-gray-50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:`${b} font-semibold`,children:y.name}),i.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${N.length>0?t==="dark"?"bg-pink-600 text-white":"bg-pink-100 text-pink-700":t==="dark"?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"}`,children:[N.length," ",N.length===1?"":N.length<5?"":""]})]}),N.length>0&&i.jsx("div",{className:"space-y-2",children:N.map(R=>i.jsxs("div",{className:`rounded-lg border ${t==="dark"?"border-gray-600":"border-gray-300"} p-3 ${t==="dark"?"bg-gray-800":"bg-white"} flex flex-col gap-2 transition-all hover:shadow-md`,children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`text-sm font-semibold ${b} mb-1`,children:R.name}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[i.jsxs("span",{className:`px-2 py-1 rounded ${t==="dark"?"bg-gray-700":"bg-gray-100"} ${k}`,children:["ID: ",R.referralId]}),R.age&&i.jsxs("span",{className:`px-2 py-1 rounded ${t==="dark"?"bg-gray-700":"bg-gray-100"} ${k}`,children:[": ",R.age]}),i.jsx("span",{className:`px-2 py-1 rounded ${t==="dark"?"bg-gray-700":"bg-gray-100"} ${k}`,children:new Date(R.createdAt).toLocaleDateString("ru-RU")})]})]}),i.jsx("button",{onClick:()=>E(R),className:"self-start sm:self-auto px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-medium",children:""})]}),R.comment&&i.jsx("div",{className:`mt-2 pt-2 border-t ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:i.jsxs("p",{className:`text-xs ${k} italic`,children:[" ",R.comment]})})]},R.id))})]},y.id)})})]})]}),i.jsxs("div",{className:`rounded-2xl p-8 ${v} shadow-xl border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-purple-200 bg-gradient-to-br from-white to-purple-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-purple-600 to-indigo-600":"bg-gradient-to-br from-purple-500 to-indigo-500"} text-white flex-shrink-0`,children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-2xl font-extrabold mb-2 ${b} flex items-center gap-2`,children:i.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-transparent bg-clip-text",children:" "})}),i.jsx("p",{className:`text-sm ${k} font-medium`,children:"     "})]})]}),n?i.jsxs("div",{className:`rounded-xl p-12 text-center ${t==="dark"?"bg-gray-700/50":"bg-gray-50"} border-2 ${t==="dark"?"border-gray-600":"border-gray-200"}`,children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),i.jsx("p",{className:`text-lg font-semibold ${b}`,children:" ..."}),i.jsx("p",{className:`text-sm ${k} mt-2`,children:",  "})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("div",{className:`px-4 py-2 rounded-xl ${t==="dark"?"bg-gray-700/50":"bg-gray-100"} border ${t==="dark"?"border-gray-600":"border-gray-200"}`,children:i.jsxs("span",{className:`text-sm font-semibold ${b}`,children:[" : ",i.jsx("span",{className:"text-purple-500 dark:text-purple-400",children:e.length})]})})}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map((y,N)=>i.jsxs("div",{className:"relative transform transition-all duration-300 hover:scale-105",children:[N===0&&e.length>1&&i.jsxs("div",{className:"absolute -top-4 -right-4 z-20 bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900 text-xs font-extrabold px-4 py-2 rounded-full shadow-xl animate-pulse border-2 border-yellow-300 flex items-center gap-1",children:[i.jsx("span",{className:"text-base",children:""}),i.jsx("span",{children:""})]}),N===1&&e.length>2&&i.jsxs("div",{className:"absolute -top-4 -right-4 z-20 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-extrabold px-4 py-2 rounded-full shadow-xl border-2 border-gray-200 flex items-center gap-1",children:[i.jsx("span",{className:"text-base",children:""}),i.jsx("span",{children:"2- "})]}),N===2&&e.length>3&&i.jsxs("div",{className:"absolute -top-4 -right-4 z-20 bg-gradient-to-r from-orange-300 to-orange-400 text-orange-900 text-xs font-extrabold px-4 py-2 rounded-full shadow-xl border-2 border-orange-200 flex items-center gap-1",children:[i.jsx("span",{className:"text-base",children:""}),i.jsx("span",{children:"3- "})]}),i.jsx(V3,{rating:y})]},y.userId))})]})]})]})]}),l&&i.jsx(F3,{referral:d,onClose:()=>{u(!1),h(null)},onSave:()=>{u(!1),h(null),g()}})]})},B3=({onClose:t,onSave:e,editingTask:r})=>{const{user:n}=Nt(),{isAdmin:s}=Yt(),{theme:a}=Ue(),o=!!r,l=a==="dark"?"text-white":"text-gray-900",u=a==="dark"?"bg-gray-800":"bg-white",d=a==="dark"?"bg-gray-700":"bg-gray-50",h=a==="dark"?"border-gray-600":"border-gray-300",[g,m]=P.useState((r==null?void 0:r.title)||""),[b,k]=P.useState((r==null?void 0:r.description)||""),[v,C]=P.useState((r==null?void 0:r.category)||"trading"),[E,y]=P.useState((r==null?void 0:r.priority)||"medium"),[N,R]=P.useState((r==null?void 0:r.dueDate)||oe(new Date,"yyyy-MM-dd")),[L,M]=P.useState((r==null?void 0:r.dueTime)||"12:00"),I=r&&r.assignees&&r.assignees.length>0?r.assignees:r?r.assignedTo.map(V=>({userId:V,priority:"medium"})):[],[_,w]=P.useState(I),[j,S]=P.useState(""),[A,x]=P.useState(!1),q=V=>{_.find(D=>D.userId===V)?w(D=>D.filter(H=>H.userId!==V)):w(D=>[...D,{userId:V,priority:"medium"}])},U=()=>{_.length===we.length?w([]):w(we.map(V=>({userId:V.id,priority:"medium"})))},B=(V,D)=>{w(H=>H.map($=>$.userId===V?{...$,priority:D}:$))},W=(V,D)=>{w(H=>H.map($=>$.userId===V?{...$,comment:D}:$))},F=async()=>{if(!s&&!n){S("  ");return}S(""),x(!0);try{if(!g.trim()){S("  "),x(!1);return}if(_.length===0){S("    "),x(!1);return}if(!N){S("  "),x(!1);return}if(!L){S("  "),x(!1);return}const V=new Date().toISOString(),D=(n==null?void 0:n.id)||"admin",H=_.map($=>$.userId);if(o&&r){const $=H.map(ue=>r.approvals.find(fe=>fe.userId===ue)||{userId:ue,status:"pending",updatedAt:V}),te={title:g.trim(),description:b.trim()||void 0,category:v,priority:E,assignedTo:H,assignees:_,approvals:$,dueDate:N,dueTime:L,updatedAt:V};await Bs(r.id,te)}else{const $={title:g.trim(),description:b.trim()||void 0,category:v,status:"pending",createdBy:D,assignedTo:H,assignees:_,approvals:H.map(te=>({userId:te,status:"pending",updatedAt:V})),createdAt:V,updatedAt:V,priority:E,dueDate:N,dueTime:L};await xP($)}e()}catch(V){console.error("Error saving task:",V),S("   "),x(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:`${u} rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border-2 ${a==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative`,children:[i.jsxs("div",{className:`sticky top-0 ${u} border-b ${h} p-4 sm:p-6 flex items-center justify-between z-10`,children:[i.jsxs("h2",{className:`text-xl sm:text-2xl font-bold ${l} flex items-center gap-2`,children:[i.jsx(Qm,{className:"w-5 h-5 sm:w-6 sm:h-6"}),o?" ":" "]}),i.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-colors ${a==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:i.jsx(wr,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[j&&i.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-center gap-2 text-red-500",children:[i.jsx(po,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:j})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:"  *"}),i.jsx("input",{type:"text",value:g,onChange:V=>m(V.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`,placeholder:"  "})]}),_.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:`block text-sm font-medium ${l}`,children:"  "}),i.jsx("div",{className:"space-y-3",children:_.map(V=>{const D=we.find(H=>H.id===V.userId);return i.jsxs("div",{className:`p-3 rounded-lg border ${h} ${d} space-y-2`,children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[i.jsxs("div",{className:"text-sm font-medium",children:[(D==null?void 0:D.name)||""," ",i.jsxs("span",{className:"text-xs text-gray-500",children:["(",(D==null?void 0:D.login)||(D==null?void 0:D.id)||"",")"]})]}),i.jsxs("select",{value:V.priority,onChange:H=>B(V.userId,H.target.value),className:`px-3 py-1.5 rounded-lg border ${h} ${a==="dark"?"bg-gray-800 text-gray-100":"bg-white text-gray-700"}`,children:[i.jsx("option",{value:"low",children:" "}),i.jsx("option",{value:"medium",children:" "}),i.jsx("option",{value:"high",children:" "})]})]}),i.jsx("textarea",{value:V.comment||"",onChange:H=>W(V.userId,H.target.value),rows:2,className:`w-full px-3 py-2 rounded-lg border ${h} ${a==="dark"?"bg-gray-800 text-gray-100":"bg-white text-gray-700"} focus:outline-none focus:ring-2 focus:ring-green-500/50`,placeholder:"   ()"})]},V.userId)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:""}),i.jsx("textarea",{value:b,onChange:V=>k(V.target.value),rows:4,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all resize-none`,placeholder:"   ()"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[i.jsx(Fj,{className:"w-4 h-4"}),""]}),i.jsx("select",{value:v,onChange:V=>C(V.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`,children:Object.entries(Gm).map(([V,{label:D,icon:H}])=>i.jsxs("option",{value:V,children:[H," ",D]},V))})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:""}),i.jsxs("select",{value:E,onChange:V=>y(V.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`,children:[i.jsx("option",{value:"low",children:""}),i.jsx("option",{value:"medium",children:""}),i.jsx("option",{value:"high",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[i.jsx(Zr,{className:"w-4 h-4"}),"  *"]}),i.jsx("input",{type:"date",value:N,onChange:V=>R(V.target.value),min:oe(new Date,"yyyy-MM-dd"),required:!0,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`})]}),i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[i.jsx(Js,{className:"w-4 h-4"}),"  *"]}),i.jsx("input",{type:"time",value:L,onChange:V=>M(V.target.value),required:!0,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all`})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("label",{className:`block text-sm font-medium ${l} flex items-center gap-2`,children:[i.jsx(Ar,{className:"w-4 h-4"})," *"]}),i.jsx("button",{type:"button",onClick:U,className:`text-xs sm:text-sm px-3 py-1 rounded-lg transition-colors ${a==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:_.length===we.length?" ":" "})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:we.map(V=>{const D=_.some(H=>H.userId===V.id);return i.jsx("button",{type:"button",onClick:()=>q(V.id),className:`p-3 rounded-lg border-2 transition-all text-left ${D?a==="dark"?"border-green-500 bg-green-500/20":"border-green-500 bg-green-50":`${h} ${d}`}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${D?"bg-green-500":"bg-gray-400"}`}),i.jsx("span",{className:`text-sm font-medium ${D?a==="dark"?"text-green-400":"text-green-700":l}`,children:V.name})]})},V.id)})})]}),i.jsxs("div",{className:`flex flex-col sm:flex-row gap-3 pt-4 border-t ${h}`,children:[i.jsx("button",{onClick:F,disabled:A,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${A?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]"}`,children:A?"...":o?" ":" "}),i.jsx("button",{onClick:t,className:`px-6 py-3 rounded-lg font-semibold transition-colors ${a==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:""})]})]})]})})},Kg=60*1e3,rl=60*Kg,Dx=24*rl,z3=t=>{if(t<=0)return"";const e=Math.floor(t/Dx),r=Math.floor(t%Dx/rl),n=Math.floor(t%rl/Kg);return e>0?`${e} ${r}`:r>0?`${r} ${n}`:`${Math.max(n,1)}`},W3=t=>t<=0?"overdue":t<=rl?"urgent":t<=6*rl?"soon":"on_track",xh=(t,e)=>{if(!t||!e)return{label:"",status:"unknown",isOverdue:!1};const n=new Date(`${t}T${e}`).getTime()-Date.now();if(Number.isNaN(n))return{label:"",status:"unknown",isOverdue:!1};const s=W3(n);return{label:z3(n),status:s,isOverdue:s==="overdue"}},H3=(t,e)=>{const r=P.useMemo(()=>xh(t,e),[t,e]),[n,s]=P.useState(r);return P.useEffect(()=>{s(xh(t,e));const a=setInterval(()=>{s(xh(t,e))},Kg);return()=>clearInterval(a)},[t,e]),n},q3=(t,e)=>e==="dark"?{overdue:"bg-red-500/10 border-red-500/40 text-red-300",urgent:"bg-orange-500/10 border-orange-500/40 text-orange-200",soon:"bg-yellow-500/10 border-yellow-500/40 text-yellow-200",on_track:"bg-green-500/10 border-green-500/40 text-green-200",unknown:"bg-gray-600/30 border-gray-500/40 text-gray-200"}[t]:{overdue:"bg-red-50 border-red-200 text-red-600",urgent:"bg-orange-50 border-orange-200 text-orange-600",soon:"bg-yellow-50 border-yellow-200 text-yellow-700",on_track:"bg-green-50 border-green-200 text-green-700",unknown:"bg-gray-100 border-gray-200 text-gray-600"}[t],q2=({dueDate:t,dueTime:e,theme:r,size:n="default"})=>{const{label:s,status:a}=H3(t,e),o=q3(a,r),l=n==="compact"?"px-2 py-0.5 text-[11px]":"px-2.5 py-1 text-xs sm:text-sm",u=n==="compact"?"w-3 h-3":"w-4 h-4";return i.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border font-medium ${l} ${o}`,children:[i.jsx(Js,{className:u}),s]})},G3=({task:t,onEdit:e,onDelete:r,onUpdate:n})=>{const{user:s}=Nt(),{isAdmin:a}=Yt(),{theme:o}=Ue(),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[g,m]=P.useState(""),b=o==="dark"?"text-white":"text-gray-900",k=o==="dark"?"bg-gray-800":"bg-white",v=o==="dark"?"border-gray-600":"border-gray-300",C=Gm[t.category],E=ou[t.status],y=we.find(B=>B.id===t.createdBy),N=t.assignees&&t.assignees.length>0?t.assignees:t.assignedTo.map(B=>({userId:B,priority:"medium"})),R=N.map(B=>B.userId),L=N.map(B=>{const W=we.find(F=>F.id===B.userId);return W?{...B,member:W}:null}).filter(Boolean),M=a||(s==null?void 0:s.id)===t.createdBy,I=t.status==="pending"&&R.includes((s==null?void 0:s.id)||""),_=t.approvals.find(B=>B.userId===(s==null?void 0:s.id)),w=t.status==="pending"&&t.approvals.length>0&&t.approvals.every(B=>B.status==="approved"),j=async B=>{if(!(!s&&!a)){u(!0);try{const W=new Date().toISOString(),F={status:B,updatedAt:W};if(B==="completed")F.completedAt=W,F.completedBy=(s==null?void 0:s.id)||"admin";else if(B==="closed")F.closedAt=W;else if(B==="in_progress"&&t.status==="pending"&&!w){u(!1);return}await Bs(t.id,F),n()}catch(W){console.error("Error updating task status:",W)}finally{u(!1)}}},S=async B=>{if(s){u(!0);try{const W=new Date().toISOString(),F=B==="approve"?"approved":"rejected",V=t.approvals.map(H=>H.userId===s.id?{...H,status:F,comment:B==="reject"&&g||void 0,updatedAt:W}:H);_||V.push({userId:s.id,status:F,comment:B==="reject"&&g||void 0,updatedAt:W});const D={approvals:V,updatedAt:W};B==="reject"?D.status="rejected":B==="approve"&&(D.status="in_progress"),await Bs(t.id,D),B==="reject"&&(h(!1),m("")),n()}catch(W){console.error("Error approving task:",W)}finally{u(!1)}}},A=()=>{switch(t.priority){case"high":return o==="dark"?"text-red-400":"text-red-600";case"medium":return o==="dark"?"text-yellow-400":"text-yellow-600";case"low":return o==="dark"?"text-gray-400":"text-gray-600"}},x=B=>({high:{label:"",classes:o==="dark"?"bg-red-500/20 text-red-300 border-red-500/40":"bg-red-50 text-red-600 border-red-200"},medium:{label:"",classes:o==="dark"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/40":"bg-yellow-50 text-yellow-700 border-yellow-200"},low:{label:"",classes:o==="dark"?"bg-gray-500/20 text-gray-300 border-gray-500/40":"bg-gray-50 text-gray-700 border-gray-200"}})[B],q=()=>({pending:o==="dark"?"bg-yellow-500/20 border-yellow-500/50 text-yellow-400":"bg-yellow-50 border-yellow-200 text-yellow-700",in_progress:o==="dark"?"bg-blue-500/20 border-blue-500/50 text-blue-400":"bg-blue-50 border-blue-200 text-blue-700",completed:o==="dark"?"bg-green-500/20 border-green-500/50 text-green-400":"bg-green-50 border-green-200 text-green-700",closed:o==="dark"?"bg-gray-500/20 border-gray-500/50 text-gray-400":"bg-gray-50 border-gray-200 text-gray-700",rejected:o==="dark"?"bg-red-500/20 border-red-500/50 text-red-400":"bg-red-50 border-red-200 text-red-700"})[t.status],U=()=>{const B={green:{bg:o==="dark"?"bg-green-500/20":"bg-green-50",text:o==="dark"?"text-green-400":"text-green-700"},blue:{bg:o==="dark"?"bg-blue-500/20":"bg-blue-50",text:o==="dark"?"text-blue-400":"text-blue-700"},purple:{bg:o==="dark"?"bg-purple-500/20":"bg-purple-50",text:o==="dark"?"text-purple-400":"text-purple-700"},red:{bg:o==="dark"?"bg-red-500/20":"bg-red-50",text:o==="dark"?"text-red-400":"text-red-700"},yellow:{bg:o==="dark"?"bg-yellow-500/20":"bg-yellow-50",text:o==="dark"?"text-yellow-400":"text-yellow-700"},indigo:{bg:o==="dark"?"bg-indigo-500/20":"bg-indigo-50",text:o==="dark"?"text-indigo-400":"text-indigo-700"}};return B[C.color]||B.green};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`${k} rounded-xl border-2 ${v} p-4 sm:p-6 shadow-lg hover:shadow-xl transition-all ${o==="dark"?"hover:border-green-500/50":"hover:border-green-300"}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("h3",{className:`text-lg sm:text-xl font-bold ${b} truncate`,children:t.title})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[i.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs sm:text-sm font-medium ${U().bg} ${U().text}`,children:[C.icon," ",C.label]}),i.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs sm:text-sm font-medium border ${q()}`,children:E.label}),i.jsx("span",{className:`text-xs sm:text-sm font-medium ${A()}`,children:t.priority==="high"?" ":t.priority==="medium"?" ":" "})]})]}),M&&i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>e(t),className:`p-2 rounded-lg transition-colors ${o==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,title:"",children:i.jsx(Ir,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>r(t.id),className:`p-2 rounded-lg transition-colors ${o==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,title:"",children:i.jsx(er,{className:"w-4 h-4"})})]})]}),t.description&&i.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-300":"text-gray-600"} mb-4 line-clamp-2`,children:t.description}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[i.jsx(li,{className:`w-4 h-4 ${o==="dark"?"text-blue-400":"text-blue-600"}`}),i.jsx("span",{className:`font-medium ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:":"}),i.jsx("span",{className:o==="dark"?"text-gray-400":"text-gray-600",children:(y==null?void 0:y.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[i.jsx(Ar,{className:`w-4 h-4 ${o==="dark"?"text-green-400":"text-green-600"}`}),i.jsx("span",{className:`font-medium ${o==="dark"?"text-gray-300":"text-gray-700"}`,children:":"})]}),L.length>0?i.jsx("div",{className:"mt-2 space-y-2",children:L.map(B=>{const W=x(B.priority);return i.jsxs("div",{className:`p-3 rounded-lg border ${v} ${o==="dark"?"bg-gray-800/70":"bg-gray-50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:`text-sm font-medium ${o==="dark"?"text-gray-100":"text-gray-800"}`,children:B.member.name}),i.jsx("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${W.classes}`,children:W.label})]}),B.comment&&i.jsx("p",{className:`text-xs mt-1 ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:B.comment})]},B.member.id)})}):i.jsx("span",{className:"text-gray-500",children:" "})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-xs sm:text-sm",children:[i.jsx(Zr,{className:`w-4 h-4 ${o==="dark"?"text-gray-400":"text-gray-500"}`}),i.jsxs("span",{className:o==="dark"?"text-gray-400":"text-gray-600",children:[": ",oe(new Date(t.dueDate),"dd.MM.yyyy")," ",t.dueTime]}),i.jsx(q2,{dueDate:t.dueDate,dueTime:t.dueTime,theme:o})]}),t.status==="pending"&&t.approvals.length>0&&i.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[i.jsx(po,{className:`w-4 h-4 ${o==="dark"?"text-yellow-400":"text-yellow-600"}`}),i.jsxs("span",{className:o==="dark"?"text-yellow-400":"text-yellow-600",children:[": ",t.approvals.filter(B=>B.status==="approved").length,"/",t.approvals.length]})]})]}),i.jsxs("div",{className:`flex flex-wrap gap-2 pt-4 border-t ${v}`,children:[I&&!_&&i.jsxs("button",{onClick:()=>S("approve"),className:"flex-1 sm:flex-none px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(zo,{className:"w-4 h-4"}),""]}),I&&!_&&i.jsxs("button",{onClick:()=>h(!0),className:"flex-1 sm:flex-none px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(wr,{className:"w-4 h-4"}),""]}),t.status==="pending"&&w&&(M||I)&&i.jsxs("button",{onClick:()=>j("in_progress"),disabled:l,className:"flex-1 sm:flex-none px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[i.jsx(Js,{className:"w-4 h-4"})," "]}),t.status==="in_progress"&&(M||R.includes((s==null?void 0:s.id)||""))&&i.jsxs("button",{onClick:()=>j("completed"),disabled:l,className:"flex-1 sm:flex-none px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[i.jsx(Km,{className:"w-4 h-4"}),""]}),t.status==="completed"&&M&&i.jsxs("button",{onClick:()=>j("closed"),disabled:l,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[i.jsx(Bj,{className:"w-4 h-4"}),""]})]})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:`${k} rounded-xl p-6 max-w-md w-full border-2 ${v}`,children:[i.jsx("h3",{className:`text-lg font-bold mb-4 ${b}`,children:" "}),i.jsx("textarea",{value:g,onChange:B=>m(B.target.value),placeholder:"  ",rows:3,className:`w-full px-4 py-2 rounded-lg border ${v} ${o==="dark"?"bg-gray-700":"bg-gray-50"} ${b} mb-4 focus:outline-none focus:ring-2 focus:ring-green-500/50`}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>S("reject"),disabled:l||!g.trim(),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors bg-red-500 hover:bg-red-600 text-white disabled:opacity-50",children:""}),i.jsx("button",{onClick:()=>{h(!1),m("")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:""})]})]})})]})},K3=({selectedCategory:t,selectedStatus:e,selectedUsers:r,onCategoryChange:n,onStatusChange:s,onUsersChange:a,onClear:o})=>{const{theme:l}=Ue(),u=l==="dark"?"text-white":"text-gray-900",d=l==="dark"?"bg-gray-800":"bg-white",h=l==="dark"?"border-gray-600":"border-gray-300",g=t!=="all"||e!=="all"||r.length>0;return i.jsxs("div",{className:`${d} rounded-xl border-2 ${h} p-4 sm:p-6 shadow-lg sticky top-4`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[i.jsx("div",{className:`p-2 rounded-lg ${l==="dark"?"bg-green-500/20":"bg-green-50"}`,children:i.jsx(ty,{className:`w-5 h-5 ${l==="dark"?"text-green-400":"text-green-600"}`})}),i.jsx("h3",{className:`text-lg font-bold ${u} flex-1`,children:""}),g&&i.jsxs("button",{onClick:o,className:`px-3 py-1.5 rounded-lg text-sm transition-all flex items-center gap-2 ${l==="dark"?"bg-red-500/20 hover:bg-red-500/30 text-red-400 border border-red-500/50":"bg-red-50 hover:bg-red-100 text-red-600 border border-red-200"}`,children:[i.jsx(wr,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-semibold mb-3 ${u} flex items-center gap-2`,children:[i.jsx(xr,{className:"w-4 h-4"}),""]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>n("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${t==="all"?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:""}),Object.entries(Gm).map(([m,{label:b,icon:k}])=>i.jsxs("button",{onClick:()=>n(m),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${t===m?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:[i.jsx("span",{className:"mr-1.5",children:k}),b]},m))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-semibold mb-3 ${u} flex items-center gap-2`,children:[i.jsx(ty,{className:"w-4 h-4"}),""]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>s("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${e==="all"?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:""}),Object.entries(ou).map(([m,{label:b,color:k}])=>{const v={yellow:{active:l==="dark"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-yellow-50 border-yellow-500 text-yellow-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},blue:{active:l==="dark"?"bg-blue-500/20 border-blue-500 text-blue-400":"bg-blue-50 border-blue-500 text-blue-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},green:{active:l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},gray:{active:l==="dark"?"bg-gray-500/20 border-gray-500 text-gray-400":"bg-gray-50 border-gray-500 text-gray-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"},red:{active:l==="dark"?"bg-red-500/20 border-red-500 text-red-400":"bg-red-50 border-red-500 text-red-700",inactive:l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}},C=v[k]||v.gray;return i.jsx("button",{onClick:()=>s(m),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${e===m?C.active:C.inactive}`,children:b},m)})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:`block text-sm font-semibold mb-3 ${u} flex items-center gap-2`,children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),""]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>a([]),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${r.length===0?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:""}),we.map(m=>{const b=r.includes(m.id);return i.jsx("button",{onClick:()=>{a(b?r.filter(k=>k!==m.id):[...r,m.id])},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-2 ${b?l==="dark"?"bg-green-500/20 border-green-500 text-green-400":"bg-green-50 border-green-500 text-green-700":`${l==="dark"?"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`}`,children:m.name},m.id)})]})]})]})]})},Q3=({tasks:t,onUpdate:e,onEdit:r,onDelete:n})=>{const{theme:s}=Ue(),{user:a}=Nt(),{isAdmin:o}=Yt(),[l,u]=P.useState(null),[d,h]=P.useState(null),[g,m]=P.useState(null),[b,k]=P.useState(""),[v,C]=P.useState(null),[E,y]=P.useState(null),[N,R]=P.useState(null),L=s==="dark"?"text-white":"text-gray-900",M=s==="dark"?"bg-gray-800":"bg-white",I=s==="dark"?"border-gray-600":"border-gray-300",_=["pending","in_progress","completed","closed","rejected"],w=J=>J.assignees&&J.assignees.length>0?J.assignees:J.assignedTo.map(X=>({userId:X,priority:"medium"})),j=J=>w(J).map(X=>X.userId),S=J=>t.filter(X=>X.status===J),A=(J,X)=>{if(v){J.preventDefault();return}u(X),J.dataTransfer.effectAllowed="move",J.dataTransfer.setData("text/plain",X.id)},x=J=>{J.preventDefault(),J.dataTransfer.dropEffect="move"},q=()=>{u(null)},U=(J,X)=>{if(v||X.status==="rejected")return;const G=J.touches[0];y({x:G.clientX,y:G.clientY,task:X})},B=J=>{if(!E)return;J.preventDefault();const X=J.touches[0],G=document.elementFromPoint(X.clientX,X.clientY);if(G){const K=G.closest("[data-status]");if(K){const ke=K.getAttribute("data-status");ke&&R(ke)}}},W=async(J,X)=>{if(!E)return;const G=J.changedTouches[0],K=document.elementFromPoint(G.clientX,G.clientY);if(K){const ke=K.closest("[data-status]");if(ke){const _e=ke.getAttribute("data-status");_e&&_e!==X&&E.task.status!=="rejected"&&await V(E.task,_e)}}y(null),R(null)},F=async(J,X)=>{if(J.preventDefault(),J.stopPropagation(),!l||l.status===X||v){u(null);return}if(l.status==="rejected"&&X!=="pending"){u(null);return}if(X==="rejected"){u(null);return}C(l.id);try{const G=new Date().toISOString(),K={status:X,updatedAt:G};if(X==="completed")K.completedAt=G,K.completedBy=(a==null?void 0:a.id)||"admin";else if(X==="closed")K.closedAt=G;else if(X==="in_progress"&&l.status==="pending"){if(!l.approvals.every(_e=>_e.status==="approved")){C(null),u(null);return}}else X==="pending"&&l.status==="rejected"&&(K.approvals=j(l).map(ke=>({userId:ke,status:"pending",updatedAt:G})));await Bs(l.id,K),e()}catch(G){console.error("Error updating task status:",G)}finally{C(null),u(null)}},V=async(J,X)=>{if(J.status===X||v===J.id){h(null);return}C(J.id);try{const G=new Date().toISOString(),K={status:X,updatedAt:G};if(X==="completed")K.completedAt=G,K.completedBy=(a==null?void 0:a.id)||"admin";else if(X==="closed")K.closedAt=G;else if(X==="in_progress"&&J.status==="pending"){if(!J.approvals.every(_e=>_e.status==="approved")){C(null),h(null);return}}else X==="pending"&&J.status==="rejected"&&(K.approvals=j(J).map(ke=>({userId:ke,status:"pending",updatedAt:G})));await Bs(J.id,K),e(),h(null)}catch(G){console.error("Error updating task status:",G)}finally{C(null)}},D=async(J,X)=>{if(a){C(J.id);try{const G=new Date().toISOString(),K=X==="approve"?"approved":"rejected",ke=J.approvals.map(se=>se.userId===a.id?{...se,status:K,comment:X==="reject"&&b||void 0,updatedAt:G}:se);J.approvals.find(se=>se.userId===a.id)||ke.push({userId:a.id,status:K,comment:X==="reject"&&b||void 0,updatedAt:G});const _e={approvals:ke,updatedAt:G};X==="reject"?_e.status="rejected":X==="approve"&&(_e.status="in_progress"),await Bs(J.id,_e),e(),X==="reject"&&(m(null),k(""))}catch(G){console.error("Error approving task:",G)}finally{C(null)}}},H=async J=>{if(!(!a||J.createdBy!==a.id)){C(J.id);try{const X=new Date().toISOString();await Bs(J.id,{status:"pending",approvals:j(J).map(G=>({userId:G,status:"pending",updatedAt:X})),updatedAt:X}),e()}catch(X){console.error("Error resubmitting task:",X)}finally{C(null)}}},$=J=>({pending:s==="dark"?"bg-yellow-500/20 border-yellow-500/50":"bg-yellow-50 border-yellow-200",in_progress:s==="dark"?"bg-blue-500/20 border-blue-500/50":"bg-blue-50 border-blue-200",completed:s==="dark"?"bg-green-500/20 border-green-500/50":"bg-green-50 border-green-200",closed:s==="dark"?"bg-gray-500/20 border-gray-500/50":"bg-gray-50 border-gray-200",rejected:s==="dark"?"bg-red-500/20 border-red-500/50":"bg-red-50 border-red-200"})[J],te=J=>({pending:s==="dark"?"text-yellow-400":"text-yellow-700",in_progress:s==="dark"?"text-blue-400":"text-blue-700",completed:s==="dark"?"text-green-400":"text-green-700",closed:s==="dark"?"text-gray-400":"text-gray-700",rejected:s==="dark"?"text-red-400":"text-red-700"})[J],ue=J=>{const X=new Date;return new Date(`${J.dueDate}T${J.dueTime}`)<X&&J.status!=="completed"&&J.status!=="closed"&&J.status!=="rejected"},le=J=>{if(J.status!=="pending"||!a||!j(J).includes(a.id))return!1;const G=J.approvals.find(K=>K.userId===a.id);return!G||G.status==="pending"},fe=J=>J.status!=="rejected"||!a?!1:J.createdBy===a.id||o;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"overflow-x-auto pb-4 -mx-4 px-4",children:i.jsx("div",{className:"flex gap-3 sm:gap-4 min-w-max",children:_.map(J=>{const X=S(J),G=ou[J];return i.jsxs("div",{"data-status":J,className:`flex-shrink-0 w-[280px] sm:w-80 ${M} rounded-xl border-2 ${I} p-3 sm:p-4 ${N===J?"border-green-500":""}`,onDragOver:x,onDrop:K=>F(K,J),onTouchMove:B,children:[i.jsx("div",{className:`mb-3 sm:mb-4 pb-2 sm:pb-3 border-b ${I}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:`text-base sm:text-lg font-bold ${te(J)}`,children:G.label}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-xs sm:text-sm font-medium ${$(J)} ${te(J)}`,children:X.length})]})}),i.jsxs("div",{className:"space-y-2 sm:space-y-3 max-h-[calc(100vh-280px)] sm:max-h-[calc(100vh-300px)] overflow-y-auto",children:[X.map(K=>{var Ne;const ke=ue(K),_e=o||(a==null?void 0:a.id)===K.createdBy,se=le(K),Ee=fe(K),gt=w(K).map(xe=>{const Xt=we.find(it=>it.id===xe.userId);return Xt?{...xe,member:Xt}:null}).filter(Boolean);return i.jsxs("div",{draggable:!v&&K.status!=="rejected",onDragStart:xe=>A(xe,K),onDragEnd:q,onTouchStart:xe=>U(xe,K),onTouchEnd:xe=>W(xe,J),className:`${M} rounded-lg border-2 ${I} p-2.5 sm:p-3 cursor-move hover:shadow-lg transition-all ${(l==null?void 0:l.id)===K.id||(E==null?void 0:E.task.id)===K.id?"opacity-50":""} ${ke?"border-red-500":""} ${v===K.id?"opacity-50 pointer-events-none":""} ${K.status==="rejected"?"opacity-75":""}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h4",{className:`font-semibold text-xs sm:text-sm ${L} flex-1`,children:K.title}),i.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:i.jsxs("div",{className:"relative lg:hidden",children:[i.jsx("button",{onClick:()=>h((d==null?void 0:d.id)===K.id?null:K),className:`p-1 rounded ${s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:i.jsx($j,{className:"w-4 h-4"})}),(d==null?void 0:d.id)===K.id&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(null)}),i.jsx("div",{className:`absolute right-0 top-8 z-50 ${M} rounded-lg shadow-xl border-2 ${I} min-w-[200px]`,children:i.jsxs("div",{className:"p-2",children:[i.jsx("div",{className:`text-xs font-medium mb-2 px-2 py-1 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:" :"}),_.filter(xe=>xe!=="rejected"||K.status==="rejected").map(xe=>i.jsx("button",{onClick:()=>V(K,xe),disabled:K.status===xe||v===K.id,className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors mb-1 ${K.status===xe?$(xe):s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"} ${K.status===xe?te(xe):L} disabled:opacity-50`,children:ou[xe].label},xe)),_e&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`border-t ${I} my-2`}),i.jsx("button",{onClick:()=>{h(null),r(K)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors mb-1 ${s==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"} ${L}`,children:""}),i.jsx("button",{onClick:()=>{h(null),n(K.id)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${s==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,children:""})]})]})})]})]})})]}),i.jsxs("div",{className:"space-y-1.5 text-xs mb-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:`flex items-center gap-1 ${s==="dark"?"text-blue-400":"text-blue-600"}`,children:[i.jsx("span",{className:"font-medium",children:":"}),i.jsx("span",{className:s==="dark"?"text-gray-400":"text-gray-600",children:((Ne=we.find(xe=>xe.id===K.createdBy))==null?void 0:Ne.name)||""})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("div",{className:`flex items-center gap-1 ${s==="dark"?"text-green-400":"text-green-600"}`,children:i.jsx("span",{className:"font-medium",children:":"})}),gt.length>0?gt.map(xe=>i.jsxs("div",{className:`text-[11px] sm:text-xs ${s==="dark"?"text-gray-300":"text-gray-700"} flex flex-wrap gap-1`,children:[i.jsx("span",{className:"font-medium",children:xe.member.name}),i.jsx("span",{children:""}),i.jsx("span",{children:xe.priority==="high"?"":xe.priority==="medium"?"":""}),xe.comment&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{className:"truncate max-w-[140px] sm:max-w-[180px]",children:xe.comment})]})]},xe.member.id)):i.jsx("span",{className:"text-gray-500",children:" "})]})]}),i.jsxs("div",{className:`flex items-center gap-1 flex-wrap ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[i.jsxs("span",{children:[" ",oe(new Date(K.dueDate),"dd.MM.yyyy")]}),i.jsxs("span",{children:[" ",K.dueTime]}),i.jsx(q2,{dueDate:K.dueDate,dueTime:K.dueTime,theme:s,size:"compact"})]}),K.description&&i.jsx("p",{className:`line-clamp-2 ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:K.description}),i.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:i.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${$(J)} ${te(J)}`,children:K.category==="trading"?"":K.category==="learning"?"":K.category==="technical"?"":K.category==="stream"?"":K.category==="research"?"":(K.category==="organization","")})})]}),se&&i.jsxs("div",{className:`flex gap-2 mt-2 pt-2 border-t ${I}`,children:[i.jsxs("button",{onClick:()=>D(K,"approve"),className:"flex-1 px-2 py-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-1",children:[i.jsx(zo,{className:"w-3 h-3"}),""]}),i.jsxs("button",{onClick:()=>{m({task:K}),k("")},className:"flex-1 px-2 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-1",children:[i.jsx(wr,{className:"w-3 h-3"}),""]})]}),Ee&&i.jsx("div",{className:`mt-2 pt-2 border-t ${I}`,children:i.jsxs("button",{onClick:()=>H(K),disabled:v===K.id,className:"w-full px-2 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-1 disabled:opacity-50",children:[i.jsx(Lj,{className:"w-3 h-3"}),"  "]})})]},K.id)}),X.length===0&&i.jsxs("div",{className:`text-center py-6 sm:py-8 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:[i.jsx(ii,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-xs sm:text-sm",children:" "})]})]})]},J)})})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:`${M} rounded-xl p-6 max-w-md w-full border-2 ${I}`,children:[i.jsx("h3",{className:`text-lg font-bold mb-4 ${L}`,children:" "}),i.jsx("textarea",{value:b,onChange:J=>k(J.target.value),placeholder:"  ",rows:3,className:`w-full px-4 py-2 rounded-lg border ${I} ${s==="dark"?"bg-gray-700":"bg-gray-50"} ${L} mb-4 focus:outline-none focus:ring-2 focus:ring-green-500/50`}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>g.task&&D(g.task,"reject"),disabled:v===g.task.id||!b.trim(),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors bg-red-500 hover:bg-red-600 text-white disabled:opacity-50",children:""}),i.jsx("button",{onClick:()=>{m(null),k("")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:""})]})]})})]})},Y3=()=>{const{theme:t}=Ue(),{user:e}=Nt(),[r,n]=P.useState(!1),[s,a]=P.useState(null),[o,l]=P.useState([]),[u,d]=P.useState(!0),[h,g]=P.useState("all"),[m,b]=P.useState("all"),[k,v]=P.useState([]),[C,E]=P.useState("kanban"),y=t==="dark"?"text-white":"text-gray-900",N=t==="dark"?"bg-gray-800":"bg-white";P.useEffect(()=>{R()},[e]),P.useEffect(()=>{R()},[h,m,k]);const R=async()=>{d(!0);try{const A={};h!=="all"&&(A.category=h),m!=="all"&&(A.status=m),k.length>0&&(A.assignedTo=k);const x=await A2(A);l(x)}catch(A){console.error("Error loading tasks:",A)}finally{d(!1)}},L=A=>{a(A),n(!0)},M=async A=>{if(confirm(" ,     ?"))try{await P2(A),R()}catch(x){console.error("Error deleting task:",x)}},I=()=>{n(!1),a(null)},_=()=>{n(!1),a(null),R()},w=()=>{g("all"),b("all"),v([])},j=o.filter(A=>!(h!=="all"&&A.category!==h||m!=="all"&&A.status!==m||k.length>0&&!k.some(x=>A.assignedTo.includes(x)))),S={pending:o.filter(A=>A.status==="pending").length,inProgress:o.filter(A=>A.status==="in_progress").length,completed:o.filter(A=>A.status==="completed").length,closed:o.filter(A=>A.status==="closed").length};return i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${N} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-start lg:justify-between mb-4 sm:mb-6",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[i.jsx(ii,{className:`w-6 h-6 sm:w-8 sm:h-8 ${t==="dark"?"text-green-400":"text-green-600"}`}),i.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${y} flex items-center gap-2`,children:["",i.jsx(xr,{className:`w-5 h-5 sm:w-6 sm:h-6 ${t==="dark"?"text-yellow-400":"text-yellow-600"}`})]})]}),i.jsx("p",{className:`text-sm sm:text-base ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"    "})]})}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[i.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:[i.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-yellow-400":"text-yellow-700"}`,children:" "}),i.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.pending})]}),i.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[i.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-blue-400":"text-blue-700"}`,children:" "}),i.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.inProgress})]}),i.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[i.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-green-400":"text-green-700"}`,children:""}),i.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.completed})]}),i.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-500/10 border-gray-500/30":"bg-gray-50 border-gray-200"}`,children:[i.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${t==="dark"?"text-gray-400":"text-gray-700"}`,children:""}),i.jsx("div",{className:`text-xl sm:text-2xl font-bold ${y}`,children:S.closed})]})]})]})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6",children:[i.jsx("div",{className:"lg:w-80 flex-shrink-0",children:i.jsx(K3,{selectedCategory:h,selectedStatus:m,selectedUsers:k,onCategoryChange:g,onStatusChange:b,onUsersChange:v,onClear:w})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 gap-3",children:[i.jsxs("h2",{className:`text-xl font-bold ${y}`,children:[" (",j.length,")"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:`flex rounded-lg border-2 ${t==="dark"?"border-gray-600":"border-gray-300"} overflow-hidden`,children:[i.jsx("button",{onClick:()=>E("kanban"),className:`px-3 py-2 transition-colors ${C==="kanban"?"bg-green-500 text-white":t==="dark"?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-50"}`,title:"Kanban ",children:i.jsx(Aj,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>E("list"),className:`px-3 py-2 transition-colors ${C==="list"?"bg-green-500 text-white":t==="dark"?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-50"}`,title:"",children:i.jsx(Pj,{className:"w-4 h-4"})})]}),i.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center gap-2",children:[i.jsx(oi,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden sm:inline",children:" "}),i.jsx("span",{className:"sm:hidden",children:""})]})]})]}),u?i.jsx("div",{className:`${N} rounded-xl p-8 text-center ${y}`,children:i.jsx("div",{className:"animate-pulse",children:"..."})}):j.length===0?i.jsxs("div",{className:`${N} rounded-xl p-8 text-center border-2 ${t==="dark"?"border-gray-600":"border-gray-300"}`,children:[i.jsx(ii,{className:`w-12 h-12 mx-auto mb-4 ${t==="dark"?"text-gray-600":"text-gray-400"}`}),i.jsx("p",{className:`text-lg font-medium ${y} mb-2`,children:" "}),i.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:h!=="all"||m!=="all"||k.length>0?"  ":"  "})]}):C==="kanban"?i.jsx(Q3,{tasks:j,onUpdate:R,onEdit:L,onDelete:M}):i.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:j.map(A=>i.jsx(G3,{task:A,onEdit:L,onDelete:M,onUpdate:R},A.id))})]})]}),r&&i.jsx(B3,{onClose:I,onSave:_,editingTask:s})]})})},vh=[{id:"all",name:" ",icon:i.jsx(Ym,{className:"w-5 h-5"}),color:"text-blue-600",darkColor:"text-blue-400"},{id:"auth",name:"",icon:i.jsx(Rj,{className:"w-5 h-5"}),color:"text-purple-600",darkColor:"text-purple-400"},{id:"slots",name:" ",icon:i.jsx(Zr,{className:"w-5 h-5"}),color:"text-green-600",darkColor:"text-green-400"},{id:"status",name:"",icon:i.jsx(Qm,{className:"w-5 h-5"}),color:"text-orange-600",darkColor:"text-orange-400"},{id:"rating",name:"",icon:i.jsx(ca,{className:"w-5 h-5"}),color:"text-red-600",darkColor:"text-red-400"},{id:"earnings",name:"",icon:i.jsx(Gu,{className:"w-5 h-5"}),color:"text-yellow-600",darkColor:"text-yellow-400"},{id:"calls",name:" ",icon:i.jsx(Ha,{className:"w-5 h-5"}),color:"text-emerald-600",darkColor:"text-emerald-400"},{id:"tasks",name:"",icon:i.jsx(ii,{className:"w-5 h-5"}),color:"text-lime-600",darkColor:"text-lime-400"},{id:"admin",name:"",icon:i.jsx(en,{className:"w-5 h-5"}),color:"text-indigo-600",darkColor:"text-indigo-400"},{id:"messages",name:"",icon:i.jsx(hw,{className:"w-5 h-5"}),color:"text-cyan-600",darkColor:"text-cyan-400"},{id:"referrals",name:"",icon:i.jsx(Ar,{className:"w-5 h-5"}),color:"text-pink-600",darkColor:"text-pink-400"},{id:"edit",name:"",icon:i.jsx(Ir,{className:"w-5 h-5"}),color:"text-teal-600",darkColor:"text-teal-400"},{id:"interface",name:" ",icon:i.jsx(cw,{className:"w-5 h-5"}),color:"text-violet-600",darkColor:"text-violet-400"}],mc=[{question:"    ?",answer:`1.     /start,        " : "
2.        
3.  /menu     
4.      ,    

     ,      .`,category:"auth"},{question:"  ?",answer:`   :
1.   /start
2.      
3.   : " : " (: mylogin : mypassword)
4.     :
     
     
     
       

  :
1.  
2.      : ""  ""
3.   "":
     
     
4.   "":
       
5.    (/) -     
6.  ""
7.       

:
  :  /logout
  :      

:
       
       
       /start      
  ,    ,      
          

  :
    ( :     )
 ,      
   ,   : @artyommedoed`,category:"auth"},{question:"      ?",answer:`    :
1.     
2.    "" ( )
3.   
4.  ""
5.       

   :
    ""     -  
    
     

  :
      
  / 
     
    
      

:
    (     )
     ""   

:
      
       `,category:"admin"},{question:"   ?",answer:` :
1.   /add_call
2.      :

 1 - :
    : Solana, BSC, Ethereum, Base, Ton, Tron, SUI  CEX 
    

 2 -  :
    (: PEPE, DOGE, BONK)
       (: PEPE)

 3 -  :
    (: PEPE/USDT)

 4 -  :
        
       (: 1000000  1000000-1500000)

 5 - :
       
       (: 2000000, 3000000, 5000000)

 6 - :
  : ,   

 7 - :
  ,    

 8 -  :
       ( "-"  )

 9 - :
    ( "-"  )

 :
1.    "Call"
2.   " "
3.     
4.  ""

 :
 /my_calls -  
 /all_calls -    
  "Call"   -      `,category:"calls"},{question:"   ?",answer:` :

 :
 /my_calls -     
   :
  -    
  -   
  -   ()
  -  ()
  - 
  -  (//)
  -  

 :
 /all_calls -     
    
    

 :
1.    "Call"
2.   :
      
      ,   
      
      

:
  "Call"   :
  -   
  -   
  -  PNL
  -  // 
  -  

  :
  :       
       /`,category:"calls"},{question:"    ?",answer:`  :

1. :
 Solana, BSC, Ethereum, Base, Ton, Tron, SUI  CEX 
  ,    

2.   ():
   (: PEPE)
   ,   
      

3.  :
   (: PEPE/USDT)
 ,     

4.  :
     ( )
      
 : 1000000  1000000-1500000

5. :
      
      
 : 2000000, 3000000, 5000000

6. :
  -   (-)
  -   (-)
  -   (-)

7. :
  ,     
     

8.  :
       
     

9. :
    
    

:
       ,    
         `,category:"calls"},{question:"   Management  ?",answer:` :

:
1. :
       ,   -  
        
        
       
        

2. :
        
        
       
         

 :
  -   
  -      
  -   

 :
  :     
  :     
 :   ( )  - ( )
     

:
     
     
   

:
  " "  " "
    

 :
  , , , 
   ( )
   `,category:"interface"},{question:"   ?",answer:`  :
   ,   
     
     

 :
  Management (  )
    
     
  

  :
1.     public/avatars/
2.     :
    artyom.jpg -  
    adel.jpg -  
    kseniya.jpg -  
    olga.jpg -  
    anastasia.jpg -  

  :
 : JPG, PNG   -
  : 200x200   
     
   : 1:1 ()

FALLBACK:
       :
  -    
  -     
  -     

:
     (public/avatars/)
 ,      
     `,category:"interface"},{question:"   ?",answer:` :

  :
1.  
2.           
3.   :
     () -   
     () -   
4.          

 :
        
   
     

 :

 :
   
  
   
    

 :
   
  
   
    /
    

:
     
       
     `,category:"interface"},{question:"     ?",answer:` :

 :
    ( blue-500  blue-600)
   
  
  :
  -  
  -  ,      

 :
    ( gray-500  gray-600)
   
  
  :
  -  
  -  ,     

:
     
 -  (gray-700)   
    
    

:
 "" -   
 "" -    
 "" -  

  :
  ,    
     
   
   `,category:"slots"},{question:"   ?",answer:` :
1.   /add_slot
2.     .. (: 25.12.2024)
3.      : (: 10:00)
4.    (: 14:00)
5.     (     "-"  )
6.   ()

 :
1.    Management
2.   " "
3.  :   ( ), ,   ,   
4.  ""

           .`,category:"slots"},{question:"   ?",answer:`      :

 :
-       . ,    19:00-21:00,    20:00-22:00
-      ,            

 :
-           
-  3      

:
  19:00-21:00   20:00-22:00  
  19:00-21:00   18:00-20:00  
  19:00-21:00   21:30-23:00  `,category:"slots"},{question:"  ?",answer:` :
1.   /schedule
2.      
3.   " "  " "    

  :
     (   ID)
 ,     
     
 ID    /

 :
1.    Management
2.        
3.      
4.    

 :
   
  
  
  `,category:"slots"},{question:"  ?",answer:` :
1.   /dayoff
2.      ..
3.   (,  "-"  )

 :
  2   
   3        
       (   )

 :
1.    Management
2.   " "
3.     ( )
4.   ()
5.  ""

          .`,category:"status"},{question:"  ?",answer:` :
1.   /sick
2.      ..
3.      (    )
4.   ()

 :
         + 2  
       
  14    
      1 

 :
1.    Management
2.   " "
3.   (     )
4.    `,category:"status"},{question:"  ?",answer:` :
1.   /vacation
2.       ..
3.    
4.   ()

 :
  14    
   6   
          

 :
1.    Management
2.   " "
3.     
4.    `,category:"status"},{question:"   ?",answer:`    ( 100%)   7   :

1.  (10%)
    0-2    = 10%
     2  = 0%

2.  (10%)
     7    = 10%
     7  = 0%

3.  (10%)
     7    = 10%
     7  = 0%

4.   ( 25%)
    30+    = 25%
    20-29  = 15%
     20  = 0%

5.  ( 30%)
    6000+    = 30%
    3000-5999  = 15%
     3000  = 0%

6.  ( 30%)
    5%   
     30% (6 )

7.    (15%)
     50    = 15%
    50   = 0%

 :
 /my_stats -     
 /team_kpd -   
  ""  `,category:"rating"},{question:"    ?",answer:` :

 :
  2   
   3     
     

 :
  :   + 2  
  14   
      

 :
  14   
   6   

 :
  ,       
  3    

 :
  :   
 :   

 :
  20      
  50      
  3000     

  :
      ,    .`,category:"rating"},{question:"  ?",answer:` :
1.   /add_earning
2.     ..  ""
3.    ( , : 5000)
4.    ( , : 1000)

:
        
       

 :
1.    Earnings
2.   " "
3.   (  "")
4.      
5.     (  )
6.  ""

 :
 /earnings_day -   
 /earnings_week -   `,category:"earnings"},{question:"    ?",answer:` :
1.   /add_pool
2.      
3.  ,   ID
4.  ID 
5.       ( )

:
         (  )
          
     

 :
1.    Earnings
2.   "  "
3.     
4.   
5.  ""

  -          .`,category:"earnings"},{question:"   ?",answer:`  :
1.   /admin
2.   
3.      

  :
1.       ""
2.   
3.     

 :

  :
     
       
    
    (  , ,  )
    

  :
  ,      
   
    
    

  :
      (  )
        
    

  :
      
    

 :
     (/remove_message)
     
      
   ""  

:
  : /logout -   
  :      
     ""   

:
     
     
        `,category:"admin"},{question:"     ?",answer:`:

 :
1.    "Call"
2.     
3.    ( )
4.    
5.  ""

:

 :
1.    "Call"
2.   
3.    ( )
4.  

 :
    /   
   /  
        

  :
   :
  - 
  -  
  - 
  -  
  - 
  - 
  - 
  -  
  - 
  -  (//)

:
     
       
        ""`,category:"calls"},{question:"     Call?",answer:`  :
   
   
   
   
  PNL  
     

  :
    
 // 
  PNL 
  PNL 
    

:
      
     
   MAX , PNL      
      

:
    
    
    
   `,category:"calls"},{question:"   ?",answer:`     :

 :
      (, , , ,   ..)
   
    (  )

  :
   (  /)
   
     ( )

:
        50    (  15%  )
   ,    
     ,        /remove_message ( reply  )

  :
 /my_stats -     
  ""   -  `,category:"messages"},{question:" ,     ?",answer:`     ,      .     :

 :
1.   /remove_message
2.  (reply)    (    )   ID 
3.        

:
 /remove_message ( reply  ) -   ID
 /remove_message [messageId] -  ID 

 :
     messages
   ratings   1
         

:
       
        
     ,  ID         `,category:"messages"},{question:"  ?",answer:`         :

  :
 :
1.   /add_referral
2.   
3.  ID  (username  )
4.   (,  "-"  )
5.   ()

 :
1.    Rating
2.  " "
3.  

 :
 5%     
  30% (6 )
     30 

 :
 /my_referrals -   
 /edit_referral [ID] -  
 /delete_referral [ID] -  

        Rating.`,category:"referrals"},{question:"    ?",answer:`:

  (  ):
 /delete_slot [ID] -  
 /delete_dayoff [ID] -  
 /delete_sick [ID] -  
 /delete_vacation [ID] -  
 /delete_earning [ID] -  
 /delete_referral [ID] -  

  :
 /bulk_delete_slots -  :
  -    (      )
  -   (    )
  -    (   )

 :
    
   
    ( )
  

:

 :
     
    /edit_slot [ID],   
      ,     

 :
    
   
    ( )
    

  :
  : , , , 
 : , 
 : , , , 
  :    
 : , , 

:
    /   
      
        `,category:"edit"},{question:"      ?",answer:`   MANAGEMENT:

 :
 "" -      
 "" -     
 "" -   

  :
     
 "  " -  
     (  )

:
 "" -      
 "" -     
      

   CALL:
      
  :
  -   (: PEPE)
  -   (: PEPE/USDT)
  -  (: Solana)
     
    

 :
1.   
2.   
3.     
4.    ""    `,category:"interface"},{question:"    ?",answer:` MANAGEMENT:

 :
     
    ( )
    ( )
     

  :
   
    
     

 EARNINGS:

 :
   
    
   
    

 RATING:

 :
    
    :
  -  (10%)
  -  (10%)
  -  (10%)
  -   ( 25%)
  -  ( 30%)
  -  ( 30%)
  -  (15%)

  :
    
     :
  - : 70%+
  - : 50-70%
  - :  50%

 CALL:

 :
   
 //
  PNL 
    
    

:
   
     
        `,category:"interface"},{question:"    ?",answer:` :

  ( ):
 Call -   
  -    :
  -  (Management)
  -  (Earnings)
  -  (Tasks)
  -  (Rating)
   -   
 FAQ -   
  -  
  -   

  ( ):
       
   ,    
  ""    
      

 :

CALL:
   
 , ,  
     
    

:

 (Management):
   
  , , 
   
  :   
     

 (Earnings):
  
    
   (/)
   

 (Tasks):
     
 Kanban   drag & drop
  
   
   ,   
      

 (Rating):
   
    
   
  

 :
    ApeVault
    
    
  

FAQ:
    
     
    

 ( ):
  : , , 
   
  
 
   

 (  ):
    
  
      `,category:"interface"},{question:"    ()?",answer:`  -        :

 :
  -    
  -    
  -   (  /  )

:
   ( 100%)
    :
  -  (10%)
  -  (10%)
  -  (10%)
  -   ( 25%)
  -  ( 30%)
  -  ( 30%)
  -  (15%)
  :
  - : 70%+
  - : 50-70%
  - :  50%

 :
   :
  -  
  -  
  - 
  -  
    

:
   
   
    

  :
  "  "  
  :
  -    (  )
  -    
  -    

 :
  ""   
     /profile

:
    
      
       `,category:"interface"},{question:"   Tasks ()?",answer:`  -      :

 :

 :
1.   " "
2.  :
      ()
     ()
    : , ,  , ,  ,    
    : , , 
      ()
     (   )
3.  " "

 :

1.  :
          
         
          
            " "

2.  :
      
       ""   

3. :
     
        ,     
        

4. :
      
        

:
  : , ,  , ,  ,    
  :  ,  , , 
  :      

:
        
     (  )  
        
      
  "  "   

:
     
   
    

:
   (   )
   (   )
   
 / `,category:"tasks"},{question:"     ?",answer:` :

1.    ""
2.   " "
3.  :

 :
   -   
  -      

 :
  -   
  -   :
   
   
    
   
    
      
  - ,   
   -   ()

 :
      
    
  " "   
  " "  

:
    " "
      " "
     

:
       
        
         " "`,category:"tasks"},{question:"    ?",answer:` :

  :
       " "
      
    ,     " "

 :
1.     " "
2.    ,   ""  ""
3.  ""
4.    
5.  ""  

 :
1.   ""
2.      
3.  ""

   :
   
    (: ": 2/3")
    ,      " "
  " "     

 :
      
 ,   ,    
     ,   

:
    
         
      ,    `,category:"tasks"},{question:"    ?",answer:` :

  :

1.   :
        
    : "  [] .   ."
        

2.   :
        ,    
       " ": " []     []"
       "": " []   []"

3.   :
        ,   
    : " [] .  ."
       

:
     
      
      

 :
  "  "    
    
       

:
        
     ,   
      `,category:"tasks"},{question:"  ?",answer:` :

  :
  -    
  
  
   
  
   
     

  :
  -    
   - ,  
   -  
  -  
  -   

  :
  -    
   -  ,   

 :
1.       
2.   
3.    
4.     
5.  ""    

:
        
      
     `,category:"tasks"}],X3=()=>{const{theme:t}=Ue(),[e,r]=P.useState("all"),[n,s]=P.useState(new Set),a=t==="dark"?"text-white":"text-gray-900",o=t==="dark"?"text-gray-400":"text-gray-600",l=t==="dark"?"text-gray-300":"text-gray-700",u=t==="dark"?"bg-gray-800":"bg-white",d=t==="dark"?"border-gray-700":"border-gray-200",h=t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",g=e==="all"?mc:mc.filter(v=>v.category===e),m=vh.find(v=>v.id===e),b=v=>{const C=new Set(n),E=mc.indexOf(v);C.has(E)?C.delete(E):C.add(E),s(C)},k=v=>v.split(`
`).map((E,y)=>{const N=E.trim();return N.match(/^[-\s]+:$/)||N.match(/^\d+\.\s+[-]/)?i.jsx("h4",{className:`font-bold text-base mt-4 mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:N},y):N.startsWith("")||N.startsWith("")?i.jsxs("div",{className:`flex items-start gap-2 my-2 ${N.startsWith("")?t==="dark"?"text-green-400":"text-green-600":t==="dark"?"text-red-400":"text-red-600"}`,children:[i.jsx("span",{className:"text-xl",children:N.startsWith("")?"":""}),i.jsx("span",{className:"flex-1",children:N.substring(2).trim()})]},y):N.startsWith("")?i.jsxs("div",{className:"flex items-start gap-2 my-1.5 ml-4",children:[i.jsx("span",{className:`${t==="dark"?"text-blue-400":"text-blue-600"} mt-1`,children:""}),i.jsx("span",{className:"flex-1",children:N.substring(1).trim()})]},y):N.match(/^[]\s+[-]/)?i.jsx("div",{className:`font-semibold text-base mt-3 mb-1 ${t==="dark"?"text-gray-200":"text-gray-800"}`,children:N},y):N?i.jsx("p",{className:"my-2 leading-relaxed",children:N},y):i.jsx("br",{},y)});return i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${u} shadow-xl border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-blue-200 bg-gradient-to-br from-white via-blue-50/30 to-white"} relative overflow-hidden mb-4 sm:mb-6`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),i.jsxs("div",{className:"relative z-10 text-center space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:i.jsx(Ym,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${a} flex flex-wrap items-center justify-center gap-2 sm:gap-3`,children:[i.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text",children:"  "}),i.jsx(xr,{className:`hidden sm:inline-flex w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]})})]}),i.jsx("p",{className:`text-sm sm:text-base font-medium ${o}`,children:"       "})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:vh.map(v=>i.jsxs("button",{onClick:()=>{r(v.id),s(new Set)},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${e===v.id?t==="dark"?"bg-blue-600 text-white shadow-lg shadow-blue-500/50 scale-105":"bg-blue-600 text-white shadow-lg scale-105":t==="dark"?"bg-gray-800 text-gray-300 border border-gray-700 hover:bg-gray-700 hover:border-gray-600":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:[i.jsx("span",{className:e===v.id?"text-white":t==="dark"?v.darkColor:v.color,children:v.icon}),i.jsx("span",{children:v.name})]},v.id))})}),m&&e!=="all"&&i.jsx("div",{className:`${u} rounded-xl p-4 border-2 ${t==="dark"?"border-blue-500/30 bg-blue-500/5":"border-blue-200 bg-blue-50"} mb-6`,children:i.jsxs("div",{className:`flex items-center gap-3 ${t==="dark"?m.darkColor:m.color}`,children:[m.icon,i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:m.name}),i.jsxs("p",{className:`text-sm ${l}`,children:[g.length," ",g.length===1?"":g.length<5?"":""]})]})]})}),i.jsx("div",{className:"space-y-4",children:g.length===0?i.jsx("div",{className:`${u} rounded-xl p-8 text-center border ${d}`,children:i.jsx("p",{className:l,children:"     "})}):g.map(v=>{const C=mc.indexOf(v),E=n.has(C),y=vh.find(R=>R.id===v.category),N=y?t==="dark"?y.darkColor:y.color:t==="dark"?"text-gray-300":"text-gray-600";return i.jsxs("div",{className:`${u} rounded-xl shadow-lg border-2 ${E?t==="dark"?"border-blue-500/50 shadow-blue-500/10 ring-2 ring-blue-500/50":"border-blue-300 shadow-blue-200/50 ring-2 ring-blue-300/50":d} overflow-hidden transition-all duration-300`,children:[i.jsxs("button",{onClick:()=>b(v),className:`w-full p-5 sm:p-6 flex flex-col gap-3 text-left ${h} transition-colors group`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-[11px] font-semibold border ${t==="dark"?"bg-gray-800/80 border-gray-700":"bg-gray-100 border-gray-200"} ${N}`,children:[y&&i.jsx("span",{className:"flex items-center gap-1 text-sm",children:y.icon}),i.jsx("span",{className:"uppercase tracking-wide",children:y?y.name:""})]}),i.jsx("div",{className:`flex-shrink-0 p-2 rounded-lg transition-all ${E?t==="dark"?"bg-blue-500/20 text-blue-400 rotate-180":"bg-blue-100 text-blue-600 rotate-180":t==="dark"?"text-gray-400 group-hover:text-gray-300":"text-gray-400 group-hover:text-gray-600"}`,children:i.jsx(vf,{className:"w-5 h-5"})})]}),i.jsx("h3",{className:`text-lg sm:text-xl font-bold ${a} group-hover:${t==="dark"?"text-blue-400":"text-blue-600"} transition-colors`,children:v.question})]}),E&&i.jsx("div",{className:`px-5 sm:px-6 pb-5 sm:pb-6 border-t ${d} pt-4 animate-fade-in`,children:i.jsx("div",{className:`rounded-lg p-4 text-sm leading-relaxed ${t==="dark"?"bg-gray-800/70 text-gray-200":"bg-blue-50/80 text-gray-800"}`,children:k(v.answer)})})]},C)})}),i.jsxs("div",{className:`${u} rounded-lg shadow-lg p-6 border ${d}`,children:[i.jsx("h2",{className:`text-xl font-semibold mb-4 ${a}`,children:"  ?"}),i.jsx("p",{className:`${l} mb-4`,children:"       ,        ."}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("a",{href:"https://telegra.ph/Reglament-provedeniya-torgovyh-sessij-pravila-soobshchestva-ApeVault-dlya-trejderov-i-kollerov-11-20",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:"  "}),i.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-lg ${t==="dark"?"bg-gray-700":"bg-gray-200"}`,children:i.jsxs("span",{className:l,children:[": ",i.jsx("span",{className:"font-semibold",children:"@artyommedoed"})]})})]})]})]})})},J3=()=>{const{theme:t}=Ue(),{isAdmin:e}=Yt(),r=t==="dark"?"text-white":"text-gray-900",n=t==="dark"?"text-gray-300":"text-gray-700",s=t==="dark"?"bg-gray-800":"bg-white";return e?i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-2xl p-6 ${s} shadow-lg border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-800/90":"border-purple-200 bg-gradient-to-br from-white to-purple-50/30"}`,children:[i.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[i.jsx("div",{className:`p-3 rounded-xl ${t==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:i.jsx(en,{className:`w-8 h-8 ${t==="dark"?"text-purple-400":"text-purple-600"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h1",{className:`text-3xl font-bold bg-gradient-to-r ${t==="dark"?"from-purple-400 to-pink-400 text-transparent bg-clip-text":"from-purple-600 to-pink-600 text-transparent bg-clip-text"}`,children:" "}),i.jsx(xr,{className:`w-5 h-5 ${t==="dark"?"text-yellow-400":"text-yellow-500"} animate-pulse`})]}),i.jsxs("p",{className:`${n} text-sm flex items-center gap-2`,children:[i.jsx(ry,{className:"w-4 h-4"}),"    ApeVault"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:i.jsx(en,{className:`w-5 h-5 ${t==="dark"?"text-blue-400":"text-blue-600"}`})}),i.jsx("h3",{className:`font-semibold ${r}`,children:"  "})]}),i.jsx("p",{className:`text-sm ${n}`,children:"      ,      "})]}),i.jsxs("div",{className:`p-4 rounded-xl border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/20":"bg-green-100"}`,children:i.jsx(Cj,{className:`w-5 h-5 ${t==="dark"?"text-green-400":"text-green-600"}`})}),i.jsx("h3",{className:`font-semibold ${r}`,children:""})]}),i.jsx("p",{className:`text-sm ${n}`,children:"    .      "})]})]}),i.jsx("div",{className:`pt-4 border-t ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:i.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl ${t==="dark"?"bg-green-500/20 border-2 border-green-500/50":"bg-green-50 border-2 border-green-200"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-green-500/30":"bg-green-100"}`,children:i.jsx(en,{className:`w-6 h-6 ${t==="dark"?"text-green-400":"text-green-600"}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-semibold mb-1 ${r}`,children:"  "}),i.jsx("p",{className:`text-sm ${n}`,children:"     .    ."})]})]})})]}),i.jsxs("div",{className:`rounded-2xl p-6 ${s} shadow-lg border-2 ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:[i.jsx("h2",{className:`text-xl font-semibold mb-4 ${r}`,children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[i.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:"  "}),i.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[i.jsx("li",{children:"    "}),i.jsx("li",{children:"  "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"  "})]})]}),i.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[i.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:"  "}),i.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[i.jsx("li",{children:" ,   "}),i.jsx("li",{children:"  "}),i.jsx("li",{children:"   "})]})]}),i.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[i.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:"  "}),i.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[i.jsx("li",{children:"    "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"   "})]})]}),i.jsxs("div",{className:`p-4 rounded-xl border ${t==="dark"?"border-gray-700 bg-gray-700/30":"border-gray-200 bg-gray-50"}`,children:[i.jsx("h3",{className:`font-semibold mb-2 ${r}`,children:" "}),i.jsxs("ul",{className:`text-sm space-y-1 ${n} list-disc list-inside`,children:[i.jsx("li",{children:"   "}),i.jsx("li",{children:"    "}),i.jsx("li",{children:"    "})]})]})]})]})]})}):i.jsx(Wr,{children:i.jsx("div",{className:`rounded-2xl p-8 ${s} shadow-xl border-2 ${t==="dark"?"border-red-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-red-200 bg-gradient-to-br from-white to-red-50/20"} relative overflow-hidden`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`inline-flex p-4 rounded-2xl mb-4 ${t==="dark"?"bg-red-500/20":"bg-red-100"}`,children:i.jsx(ry,{className:`w-12 h-12 ${t==="dark"?"text-red-400":"text-red-600"}`})}),i.jsx("h2",{className:`text-2xl font-bold mb-2 ${r}`,children:" "}),i.jsx("p",{className:n,children:'    .     ""   .'})]})})})},Z3=()=>{const{theme:t}=Ue(),{user:e,logout:r}=Nt(),{isAdmin:n,deactivateAdmin:s}=Yt(),a=ll(),[o,l]=P.useState(!1),[u,d]=P.useState(!1),[h,g]=P.useState([]),[m,b]=P.useState(null),[k,v]=P.useState(null),[C,E]=P.useState(!0),y=t==="dark"?"text-white":"text-gray-900",N=t==="dark"?"bg-gray-800":"bg-white",R=t==="dark"?"border-gray-600":"border-gray-300";P.useEffect(()=>{(e||n)&&L()},[e,n]);const L=async()=>{if(!(!e&&!n)){E(!0);try{const A=(e==null?void 0:e.id)||"admin",x=await A2({assignedTo:A});if(g(x),e){const q=_l(),U=oe(q.start,"yyyy-MM-dd"),B=oe(q.end,"yyyy-MM-dd"),W=U2(30),F=oe(W.start,"yyyy-MM-dd"),V=oe(W.end,"yyyy-MM-dd"),D=W.start.toISOString(),H=W.end.toISOString(),te=(await tl(A,U,B)).reduce((je,Ge)=>je+Ge.amount,0),ue=await tl(A,F,V),le=ue.reduce((je,Ge)=>je+Ge.amount,0),fe=ue.reduce((je,Ge)=>je+Ge.poolAmount,0),X=(await En(A)).filter(je=>{const Ge=je.date,ga=je.endDate||je.date;return Ge<=V&&ga>=F}),G=X.filter(je=>je.type==="dayoff").reduce((je,Ge)=>je+Xa(Ge.date,Ge.endDate,F,V),0),K=X.filter(je=>je.type==="sick").reduce((je,Ge)=>je+Xa(Ge.date,Ge.endDate,F,V),0),ke=X.filter(je=>je.type==="vacation").reduce((je,Ge)=>je+Xa(Ge.date,Ge.endDate,F,V),0),Ee=(await Mn(A)).filter(je=>je.date>=U&&je.date<=B).reduce((je,Ge)=>je+fd(Ge.slots),0),Ve=await I2(A,U,B),Ne=(await T2(A))[0]||{userId:A,earnings:0,messages:0,initiatives:0,signals:0,profitableSignals:0,referrals:0,daysOff:0,sickDays:0,vacationDays:0,poolAmount:0,rating:0,lastUpdated:new Date().toISOString()},Xt=(await C2(void 0,D,H)).filter(je=>je.ownerId===A).length,it={userId:A,earnings:le,messages:Ne.messages||0,initiatives:Ne.initiatives||0,signals:Ne.signals||0,profitableSignals:Ne.profitableSignals||0,referrals:Xt,daysOff:G,sickDays:K,vacationDays:ke,poolAmount:fe,lastUpdated:new Date().toISOString()},pt=W2(it,Ee,te,Ve),Et=H2(it,Ee,te,Ve);b({...it,rating:pt}),v(Et)}}catch(A){console.error("Error loading profile data:",A)}finally{E(!1)}}},M=()=>{n&&s(),r(),a("/login")},I=()=>{e!=null&&e.password&&(navigator.clipboard.writeText(e.password),d(!0),setTimeout(()=>d(!1),2e3))},_=e||(n?{name:"",login:"admin",password:"admin"}:null),w=h.filter(A=>A.status==="pending").length,j=h.filter(A=>A.status==="in_progress").length,S=h.filter(A=>A.status==="completed").length;return _?i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${N} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-yellow-500/10 to-orange-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white`,children:i.jsx(li,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${y} flex items-center gap-2`,children:[" ",i.jsx(xr,{className:`w-5 h-5 sm:w-6 sm:h-6 ${t==="dark"?"text-yellow-400":"text-yellow-600"}`})]}),i.jsx("p",{className:`text-sm sm:text-base ${t==="dark"?"text-gray-300":"text-gray-600"} mt-1`,children:"   "})]})]}),n&&i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-purple-600 text-white rounded-lg",children:[i.jsx(en,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:""})]})]})})]}),C?i.jsx("div",{className:`${N} rounded-xl p-8 text-center ${y}`,children:i.jsx("div",{className:"animate-pulse",children:"..."})}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[i.jsxs("div",{className:`${N} rounded-xl border-2 ${R} p-4 sm:p-6 shadow-lg`,children:[i.jsxs("h2",{className:`text-xl font-bold ${y} mb-4 flex items-center gap-2`,children:[i.jsx(li,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-600"} block mb-1`,children:""}),i.jsx("div",{className:`px-4 py-2.5 rounded-lg border ${R} ${t==="dark"?"bg-gray-700":"bg-gray-50"} ${y}`,children:_.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-600"} block mb-1`,children:""}),i.jsx("div",{className:`px-4 py-2.5 rounded-lg border ${R} ${t==="dark"?"bg-gray-700":"bg-gray-50"} ${y}`,children:_.login})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-600"} block mb-1`,children:""}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`flex-1 px-4 py-2.5 rounded-lg border ${R} ${t==="dark"?"bg-gray-700":"bg-gray-50"} ${y} font-mono`,children:o?_.password:"".repeat(_.password.length)}),i.jsx("button",{onClick:()=>l(!o),className:`p-2.5 rounded-lg border ${R} ${t==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} transition-colors`,children:o?i.jsx(Ij,{className:"w-5 h-5"}):i.jsx(cw,{className:"w-5 h-5"})}),i.jsx("button",{onClick:I,className:`p-2.5 rounded-lg border ${R} ${u?"bg-green-500 text-white":t==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} transition-colors`,title:" ",children:u?i.jsx(zo,{className:"w-5 h-5"}):i.jsx(lw,{className:"w-5 h-5"})})]})]})]})]}),m&&k&&i.jsxs("div",{className:`${N} rounded-xl border-2 ${R} p-4 sm:p-6 shadow-lg lg:col-span-2`,children:[i.jsxs("h2",{className:`text-xl font-bold ${y} mb-6 flex items-center gap-2`,children:[i.jsx(ca,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`p-6 sm:p-8 rounded-xl border-2 ${m.rating>=70?t==="dark"?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/50":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":m.rating>=50?t==="dark"?"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border-yellow-500/50":"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200":t==="dark"?"bg-gradient-to-br from-blue-500/20 to-indigo-500/20 border-blue-500/50":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full blur-2xl -mr-16 -mt-16"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:`text-5xl sm:text-6xl md:text-7xl font-extrabold mb-2 ${m.rating>=70?t==="dark"?"text-green-400":"text-green-700":m.rating>=50?t==="dark"?"text-yellow-400":"text-yellow-700":t==="dark"?"text-blue-400":"text-blue-700"}`,children:[m.rating.toFixed(1),"%"]}),i.jsx("div",{className:`text-lg sm:text-xl font-semibold ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:" "}),i.jsx("div",{className:`text-sm mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:m.rating>=70?" ! ":m.rating>=50?" ! ":"    "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${y}`,children:[k.daysOffPoints.toFixed(1),"%"]}),i.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.daysOff," "]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"}`,children:m.daysOff===0||m.daysOff<=2?" 0-2  = 10%":"  2  = 0%"})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${y}`,children:[k.sickDaysPoints.toFixed(1),"%"]}),i.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.sickDays," "]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"}`,children:m.sickDays<=7?" 7  = 10%":"  7  = 0%"})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:""}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${y}`,children:[k.vacationDaysPoints.toFixed(1),"%"]}),i.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.vacationDays," "]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-gray-600 text-gray-400":"border-gray-300 text-gray-600"}`,children:m.vacationDays<=7?" 7  = 10%":"  7  = 0%"})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-blue-300":"text-blue-700"}`,children:" "}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-blue-400":"text-blue-700"}`,children:[k.weeklyHoursPoints.toFixed(1),"%"]}),i.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-blue-400/70":"text-blue-600"}`,children:[k.weeklyHours.toFixed(1)," /"]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-blue-500/30 text-blue-300":"border-blue-200 text-blue-600"}`,children:k.weeklyHours>=30?" 30  = 25%":k.weeklyHours>=20?" 20  = 15%":" <20  = 0%"})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-green-300":"text-green-700"}`,children:""}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-green-400":"text-green-700"}`,children:[k.weeklyEarningsPoints.toFixed(1),"%"]}),i.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-green-400/70":"text-green-600"}`,children:[k.weeklyEarnings.toFixed(0)," /"]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-green-500/30 text-green-300":"border-green-200 text-green-600"}`,children:k.weeklyEarnings>=6e3?" 6000 = 30%":k.weeklyEarnings>=3e3?" 3000 = 15%":" <3000 = 0%"})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-purple-300":"text-purple-700"}`,children:""}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-purple-400":"text-purple-700"}`,children:[k.referralsPoints.toFixed(1),"%"]}),i.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-purple-400/70":"text-purple-600"}`,children:[m.referrals," "]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-purple-500/30 text-purple-300":"border-purple-200 text-purple-600"}`,children:k.referralsPoints>=30?"  6  = 30%":` ${m.referrals}  5% = ${k.referralsPoints.toFixed(0)}%`})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-orange-500/10 border-orange-500/30":"bg-orange-50 border-orange-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-orange-300":"text-orange-700"}`,children:""}),i.jsx("span",{className:"text-lg",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${t==="dark"?"text-orange-400":"text-orange-700"}`,children:[k.weeklyMessagesPoints.toFixed(1),"%"]}),i.jsxs("div",{className:`text-xs mt-1 ${t==="dark"?"text-orange-400/70":"text-orange-600"}`,children:[k.weeklyMessages," /"]}),i.jsx("div",{className:`text-xs mt-2 pt-2 border-t ${t==="dark"?"border-orange-500/30 text-orange-300":"border-orange-200 text-orange-600"}`,children:k.weeklyMessages>50?" >50  = 15%":" 50  = 0%"})]})]}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[i.jsxs("h3",{className:`text-sm font-bold ${y} mb-3 flex items-center gap-2`,children:[i.jsx(yr,{className:"w-4 h-4"}),"  ?"]}),i.jsxs("div",{className:`text-xs space-y-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:" :"}),i.jsx("span",{children:"0-2    = 10%,  2  = 0%"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:" :"}),i.jsx("span",{children:"7    = 10%,  7  = 0%"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:" :"}),i.jsx("span",{children:"7    = 10%,  7  = 0%"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:"  :"}),i.jsx("span",{children:"30 / = 25%, 20 / = 15%,  20 / = 0%"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:" :"}),i.jsx("span",{children:"6000/ = 30%, 3000/ = 15%,  3000/ = 0%"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:" :"}),i.jsx("span",{children:"5%  ,  30% (6 )"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold",children:" :"}),i.jsx("span",{children:" 50 / = 15%,  = 0%"})]}),i.jsx("div",{className:`mt-3 pt-3 border-t ${t==="dark"?"border-gray-600":"border-gray-300"}`,children:i.jsx("span",{className:"font-semibold",children:" : 100%"})})]})]})]})]}),i.jsxs("div",{className:`${N} rounded-xl border-2 ${R} p-4 sm:p-6 shadow-lg`,children:[i.jsxs("h2",{className:`text-xl font-bold ${y} mb-4 flex items-center gap-2`,children:[i.jsx(ii,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:[i.jsx("div",{className:`text-xs font-medium mb-1 ${t==="dark"?"text-yellow-400":"text-yellow-700"}`,children:" "}),i.jsx("div",{className:`text-2xl font-bold ${y}`,children:w})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"}`,children:[i.jsx("div",{className:`text-xs font-medium mb-1 ${t==="dark"?"text-blue-400":"text-blue-700"}`,children:" "}),i.jsx("div",{className:`text-2xl font-bold ${y}`,children:j})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200"}`,children:[i.jsx("div",{className:`text-xs font-medium mb-1 ${t==="dark"?"text-green-400":"text-green-700"}`,children:""}),i.jsx("div",{className:`text-2xl font-bold ${y}`,children:S})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"bg-gray-500/10 border-gray-500/30":"bg-gray-50 border-gray-200"}`,children:[i.jsx("div",{className:`text-xs font-medium mb-1 ${t==="dark"?"text-gray-400":"text-gray-700"}`,children:""}),i.jsx("div",{className:`text-2xl font-bold ${y}`,children:h.length})]})]}),i.jsx("button",{onClick:()=>a("/tasks"),className:`w-full mt-4 px-4 py-2 rounded-lg font-medium transition-colors ${t==="dark"?"bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/50":"bg-green-50 hover:bg-green-100 text-green-700 border border-green-200"}`,children:"  "})]}),i.jsxs("div",{className:`lg:col-span-2 ${N} rounded-xl border-2 ${R} p-4 sm:p-6 shadow-lg`,children:[i.jsxs("h2",{className:`text-xl font-bold ${y} mb-4 flex items-center gap-2`,children:[i.jsx(yr,{className:"w-5 h-5"}),"  ApeVault"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"border-cyan-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-cyan-200 bg-gradient-to-br from-white to-cyan-50/20"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-gradient-to-br from-cyan-600 to-blue-600":"bg-gradient-to-br from-cyan-500 to-blue-500"} text-white flex-shrink-0`,children:i.jsx(yr,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-lg font-bold mb-2 ${y}`,children:"  ApeVault?"}),i.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"ApeVault       .   ,     ,          ."})]})]})}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"",value:"50+",icon:Ar},{label:"",value:"100+",icon:yo},{label:"  ",value:"10+",icon:Wo},{label:"",value:"3",icon:lu}].map(A=>i.jsxs("div",{className:`p-3 rounded-lg border ${t==="dark"?"border-cyan-500/20 bg-white/5":"border-cyan-200 bg-white"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(A.icon,{className:`w-4 h-4 ${t==="dark"?"text-cyan-400":"text-cyan-600"}`}),i.jsx("p",{className:`text-xs uppercase tracking-wide ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:A.label})]}),i.jsx("p",{className:`text-xl font-bold ${y}`,children:A.value})]},A.label))}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white to-green-50/20"}`,children:[i.jsx("div",{className:`p-2 rounded-lg mb-2 inline-block ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white`,children:i.jsx(Ar,{className:"w-4 h-4"})}),i.jsx("h4",{className:`text-sm font-bold mb-1 ${y}`,children:" "}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-purple-200 bg-gradient-to-br from-white to-purple-50/20"}`,children:[i.jsx("div",{className:`p-2 rounded-lg mb-2 inline-block ${t==="dark"?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-purple-500 to-pink-500"} text-white`,children:i.jsx(Wo,{className:"w-4 h-4"})}),i.jsx("h4",{className:`text-sm font-bold mb-1 ${y}`,children:""}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"     "})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${t==="dark"?"border-yellow-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-yellow-200 bg-gradient-to-br from-white to-yellow-50/20"}`,children:[i.jsx("div",{className:`p-2 rounded-lg mb-2 inline-block ${t==="dark"?"bg-gradient-to-br from-yellow-600 to-orange-600":"bg-gradient-to-br from-yellow-500 to-orange-500"} text-white`,children:i.jsx(lu,{className:"w-4 h-4"})}),i.jsx("h4",{className:`text-sm font-bold mb-1 ${y}`,children:""}),i.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"     "})]})]}),i.jsx("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"border-indigo-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-indigo-200 bg-gradient-to-br from-white to-indigo-50/20"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-gradient-to-br from-indigo-600 to-purple-600":"bg-gradient-to-br from-indigo-500 to-purple-500"} text-white flex-shrink-0`,children:i.jsx(yo,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-2 ${y}`,children:" "}),i.jsx("p",{className:`text-xs mb-3 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"      "}),i.jsxs("a",{href:"https://telegra.ph/Reglament-provedeniya-torgovyh-sessij-pravila-soobshchestva-ApeVault-dlya-trejderov-i-kollerov-11-20",target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-all ${t==="dark"?"bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/50":"bg-green-50 hover:bg-green-100 text-green-700 border border-green-200"}`,children:[i.jsx(yo,{className:"w-3 h-3"}),"  "]})]})]})}),i.jsx("div",{className:`p-4 rounded-lg border-2 ${t==="dark"?"border-pink-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-pink-200 bg-gradient-to-br from-white to-pink-50/20"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${t==="dark"?"bg-gradient-to-br from-pink-600 to-rose-600":"bg-gradient-to-br from-pink-500 to-rose-500"} text-white flex-shrink-0`,children:i.jsx(dw,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${y}`,children:""}),i.jsxs("p",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["      :"," ",i.jsx("span",{className:`font-bold ${y}`,children:"@artyommedoed"})]})]})]})})]})]}),i.jsx("div",{className:`lg:col-span-2 ${N} rounded-xl border-2 ${R} p-4 sm:p-6 shadow-lg`,children:i.jsxs("button",{onClick:M,className:`w-full px-6 py-3 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${t==="dark"?"bg-red-500/20 hover:bg-red-500/30 text-red-400 border-2 border-red-500/50 hover:border-red-500":"bg-red-50 hover:bg-red-100 text-red-700 border-2 border-red-200 hover:border-red-300"}`,children:[i.jsx(Dj,{className:"w-5 h-5"}),"  "]})})]})]})}):i.jsx(Wr,{children:i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:y,children:" "})})})},eD=()=>{const{theme:t}=Ue(),e=t==="dark"?"text-white":"text-gray-900",r=t==="dark"?"text-gray-400":"text-gray-600",n=t==="dark"?"bg-gray-800":"bg-white";return i.jsx(Wr,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-blue-500/30 bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900":"border-blue-200 bg-gradient-to-br from-white via-blue-50/30 to-white"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl -mr-16 sm:-mr-32 -mt-16 sm:-mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-gradient-to-tr from-green-500/10 to-yellow-500/10 rounded-full blur-2xl -ml-12 sm:-ml-24 -mb-12 sm:-mb-24"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg flex-shrink-0 ${t==="dark"?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-blue-500 to-purple-500"} text-white transform transition-transform active:scale-95 sm:hover:scale-110`,children:i.jsx(yr,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("h1",{className:`text-2xl sm:text-3xl md:text-4xl font-extrabold ${e} flex items-center gap-2 sm:gap-3`,children:[i.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-transparent bg-clip-text",children:"  ApeVault"}),i.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:""})]})})]}),i.jsx("p",{className:`text-sm sm:text-base font-medium ${r}`,children:"    "})]})]}),i.jsxs("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-cyan-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-cyan-200 bg-gradient-to-br from-white to-cyan-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),i.jsxs("div",{className:"relative z-10 space-y-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6 items-start",children:[i.jsx("div",{className:`p-3 sm:p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-cyan-600 to-blue-600":"bg-gradient-to-br from-cyan-500 to-blue-500"} text-white flex-shrink-0`,children:i.jsx(yr,{className:"w-5 h-5 sm:w-7 sm:h-7"})}),i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsx("h2",{className:`text-2xl sm:text-3xl font-extrabold ${e}`,children:i.jsx("span",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-transparent bg-clip-text",children:"  ApeVault?"})}),i.jsx("p",{className:`text-sm sm:text-base leading-relaxed ${r}`,children:"ApeVault       .   ,     ,          ."}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[" "," "," "].map(s=>i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t==="dark"?"bg-cyan-500/10 text-cyan-200 border border-cyan-500/30":"bg-cyan-50 text-cyan-700 border border-cyan-200"}`,children:s},s))})]})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"",value:"50+"},{label:"",value:"100+"},{label:"  ",value:"10+"},{label:" ",value:"3"}].map(s=>i.jsxs("div",{className:`p-3 rounded-xl border ${t==="dark"?"border-cyan-500/20 bg-white/5 text-white":"border-cyan-200 bg-white text-gray-900"}`,children:[i.jsx("p",{className:"text-xs uppercase tracking-wide opacity-70",children:s.label}),i.jsx("p",{className:"text-xl font-bold",children:s.value})]},s.label))})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-xl border-2 ${t==="dark"?"border-green-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-green-200 bg-gradient-to-br from-white to-green-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-full blur-xl -mr-16 -mt-16"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:`p-3 rounded-xl shadow-lg mb-4 inline-block ${t==="dark"?"bg-gradient-to-br from-green-600 to-emerald-600":"bg-gradient-to-br from-green-500 to-emerald-500"} text-white`,children:i.jsx(Ar,{className:"w-6 h-6"})}),i.jsx("h3",{className:`text-xl font-extrabold mb-3 ${e}`,children:" "}),i.jsx("p",{className:`${r} leading-relaxed`,children:"   ,         ."})]})]}),i.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-xl border-2 ${t==="dark"?"border-purple-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-purple-200 bg-gradient-to-br from-white to-purple-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full blur-xl -mr-16 -mt-16"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:`p-3 rounded-xl shadow-lg mb-4 inline-block ${t==="dark"?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-purple-500 to-pink-500"} text-white`,children:i.jsx(Wo,{className:"w-6 h-6"})}),i.jsx("h3",{className:`text-xl font-extrabold mb-3 ${e}`,children:""}),i.jsx("p",{className:`${r} leading-relaxed`,children:"  ,        ."})]})]}),i.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-xl border-2 ${t==="dark"?"border-yellow-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-yellow-200 bg-gradient-to-br from-white to-yellow-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-full blur-xl -mr-16 -mt-16"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:`p-3 rounded-xl shadow-lg mb-4 inline-block ${t==="dark"?"bg-gradient-to-br from-yellow-600 to-orange-600":"bg-gradient-to-br from-yellow-500 to-orange-500"} text-white`,children:i.jsx(lu,{className:"w-6 h-6"})}),i.jsx("h3",{className:`text-xl font-extrabold mb-3 ${e}`,children:"  "}),i.jsx("p",{className:`${r} leading-relaxed`,children:" ,           ."})]})]})]}),i.jsxs("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-indigo-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-indigo-200 bg-gradient-to-br from-white to-indigo-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-indigo-600 to-purple-600":"bg-gradient-to-br from-indigo-500 to-purple-500"} text-white flex-shrink-0`,children:i.jsx(yo,{className:"w-8 h-8"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:`text-2xl font-extrabold mb-2 ${e} flex items-center gap-2`,children:i.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:" "})}),i.jsx("p",{className:`${r} mb-6 font-medium`,children:"              ."}),i.jsxs("a",{href:"https://telegra.ph/Reglament-provedeniya-torgovyh-sessij-pravila-soobshchestva-ApeVault-dlya-trejderov-i-kollerov-11-20",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-200 font-semibold shadow-lg hover:shadow-xl hover:scale-105 transform",children:[i.jsx(yo,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]})})]}),i.jsxs("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${t==="dark"?"border-pink-500/30 bg-gradient-to-br from-gray-800 to-gray-900":"border-pink-200 bg-gradient-to-br from-white to-pink-50/20"} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-pink-500/10 to-rose-500/10 rounded-full blur-2xl -mr-20 -mt-20"}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${t==="dark"?"bg-gradient-to-br from-pink-600 to-rose-600":"bg-gradient-to-br from-pink-500 to-rose-500"} text-white flex-shrink-0`,children:i.jsx(dw,{className:"w-8 h-8"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:`text-2xl font-extrabold mb-2 ${e} flex items-center gap-2`,children:i.jsx("span",{className:"bg-gradient-to-r from-pink-600 to-rose-600 text-transparent bg-clip-text",children:""})}),i.jsxs("p",{className:`${r} font-medium`,children:["        :"," ",i.jsx("span",{className:`font-extrabold ${e}`,children:"@artyommedoed"})]})]})]})})]})]})})},pn=({children:t})=>{const{isAuthenticated:e}=Nt(),{isAdmin:r}=Yt();return!e&&!r?i.jsx(gf,{to:"/login",replace:!0}):i.jsx(i.Fragment,{children:t})};function tD(){const{isAuthenticated:t}=Nt(),{isAdmin:e}=Yt(),{theme:r}=Ue();return P.useEffect(()=>{document.body.classList.toggle("dark",r==="dark")},[r]),P.useEffect(()=>{nP().catch(n=>console.error("Cleanup failed",n))},[]),i.jsx(BE,{children:i.jsxs(DE,{children:[i.jsx(Er,{path:"/login",element:!t&&!e?i.jsx(zj,{}):i.jsx(gf,{to:"/management",replace:!0})}),i.jsx(Er,{path:"/call",element:i.jsx(pn,{children:i.jsx(bP,{})})}),i.jsx(Er,{path:"/management",element:i.jsx(pn,{children:i.jsx(R3,{})})}),i.jsx(Er,{path:"/earnings",element:i.jsx(pn,{children:i.jsx(O3,{})})}),i.jsx(Er,{path:"/rating",element:i.jsx(pn,{children:i.jsx(U3,{})})}),i.jsx(Er,{path:"/tasks",element:i.jsx(pn,{children:i.jsx(Y3,{})})}),i.jsx(Er,{path:"/about",element:i.jsx(pn,{children:i.jsx(eD,{})})}),i.jsx(Er,{path:"/faq",element:i.jsx(pn,{children:i.jsx(X3,{})})}),i.jsx(Er,{path:"/admin",element:i.jsx(pn,{children:i.jsx(J3,{})})}),i.jsx(Er,{path:"/profile",element:i.jsx(pn,{children:i.jsx(Z3,{})})}),i.jsx(Er,{path:"/",element:i.jsx(gf,{to:t||e?"/management":"/login",replace:!0})})]})})}bh.createRoot(document.getElementById("root")).render(i.jsx(Qf.StrictMode,{children:i.jsx(tD,{})}));
